"use strict";var He=Object.defineProperty,Ye=Object.defineProperties,$e=Object.getOwnPropertyDescriptors,Pe=Object.getOwnPropertySymbols,Qe=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable,Ee=(Pt,mt,u)=>mt in Pt?He(Pt,mt,{enumerable:!0,configurable:!0,writable:!0,value:u}):Pt[mt]=u,qt=(Pt,mt)=>{for(var u in mt||(mt={}))Qe.call(mt,u)&&Ee(Pt,u,mt[u]);if(Pe)for(var u of Pe(mt))qe.call(mt,u)&&Ee(Pt,u,mt[u]);return Pt},te=(Pt,mt)=>Ye(Pt,$e(mt));(self.webpackChunksite=self.webpackChunksite||[]).push([[1619,3100],{83100:(Pt,mt,u)=>{function Y(q){return q=q||globalThis.location.hostname,T.some(C=>{var vt;return null!=(null==(vt=q)?void 0:vt.match(C))})}function nt(q,C){return q&&(C=C||globalThis.location.hostname)?null!=C.match(O)||null!=C.match(N)?q.replace("static.arcgis.com","staticdev.arcgis.com"):null!=C.match(Z)||null!=C.match(rt)?q.replace("static.arcgis.com","staticqa.arcgis.com"):q:q}u.d(mt,{pJ:()=>nt,XO:()=>Y});const O=/^devext.arcgis.com$/,Z=/^qaext.arcgis.com$/,N=/^[\w-]*\.mapsdevext.arcgis.com$/,rt=/^[\w-]*\.mapsqa.arcgis.com$/,T=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,O,Z,/^jsapps.esri.com$/,N,rt]},25293:(Pt,mt,u)=>{u.d(mt,{i:()=>lt});var Y=u(72283),nt=u(9631);class lt{static getPlacement(Z,N,rt){const T=(0,nt.W)(N);if(!T)return null;const q=(0,Y.GP)(Z);return T.execute(q,N,rt)}}},55130:(Pt,mt,u)=>{u.d(mt,{_:()=>ut}),u(17083),u(9598);var lt=u(58098),N=(u(8480),u(79527),u(39351)),rt=u(99666),T=u(39406),q=u(64288);const C=new Map;C.set(T.LW.MARKER,{multiplier:1,indicesPerRecord:6,verticesPerRecord:4}),C.set(T.LW.LINE,{multiplier:1,indicesPerRecord:24,verticesPerRecord:8}),C.set(T.LW.FILL,{multiplier:1,indicesPerRecord:10,verticesPerRecord:10}),C.set(T.LW.TEXT,{multiplier:8,indicesPerRecord:6,verticesPerRecord:4}),C.set(T.LW.LABEL,{multiplier:8,indicesPerRecord:6,verticesPerRecord:4});var y=u(75734);class d{constructor(v,U,V){this._start={index:0,vertex:0};const it=function J(pt,v,U){const{indicesPerRecord:V,multiplier:it,verticesPerRecord:at}=C.get(pt);return{recordBytes:U*N.XJ*Uint32Array.BYTES_PER_ELEMENT,indexBytes:it*V*U*Uint32Array.BYTES_PER_ELEMENT,vertexBytes:it*at*U*v}}(v,U,V),at=U/4;this.geometryType=v,this._records=new y.Z(Int32Array,it.recordBytes),this._indices=new y.Z(Uint32Array,it.indexBytes),this._vertices=new y.Z(Uint32Array,it.vertexBytes),this._metrics=new y.Z(Float32Array,0),this._strideInt=at}serialize(v){const U=this._records.buffer(),V=this._indices.buffer(),it=this._vertices.buffer(),at=this._metrics.length?this._metrics.buffer():null,Mt=4*this._strideInt;return v.push(U,V,it),{stride:Mt,records:U,indices:V,vertices:it,metrics:at}}get strideInt(){return this._strideInt}get recordCount(){return this._records.length/N.XJ}get vertexCount(){return this._vertices.length/this._strideInt}get indexCount(){return this._indices.length}get indexWriter(){return this._indices}get vertexWriter(){return this._vertices}get metricWriter(){return this._metrics}vertexEnsureSize(v){this._vertices.ensureSize(v)}indexEnsureSize(v){this._indices.ensureSize(v)}recordStart(){this._start.index=this._indices.length,this._start.vertex=this._vertices.length}recordEnd(v,U,V,it,at,Mt,yt,Lt){this._records.push(v),this._records.push(U),this._records.push(V),this._records.push(it),this._records.push(at),this._records.push(Mt),this._records.push(yt),this._records.writeF32(Lt)}writeIndex(v){this._indices.push(v)}writeVertex(v){this._vertices.push(v)}writeVertexF32(v){this._vertices.writeF32(v)}copyLastFrom(v,U,V){const it=v._records.length-N.XJ,at=v._records.getValue(it),Mt=v._records.getValue(it+1),yt=v._records.getValue(it+2),Lt=v._records.getValue(it+4),_t=v._records.getValue(it+6),St=v._records.getValue(it+7),Ft=this._vertices.length,Rt=(v._start.vertex-this._vertices.length)/this._strideInt,Zt=this._indices.length,jt=this.vertexCount;for(let D=v._start.index;D!==v._indices.length;D++){const h=v._indices.getValue(D);this._indices.push(h-Rt)}for(let D=v._start.vertex;D!==v._vertices.length;D++){const h=v._vertices.getValue(D);this._vertices.push(h)}for(let D=Ft;D<=this._vertices.length;D+=this._strideInt)this._vertices.i1616Add(D,U,V);this._records.push(at),this._records.push(Mt),this._records.push(yt),this._records.push(Zt),this._records.push(Lt),this._records.push(jt),this._records.push(_t),this._records.push(St)}}var f=u(55376);function F(pt){switch(pt){case 1:case 8:case 32:return-1;case 2:case 64:return 0;case 4:case 16:case 128:return 1}}function L(pt){switch(pt){case 1:case 2:case 4:return-1;case 8:case 16:return 0;case 32:case 64:case 128:return 1}}class ut{constructor(v,U,V,it,at){this._hasAggregate=!1,this.hasRecords=!1,this._data={self:new Map,neighbors:new Array},this._current={geometryType:0,writer:null,overlaps:0,start:0,insertAfter:0,sortKey:0,id:0,materialKey:0,indexStart:0,vertStart:0,isDotDensity:!1,bufferingEnabled:!1,metricBoxLenPointer:0},this.hint=U,this.tileKey=v,this._hasAggregate=it,this._pixelBufferEnabled=at,this._strideOptions=V}get hasAggregates(){return this._hasAggregate}get hasPixelBufferEnabled(){return this._pixelBufferEnabled}serialize(v){const U=[];return U.push(this._serializeTileVertexData(this.tileKey,this.tileKey,this._data.self)),this._data.neighbors.forEach((V,it)=>{const at=1<<it,Mt=F(at),yt=L(at),Lt=(0,f.M)(new lt.Z(this.tileKey),Mt,yt,v),_t=this._serializeTileVertexData(this.tileKey,Lt.id,V.vertexData);_t.message.bufferIds=V.displayIds,U.push(_t)}),U}_serializeTileVertexData(v,U,V){var it,at,Mt,yt,Lt;const _t=new Array;return{message:{tileKeyOrigin:v,tileKey:U,data:{[T.LW.MARKER]:null==(it=V.get(T.LW.MARKER))?void 0:it.serialize(_t),[T.LW.FILL]:null==(at=V.get(T.LW.FILL))?void 0:at.serialize(_t),[T.LW.LINE]:null==(Mt=V.get(T.LW.LINE))?void 0:Mt.serialize(_t),[T.LW.TEXT]:null==(yt=V.get(T.LW.TEXT))?void 0:yt.serialize(_t),[T.LW.LABEL]:null==(Lt=V.get(T.LW.LABEL))?void 0:Lt.serialize(_t)}},transferList:_t}}featureStart(v,U){this._current.insertAfter=v,this._current.sortKey=U}featureEnd(){}recordStart(v,U,V,it){this._current.writer=this._getVertexWriter(V),this._current.overlaps=0,this._current.indexStart=this._current.writer.indexCount,this._current.vertStart=this._current.writer.vertexCount,this._current.bufferingEnabled=it,this._current.id=v,this._current.materialKey=U,this._current.geometryType=V,this._current.isDotDensity=!1,this._current.writer.recordStart()}recordCount(){return this._current.writer.recordCount}vertexCount(){return this._current.writer.vertexCount}indexCount(){return this._current.writer.indexCount}vertexEnsureSize(v){this._current.writer.vertexEnsureSize(v)}indexEnsureSize(v){this._current.writer.indexEnsureSize(v)}vertexBounds(v,U,V,it){this._current.bufferingEnabled&&this._addOverlap(v,U,V,it)}vertexWrite(v){this._current.writer.writeVertex(v)}vertexWriteF32(v){this._current.writer.writeVertexF32(v)}vertexEnd(){}vertexWriter(){return this._current.writer.vertexWriter}indexWrite(v){this._current.writer.writeIndex(v)}indexWriter(){return this._current.writer.indexWriter}metricWriter(){return this._current.writer.metricWriter}metricStart(v,U,V,it,at,Mt,yt,Lt){this._current.writer=this._getVertexWriter(T.LW.LABEL);const _t=this._current.writer.metricWriter;_t.push((0,rt.jL)(v)),_t.push(U),_t.push(V),_t.push(it),_t.push(at),_t.push(Mt),_t.push(yt),_t.push(Lt),_t.push(255),this._current.metricBoxLenPointer=_t.push(0)}metricEnd(){const v=this._current.writer.metricWriter;0===v.getValue(this._current.metricBoxLenPointer)&&v.seek(v.length-10)}metricBoxWrite(v,U,V,it){const at=this._current.writer.metricWriter;at.incr(this._current.metricBoxLenPointer),at.push(0),at.push(0),at.push(v),at.push(U),at.push(V),at.push(it)}recordEnd(){const v=this._current.indexStart,U=this._current.writer.indexCount;if(v===U)return!1;this.hasRecords=!0;const it=this._current.vertStart;if(this._current.writer.recordEnd(this._current.id,this._current.materialKey,this._current.insertAfter,v,U-v,it,this._current.writer.vertexCount-it,this._current.sortKey),!this._pixelBufferEnabled||this._hasAggregate||0===this._current.overlaps||this._current.geometryType===T.LW.LABEL)return!0;const Mt=this._current.writer;for(let yt=0;yt<8;yt++){const Lt=1<<yt;if(this._current.overlaps&Lt){this._data.neighbors[yt]||(this._data.neighbors[yt]={vertexData:new Map,displayIds:new Set});const _t=this._data.neighbors[yt],St=this._current.geometryType;if(!_t.vertexData.has(St)){const D=(0,q.$_)(St,this._strideOptions).geometry,h=new d(St,D,N.Ip);_t.vertexData.set(St,h)}const Ft=_t.vertexData.get(this._current.geometryType),Rt=8,Zt=512*-F(Lt)*Rt,jt=512*-L(Lt)*Rt;Ft.copyLastFrom(Mt,Zt,jt),_t.displayIds.add(this._current.id)}}return!0}_addOverlap(v,U,V,it){this._current.overlaps|=255^((v<0+V?148:v>=N.I_-V?41:189)|(U<0+it?224:U>=N.I_-it?7:231))}_getVertexWriter(v){if(!this._data.self.has(v)){const U=this._data.self,V=(0,q.$_)(v,this._strideOptions).geometry;U.set(v,new d(v,V,this.hint.records))}return this._data.self.get(v)}}},246:(Pt,mt,u)=>{u.d(mt,{j:()=>jt});var Y=u(15861),lt=(u(8314),u(62208)),O=u(10699),Z=u(58774),N=u(99666),rt=u(26584),T=u(63290),q=u(21286),C=u(23841),vt=u(61261),J=u(81295),y=u(39351),d=u(39406),f=u(5254),g=u(18716),K=u(44649),$=u(50114);function A(D){return D.length-1}function ht(D,h,p=1){const[x,E]=function X(D,h){return D[h+1]}(D,h);return Math.sqrt(x*x+E*E)*p}class M{constructor(h,p,x,E,w){this._segments=h,this._index=p,this._distance=x,this._xStart=E,this._yStart=w,this._done=!1}static create(h){return new M(h,0,0,h[0][0],h[0][1])}clone(){return new M(this._segments,this._index,this._distance,this.xStart,this.yStart)}equals(h){return this._index===h._index||h._index===this._index-1&&(0===this._distance||1===h._distance)||h._index===this._index+1&&(1===this._distance||0===h._distance)}leq(h){return this._index<h._index||this._index===h._index&&this._distance<=h._distance}geq(h){return this._index>h._index||this._index===h._index&&this._distance>=h._distance}get _segment(){return this._segments[this._index+1]}get angle(){const h=this.dy;let x=Math.acos((0*h+-1*-this.dx)/(1*this.length));return h>0&&(x=2*Math.PI-x),x}get xStart(){return this._xStart}get yStart(){return this._yStart}get x(){return this.xStart+this.distance*this.dx}get y(){return this.yStart+this.distance*this.dy}get dx(){return this._segment[0]}get dy(){return this._segment[1]}get xMidpoint(){return this.xStart+.5*this.dx}get yMidpoint(){return this.yStart+.5*this.dy}get xEnd(){return this.xStart+this.dx}get yEnd(){return this.yStart+this.dy}get length(){const{dx:h,dy:p}=this;return Math.sqrt(h*h+p*p)}get remainingLength(){return this.length*(1-this._distance)}get backwardLength(){return this.length*this._distance}get distance(){return this._distance}get done(){return this._done}hasPrev(){return this._index-1>=0}hasNext(){return this._index+1<A(this._segments)}next(){return this.hasNext()?(this._xStart+=this.dx,this._yStart+=this.dy,this._distance=0,this._index+=1,this):null}prev(){return this.hasPrev()?(this._index-=1,this._xStart-=this.dx,this._yStart-=this.dy,this._distance=1,this):(this._done=!0,null)}_seekBackwards(h,p){const x=this.backwardLength;if(h<=x)return this._distance=(x-h)/this.length,this;let E=this.backwardLength;for(;this.prev();){if(E+this.length>h)return this._seekBackwards(h-E);E+=this.length}return this._distance=0,p?this:null}seek(h,p=!1){if(h<0)return this._seekBackwards(Math.abs(h),p);if(h<=this.remainingLength)return this._distance=(this.backwardLength+h)/this.length,this;let x=this.remainingLength;for(;this.next();){if(x+this.length>h)return this.seek(h-x,p);x+=this.length}return this._distance=1,p?this:null}}function F(D,h,p,x=!0){const E=function tt(D){let h=0;for(let p=0;p<A(D);p++)h+=ht(D,p);return h}(D),w=M.create(D),B=E/2;if(!x)return w.seek(B),void p(w.clone(),0,B+0*h,E);const k=Math.max((E-h)/2,0),ct=Math.floor(k/h);w.seek(B-ct*h);for(let dt=-ct;dt<=ct;dt++)w.x<512&&w.x>=0&&w.y<512&&w.y>=0&&p(w.clone(),dt,B+dt*h,E),w.seek(h)}function z(D,h){if(h<=0)return;const x=D.length;if(x<3)return;const E=[];let w=0;E.push(0);for(let Q=1;Q<x;Q++)w+=(0,$.TK)(D[Q],D[Q-1]),E.push(w);h=Math.min(h,.2*w);const B=[];B.push(D[0][0]),B.push(D[0][1]);const k=D[x-1][0],ct=D[x-1][1],ft=(0,$.lu)([0,0],D[0],D[1]);(0,$.Fv)(ft),D[0][0]+=h*ft[0],D[0][1]+=h*ft[1],(0,$.lu)(ft,D[x-1],D[x-2]),(0,$.Fv)(ft),D[x-1][0]+=h*ft[0],D[x-1][1]+=h*ft[1];for(let Q=1;Q<x;Q++)E[Q]+=h;E[x-1]+=h;const dt=.5*h;for(let Q=1;Q<x-1;Q++){let Tt=0,bt=0,Gt=0;for(let gt=Q-1;gt>=0&&!(E[gt+1]<E[Q]-dt);gt--){const wt=dt+E[gt+1]-E[Q],Et=E[gt+1]-E[gt],Ct=E[Q]-E[gt]<dt?1:wt/Et;if(Math.abs(Ct)<1e-6)break;const Dt=Ct*Ct,It=Ct*wt-.5*Dt*Et,Kt=Ct*Et/h,Ot=D[gt+1],Nt=D[gt][0]-Ot[0],Ht=D[gt][1]-Ot[1];Tt+=Kt/It*(Ot[0]*Ct*wt+.5*Dt*(wt*Nt-Et*Ot[0])-Dt*Ct*Et*Nt/3),bt+=Kt/It*(Ot[1]*Ct*wt+.5*Dt*(wt*Ht-Et*Ot[1])-Dt*Ct*Et*Ht/3),Gt+=Kt}for(let gt=Q+1;gt<x&&!(E[gt-1]>E[Q]+dt);gt++){const wt=dt-E[gt-1]+E[Q],Et=E[gt]-E[gt-1],Ct=E[gt]-E[Q]<dt?1:wt/Et;if(Math.abs(Ct)<1e-6)break;const Dt=Ct*Ct,It=Ct*wt-.5*Dt*Et,Kt=Ct*Et/h,Ot=D[gt-1],Nt=D[gt][0]-Ot[0],Ht=D[gt][1]-Ot[1];Tt+=Kt/It*(Ot[0]*Ct*wt+.5*Dt*(wt*Nt-Et*Ot[0])-Dt*Ct*Et*Nt/3),bt+=Kt/It*(Ot[1]*Ct*wt+.5*Dt*(wt*Ht-Et*Ot[1])-Dt*Ct*Et*Ht/3),Gt+=Kt}B.push(Tt/Gt),B.push(bt/Gt)}B.push(k),B.push(ct);for(let Q=0,Tt=0;Q<x;Q++)D[Q][0]=B[Tt++],D[Q][1]=B[Tt++]}var ot=u(51919);const ut=T.Z.getLogger("esri.views.2d.engine.webgl.WGLLabelTemplate"),yt=function Mt(D){const h=new Map;return p=>(h.has(p)||h.set(p,D(p)),h.get(p))}(D=>{let h=0;if(0===D)return 1/0;for(;!(D%2);)h++,D/=2;return h}),Lt=D=>Math.floor(127*D+127),_t=D=>Math.floor(10*D),St=D=>Math.round(D*(254/360));class Ft extends ot.Z{constructor(h,p,x,E){var w,B,k;super(h,x.font.size,x.haloSize||0,x.font.size,x.color&&(0,J.aH)(x.color)||0,x.haloColor&&(0,J.aH)(x.haloColor)||0,x.horizontalAlignment,x.verticalAlignment,(0,K.N)(p.labelPlacement)?1:0,x.font.decoration,!1,x.angle||0,x.xoffset,x.yoffset,x.lineWidth,x.lineHeight,null,null,null,null,null),this._outLineLabelAngle=0,this._refPlacementPadding=0,this._refPlacementDirX=0,this._refPlacementDirY=0,this._refOffsetX=0,this._refOffsetY=0,this._zoomLevel=0,this.geometryType=d.LW.LABEL,this._allowOverrun=null!=(w=p.allowOverrun)&&w,this._repeatLabel=null==(B=p.repeatLabel)||B,this._labelPosition=null!=(k=p.labelPosition)?k:"curved";const ct=function it(D,h){const p=!!D.minScale&&h.scaleToZoom(D.minScale)||0;return(0,q.uZ)(p,0,25.5)}(p,E),ft=function at(D,h){const p=!!D.maxScale&&h.scaleToZoom(D.maxScale)||255;return(0,q.uZ)(p,0,25.5)}(p,E),dt=p.labelPlacement,[Q,Tt]=(0,vt.qv)(dt);this._xAlignD=Q,this._yAlignD=Tt,this._minZoom=ct,this._maxZoom=ft,this._refPlacementPadding=(0,C.F2)(x.haloSize)+y.Iw,this._repeatLabelDistance=p.repeatLabelDistance?(0,C.F2)(p.repeatLabelDistance):128;const bt=g.Gq.load(h);bt.sdf=!0,this._materialKey=bt.data}static fromLabelClass(h,p){if("esriServerLinePlacementCenterAlong"===h.labelPlacement){const x=h.symbol;x.xoffset=0,x.yoffset=0,x.angle=0,x.font.decoration="none"}return new Ft(h.materialKey,h,h.symbol,p)}get _shapedBox(){return(0,lt.Wg)(this._shapingInfo).bounds}setZoomLevel(h){this._zoomLevel=h}bindReferenceTemplate(h){let p=(0,vt.g)(this._xAlignD),x=(0,vt.tf)(this._yAlignD);if(this._refOffsetX=0,this._refOffsetY=0,(0,lt.Wi)(h))return void(this._refSymbolAndPlacementOffset=(0,f.Jz)(0,0,Lt(p),Lt(x)));if("circle"===h.boundsType&&(p||x)){const B=Math.sqrt(p*p+x*x);p/=B,x/=B}const E=Math.max(h.height,h.width);this._refSymbolAndPlacementOffset=(0,f.Jz)(4*this._refPlacementPadding,E,Lt(p),Lt(x)),this._referenceSize=E,this._refPlacementDirX=p,this._refPlacementDirY=x,this._refOffsetX=h.xOffset,this._refOffsetY=h.yOffset}_write(h,p){if((0,lt.Wi)(this._shapingInfo))return;const x=this._shapingInfo,E=p.getDisplayId(),w="esriGeometryPolygon"===p.geometryType?p.readLegacyCentroid():p.readLegacyGeometry();if(w)switch(this.current={out:h,inId:E,inShaping:x,zoomLevel:this._zoomLevel},p.geometryType){case"esriGeometryPolyline":this._placeLineLabels(w);break;case"esriGeometryPoint":case"esriGeometryPolygon":this._placePointLabels(w);break;default:((D,h="mapview-labeling")=>{ut.error(new rt.Z(h,"mapview-labeling"))})(0,`Geometry of type ${p.geometryType} is not supported`)}}_isVisible(h,p){const x=_t(this.current.zoomLevel);return _t(h)<=x&&x<=_t(p)}_placePointLabels(h){const{out:p,inId:x,inShaping:E}=this.current;this._writeGlyphs(p,x,h,E)}_placeLineLabels(h){const p=function R(D,h){const p=h;for(let x=0;x<D.length;x++){let E=D[x];const w=[];w.push(E[0]);for(let k=1;k<E.length;k++){let[ct,ft]=w[k-1];ct+=E[k][0],ft+=E[k][1],w.push([ct,ft])}z(w,p);const B=[];B.push(w[0]);for(let k=1;k<w.length;k++){const[ct,ft]=w[k-1],[dt,Q]=w[k],Tt=Math.round(dt-ct),bt=Math.round(Q-ft);B.push([Tt,bt])}D[x]=B,E=B}return D}(h.paths,this.current.inShaping.bounds.width),x=this._placeSubdivGlyphs.bind(this),E=(this._shapedBox.width+this._repeatLabelDistance)/2;for(const w of p)F(w,E,x,this._repeatLabel)}_placeSubdivGlyphs(h,p,x,E){const w=yt(p),B=this._shapedBox.width/2,k=Math.sqrt(this._repeatLabelDistance)/2,ct=Math.min(x,E-x),ft=Math.log2(ct/(k+B/2)),dt=0===p?ft:Math.min(w,ft),Q=Math.max(this._minZoom,this.current.zoomLevel+1-dt),Tt=this.current.zoomLevel-Q,bt=this._shapedBox.width/2*2**Tt;this.current.inShaping.isMultiline?0===p&&this._placeStraight(h,Q):this._allowOverrun&&Tt<0?this._placeStraightAlong(h,this._minZoom):"parallel"===this._labelPosition?this._placeStraightAlong(h,Q):"curved"===this._labelPosition&&this._placeCurved(h,Q,bt)}_placeStraight(h,p){const{out:x,inId:E,inShaping:w}=this.current;this._writeGlyphs(x,E,h,w,p)}_placeCurved(h,p,x){const{out:E,inId:w}=this.current;E.metricStart(w,p,h.x,h.y,0,0,0,0);const B=h.clone(),k=h.angle*(180/Math.PI)%360,ct=(h.angle*(180/Math.PI)+180)%360;this._outLineLabelAngle=St(k),this._placeFirst(B,p,1),this._placeBack(h,B,p,x,1),this._placeForward(h,B,p,x,1),this._outLineLabelAngle=St(ct),this._placeFirst(B,p,0),this._placeBack(h,B,p,x,0),this._placeForward(h,B,p,x,0),E.metricEnd()}_placeStraightAlong(h,p){const{out:x,inId:E}=this.current;x.metricStart(E,p,h.x,h.y,0,0,0,0);const w=h.clone(),B=h.angle*(180/Math.PI)%360,k=(h.angle*(180/Math.PI)+180)%360;this._outLineLabelAngle=St(B),this._placeFirst(w,p,1,!0),this._outLineLabelAngle=St(k),this._placeFirst(w,p,0,!0),x.metricEnd()}_placeBack(h,p,x,E,w){const B=h.clone();let k=h.backwardLength+0;for(;B.prev()&&!(k>=E);)this._placeOnSegment(B,p,k,x,-1,w),k+=B.length+0}_placeForward(h,p,x,E,w){const B=h.clone();let k=h.remainingLength+0;for(;B.next()&&!(k>=E);)this._placeOnSegment(B,p,k,x,1,w),k+=B.length+0}_placeFirst(h,p,x,E=!1){const w=h,B=this.current.inShaping,k=B.glyphs,ct=this.current.zoomLevel,{out:ft,inId:dt}=this.current;for(const Q of k){const Tt=Q.x>B.bounds.x?x:1-x,bt=Tt*h.remainingLength+(1-Tt)*h.backwardLength,Gt=Math.abs(Q.x+Q.width/2-B.bounds.x),gt=Math.max(0,ct+Math.log2(Gt/(bt+0))),wt=Math.max(p,E?0:gt);if(Q.maxZoom=25,Q.angle=h.angle+(1-x)*Math.PI,Q.minZoom=wt,this._writeGlyph(ft,dt,w.x,w.y,Q),x&&this._isVisible(Q.minZoom,Q.maxZoom)){const Et=Q.bounds;ft.metricBoxWrite(Et.center[0],Et.center[1],Et.width,Et.height)}}}_placeOnSegment(h,p,x,E,w,B){const k=this.current.inShaping.glyphs,{out:ct,inId:ft}=this.current,dt=this.current.inShaping,Q=this.current.zoomLevel,Gt={x:h.x+x*-w*(h.dx/h.length),y:h.y+x*-w*(h.dy/h.length)};for(const gt of k){const wt=gt.x>dt.bounds.x?B:1-B;if(!(wt&&1===w||!wt&&-1===w))continue;const Et=Math.abs(gt.x+gt.width/2-dt.bounds.x),Ct=Math.max(0,Q+Math.log2(Et/x)-.1),Dt=Math.max(E,Q+Math.log2(Et/(x+h.length+0)));if(0!==Ct&&(gt.angle=h.angle+(1-B)*Math.PI,gt.minZoom=Dt,gt.maxZoom=Ct,this._writeGlyph(ct,ft,Gt.x,Gt.y,gt),B&&this._isVisible(gt.minZoom,gt.maxZoom))){const It=gt.bounds;ct.metricBoxWrite(It.center[0]+(h.x-p.x),It.center[1]+(h.y-p.y),It.width,It.height)}}}_writeGlyphs(h,p,x,E,w=this._minZoom){if(x.x<0||x.x>=512||x.y<0||x.y>=512)return;const B=x.x+this._refOffsetX,k=x.y-this._refOffsetY;for(const Q of E.glyphs)Q.minZoom=w,Q.maxZoom=this._maxZoom,this._writeGlyph(h,p,B,k,Q);const dt=E.boundsT;h.metricStart(p,w,B,k,this._refPlacementDirX,this._refPlacementDirY,this._referenceSize,this._materialKey),h.metricBoxWrite(dt.center[0],dt.center[1],dt.width,dt.height),h.metricEnd()}_writeVertexCommon(h,p,x,E){const w=this._color,B=this._haloColor,k=(0,f.Jz)(0,0,this._size,this._haloSize),ct=Math.max(E.minZoom,this._minZoom),ft=Math.min(E.maxZoom,this._maxZoom),dt=(0,f.Jz)(_t(ct),_t(ft),this._outLineLabelAngle,0);h.vertexWrite(x),h.vertexWrite(p),h.vertexWrite(w),h.vertexWrite(B),h.vertexWrite(k),h.vertexWrite(this._refSymbolAndPlacementOffset),h.vertexWrite(dt)}}var Rt=u(18752),Zt=u(1825);class jt{constructor(h,p,x){this._loadPromise=(0,Z.j)(),this._geometryType=h,this._idField=p,this._templateStore=x}update(h,p){(0,lt.pC)(h.mesh.labels)&&(this._labelTemplates=this._createLabelTemplates(h.mesh.labels,p)),this._schema=h}_createLabelTemplates(h,p){const x=new Map;if("simple"===h.type){for(const E of h.classes){const w=Ft.fromLabelClass(E,p);x.set(E.index,w)}return x}for(const E in h.classes){const w=h.classes[E];for(const B of w){const k=Ft.fromLabelClass(B,p);x.set(B.index,k)}}return x}get templates(){return this._templateStore}analyze(h,p,x,E,w,B,k){var ct=this;return(0,Y.Z)(function*(){if((0,O.Hc)(k))return;let ft;"dictionary"===x.type&&(ft=yield x.analyze(ct._idField,h.copy(),p,w,B,k));let dt=0;for(;h.next();){let Q;if(Q=ft?ft[dt++]:(0,lt.pC)(E)&&(0,N.nE)(h.getDisplayId())&&1!==h.readAttribute("cluster_count")?E.match(ct._idField,h,ct._geometryType,w,B):x.match(ct._idField,h,ct._geometryType,w,B),h.setGroupId(Q),(0,Zt.Sl)(Q)){const Tt=ct._templateStore.getDynamicTemplateGroup(Q);for(const bt of Tt)bt&&bt.analyze&&bt.analyze(ct._templateStore,h,w,B)}}return yield ct._loadPromise,ct._templateStore.finalize(k)})()}analyzeGraphics(h,p,x,E,w,B){var k=this;return(0,Y.Z)(function*(){if((0,O.Hc)(B))return;const ct=h.getCursor();for(x&&(yield x.analyze(k._idField,ct.copy(),p,E,w,B));ct.next();){let ft=ct.getGroupId();if(null!=ft&&-1!==ft||(ft=x.match(k._idField,ct,ct.geometryType,E,w),ct.setGroupId(ft)),(0,Zt.Sl)(ft)){const dt=k._templateStore.getDynamicTemplateGroup(ft);for(const Q of dt)Q&&Q.analyze&&Q.analyze(k._templateStore,ct,E,w)}ct.setGroupId(ft)}return yield k._loadPromise,k._templateStore.finalize(B)})()}writeGraphic(h,p,x){const E=p.getGroupId(),w=p.getDisplayId(),B=this._templateStore.getTemplateGroup(E);if(h.featureStart(p.insertAfter,0),null!=w){if((0,Zt.Sl)(E))for(const k of B)k&&k.bindFeature(p,null,null);if(B){for(const k of B)k&&k.write(h,p,x);h.featureEnd()}}}writeCursor(h,p,x,E,w,B){const k=p.getGroupId(),ct=p.getDisplayId(),ft=this._templateStore.getTemplateGroup(k),dt=this._schema.mesh.sortKey;let Q=0;if((0,lt.pC)(dt)&&(Q=null!=dt.fieldIndex?p.getComputedNumericAtIndex(dt.fieldIndex):p.readAttribute(null!=dt.field?dt.field:this._idField),Q*="asc"===dt.order?1:-1),h.featureStart(0,null==Q||isNaN(Q)?0:Q),null!=ct&&ft){if((0,Zt.Sl)(k))for(const Tt of ft)Tt.bindFeature(p,x,E);for(const Tt of ft)Tt.write(h,p,w);if((0,lt.pC)(B)&&h.hasRecords){const Tt=B&&this._findLabelRef(ft);this._writeLabels(h,p,B,Tt,w)}h.featureEnd()}}_findLabelRef(h){for(const p of h)if(p instanceof Rt.Z)return p;return null}_writeLabels(h,p,x,E,w){for(const B of x)if((0,lt.pC)(B)&&B){const{glyphs:k,rtl:ct,index:ft}=B,dt=this._labelTemplates.get(ft);dt.setZoomLevel(w),dt.bindReferenceTemplate(E),dt.bindTextInfo(k,ct),dt.write(h,p,null)}}}},88337:(Pt,mt,u)=>{u.d(mt,{Z:()=>y});var Y=u(62208),nt=u(23841),lt=u(31478),O=u(12225),Z=u(67831),N=u(9545),rt=u(82054),T=u(25293),q=u(39406),C=u(5254);const vt=3.14159265359/180,y=d=>class extends d{constructor(...f){super(...f),this.angle=0,this.xOffset=0,this.yOffset=0,this.width=0,this.height=0,this.boundsType="square",this._anchorX=0,this._anchorY=0,this._computedWidth=0,this._computedHeight=0,this._vertexBoundsScaleX=1,this._vertexBoundsScaleY=1,this._offsets={xUpperLeft:0,yUpperLeft:0,xUpperRight:0,yUpperRight:0,xBottomLeft:0,yBottomLeft:0,xBottomRight:0,yBottomRight:0},this.geometryType=q.LW.MARKER}_write(f,g,K){const $=g.getDisplayId();f.recordStart($,this._materialKey,this.geometryType,!0),this._writeGeometry(f,g,$,K),f.recordEnd()}_writeGeometry(f,g,K,$){if((0,Y.pC)(this._markerPlacement))return this._writePlacedMarkers(f,g,$);const X=$?(0,rt.oB)((0,rt.GH)($),2):"esriGeometryPolygon"===g.geometryType?g.readCentroid():g.readGeometryForDisplay();if(!(0,Y.Wi)(X)){if(X.isPoint){const[A,tt]=X.coords;return!f.hasAggregates&&f.hasPixelBufferEnabled&&(A<0||A>=512||tt<0||tt>=512)?void 0:this._writeVertices(f,K,this._getPos(A,tt),A,tt)}X.forEachVertex((A,tt)=>this._writeVertices(f,K,this._getPos(A,tt),A,tt))}}_writePlacedMarkers(f,g,K){const $=null!=K?K:g.readLegacyGeometryForDisplay(),X=T.i.getPlacement($,(0,Y.Wg)(this._markerPlacement),(0,nt.F2)(1));if(!X)return;const A=g.getDisplayId(),tt=(0,N.c)(),ht=(0,O.c)();let L=X.next();for(;null!=L;){const{tx:P,ty:R}=L;P>=-128&&P<=640&&R>=-128&&R<=640&&(this._applyTransformation(ht,tt,L.getAngle()/vt),this._writeVertices(f,A,this._getPos(P,R),P,R)),L=X.next()}}_writeVertices(f,g,K,$,X){const A=f.vertexCount();f.vertexBounds($+this.xOffset,X-this.yOffset,this._computedWidth*this._vertexBoundsScaleX,this._computedHeight*this._vertexBoundsScaleY),f.vertexWrite(K),f.vertexWrite(this._offsetUpperLeft),f.vertexWrite(this._texUpperLeft),f.vertexWrite(this._bitestAndDistRatio),f.vertexWrite(g),f.vertexWrite(this._fillColor),f.vertexWrite(this._outlineColor),f.vertexWrite(this._sizeOutlineWidth),f.vertexWrite(this._minMaxZoom),f.vertexEnd(),f.vertexWrite(K),f.vertexWrite(this._offsetUpperRight),f.vertexWrite(this._texUpperRight),f.vertexWrite(this._bitestAndDistRatio),f.vertexWrite(g),f.vertexWrite(this._fillColor),f.vertexWrite(this._outlineColor),f.vertexWrite(this._sizeOutlineWidth),f.vertexWrite(this._minMaxZoom),f.vertexEnd(),f.vertexWrite(K),f.vertexWrite(this._offsetBottomLeft),f.vertexWrite(this._texBottomLeft),f.vertexWrite(this._bitestAndDistRatio),f.vertexWrite(g),f.vertexWrite(this._fillColor),f.vertexWrite(this._outlineColor),f.vertexWrite(this._sizeOutlineWidth),f.vertexWrite(this._minMaxZoom),f.vertexEnd(),f.vertexWrite(K),f.vertexWrite(this._offsetBottomRight),f.vertexWrite(this._texBottomRight),f.vertexWrite(this._bitestAndDistRatio),f.vertexWrite(g),f.vertexWrite(this._fillColor),f.vertexWrite(this._outlineColor),f.vertexWrite(this._sizeOutlineWidth),f.vertexWrite(this._minMaxZoom),f.vertexEnd(),f.indexWrite(A+0),f.indexWrite(A+1),f.indexWrite(A+2),f.indexWrite(A+1),f.indexWrite(A+3),f.indexWrite(A+2)}_applyTransformation(f,g,K=0){(0,lt.i)(f),(0,lt.t)(f,f,(0,N.f)(this.xOffset,-this.yOffset)),this.angle+K!==0&&(0,lt.r)(f,f,vt*(this.angle+K));const $=this._computedWidth,X=this._computedHeight,A=(this._anchorX-.5)*$,tt=(this._anchorY-.5)*X;(0,Z.s)(g,A,tt),(0,Z.t)(g,g,f),this._offsetUpperLeft=(0,C.UJ)(16*g[0],16*g[1]),this._offsets.xUpperLeft=g[0],this._offsets.yUpperLeft=g[1],(0,Z.s)(g,A+$,tt),(0,Z.t)(g,g,f),this._offsetUpperRight=(0,C.UJ)(16*g[0],16*g[1]),this._offsets.xUpperRight=g[0],this._offsets.yUpperRight=g[1],(0,Z.s)(g,A,tt+X),(0,Z.t)(g,g,f),this._offsetBottomLeft=(0,C.UJ)(16*g[0],16*g[1]),this._offsets.xBottomLeft=g[0],this._offsets.yBottomLeft=g[1],(0,Z.s)(g,A+$,tt+X),(0,Z.t)(g,g,f),this._offsetBottomRight=(0,C.UJ)(16*g[0],16*g[1]),this._offsets.xBottomRight=g[0],this._offsets.yBottomRight=g[1]}_getPos(f,g){return(0,C.UJ)(Math.round(8*f),Math.round(8*g))}}},44526:(Pt,mt,u)=>{u.d(mt,{Z:()=>vt});var Y=u(62208),nt=u(23841),lt=u(82054),O=u(25293),Z=u(39351),N=u(39406),rt=u(5254),T=u(18716),q=u(25797);const vt=J=>class extends J{constructor(...y){super(...y),this._isCIM=!1,this._vertexBoundsScale=1,this.geometryType=N.LW.TEXT,this._aux=(0,rt.Jz)(0,0,this._referenceSize,this._bitset)}bindTextInfo(y,d){this._shapingInfo=y&&y.length?(0,Y.Po)(y,f=>(0,q.Nr)(f,d,{scale:this._scale,angle:this._angle,xOffset:this._xOffset,yOffset:this._yOffset,hAlign:this._xAlignD,vAlign:this._yAlignD,maxLineWidth:Math.max(32,Math.min(this._lineWidth,512)),lineHeight:Z.xm*Math.max(.25,Math.min(this._lineHeight,4)),decoration:this._decoration,isCIM:this._isCIM})):null}_write(y,d,f){const g=d.getDisplayId();this._writeGeometry(y,d,g,f)}_writeGeometry(y,d,f,g){const K=this._shapingInfo;if((0,Y.Wi)(K))return;if((0,Y.pC)(this._textPlacement)){const X=null!=g?g:d.readLegacyGeometryForDisplay();return this._writePlacedText(y,f,X,K)}const $=g?(0,lt.oB)((0,lt.GH)(g),2):"esriGeometryPolygon"===d.geometryType?d.readCentroid():d.readGeometryForDisplay();if(!(0,Y.Wi)($)){if($.isPoint){const[X,A]=$.coords;return!y.hasAggregates&&y.hasPixelBufferEnabled&&(X<0||X>=512||A<0||A>=512)?void 0:this._writeGlyphs(y,f,{x:X,y:A},K)}$.forEachVertex((X,A)=>this._writeGlyphs(y,f,{x:X,y:A},K))}}_writePlacedText(y,d,f,g){const K=(0,Y.Wg)(this._textPlacement),$=O.i.getPlacement(f,K,(0,nt.F2)(1));if(!$)return;let X=$.next();for(;null!=X;){const A=X.getAngle();g.setRotation(A);const tt=X.tx,ht=X.ty;tt<0||tt>=512||ht<0||ht>=512||(this._writeGlyphs(y,d,{x:tt,y:ht},g),g.setRotation(-A)),X=$.next()}}_writeGlyphs(y,d,f,g){const K=T.m2.load(this._materialKey),$=(0,rt.UJ)(Math.round(8*f.x),Math.round(8*f.y)),X=this._vertexBoundsScale,A=g.bounds,tt=2*Math.max(A.width,A.height);for(const ht of g.glyphs)K.textureBinding=ht.textureBinding,y.recordStart(d,K.data,this.geometryType,!0),y.vertexBounds(f.x+A.x+this._xOffset,f.y+A.y-this._yOffset,tt*X,tt*X),this._writeVertices(y,d,$,ht),y.recordEnd()}_writeGlyph(y,d,f,g,K){const $=T.m2.load(this._materialKey),X=(0,rt.UJ)(Math.round(8*f),Math.round(8*g));$.textureBinding=K.textureBinding,y.recordStart(d,$.data,this.geometryType,!0);const A=K.bounds,tt=this._vertexBoundsScale;y.vertexBounds(f+A.x*tt,g+A.y*tt,A.width*tt,A.height*tt),this._writeVertices(y,d,X,K),y.recordEnd()}_writeVertices(y,d,f,g){const K=y.vertexCount();this._writeVertexCommon(y,d,f,g),y.vertexWrite(g.offsets.upperLeft),y.vertexWrite(g.texcoords.upperLeft),y.vertexEnd(),this._writeVertexCommon(y,d,f,g),y.vertexWrite(g.offsets.upperRight),y.vertexWrite(g.texcoords.upperRight),y.vertexEnd(),this._writeVertexCommon(y,d,f,g),y.vertexWrite(g.offsets.lowerLeft),y.vertexWrite(g.texcoords.lowerLeft),y.vertexEnd(),this._writeVertexCommon(y,d,f,g),y.vertexWrite(g.offsets.lowerRight),y.vertexWrite(g.texcoords.lowerRight),y.vertexEnd(),y.indexWrite(K+0),y.indexWrite(K+1),y.indexWrite(K+2),y.indexWrite(K+1),y.indexWrite(K+3),y.indexWrite(K+2)}_writeVertexCommon(y,d,f,g){const K=this._color,$=this._haloColor,X=(0,rt.Jz)(0,0,this._referenceSize,this._bitset),A=(0,rt.Jz)(0,0,this._size,this._haloSize);y.vertexWrite(f),y.vertexWrite(d),y.vertexWrite(K),y.vertexWrite($),y.vertexWrite(A),y.vertexWrite(X),y.vertexWrite(this._minMaxZoom)}}},18752:(Pt,mt,u)=>{u.d(mt,{Z:()=>J});var Y=u(62208),nt=u(23841),lt=u(12225),O=u(9545),Z=u(81295),N=u(39351),rt=u(5254),T=u(18716),q=u(50114),C=u(88337),vt=u(94358);class J extends((0,C.Z)(vt.Z)){constructor(d,f,g,K,$,X,A,tt,ht,M,F,L,P,R,z,ot,ut,pt,v,U,V,it,at){super(),this.angle=K,this.height=A,this.width=X,this.xOffset=f*v,this.yOffset=g*v,this._markerPlacement=U,this._effects=V,this._anchorX=.5-(.5+ot)*z.width/z.width,this._anchorY=.5-(.5+ut)*z.height/z.height,this._minMaxZoom=(0,rt.UJ)(Math.round(it*N.MI),Math.round(at*N.MI));const Mt=(1===R?N.Tz:N.CQ)|(F?N.Uh:0)|(P?N.oK:0)|(L?N.e0:0),yt=z&&z.sdf,Lt=T.mE.load(d);Lt.sdf=yt,Lt.pattern=!0,Lt.textureBinding=z.textureBinding,this._materialKey=Lt.data,this._fillColor=$,this._outlineColor=ht,this._sizeOutlineWidth=(0,rt.Jz)(Math.round(Math.min(Math.sqrt(128*X),255)),Math.round(Math.min(Math.sqrt(128*A),255)),Math.round(Math.min(Math.sqrt(128*M),255)),Math.round(Math.min(Math.sqrt(128*tt),255)));const _t=z.rect.x+N.fL,St=z.rect.y+N.fL,Ft=_t+z.width,Rt=St+z.height;this._offsets.xUpperLeft=_t,this._offsets.yUpperLeft=St,this._offsets.xUpperRight=Ft,this._offsets.yUpperRight=St,this._offsets.xBottomLeft=_t,this._offsets.yBottomLeft=Rt,this._offsets.xBottomRight=Ft,this._offsets.yBottomRight=Rt,this._texUpperLeft=(0,rt.UJ)(_t,St),this._texUpperRight=(0,rt.UJ)(Ft,St),this._texBottomLeft=(0,rt.UJ)(_t,Rt),this._texBottomRight=(0,rt.UJ)(Ft,Rt),X*=pt,A*=pt,X*=v,A*=v;const Zt=Math.round(64*pt);this._bitestAndDistRatio=(0,rt.UJ)(Mt,Zt),this._computedWidth=X,this._computedHeight=A;const jt=(0,O.c)(),D=(0,lt.c)();this._applyTransformation(D,jt)}static fromCIMMarker(d,f,g){const X=d.size,A=(f&&f.width||1)/(f&&f.height||1)*d.scaleX,tt=d.scaleSymbolsProportionally&&d.frameHeight?X/d.frameHeight:1;let ht=(0,Z.t2)(d.color);const M=(0,Z.t2)(d.outlineColor),F=(0,nt.F2)(X),L=F*A,P=(0,nt.F2)(d.offsetX||0),R=(0,nt.F2)(d.offsetY||0),z=(0,nt.F2)(d.outlineWidth||0)*tt,ot=d.alignment||0,ut=(0,nt.F2)(d.referenceSize),[pt,v]=(0,q._f)(d.scaleInfo,g);f.sdf||0!==ht||(ht=-1);let U=d.rotation||0;d.rotateClockwise||(U=-U);let V=0,it=0;const at=d.anchorPoint;at&&(d.isAbsoluteAnchorPoint?X&&(V=-at.x/(X*A),it=at.y/X):(V=at.x,it=at.y));const Mt=new J(d.materialKey,P,R,U,ht,L,F,ut,M,z,d.colorLocked,d.scaleSymbolsProportionally,!1,ot,f,V,it,d.sizeRatio,(0,Y.Pt)(d.scaleFactor,1),d.markerPlacement,d.effects,pt,v);return Mt._vertexBoundsScaleX=d.maxVVSize?d.maxVVSize/L:1,Mt._vertexBoundsScaleY=d.maxVVSize?d.maxVVSize/F:1,Mt}static fromPictureMarker(d,f){const g=Math.round((0,nt.F2)(d.width)),K=Math.round((0,nt.F2)(d.height)),$=N.ru,X=Math.round((0,nt.F2)(d.xoffset||0)),A=Math.round((0,nt.F2)(d.yoffset||0)),tt=new J(d.materialKey,X,A,d.angle,$,g,K,K,0,0,!1,!1,!1,0,f,0,0,1,1,null,null,q.Xe,q.eW);return tt._vertexBoundsScaleX=d.maxVVSize?d.maxVVSize/d.width:1,tt._vertexBoundsScaleY=d.maxVVSize?d.maxVVSize/d.height:1,tt}static fromSimpleMarker(d,f){const g=(0,Z.aH)(d.color),K=Math.round((0,nt.F2)(d.size)),$=K,X=Math.round((0,nt.F2)(d.xoffset||0)),A=Math.round((0,nt.F2)(d.yoffset||0)),tt=d.style,ht=d.outline,M=0|(ht&&ht.color&&(0,Z.aH)(ht.color)),F=0|(ht&&ht.width&&Math.round((0,nt.F2)(ht.width))),L=new J(d.materialKey,X,A,d.angle,g,K,$,$,M,F,!1,!1,"esriSMSCross"===tt||"esriSMSX"===tt,0,f,0,0,126/64,1,null,null,q.Xe,q.eW);return L.boundsType="esriSMSCircle"===tt?"circle":"square",L._vertexBoundsScaleX=d.maxVVSize?d.maxVVSize/d.size:1,L._vertexBoundsScaleY=d.maxVVSize?d.maxVVSize/d.size:1,L}static fromLineSymbolMarker(d,f){const g=(0,Z.aH)(d.color),$=Math.round((0,nt.F2)(6*d.lineWidth)),X=$,A="cross"===d.style||"x"===d.style;let tt;switch(d.placement){case"begin-end":tt="Both";break;case"begin":tt="JustBegin";break;case"end":tt="JustEnd";break;default:tt="None"}const ht={type:"CIMMarkerPlacementAtExtremities",angleToLine:!0,offset:0,extremityPlacement:tt,offsetAlongLine:0},M=new J(d.materialKey,0,0,0,g,$,X,X/6,g,A?Math.round((0,nt.F2)(d.lineWidth)):0,!1,!1,A,1,f,0,0,126/64,1,ht,null,q.Xe,q.eW);return M.boundsType="circle"===d.style?"circle":"square",M}}},94358:(Pt,mt,u)=>{u.d(mt,{Z:()=>lt});var Y=u(62208),nt=u(73608);class lt{bindFeature(Z,N,rt){}write(Z,N,rt){var T;if((0,Y.Wi)(this._effects)||0===(null==(T=this._effects)?void 0:T.length))return this._write(Z,N);const q=nt.j.executeEffects(this._effects,N.readLegacyGeometryForDisplay());let C=nt.j.next(q);for(;C;)this._write(Z,N,C),C=nt.j.next(q)}_write(Z,N,rt){}}},1825:(Pt,mt,u)=>{u.d(mt,{Wr:()=>Je,Sl:()=>We});var Y=u(15861),nt=u(26584),lt=u(63290),O=u(10699),Z=u(24837),N=u(39406),rt=u(18716),T=u(23841),q=u(81295),C=u(39351),vt=u(43289),J=u(5254),y=u(50114),d=u(62208),f=u(82054),K=(u(11915),u(58774)),$=u(88071),X=u(47018);function A(a,r,i,n,s,l,c){w=0;const m=(n-i)*l,_=s&&s.length,W=_?(s[0]-i)*l:m;let S,G,H,b,I,st=tt(r,i,0,0,W,l,!0);if(st&&st.next!==st.prev){if(_&&(st=function ot(a,r,i,n,s,l){const c=new Array;for(let m=0,_=n.length;m<_;m++){const W=tt(a,r,0,n[m]*l,m<_-1?n[m+1]*l:i*l,l,!1);W===W.next&&(W.steiner=!0),c.push(z(W))}c.sort(Ft);for(const m of c)ut(m,s),s=ht(s,s.next);return s}(r,i,n,s,st,l)),m>80*l){S=H=r[0+i*l],G=b=r[1+i*l];for(let j=l;j<W;j+=l){const et=r[j+i*l],xt=r[j+1+i*l];S=Math.min(S,et),G=Math.min(G,xt),H=Math.max(H,et),b=Math.max(b,xt)}I=Math.max(H-S,b-G),I=0!==I?1/I:0}M(st,a,l,S,G,I,c,0)}}function tt(a,r,i,n,s,l,c){let m;if(c===function Mt(a,r,i,n,s,l){let c=0;for(let m=n,_=s-l;m<s;m+=l)c+=(a[_+r*l]-a[m+r*l])*(a[m+1+r*l]+a[_+1+r*l]),_=m;return c}(a,r,0,n,s,l)>0)for(let _=n;_<s;_+=l)m=P(_+r*l,a[_+r*l],a[_+1+r*l],m);else for(let _=s-l;_>=n;_-=l)m=P(_+r*l,a[_+r*l],a[_+1+r*l],m);return m&&St(m,m.next)&&(R(m),m=m.next),m}function ht(a,r=a){if(!a)return a;let i,n=a;do{if(i=!1,n.steiner||!St(n,n.next)&&0!==V(n.prev,n,n.next))n=n.next;else{if(R(n),n=r=n.prev,n===n.next)break;i=!0}}while(i||n!==r);return r}function M(a,r,i,n,s,l,c,m){if(!a)return;!m&&l&&(a=v(a,n,s,l));let _=a;for(;a.prev!==a.next;){const W=a.prev,S=a.next;if(l?L(a,n,s,l):F(a))r.push(W.index/i+c),r.push(a.index/i+c),r.push(S.index/i+c),R(a),a=S.next,_=S.next;else if((a=S)===_){m?1===m?M(a=Rt(a,r,i,c),r,i,n,s,l,c,2):2===m&&Zt(a,r,i,n,s,l,c):M(ht(a),r,i,n,s,l,c,1);break}}}function F(a){const r=a.prev,i=a,n=a.next;if(V(r,i,n)>=0)return!1;let s=a.next.next;const l=s;let c=0;for(;s!==a.prev&&(0===c||s!==l);){if(c++,yt(r.x,r.y,i.x,i.y,n.x,n.y,s.x,s.y)&&V(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function L(a,r,i,n){const s=a.prev,l=a,c=a.next;if(V(s,l,c)>=0)return!1;const W=s.x>l.x?s.x>c.x?s.x:c.x:l.x>c.x?l.x:c.x,S=s.y>l.y?s.y>c.y?s.y:c.y:l.y>c.y?l.y:c.y,G=_t(s.x<l.x?s.x<c.x?s.x:c.x:l.x<c.x?l.x:c.x,s.y<l.y?s.y<c.y?s.y:c.y:l.y<c.y?l.y:c.y,r,i,n),H=_t(W,S,r,i,n);let b=a.prevZ,I=a.nextZ;for(;b&&b.z>=G&&I&&I.z<=H;){if(b!==a.prev&&b!==a.next&&yt(s.x,s.y,l.x,l.y,c.x,c.y,b.x,b.y)&&V(b.prev,b,b.next)>=0||(b=b.prevZ,I!==a.prev&&I!==a.next&&yt(s.x,s.y,l.x,l.y,c.x,c.y,I.x,I.y)&&V(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;b&&b.z>=G;){if(b!==a.prev&&b!==a.next&&yt(s.x,s.y,l.x,l.y,c.x,c.y,b.x,b.y)&&V(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;I&&I.z<=H;){if(I!==a.prev&&I!==a.next&&yt(s.x,s.y,l.x,l.y,c.x,c.y,I.x,I.y)&&V(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function P(a,r,i,n){const s=p.create(a,r,i);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function R(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function z(a){let r=a,i=a;do{(r.x<i.x||r.x===i.x&&r.y<i.y)&&(i=r),r=r.next}while(r!==a);return i}function ut(a,r){if(r=function pt(a,r){let i=r;const n=a.x,s=a.y;let l,c=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){const H=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(H<=n&&H>c){if(c=H,H===n){if(s===i.y)return i;if(s===i.next.y)return i.next}l=i.x<i.next.x?i:i.next}}i=i.next}while(i!==r);if(!l)return null;if(n===c)return l.prev;const m=l,_=l.x,W=l.y;let S,G=1/0;for(i=l.next;i!==m;)n>=i.x&&i.x>=_&&n!==i.x&&yt(s<W?n:c,s,_,W,s<W?c:n,s,i.x,i.y)&&(S=Math.abs(s-i.y)/(n-i.x),(S<G||S===G&&i.x>l.x)&&Lt(i,a)&&(l=i,G=S)),i=i.next;return l}(a,r)){const i=h(r,a);ht(i,i.next)}}function v(a,r,i,n){for(let s;s!==a;s=s.next){if(s=s||a,null===s.z&&(s.z=_t(s.x,s.y,r,i,n)),s.prev.next!==s||s.next.prev!==s)return s.prev.next=s,s.next.prev=s,v(a,r,i,n);s.prevZ=s.prev,s.nextZ=s.next}return a.prevZ.nextZ=null,a.prevZ=null,function U(a){let r,i=1;for(;;){let n,s=a;a=null,r=null;let l=0;for(;s;){l++,n=s;let c=0;for(;c<i&&n;c++)n=n.nextZ;let m=i;for(;c>0||m>0&&n;){let _;0===c?(_=n,n=n.nextZ,m--):0!==m&&n?s.z<=n.z?(_=s,s=s.nextZ,c--):(_=n,n=n.nextZ,m--):(_=s,s=s.nextZ,c--),r?r.nextZ=_:a=_,_.prevZ=r,r=_}s=n}if(r.nextZ=null,i*=2,l<2)return a}}(a)}function V(a,r,i){return(r.y-a.y)*(i.x-r.x)-(r.x-a.x)*(i.y-r.y)}function it(a,r,i,n){return!!(St(a,r)&&St(i,n)||St(a,n)&&St(i,r))||V(a,r,i)>0!=V(a,r,n)>0&&V(i,n,a)>0!=V(i,n,r)>0}function yt(a,r,i,n,s,l,c,m){return(s-c)*(r-m)-(a-c)*(l-m)>=0&&(a-c)*(n-m)-(i-c)*(r-m)>=0&&(i-c)*(l-m)-(s-c)*(n-m)>=0}function Lt(a,r){return V(a.prev,a,a.next)<0?V(a,r,a.next)>=0&&V(a,a.prev,r)>=0:V(a,r,a.prev)<0||V(a,a.next,r)<0}function _t(a,r,i,n,s){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=32767*(a-i)*s)|a<<8))|a<<4))|a<<2))|a<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-n)*s)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function St(a,r){return a.x===r.x&&a.y===r.y}function Ft(a,r){return a.x-r.x}function Rt(a,r,i,n){let s=a;do{const l=s.prev,c=s.next.next;!St(l,c)&&it(l,s,s.next,c)&&Lt(l,c)&&Lt(c,l)&&(r.push(l.index/i+n),r.push(s.index/i+n),r.push(c.index/i+n),R(s),R(s.next),s=a=c),s=s.next}while(s!==a);return s}function Zt(a,r,i,n,s,l,c){let m=a;do{let _=m.next.next;for(;_!==m.prev;){if(m.index!==_.index&&jt(m,_)){let W=h(m,_);return m=ht(m,m.next),W=ht(W,W.next),M(m,r,i,n,s,l,c,0),void M(W,r,i,n,s,l,c,0)}_=_.next}m=m.next}while(m!==a)}function jt(a,r){return a.next.index!==r.index&&a.prev.index!==r.index&&!function at(a,r){let i=a;do{if(i.index!==a.index&&i.next.index!==a.index&&i.index!==r.index&&i.next.index!==r.index&&it(i,i.next,a,r))return!0;i=i.next}while(i!==a);return!1}(a,r)&&Lt(a,r)&&Lt(r,a)&&function D(a,r){let i=a,n=!1;const s=(a.x+r.x)/2,l=(a.y+r.y)/2;do{i.y>l!=i.next.y>l&&i.next.y!==i.y&&s<(i.next.x-i.x)*(l-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==a);return n}(a,r)}function h(a,r){const i=p.create(a.index,a.x,a.y),n=p.create(r.index,r.x,r.y),s=a.next,l=r.prev;return a.next=r,r.prev=a,i.next=s,s.prev=i,n.next=i,i.prev=n,l.next=n,n.prev=l,n}class p{constructor(){this.index=0,this.x=0,this.y=0,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}static create(r,i,n){const s=w<x.length?x[w++]:new p;return s.index=r,s.x=i,s.y=n,s.prev=null,s.next=null,s.z=null,s.prevZ=null,s.nextZ=null,s.steiner=!1,s}}const x=new Array;let w=0;for(let a=0;a<8096;a++)x.push(new p);const k=new X.b(0,0,0,1,0),ct=new X.b(0,0,0,1,0);function ft(a,r,i){let n=0;for(let s=1;s<i;s++)n+=(a[2*(r+s)]-a[2*(r+s-1)])*(a[2*(r+s)+1]+a[2*(r+s-1)+1]);return n}function dt(a,r,i,n,s){let l=0;for(let m=i;m<n;m+=3){const _=2*(a.getValue(m)-s),W=2*(a.getValue(m+1)-s),S=2*(a.getValue(m+2)-s);l+=Math.abs((r[_]-r[S])*(r[W+1]-r[_+1])-(r[_]-r[W])*(r[S+1]-r[_+1]))}return l}k.setExtent(C.I_),ct.setExtent(C.I_);var Et=u(64288),Ct=u(46519);const Ot=a=>class extends a{constructor(...r){super(...r),this.tessellationProperties={},this._tessellationOptions={halfWidth:0,pixelCoordRatio:1,offset:0},this.geometryType=N.LW.LINE}writeGeometry(r,i,n,s){this._writeGeometry(r,i,n,s)}_initializeTessellator(r){const i=rt.a.load(this._materialKey),n=rt.dk.load(this._materialKey),s=this._tessellationOptions,c=this.tessellationProperties._halfWidth<C.tQ&&!r&&!(i.vvSizeFieldStops||i.vvSizeMinMaxValue||i.vvSizeScaleStops||i.vvSizeUnitValue);this.tessellationProperties.minMaxZoom=this._minMaxZoom,s.wrapDistance=65535,s.textured=this._isDashed||this._hasPattern,s.offset=this.tessellationProperties.offset,s.halfWidth=this.tessellationProperties._halfWidth;const m=c?0:1;this._lineTessellator=new Ct.z((n.outlinedFill?Ht:Nt)(this.tessellationProperties,m,m),Se(this.tessellationProperties),c)}_write(r,i,n){const s="esriGeometryPoint"===i.geometryType;r.recordStart(i.getDisplayId(),this._materialKey,this.geometryType,s),this._writeGeometry(r,i,n,s),r.recordEnd()}_writeGeometry(r,i,n,s){const l=null!=n?n:i.readLegacyGeometryForDisplay(),c=this._getLines(l,s);(0,d.Wi)(c)||this._writeVertices(r,i,c)}_getLines(r,i){if((0,d.Wi)(r))return null;const n=r.paths||r.rings;return(0,d.Wi)(n)?null:function wt(a,r){ct.setPixelMargin(r);const i=ct,n=-r,s=C.I_+r;let l=[],c=!1,m=0;for(;m<a.length;){const _=[],W=a[m];if(!W)return null;i.reset(2);let[S,G]=W[0];if(c)i.moveTo(S,G);else{if(S<n||S>s||G<n||G>s){c=!0;continue}_.push({x:S,y:G})}let H=!1;const b=W.length;for(let I=1;I<b;++I)if(S+=W[I][0],G+=W[I][1],c)i.lineTo(S,G);else{if(S<n||S>s||G<n||G>s){H=!0;break}_.push({x:S,y:G})}if(H)c=!0;else{if(c){const I=i.resultWithStarts();if(I)for(const st of I)l.push(st)}else l.push({line:_,start:0});m++,c=!1}}return l=l.filter(_=>_.line.length>1),0===l.length?null:l}(n,i?256:16)}_writeVertices(r,i,n){const s=i.getDisplayId(),l=r.vertexCount(),c=this.tessellationProperties,m=this._tessellationOptions;c.out=r,c.id=s,c.indexCount=0,c.vertexCount=0,c.offset=l,m.capType=this._capType,m.joinType=this._joinType;const _=rt.dk.load(this._materialKey);this.tessellationProperties.key=_.outlinedFill?_:rt.a.load(this._materialKey);for(const{line:W,start:S}of n)m.initialDistance=S%65535,this._lineTessellator.tessellate(W,m)}},Nt=(a,r,i)=>(n,s,l,c,m,_,W,S,G,H,b)=>{const I=(0,J.UJ)(b,Math.ceil(16*a._halfWidth)),st=(0,J.Jz)(Math.round(16*W),Math.round(16*S),Math.round(16*G),Math.round(16*H)),j=(0,J.Jz)(16*m,16*_,0,a._bitset),et=a.out;return et.vertexBounds(n,s,r,i),et.vertexWrite((0,J.UJ)(8*n,8*s)),et.vertexWrite(a.id),et.vertexWrite(a._fillColor),et.vertexWrite(st),et.vertexWrite(I),et.vertexWrite(a._tl),et.vertexWrite(a._br),et.vertexWrite(j),et.vertexWrite((0,J.UJ)(Math.ceil(16*a._halfReferenceWidth),0)),et.vertexWrite(a.minMaxZoom),et.vertexEnd(),a.offset+a.vertexCount++},Ht=(a,r,i)=>(n,s,l,c,m,_,W,S,G,H,b)=>{const I=(0,J.Jz)(0,0,16*a._halfWidth,16*a._halfReferenceWidth),st=(0,J.Jz)(16*W+128,16*S+128,16*G+128,16*H+128),j=a.out,et=a._bitset<<24|a.id;return j.vertexBounds(n,s,r,i),j.vertexWrite((0,J.UJ)(8*n,8*s)),j.vertexWrite(et),j.vertexWrite(a._fillColor),a.key.simple||(j.vertexWrite(0),j.vertexWrite(0)),j.vertexWrite(I),j.vertexWrite(st),a.key.simple||j.vertexWrite(a.minMaxZoom),j.vertexEnd(),a.offset+a.vertexCount++},Se=a=>(r,i,n)=>{const s=a.out;s.indexWrite(r),s.indexWrite(i),s.indexWrite(n),a.indexCount+=3};var ae=u(94358);const Ie=lt.Z.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate");class Jt extends(Ot(ae.Z)){constructor(r,i,n,s,l,c,m,_,W,S,G,H,b,I,st,j,et,xt,Wt){super();const zt=rt.a.load(r);i&&(zt.sdf=i.sdf,zt.pattern=!0,zt.textureBinding=i.textureBinding),this._capType=s,this._joinType=l,this._miterLimitCosine=(0,y.NW)(c),this.tessellationProperties._fillColor=m,this.tessellationProperties._tl=_,this.tessellationProperties._br=W,this._hasPattern=S,this._isDashed=G,this._zOrder=j,this._effects=et,this._minMaxZoom=(0,J.UJ)(Math.round(xt*C.MI),Math.round(Wt*C.MI)),this._materialKey=zt.data,this.tessellationProperties._bitset=(b?C.Uh:0)|(I?C.SD:0)|(H?C._6:0),this.tessellationProperties._halfWidth=.5*n,this.tessellationProperties._halfReferenceWidth=.5*st,this.tessellationProperties.offset=0,this._initializeTessellator(!1)}static fromCIMLine(r,i,n){const s=r.color,l=r.scaleFactor||1,c=!!r.dashTemplate;let m=r.cap;c&&1===m&&(m=2);const _=r.join,W=(0,T.F2)(r.width)*l,S=(0,T.F2)(r.referenceWidth),G=(0,T.F2)(r.miterLimit),H=s&&(0,q.t2)(s)||0,[b,I]=(0,y._f)(r.scaleInfo,n);if(!i)return new Jt(r.materialKey,i,W,m,_,G,H,0,0,!1,c,r.scaleDash,r.colorLocked,!1,S,r.zOrder,r.effects,b,I);const{rect:j,width:et,height:xt}=i,Wt=j.x+C.fL,zt=j.y+C.fL,Ut=Wt+et,Yt=zt+xt,$t=(0,J.UJ)(Wt,zt),Qt=(0,J.UJ)(Ut,Yt);return new Jt(r.materialKey,i,W,m,_,G,H,$t,Qt,!0,c,r.scaleDash,r.colorLocked,!1,S,r.zOrder,r.effects,b,I)}static fromFillOutline(r){var i;return r.isOutlinedFill&&r.outline&&"esriSLSSolid"===(null==(i=r.outline)?void 0:i.style)?Jt.fromSimpleLine(qt({hash:"",materialKey:r.materialKey},r.outline),null,!0):null}static fromSimpleLine(r,i,n=!1){const{color:s}=r,l="esriSLSSolid"!==r.style&&"esriSLSNull"!==r.style,c=(0,Et.ws)(r.cap||"round"),m=(0,Et.xV)(r.join||"round");let _=s&&"esriSLSNull"!==r.style&&(0,q.aH)(s)||0;"esriSLSNull"===r.style&&(_=0);const W=(0,T.F2)(r.width),S=r.miterLimit;if(!i)return new Jt(r.materialKey,i,W,c,m,S,_,0,0,!1,l,!0,!1,n,W,0,null,y.Xe,y.eW);const{rect:G,width:H,height:b}=i,I=G.x+C.fL,st=G.y+C.fL,j=I+H,et=st+b,xt=(0,J.UJ)(I,st),Wt=(0,J.UJ)(j,et);return new Jt(r.materialKey,i,W,c,m,S,_,xt,Wt,!0,l,!0,!1,n,W,0,null,y.Xe,y.eW)}static fromPictureLineSymbol(r,i,n,s){return Ie.error("PictureLineSymbol support does not exist!"),null}}const pe=a=>class extends a{constructor(...r){super(...r),this.forceLibtess=!1,this._bitset=0,this._lineTemplate=null,this.geometryType=N.LW.FILL}_maybeAddLineTemplate(r){this._lineTemplate=Jt.fromFillOutline(r)}_write(r,i,n){const s="esriGeometryPoint"===i.geometryType,l=rt.dk.load(this._materialKey);r.recordStart(i.getDisplayId(),this._materialKey,this.geometryType,s),this._writeGeometry(r,i,l,n,s),l.outlinedFill&&(0,d.pC)(this._lineTemplate)&&this._lineTemplate.writeGeometry(r,i,n,s),r.recordEnd()}_writeGeometry(r,i,n,s,l){const c=this._getGeometry(i,s,l);if((0,d.Wi)(c))return;const m=r.indexCount();if(!(c.maxLength>100)&&!this.forceLibtess&&function Q(a,r){const{coords:i,lengths:n,hasIndeterminateRingOrder:s}=r,l=a.indexWriter(),c=a.vertexCount();if(s)return!1;const m=l.length;let _=0;for(let W=0;W<n.length;){let S=W,G=n[W],H=ft(i,_,G);const b=[];for(;++S<n.length;){const et=n[S],xt=ft(i,_+G,et);if(!(xt>0))break;H+=xt,b.push(_+G),G+=et}const I=l.length;A(l,i,_,_+G,b,2,c);const st=dt(l,i,I,l.length,c),j=Math.abs(H);if(Math.abs((st-j)/Math.max(1e-7,j))>1e-5)return l.seek(m),!1;W=S,_+=G}return!0}(r,c))return void(m!==r.indexCount()&&this._writeVertices(r,i,c.coords,c.lengths,n));const _=function bt(a,r){const i=a.indexWriter(),n=a.vertexCount(),{coords:s,lengths:l}=r,{buffer:c,vertexCount:m}=(0,K.b)(s,l);i.ensureSize(m);for(let _=0;_<m;_++)i.push(_+n);return c}(r,c);m!==r.indexCount()&&this._writeVertices(r,i,_,[_.length/2],n)}_writeVertices(r,i,n,s,l){const c=i.getDisplayId(),m=this._bitset<<24|c;let _=0;const W=s.reduce((G,H)=>G+H);r.vertexEnsureSize((l.dotDensity?4:10)*W);for(const G of s){const H=G+_;for(let b=_;b<H;b++){const I=n[2*b],st=n[2*b+1],j=(0,J.UJ)(1*I,1*st);r.vertexBounds(I,st,0,0),r.vertexWrite(j),r.vertexWrite(m),l.dotDensity?r.vertexWriteF32(1/Math.abs(i.readGeometryArea())):(r.vertexWrite(this.fillColor),l.simple||(r.vertexWrite(this.tl),r.vertexWrite(this.br)),r.vertexWrite(this.aux2),r.vertexWrite(this.aux3),l.simple||r.vertexWrite(this._minMaxZoom))}_+=G}}_getGeometry(r,i,n){const s=i?(0,f.oB)((0,f.GH)(i),2):r.readGeometryForDisplay();return s?function gt(a,r){if((0,d.Wi)(a))return null;if(!function Gt(a,r,i){let n=0;for(let s=0;s<a.lengths.length;s++){const l=a.lengths[s];for(let c=0;c<l;c++){const m=a.coords[2*(c+n)],_=a.coords[2*(c+n)+1];if(m<r||m>i||_<r||_>i)return!0}n+=l}return!1}(a,-128,C.I_+128))return a;k.setPixelMargin(r),k.reset(3);let i=0;for(let c=0;c<a.lengths.length;c++){const m=a.lengths[c];let _=a.coords[2*(0+i)],W=a.coords[2*(0+i)+1];k.moveTo(_,W);for(let S=1;S<m;S++)_=a.coords[2*(S+i)],W=a.coords[2*(S+i)+1],k.lineTo(_,W);k.close(),i+=m}const n=k.result(!1);if(!n)return null;const s=[],l=[];for(const c of n){let m=0;for(const _ of c)l.push(_.x),l.push(_.y),m++;s.push(m)}return new $.Z(s,l)}(s,n?256:8):null}};var Ce=u(84175),le=u(80991);const xe=lt.Z.getLogger("esri.views.2d.engine.webgl.WGLDynamicMeshTemplate");class ee extends ae.Z{constructor(r){super(),this._ongoingMaterialRequestMap=new Map,this._materialCache=new Map,this._dynamicPropertyMap=new Map,this._cimLayer=r}analyze(r,i,n,s,l){if(l&&0===l.length)return null;const c=l&&l.length>0,m=i.readLegacyFeature(),_=this._materialCache,W=this._cimLayer.materialHash;if(!W)return xe.error("A Dynamic mesh template must have a material hash value or function!"),Promise.reject(null);const S="function"==typeof W?W(m,n,s):W;if(_.has(S)){const xt=_.get(S);return Promise.resolve(xt)}const G=this._ongoingMaterialRequestMap.get(S);if(G)return G;const H=this._cimLayer,b=(0,Ce.S)(H.cim,this._cimLayer.materialOverrides);b.mosaicHash=S;const{type:I,url:st}=H,j={cim:b,type:I,mosaicHash:S,url:st,size:null,dashTemplate:null,text:null,fontName:null};switch(I){case"marker":j.size=(0,le.hf)(H.size,m,n,s);break;case"line":j.dashTemplate=H.dashTemplate;break;case"text":j.text=(0,le.hf)(H.text,m,n,s),j.fontName=(0,le.hf)(H.fontName,m,n,s)}const et=r.getMosaicItem(j,l).then(xt=>(c||(this._ongoingMaterialRequestMap.delete(S),_.set(S,xt)),xt)).catch(xt=>(this._ongoingMaterialRequestMap.delete(S),xe.error(".analyze()",xt.message),null));return c||this._ongoingMaterialRequestMap.set(S,et),et}}var At=u(84450);class he extends(pe(ee)){constructor(r,i,n){var s;if(super(r),this._minMaxZoom=(0,J.UJ)(Math.round(i*C.MI),Math.round(n*C.MI)),(0,y.mf)(r.color))this._dynamicPropertyMap.set("fillColor",(et,xt,Wt)=>{const zt=r.color(et,xt,Wt);return zt&&(0,q.t2)(zt)||0});else{const j=r.color;this.fillColor=j&&(0,q.t2)(j)||0}let l=0;(0,y.mf)(r.height)||(l=r.height||0);const c="CIMMarkerPlacementInsidePolygon"===(null==(s=r.cim.placement)?void 0:s.type)&&r.cim.placement.shiftOddRows?2:1;this._dynamicPropertyMap.set("_height",(j,et,xt)=>(0,y.mf)(r.height)?r.height(j,et,xt)*c:l*c);let _=0;(0,y.mf)(r.offsetX)||(_=(0,T.F2)(r.offsetX||0)+128,_>255&&(_=255)),this._dynamicPropertyMap.set("_offsetX",(j,et,xt)=>{if((0,y.mf)(r.offsetX)){let Wt=(0,T.F2)(r.offsetX(j,et,xt))+128;return Wt>255&&(Wt=255),Wt}return _});let S=1;(0,y.mf)(r.scaleX)||(S=r.scaleX||1),this._dynamicPropertyMap.set("_scaleX",(j,et,xt)=>(0,y.mf)(r.scaleX)?r.scaleX(j,et,xt):S);let H=0;(0,y.mf)(r.offsetY)||(H=(0,T.F2)(-r.offsetY||0)+128,H>255&&(H=255)),this._dynamicPropertyMap.set("_offsetY",(j,et,xt)=>{if((0,y.mf)(r.offsetY)){let Wt=(0,T.F2)(-r.offsetY(j,et,xt))+128;return Wt>255&&(Wt=255),Wt}return H});let I=0;(0,y.mf)(r.angle)||(I=(0,vt.Or)(r.angle)||0),this._dynamicPropertyMap.set("_angle",(j,et,xt)=>(0,y.mf)(r.angle)?(0,vt.Or)(r.angle(j,et,xt)):I),this._effects=r.effects,this._cimFillLayer=r,this._fillMaterialKey=rt.dk.load(r.materialKey)}static fromCIMFill(r,i){const[n,s]=(0,y._f)(r.scaleInfo,i);return new he(r,n,s)}bindFeature(r,i,n){const s=r.readLegacyFeature();this._dynamicPropertyMap.forEach((S,G)=>{this[G]=S(s,i,n)});const l=this._fillMaterialKey,c=this._materialCache,m=(0,this._cimFillLayer.materialHash)(s,i,n),_=c.get(m);let W=null;if(_&&(0,At.ok)(_.spriteMosaicItem)&&(W=_.spriteMosaicItem),W){const{rect:S,width:G,height:H}=W,b=S.x+C.fL,I=S.y+C.fL,st=b+G,j=I+H;let et=Math.round((0,T.F2)(this._height));et>255?et=255:et<=0&&(et=j-I);let xt=Math.round((0,T.F2)(this._height/H*G||0));xt>255?xt=255:xt<=0&&(xt=st-b);const Wt=this._scaleX,zt=1;this.tl=(0,J.UJ)(b,I),this.br=(0,J.UJ)(st,j),this.aux2=(0,J.Jz)(xt,et,this._offsetX,this._offsetY),this.aux3=(0,J.Jz)(Wt,zt,this._angle,0),l.sdf=W.sdf,l.pattern=!0,l.textureBinding=W.textureBinding}else this.tl=0,this.br=0,this.aux2=0,this.aux3=0,l.sdf=!1,l.pattern=!1,l.textureBinding=0;this._materialKey=l.data}}class ce extends(Ot(ee)){constructor(r,i,n){super(r),this._minMaxZoom=(0,J.UJ)(Math.round(i*C.MI),Math.round(n*C.MI)),this._cimLineLayer=r;let s=0;if((0,y.mf)(r.width)||(s=.5*(0,T.F2)(r.width)),this._dynamicPropertyMap.set("_halfWidth",(c,m,_)=>(0,y.mf)(r.width)?.5*(0,T.F2)(r.width(c,m,_)):s),(0,y.mf)(r.cap)?this._dynamicPropertyMap.set("_capType",r.cap):this._capType=r.cap,(0,y.mf)(r.join)?this._dynamicPropertyMap.set("_joinType",r.join):this._joinType=r.join,(0,y.mf)(r.color))this._dynamicPropertyMap.set("_fillColor",(m,_,W)=>{const S=r.color(m,_,W);return S&&(0,q.t2)(S)||0});else{const c=r.color;this._fillColor=c&&(0,q.t2)(c)||0}(0,y.mf)(r.miterLimit)?this._dynamicPropertyMap.set("_miterLimitCosine",(m,_,W)=>(0,y.NW)(r.miterLimit(m,_,W))):this._miterLimitCosine=(0,y.NW)(r.miterLimit),this._scaleFactor=r.scaleFactor||1,this._isDashed=null!=r.dashTemplate,this._effects=r.effects,this.tessellationProperties._bitset=(r.colorLocked?1:0)|(r.scaleDash?1:0)<<1,this._materialKey=r.materialKey,this._initializeTessellator(!0)}static fromCIMLine(r,i){const[n,s]=(0,y._f)(r.scaleInfo,i);return new ce(r,n,s)}bindFeature(r,i,n){const s=r.readLegacyFeature();this._dynamicPropertyMap.forEach((S,G)=>{this[G]=S(s,i,n)}),this._halfWidth*=this._scaleFactor;const l=this._materialCache,c=(0,this._cimLineLayer.materialHash)(s,i,n),m=l.get(c);let _=null;if(m&&(0,At.ok)(m.spriteMosaicItem)&&(_=m.spriteMosaicItem),_){this._hasPattern=!0;const{rect:S,width:G,height:H}=_,b=S.x+C.fL,I=S.y+C.fL,st=b+G,j=I+H;this.tessellationProperties._tl=(0,J.UJ)(b,I),this.tessellationProperties._br=(0,J.UJ)(st,j)}else this._hasPattern=!1,this.tessellationProperties._tl=0,this.tessellationProperties._br=0;this.tessellationProperties._fillColor=this._fillColor,this.tessellationProperties._halfWidth=this._halfWidth,this.tessellationProperties.offset=0,this.tessellationProperties._halfReferenceWidth=this.tessellationProperties._halfWidth;const W=rt.a.load(this._materialKey);_&&(W.sdf=_.sdf,W.pattern=!0,W.textureBinding=_.textureBinding),this._materialKey=W.data}}var be=u(12225),we=u(9545),De=u(88337);const Oe=(0,we.c)(),Fe=(0,be.c)(),Be=lt.Z.getLogger("esri.views.2d.engine.webgl.WGLDynamicMarkerTemplate");class ue extends((0,De.Z)(ee)){constructor(r,i,n){super(r),this._cimMarkerLayer=r,this._minMaxZoom=(0,J.UJ)(Math.round(i*C.MI),Math.round(n*C.MI)),(0,y.mf)(r.color)?this._dynamicPropertyMap.set("_fillColor",(l,c,m)=>(0,q.t2)(r.color(l,c,m))):this._fillColor=(0,q.t2)(r.color),(0,y.mf)(r.outlineColor)?this._dynamicPropertyMap.set("_outlineColor",(l,c,m)=>(0,q.t2)(r.outlineColor(l,c,m))):this._outlineColor=(0,q.t2)(r.outlineColor),(0,y.mf)(r.size)?this._dynamicPropertyMap.set("_size",(l,c,m)=>(0,T.F2)(r.size(l,c,m))):this._size=(0,T.F2)(r.size)||0,(0,y.mf)(r.scaleX)?this._dynamicPropertyMap.set("_scaleX",r.scaleX):this._scaleX=r.scaleX||1,(0,y.mf)(r.offsetX)?this._dynamicPropertyMap.set("xOffset",(l,c,m)=>(0,T.F2)(r.offsetX(l,c,m))):this.xOffset=(0,T.F2)(r.offsetX)||0,(0,y.mf)(r.offsetY)?this._dynamicPropertyMap.set("yOffset",(l,c,m)=>(0,T.F2)(r.offsetY(l,c,m))):this.yOffset=(0,T.F2)(r.offsetY)||0,(0,y.mf)(r.outlineWidth)?this._dynamicPropertyMap.set("_outlineWidth",(l,c,m)=>(0,T.F2)(r.outlineWidth(l,c,m))):this._outlineWidth=(0,T.F2)(r.outlineWidth)||0,(0,y.mf)(r.rotation)?this._dynamicPropertyMap.set("_angle",r.rotation):this._angle=r.rotation||0,this._scaleFactor=(0,d.Pt)(r.scaleFactor,1),this._markerPlacement=r.markerPlacement,this._effects=r.effects,this._bitSet=(1===r.alignment?1:0)|(r.colorLocked?1:0)<<1|(r.scaleSymbolsProportionally?1:0)<<3,this._materialKey=r.materialKey}static fromCIMMarker(r,i){const[n,s]=(0,y._f)(r.scaleInfo,i);return new ue(r,n,s)}bindFeature(r,i,n){const s=r.readLegacyFeature();this._dynamicPropertyMap.forEach((ke,Ne)=>{this[Ne]=ke(s,i,n)});const l=this._cimMarkerLayer.materialHash,c="function"==typeof l?l(s,i,n):l,m=this._materialCache.get(c);if(!m||!(0,At.ok)(m.spriteMosaicItem)||!m.spriteMosaicItem)return void Be.error(new nt.Z("mapview-cim","Encountered an error when binding feature"));const _=m.spriteMosaicItem,W=this._cimMarkerLayer.sizeRatio,S=_.width/_.height*this._scaleX,G=this._cimMarkerLayer.rotateClockwise?this._angle:-this._angle;let H=this._size,b=H*S;const I=this.xOffset,st=this.yOffset;this.xOffset*=this._scaleFactor,this.yOffset*=this._scaleFactor;const j=this._cimMarkerLayer.scaleSymbolsProportionally&&this._cimMarkerLayer.frameHeight?this._size/(0,T.F2)(this._cimMarkerLayer.frameHeight):1,et=this._outlineWidth*j,xt=(0,T.F2)(this._cimMarkerLayer.referenceSize);let Wt=0,zt=0;const Ut=this._cimMarkerLayer.anchorPoint;Ut&&(this._cimMarkerLayer.isAbsoluteAnchorPoint?this._size&&(Wt=-Ut.x/(this._size*S),zt=Ut.y/this._size):(Wt=Ut.x,zt=Ut.y)),this._sizeOutlineWidth=(0,J.Jz)(Math.round(Math.min(Math.sqrt(128*b),255)),Math.round(Math.min(Math.sqrt(128*H),255)),Math.round(Math.min(Math.sqrt(128*et),255)),Math.round(Math.min(Math.sqrt(128*xt),255))),this.angle=G;const Yt=Math.round(64*W);this._bitestAndDistRatio=(0,J.UJ)(this._bitSet,Yt);const $t=_.rect.x+C.fL,Qt=_.rect.y+C.fL,ne=$t+_.width,Te=Qt+_.height;this._texUpperLeft=(0,J.UJ)($t,Qt),this._texUpperRight=(0,J.UJ)(ne,Qt),this._texBottomLeft=(0,J.UJ)($t,Te),this._texBottomRight=(0,J.UJ)(ne,Te);const oe=rt.mE.load(this._materialKey);oe.sdf=_.sdf,oe.pattern=!0,oe.textureBinding=_.textureBinding,this._materialKey=oe.data,this._anchorX=.5-(.5+Wt)*_.width/_.width,this._anchorY=.5-(.5+zt)*_.height/_.height,b*=W,H*=W,b*=this._scaleFactor,H*=this._scaleFactor,b*=_.rect.width/_.width,H*=_.rect.height/_.height,this._computedWidth=b,this._computedHeight=H,this._applyTransformation(Fe,Oe),this.xOffset=I,this.yOffset=st}}var ye=u(61261),Re=u(44526),ge=u(32954);class fe extends((0,Re.Z)(ee)){constructor(r,i,n){super(r),this._horizontalAlignment="center",this._verticalAlignment="middle",this._textToGlyphs=new Map,this._minMaxZoom=(0,J.UJ)(Math.round(i*C.MI),Math.round(n*C.MI));const s=r.scaleFactor||1;let l,m,W;this._cimTextLayer=r,(0,y.mf)(r.color)?this._dynamicPropertyMap.set("_color",(I,st,j)=>(0,q.t2)(r.color(I,st,j))):this._color=(0,q.t2)(r.color),(0,y.mf)(r.color)?this._dynamicPropertyMap.set("_haloColor",(I,st,j)=>(0,q.t2)(r.outlineColor(I,st,j))):this._haloColor=(0,q.t2)(r.outlineColor),(0,y.mf)(r.size)||(l=Math.min(Math.round((0,T.F2)(r.size*r.sizeRatio)),127)),this._dynamicPropertyMap.set("_size",(b,I,st)=>(0,y.mf)(r.size)?Math.min(Math.round((0,T.F2)(r.size(b,I,st)*r.sizeRatio)),127):l),(0,y.mf)(r.outlineSize)?this._dynamicPropertyMap.set("_haloSize",(I,st,j)=>Math.min(Math.floor(5*(0,T.F2)(r.outlineSize(I,st,j)*r.sizeRatio)),127)):this._haloSize=Math.min(Math.floor(5*(0,T.F2)(r.outlineSize*r.sizeRatio)),127),(0,y.mf)(r.offsetX)||(m=Math.round((0,T.F2)(r.offsetX*r.sizeRatio))),this._dynamicPropertyMap.set("_xOffset",(b,I,st)=>(0,y.mf)(r.offsetX)?Math.round((0,T.F2)(r.offsetX(b,I,st)*r.sizeRatio)):m),(0,y.mf)(r.offsetY)||(W=Math.round((0,T.F2)(r.offsetY*r.sizeRatio))),this._dynamicPropertyMap.set("_yOffset",(b,I,st)=>(0,y.mf)(r.offsetY)?Math.round((0,T.F2)(r.offsetY(b,I,st)*r.sizeRatio)):W),(0,y.mf)(r.angle)?this._dynamicPropertyMap.set("_angle",r.angle):this._angle=r.angle,(0,y.mf)(r.horizontalAlignment)?this._dynamicPropertyMap.set("_horizontalAlignment",r.horizontalAlignment):this._horizontalAlignment=r.horizontalAlignment,(0,y.mf)(r.verticalAlignment)?this._dynamicPropertyMap.set("_verticalAlignment",r.verticalAlignment):this._verticalAlignment=r.verticalAlignment,this._scaleFactor=s,(0,y.mf)(r.text)?this._dynamicPropertyMap.set("_text",r.text):this._text=r.text;const G=Math.min(Math.round((0,T.F2)(r.referenceSize*r.sizeRatio)),127);this._referenceSize=Math.round(Math.sqrt(256*G)),this._materialKey=r.materialKey;const H=rt.qr.load(this._materialKey);H.sdf=!0,this._bitset=(1===r.alignment?1:0)|(r.colorLocked?1:0)<<1,this._materialKey=H.data,this._decoration="none",this._lineHeight=1,this._lineWidth=512,this._textPlacement=r.markerPlacement,this._effects=r.effects,this._isCIM=!0}static fromCIMText(r,i){const[n,s]=(0,y._f)(r.scaleInfo,i);return new fe(r,n,s)}analyze(r,i,n,s){var l=()=>super.analyze,c=this;return(0,Y.Z)(function*(){const m=i.readLegacyFeature(),_=function Ae(a,r,i,n){return"string"==typeof a.text?a.text:"function"==typeof a.text?a.text(r,i,n):""}(c._cimTextLayer,m,n,s),W=yield l().call(c,r,i,n,s,(0,ge._)(_));return W&&W.glyphMosaicItems&&c._textToGlyphs.set(_,W.glyphMosaicItems),W})()}bindFeature(r,i,n){const s=r.readLegacyFeature();if(this._dynamicPropertyMap.forEach((c,m)=>{this[m]=c(s,i,n)}),!this._text||0===this._text.length)return void(this._shapingInfo=null);this._size*=this._scaleFactor,this._scale=this._size/C.Ex,this._xOffset*=this._scaleFactor,this._yOffset*=this._scaleFactor,this._xAlignD=(0,ye.kH)(this._horizontalAlignment||"center"),this._yAlignD=(0,ye.b7)(this._verticalAlignment||"baseline");const l=this._textToGlyphs.get(this._text);this.bindTextInfo(l,!1)}}const Vt=128;class Xt extends(pe(ae.Z)){constructor(r,i,n,s,l,c,m,_,W,S,G,H,b,I,st,j){super(),this._effects=I;const et=rt.dk.load(r);i&&(et.sdf=i.sdf,et.pattern=!0,et.textureBinding=i.textureBinding),this.fillColor=n,this.tl=s,this.br=l,this.aux2=(0,J.Jz)(c,m,_,W),this.aux3=(0,J.Jz)(S,G,H,0),this._bitset=b,this._minMaxZoom=(0,J.UJ)(Math.round(st*C.MI),Math.round(j*C.MI)),this._materialKey=et.data}static fromCIMFill(r,i,n){const s=r.color,l=s&&(0,q.t2)(s)||0,c=r.materialKey,[m,_]=(0,y._f)(r.scaleInfo,n);if(!i)return new Xt(c,null,l,0,0,0,0,0,0,0,0,0,r.colorLocked?1:0,r.effects,m,_);const{rect:W,width:S,height:G}=i,b=W.x+C.fL,I=W.y+C.fL,st=b+S,j=I+G,et=r.height,xt=(r.scaleX||1)*et;let Wt=Math.round(et);Wt>255?Wt=255:Wt<=0&&(Wt=j-I);let zt=Math.round(xt);zt>255?zt=255:zt<=0&&(zt=st-b);let Ut=(0,T.F2)(r.offsetX||0)+Vt;Ut>255&&(Ut=255);let Yt=(0,T.F2)(-r.offsetY||0)+Vt;Yt>255&&(Yt=255);const $t=(0,J.UJ)(b,I),Qt=(0,J.UJ)(st,j);return new Xt(c,i,l,$t,Qt,zt,Wt,Ut,Yt,Vt,Vt,(0,vt.s5)(r.angle),r.colorLocked?1:0,r.effects,m,_)}static fromSimpleFill(r,i,n=!1){const{color:s}=r,l=s&&"esriSFSNull"!==r.style&&(0,q.aH)(s)||0,c=n?C.Uh:0,m=r.materialKey;let _;if(i){const{rect:W,width:S,height:G}=i,H=W.x+C.fL,b=W.y+C.fL,I=H+S,st=b+G,j=(0,J.UJ)(H,b),et=(0,J.UJ)(I,st);_=new Xt(m,i,l,j,et,S,G,0,0,Vt,Vt,0,c,null,y.Xe,y.eW)}else _=new Xt(m,null,l,0,0,0,0,0,0,0,0,0,c,null,y.Xe,y.eW);return _._maybeAddLineTemplate(r),_}static fromPictureFill(r,i,n=!1){const s=C.ru,{rect:l,width:c,height:m}=i,_=l.x+C.fL,W=l.y+C.fL,S=_+c,G=W+m,H=(0,J.UJ)(_,W),b=(0,J.UJ)(S,G);let I=Math.round((0,T.F2)(r.width));I>255&&(I=255);let st=Math.round((0,T.F2)(r.height));st>255&&(st=255);let j=(0,T.F2)(r.xoffset)+Vt;j>255&&(j=255);let et=(0,T.F2)(-r.yoffset)+Vt;et>255&&(et=255);const zt=new Xt(r.materialKey,i,s,H,b,I,st,j,et,Vt*r.xscale,Vt*r.yscale,0,n?C.Uh:0,null,y.Xe,y.eW);return zt._maybeAddLineTemplate(r),zt}}var ie=u(18752),Me=u(51919);class Ue{constructor(){this._resolver=null}isHeld(){return!!this._resolver}acquire(){var r=this;return(0,Y.Z)(function*(){if(!r._resolver)return r._resolver=(0,O.hh)(),Promise.resolve();yield r._resolver.promise,yield r.acquire()})()}release(){const r=this._resolver;this._resolver=null,r.resolve()}}function de(){return(de=(0,Y.Z)(function*(a,r,i){try{yield a.acquire(),yield r(i),a.release()}catch(n){throw a.release(),n}})).apply(this,arguments)}var se=u(11263);const Bt=lt.Z.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLTemplateStore"),Le=new Array,me={isOutline:!1,isOutlinedFill:!1,placement:null,stride:{fill:"default"},vvFlags:0},Ke=te(qt({},Z.eG),{hash:JSON.stringify(Z.eG),materialKey:(0,rt.jj)(N.LW.MARKER,me)}),Ge=te(qt({},Z.wW),{hash:JSON.stringify(Z.wW),materialKey:(0,rt.jj)(N.LW.LINE,me)}),Ve=te(qt({},Z.lj),{hash:JSON.stringify(Z.lj),materialKey:(0,rt.jj)(N.LW.FILL,me)});function kt(a,r){const i=a.length;return a.push(null),r.then(n=>a[i]=n),a}function We(a){return!!(1&a)}class Je{constructor(r,i){this._idCounter=1,this._templateIdCounter=1,this._idToTemplateGroup=new Map,this._symbolToTemplate=new Map,this._fetchQueue=[],this._idToResolver=new Map,this._cimTemplateCache=new Map,this._cimAnalyses=[],this._lock=new Ue,this._fetchResource=r,this._tileInfo=i}get _markerError(){return this._errorTemplates.marker[0]}get _fillError(){return this._errorTemplates.fill[0]}get _lineError(){return this._errorTemplates.line[0]}get _textError(){return this._errorTemplates.line[0]}createTemplateGroup(r,i){this._initErrorTemplates();const n=r.hash;if(this._symbolToTemplate.has(n))return this._symbolToTemplate.get(n);const s=new Array;i&&this._createMeshTemplates(s,i,!0),this._createMeshTemplates(s,r,!1);const l=this._createGroupId("expanded-cim"===r.type&&Xe(r));return this._idToTemplateGroup.set(l,s),this._symbolToTemplate.set(n,l),l}getTemplateGroup(r){return this._idToTemplateGroup.has(r)?this._idToTemplateGroup.get(r):Le}getDynamicTemplateGroup(r){return this._idToTemplateGroup.has(r)?(We(r)||Bt.error("mapview-template-store",`Id ${r} does not refer to a dynamic template`),this._idToTemplateGroup.get(r)):Le}getMosaicItem(r,i){const n=this._createTemplateId(),s=new Promise(l=>this._idToResolver.set(n,l));return this._fetchQueue.push({symbol:r,id:n,glyphIds:i}),s}finalize(r){return this._fetchQueue.length||this._lock.isHeld()?function Ze(a,r,i){return de.apply(this,arguments)}(this._lock,this._fetchAllQueuedResources.bind(this),r):Promise.resolve()}_initErrorTemplates(){this._errorTemplates||(this._errorTemplates={fill:this._createMeshTemplates([],Ve,!1),marker:this._createMeshTemplates([],Ke,!1),line:this._createMeshTemplates([],Ge,!1)})}_fetchAllQueuedResources(r){if(!this._fetchQueue.length)return Promise.resolve();const i=this._fetchQueue,n=this._cimAnalyses;return this._fetchQueue=[],this._cimAnalyses=[],Promise.all(n).then(()=>this._fetchResource(i,r).then(s=>{for(const{id:l,mosaicItem:c}of s)this._idToResolver.get(l)(c),this._idToResolver.delete(l)})).catch(s=>{(0,O.D_)(s)?this._fetchQueue=this._fetchQueue.concat(i):function je(a){return"worker:port-closed"===a.name}(s)||Bt.error(new nt.Z("mapview-template-store","Unable to fetch requested texture resources",s))})}_createGroupId(r){return this._idCounter++<<1|(r?1:0)}_createTemplateId(){return this._templateIdCounter++}_createSMS(r){var i=this;return(0,Y.Z)(function*(){const{spriteMosaicItem:n}=yield i.getMosaicItem(r);return(0,At.ok)(n,Bt)?ie.Z.fromSimpleMarker(r,n):i._markerError})()}_createPMS(r){var i=this;return(0,Y.Z)(function*(){const{spriteMosaicItem:n}=yield i.getMosaicItem(r);return(0,At.ok)(n,Bt)?ie.Z.fromPictureMarker(r,n):i._markerError})()}_createSFS(r,i){var n=this;return(0,Y.Z)(function*(){const{spriteMosaicItem:s}=yield n.getMosaicItem(r);return(0,At.ok)(s,Bt)?Xt.fromSimpleFill(r,s,i):n._fillError})()}_createPFS(r,i){var n=this;return(0,Y.Z)(function*(){const{spriteMosaicItem:s}=yield n.getMosaicItem(r);return(0,At.ok)(s,Bt)?Xt.fromPictureFill(r,s,i):n._fillError})()}_createSLS(r,i){var n=this;return(0,Y.Z)(function*(){const{spriteMosaicItem:s}=yield n.getMosaicItem(r);return(0,At.ok)(s,Bt)?Jt.fromSimpleLine(r,s):n._lineError})()}_createLMS(r){var i=this;return(0,Y.Z)(function*(){const{spriteMosaicItem:n}=yield i.getMosaicItem(r);return(0,At.ok)(n,Bt)?ie.Z.fromLineSymbolMarker(r,n):i._markerError})()}_createTS(r){var i=this;return(0,Y.Z)(function*(){const{glyphMosaicItems:n}=yield i.getMosaicItem(r);return Me.Z.fromText(r,n)})()}_createCIMText(r){var i=this;return(0,Y.Z)(function*(){const{glyphMosaicItems:n}=yield i.getMosaicItem((0,se.xS)(r),(0,ge._)(r.text));return(0,At.ok)(n,Bt)?Me.Z.fromCIMText(r,n,i._tileInfo):i._textError})()}_createCIMFill(r){var i=this;return(0,Y.Z)(function*(){const{spriteMosaicItem:n}=yield i.getMosaicItem((0,se.xS)(r));return(0,At.ok)(n,Bt)?Xt.fromCIMFill(r,n,i._tileInfo):i._fillError})()}_createCIMLine(r){var i=this;return(0,Y.Z)(function*(){const{spriteMosaicItem:n}=yield i.getMosaicItem((0,se.xS)(r));return(0,At.ok)(n,Bt)?Jt.fromCIMLine(r,n,i._tileInfo):i._lineError})()}_createCIMMarker(r){var i=this;return(0,Y.Z)(function*(){const{spriteMosaicItem:n}=yield i.getMosaicItem((0,se.xS)(r));return(0,At.ok)(n,Bt)?ie.Z.fromCIMMarker(r,n,i._tileInfo):i._markerError})()}_createCIM(r){var i=this;return(0,Y.Z)(function*(){const n=r.templateHash;if(i._cimTemplateCache.has(n))return i._cimTemplateCache.get(n);let s;switch(r.type){case"marker":s=i._createCIMMarker(r);break;case"line":s=i._createCIMLine(r);break;case"fill":s=i._createCIMFill(r);break;case"text":s=i._createCIMText(r)}return s.then(l=>i._cimTemplateCache.set(n,l)),s})()}_createDynamicCIM(r){const i=r.templateHash;if(this._cimTemplateCache.has(i))return this._cimTemplateCache.get(i);let n;switch(r.type){case"marker":n=ue.fromCIMMarker(r,this._tileInfo);break;case"line":n=ce.fromCIMLine(r,this._tileInfo);break;case"fill":n=he.fromCIMFill(r,this._tileInfo);break;case"text":n=fe.fromCIMText(r,this._tileInfo)}return this._cimTemplateCache.set(i,n),n}_createPrimitiveMeshTemplates(r,i,n){switch(i.type){case"esriSMS":return kt(r,this._createSMS(i));case"esriPMS":return kt(r,this._createPMS(i));case"esriSFS":return kt(r,this._createSFS(i,n));case"line-marker":return kt(r,this._createLMS(i));case"esriPFS":return kt(r,this._createPFS(i,n));case"esriSLS":return kt(r,this._createSLS(i,!1));case"esriTS":return kt(r,this._createTS(i));default:return Bt.error("Unable to create mesh template for unknown symbol type {: $ }{symbol.type}"),r}}_createMeshTemplates(r,i,n){if(-1!==i.type.indexOf("3d"))return Bt.error("3D symbols are not supported with MapView"),r;if("expanded-cim"===i.type){for(const s of i.layers)"function"==typeof s.materialHash?r.push(this._createDynamicCIM(s)):kt(r,this._createCIM(s));return r}if("composite-symbol"===i.type){for(const s of i.layers)this._createPrimitiveMeshTemplates(r,s,n);return r}return"cim"===i.type||"label"===i.type||"web-style"===i.type?r:this._createPrimitiveMeshTemplates(r,i,n)}}const Xe=a=>{if(!a.layers)return!1;for(const r of a.layers)if("function"==typeof r.materialHash)return!0;return!1}},51919:(Pt,mt,u)=>{u.d(mt,{Z:()=>J});var Y=u(986),nt=u(23841),lt=u(61261),O=u(81295),Z=u(39351),N=u(5254),rt=u(18716),T=u(50114),q=u(44526),C=u(94358);class J extends((0,q.Z)(C.Z)){constructor(d,f,g,K,$,X,A,tt,ht,M,F,L,P,R,z,ot,ut,pt,v=!1,U,V){super(),this._xOffset=(0,nt.F2)(P),this._yOffset=(0,nt.F2)(R),this._decoration=M||"none",this._color=$,this._haloColor=X,this._haloSize=Math.min(Math.floor(5*(0,nt.F2)((0,nt.t_)(g))),127),this._size=Math.min(Math.round((0,nt.F2)(f)),127);const it=Math.min(Math.round((0,nt.F2)(K||f)),127);this._referenceSize=Math.round(Math.sqrt(256*it)),this._scale=this._size/Z.Ex,this._angle=L,this._justify=(0,lt.Hd)(A||"center"),this._xAlignD=(0,lt.kH)(A||"center"),this._yAlignD=(0,lt.b7)(tt||"baseline"),this._baseline="baseline"===(tt||"baseline"),this._bitset=(1===ht?1:0)|(F?1:0)<<1;const at=rt.m2.load(d);at.sdf=!0,this._materialKey=at.data,this._lineWidth=(0,nt.F2)(z)||512,this._lineHeight=ot||1,this._textPlacement=ut,this._effects=pt,this._isCIM=v,this._minMaxZoom=(0,N.UJ)(Math.round(U*Z.MI),Math.round(V*Z.MI))}static fromText(d,f){const g=new J(d.materialKey,d.font.size,d.haloSize||0,d.font.size,d.color&&(0,O.aH)(d.color)||0,d.haloColor&&(0,O.aH)(d.haloColor)||0,d.horizontalAlignment,d.verticalAlignment,0,d.font.decoration,!1,d.angle||0,d.xoffset,d.yoffset,d.lineWidth,d.lineHeight,null,null,!1,T.Xe,T.eW),[,K]=(0,Y.E)(d.text);return g.bindTextInfo(f,K),g._vertexBoundsScale=d.maxVVSize?d.maxVVSize/d.font.size:1,g}static fromCIMText(d,f,g){const K=d.scaleFactor||1,$=d.size*d.sizeRatio*K,[X,A]=(0,T._f)(d.scaleInfo,g),tt=new J(d.materialKey,$,d.outlineSize*d.sizeRatio,d.referenceSize,(0,O.t2)(d.color),(0,O.t2)(d.outlineColor),d.horizontalAlignment,d.verticalAlignment,d.alignment,d.decoration,d.colorLocked,d.angle,d.offsetX*d.sizeRatio*K,d.offsetY*d.sizeRatio*K,512,1,d.markerPlacement,d.effects,!0,X,A),[,ht]=(0,Y.E)(d.text);return tt.bindTextInfo(f,ht),tt._vertexBoundsScale=d.maxVVSize?d.maxVVSize/$:1,tt}}},50114:(Pt,mt,u)=>{u.d(mt,{eW:()=>nt,Xe:()=>Y,TK:()=>N,NW:()=>T,_f:()=>d,mf:()=>rt,Fv:()=>Z,lu:()=>lt});const Y=0,nt=100;function lt(f,g,K){return f[0]=g[0]-K[0],f[1]=g[1]-K[1],f}function O(f,g){return Math.sqrt(f*f+g*g)}function Z(f){const g=O(f[0],f[1]);f[0]/=g,f[1]/=g}function N(f,g){return O(f[0]-g[0],f[1]-g[1])}function rt(f){return"function"==typeof f}function T(f=2){return 1/Math.max(f,1)}function d(f,g){return[!!f.minScale&&g.scaleToZoom(f.minScale)||Y,!!f.maxScale&&g.scaleToZoom(f.maxScale)||nt]}},32940:(Pt,mt,u)=>{u.d(mt,{fL:()=>C});var Y=u(15861),nt=u(26584),lt=u(63290),O=u(93961),Z=u(46679),N=u(80991),rt=u(39236),T=u(11263);const q=lt.Z.getLogger("esri/views/2d/engine/webgl/util/Matcher");function C(ht,M,F,L){return vt.apply(this,arguments)}function vt(){return(vt=(0,Y.Z)(function*(ht,M,F,L){switch(ht.type){case"simple":return J.fromBasicRenderer(ht,M,F,L);case"map":return f.fromUVRenderer(ht,M,F,L);case"interval":return d.fromCBRenderer(ht,M,F,L);case"dictionary":return tt.fromDictionaryRenderer(ht,M,F,L);case"subtype":return y.fromSubtypes(ht,M,F,L)}})).apply(this,arguments)}class J{constructor(){this.type="feature",this._defaultResult=null}static fromBasicRenderer(M,F,L,P){return(0,Y.Z)(function*(){const R=new J;if(M.symbol){const z=yield(0,T.B3)(M.symbol,L,P),ot=F.createTemplateGroup(z,null);R.setDefault(ot)}return R})()}size(){return 1}getDefault(){return this._defaultResult}setDefault(M){this._defaultResult=M}match(M,F,L,P,R){return this.getDefault()}analyze(M,F,L,P,R,z){return(0,Y.Z)(function*(){return null})()}}class y extends J{constructor(M,F){super(),this._subMatchers=M,this._subtypeField=F}static fromSubtypes(M,F,L,P){return(0,Y.Z)(function*(){const R=new Map,z=[];for(const ot in M.renderers){const ut=parseInt(ot,10),pt=C(M.renderers[ot],F,L,P).then(v=>R.set(ut,v));z.push(pt)}return yield Promise.all(z),new y(R,M.subtypeField)})()}match(M,F,L,P,R){const z=F.readAttribute(this._subtypeField),ot=this._subMatchers.get(z);return ot?ot.match(M,F,L,P,R):null}}class d extends J{constructor(M,F,L,P){super(),this.type="interval",this._intervals=[],this._isMaxInclusive=F,this._fieldIndex=P,this._field=M,this._normalizationInfo=L}static fromCBRenderer(M,F,L,P){return(0,Y.Z)(function*(){const{isMaxInclusive:R,normalizationField:z,normalizationTotal:ot,normalizationType:ut}=M,v=new d(M.field,R,{normalizationField:z,normalizationTotal:ot,normalizationType:ut},M.fieldIndex),U=yield(0,T.B3)(M.backgroundFillSymbol,L,P);yield Promise.all(M.intervals.map(function(){var it=(0,Y.Z)(function*(at){const Mt=yield(0,T.B3)(at.symbol,L,P),yt=yield F.createTemplateGroup(Mt,U);v.add({min:at.min,max:at.max},yt)});return function(at){return it.apply(this,arguments)}}()));const V=yield(0,T.B3)(M.defaultSymbol,L,P);if(V){const it=yield F.createTemplateGroup(V,U);v.setDefault(it)}return v})()}add(M,F){this._intervals.push({interval:M,result:F}),this._intervals.sort((L,P)=>L.interval.min-P.interval.min)}size(){return super.size()+this._intervals.length}match(M,F,L,P,R){if(null==this._fieldIndex&&!this._field)return this.getDefault();const z=null!=this._fieldIndex?F.getComputedNumericAtIndex(this._fieldIndex):this._getValueFromField(F);if(!z&&(null==z||isNaN(z)))return this.getDefault();for(let ot=0;ot<this._intervals.length;ot++){const{interval:ut,result:pt}=this._intervals[ot],U=this._isMaxInclusive?z<=ut.max:z<ut.max;if(z>=ut.min&&U)return pt}return this.getDefault()}_needsNormalization(){const M=this._normalizationInfo;return M&&(M.normalizationField||M.normalizationTotal||M.normalizationType)}_getValueFromField(M){const F=M.readAttribute(this._field);if(!this._needsNormalization()||null==F)return F;const{normalizationField:L,normalizationTotal:P,normalizationType:R}=this._normalizationInfo,z=!!L&&M.readAttribute(L);if(R)switch(R){case"esriNormalizeByField":return z?F/z:void 0;case"esriNormalizeByLog":return Math.log(F)*Math.LOG10E;case"esriNormalizeByPercentOfTotal":return F/P*100;default:return void q.error(`Found unknown normalization type: ${R}`)}else q.error("Normalization is required, but no type was set!")}}class f extends J{constructor(M,F,L){super(),this.type="map",this._nullResult=null,this._resultsMap=new Map,this._fieldsIndex=L,this._fields=M,this._seperator=F||""}static fromUVRenderer(M,F,L,P){return(0,Y.Z)(function*(){const R=M.fieldDelimiter,z=[M.field];M.field2&&z.push(M.field2),M.field3&&z.push(M.field3);const ot=yield(0,T.B3)(M.backgroundFillSymbol,L,P),ut=new f(z,R,M.fieldIndex);yield Promise.all(M.map.map(function(){var v=(0,Y.Z)(function*(U){const V=yield(0,T.B3)(U.symbol,L,P),it=yield F.createTemplateGroup(V,ot);"<Null>"===U.value?ut.setNullResult(it):ut.add(U.value,it)});return function(U){return v.apply(this,arguments)}}()));const pt=yield(0,T.B3)(M.defaultSymbol,L,P);if(pt){const v=yield F.createTemplateGroup(pt,ot);ut.setDefault(v)}return ut})()}setNullResult(M){this._nullResult=M}add(M,F){this._resultsMap.set(M.toString(),F)}size(){return super.size()+this._resultsMap.size}match(M,F,L,P,R){if(null==this._fieldsIndex&&!this._fields)return this.getDefault();const z=null!=this._fieldsIndex?F.getComputedStringAtIndex(this._fieldsIndex):this._getValueFromFields(F);if(null!==this._nullResult&&(null==z||""===z||"<Null>"===z))return this._nullResult;if(!z&&null==z)return this.getDefault();const ot=z.toString();return this._resultsMap.has(ot)?this._resultsMap.get(ot):this.getDefault()}_getValueFromFields(M){const F=[];for(const L of this._fields){const P=M.readAttribute(L);F.push(null==P||""===P?"<Null>":P)}return F.join(this._seperator)}}function K(){return(K=(0,Y.Z)(function*(ht,M){const F=ht||1;if("number"==typeof F)return(P,R,z)=>F;const L=yield(0,Z.Yi)(F,M.spatialReference,M.fields);return(P,R,z)=>(0,rt.Z)(L,P,{$view:z},M.geometryType,R)||1})).apply(this,arguments)}let $;function X(){return A.apply(this,arguments)}function A(){return(A=(0,Y.Z)(function*(){return $||($=u.e(3997).then(u.bind(u,23997))),$})).apply(this,arguments)}class tt extends J{constructor(M,F,L,P,R){super(),this.type="dictionary",this._groupIdCache=new O.Z(100),this._renderer=M,this._fieldMap=M.fieldMap,this._symbolFields=M.getSymbolFields(),this._templates=F,this._info=L,this._scaleFn=P,this._schemaUtilsModule=R}static fromDictionaryRenderer(M,F,L,P){return(0,Y.Z)(function*(){const[{default:R},z]=yield Promise.all([Promise.resolve().then(u.bind(u,49067)),X()]),ot=R.fromJSON(M.renderer);yield ot.fetchResources({spatialReference:L.spatialReference,fields:L.fields});const ut=yield function g(ht,M){return K.apply(this,arguments)}(ot.scaleExpression,L);return new tt(ot,F,L,ut,z)})()}_analyzeFeature(M,F,L,P,R){var z=this;return(0,Y.Z)(function*(){const ot=M.readLegacyFeature(),ut=z._scaleFn(ot,L,P),pt=z._attributeHash(ot)+"-"+ut,v=z._groupIdCache.get(pt);if(v)return v;const U=te(qt({},P),{spatialReference:z._info.spatialReference,abortOptions:R,fields:z._info.fields}),V=yield z._renderer.getSymbolAsync(ot,U),it=z._schemaUtilsModule.createSymbolSchema(V,z._renderer),at=(0,T.B3)(it,z._info,F,R).then(Mt=>{if("expanded-cim"!==Mt.type)return q.error(new nt.Z("mapview-bad-type",`Found unexpected type ${Mt.type} in dictionary response`)),null;Mt.hash+="-"+ut;for(const yt of Mt.layers)yt.scaleFactor=ut,yt.templateHash+="-"+ut,"text"===yt.type&&"string"==typeof yt.text&&yt.text.indexOf("[")>-1&&(yt.text=(0,N.Qs)(z._fieldMap,yt.text,yt.cim.textCase));return z._templates.createTemplateGroup(Mt,null)});return z._groupIdCache.put(pt,at,1),at})()}analyze(M,F,L,P,R,z){var ot=this;return(0,Y.Z)(function*(){const ut=F.getCursor(),pt=[];for(;ut.next();)pt.push(ot._analyzeFeature(ut,L,P,R,z));return Promise.all(pt)})()}match(M,F,L,P,R){return null}_attributeHash(M){let F="";for(const L of this._symbolFields){const P=this._fieldMap[L];P&&(F+=M.attributes[P]+"-")}return F}}},84450:(Pt,mt,u)=>{u.d(mt,{ok:()=>nt});var Y=u(26584);function nt(lt,O){if(lt&&"name"in lt){const Z=lt;return O&&O.error(new Y.Z(Z.name,Z.message,Z.details)),!1}return!0}},75734:(Pt,mt,u)=>{u.d(mt,{Z:()=>nt});class nt{constructor(O,Z){this._pos=0;const N=Z?this._roundToNearest(Z,O.BYTES_PER_ELEMENT):40;this._array=new ArrayBuffer(N),this._buffer=new O(this._array),this._ctor=O,this._i16View=new Int16Array(this._array)}get length(){return this._pos}_roundToNearest(O,Z){const N=Math.round(O);return N+(Z-N%Z)}_ensureSize(O){if(this._pos+O>=this._buffer.length){const Z=this._roundToNearest(1.25*(this._array.byteLength+O*this._buffer.BYTES_PER_ELEMENT),this._buffer.BYTES_PER_ELEMENT),N=new ArrayBuffer(Z),rt=new this._ctor(N);rt.set(this._buffer,0),this._array=N,this._buffer=rt,this._i16View=new Int16Array(this._array)}}ensureSize(O){this._ensureSize(O)}writeF32(O){this._ensureSize(1);const Z=this._pos;return new Float32Array(this._array,4*this._pos,1)[0]=O,this._pos++,Z}push(O){this._ensureSize(1);const Z=this._pos;return this._buffer[this._pos++]=O,Z}writeFixed(O){this._buffer[this._pos++]=O}setValue(O,Z){this._buffer[O]=Z}i1616Add(O,Z,N){this._i16View[2*O]+=Z,this._i16View[2*O+1]+=N}getValue(O){return this._buffer[O]}incr(O){if(this._buffer.length<O)throw new Error("Increment index overflows the target buffer");this._buffer[O]++}decr(O){this._buffer[O]--}writeRegion(O){this._ensureSize(O.length);const Z=this._pos;return this._buffer.set(O,this._pos),this._pos+=O.length,Z}writeManyFrom(O,Z,N){this._ensureSize(N-Z);for(let rt=Z;rt!==N;rt++)this.writeFixed(O._buffer[rt])}buffer(){const O=this._array.slice(0,4*this._pos);return this.destroy(),O}toArray(){const O=this._array,Z=[];for(let N=0;N<O.byteLength/4;N++)Z.push(O[N]);return Z}seek(O){this._pos=O}destroy(){this._array=null,this._buffer=null}}},55376:(Pt,mt,u)=>{function lt(O,Z,N,rt){const T=O.clone(),q=1<<T.level,C=T.col+Z,vt=T.row+N;return rt&&C<0?(T.col=C+q,T.world-=1):C>=q?(T.col=C-q,T.world+=1):T.col=C,T.row=vt,T}u.d(mt,{M:()=>lt}),u(81340)},32954:(Pt,mt,u)=>{function Y(nt){const lt=new Array(nt.length);for(let O=0;O<nt.length;O++)lt[O]=nt.charCodeAt(O);return lt}u.d(mt,{_:()=>Y})},11263:(Pt,mt,u)=>{u.d(mt,{xS:()=>F,B3:()=>M});var Y=u(15861),nt=u(84175),lt=u(39406),O=u(18716);const Z={marker:lt.LW.MARKER,fill:lt.LW.FILL,line:lt.LW.LINE,text:lt.LW.TEXT};class N{constructor(P,R,z,ot){const ut={minScale:null==R?void 0:R.minScale,maxScale:null==R?void 0:R.maxScale},pt=function rt(L){return L.minScale||L.maxScale?L.minScale+"-"+L.maxScale:""}(ut);this.layers=P,this.data=R,this.hash=this._createHash()+pt,this.rendererKey=z;const v={isOutline:!1,isOutlinedFill:!1,placement:null,stride:{fill:"default"},vvFlags:z};for(const U of P)U.materialKey=(0,O.jj)(Z[U.type],v),U.maxVVSize=ot,U.scaleInfo=ut,U.templateHash+=pt}get type(){return"expanded-cim"}_createHash(){let P="";for(const R of this.layers)P+=R.templateHash;return P}}var T=u(83100),q=u(26584),C=u(10699),vt=u(21726),J=u(84687),y=u(29840),d=u(78241);function f(L,P,R){return g.apply(this,arguments)}function g(){return(g=(0,Y.Z)(function*(L,P,R){if(!L.name)return Promise.reject(new q.Z("style-symbol-reference-name-missing","Missing name in style symbol reference"));if(L.styleName&&"Esri2DPointSymbolsStyle"===L.styleName)return K(L,R);try{return X(yield(0,d.n2)(L,P,R),L.name,P,R)}catch(z){return(0,C.k_)(z),null}})).apply(this,arguments)}function K(L,P){return $.apply(this,arguments)}function $(){return($=(0,Y.Z)(function*(L,P){const R=d.wm.replace(/\{SymbolName\}/gi,L.name);try{const z=yield(0,d.EJ)(R,P);return(0,d.KV)(z.data)}catch(z){return(0,C.k_)(z),null}})).apply(this,arguments)}function X(L,P,R,z){return A.apply(this,arguments)}function A(){return(A=(0,Y.Z)(function*(L,P,R,z){const ot=L.data,ut={portal:R&&R.portal||J.Z.getDefault(),url:(0,vt.mN)(L.baseUrl),origin:"portal-item"},pt=ot.items.find(U=>U.name===P);if(!pt)throw new q.Z("symbolstyleutils:symbol-name-not-found",`The symbol name '${P}' could not be found`,{symbolName:P});let v=(0,y.f)((0,d.v9)(pt,"cimRef"),ut);(0,T.XO)()&&(v=(0,T.pJ)(v));try{const U=yield(0,d.EJ)(v,z);return(0,d.KV)(U.data)}catch(U){return(0,C.k_)(U),null}})).apply(this,arguments)}const ht=function(){var L=(0,Y.Z)(function*(P,R,z){return new N(yield(0,nt.c)(P.data,R,z),P.data,P.rendererKey,P.maxVVSize)});return function(R,z,ot){return L.apply(this,arguments)}}(),M=function(){var L=(0,Y.Z)(function*(P,R,z,ot){if(!P)return null;if("cim"===P.type)return ht(P,R,z);if("web-style"===P.type){const ut={type:"cim",data:yield f(P,null,ot),rendererKey:P.rendererKey,maxVVSize:P.maxVVSize};return ht(ut,R,z)}return P});return function(R,z,ot,ut){return L.apply(this,arguments)}}();function F(L){if(!L)return null;const{type:P,cim:R,url:z,materialHash:ot}=L,ut={cim:R,type:P,mosaicHash:ot,url:z,size:null,dashTemplate:null,path:null,text:null,fontName:null};switch(P){case"marker":ut.size=L.size,ut.path=L.path;break;case"line":ut.dashTemplate=L.dashTemplate;break;case"text":ut.text=L.text,ut.fontName=L.fontName}return ut}}}]);