"use strict";var Ce=Object.defineProperty,Se=Object.defineProperties,ve=Object.getOwnPropertyDescriptors,he=Object.getOwnPropertySymbols,We=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable,Ee=(T,h,a)=>h in T?Ce(T,h,{enumerable:!0,configurable:!0,writable:!0,value:a}):T[h]=a,b=(T,h)=>{for(var a in h||(h={}))We.call(h,a)&&Ee(T,a,h[a]);if(he)for(var a of he(h))Re.call(h,a)&&Ee(T,a,h[a]);return T},A=(T,h)=>Se(T,ve(h));(self.webpackChunksite=self.webpackChunksite||[]).push([[9628],{58775:(T,h,a)=>{a.d(h,{lG:()=>fe,q9:()=>y,my:()=>de,O3:()=>ee});var O=a(26584),te=a(66385),D=a(88071),I=a(36630);const Q={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function y(e){return Q[e]}function*N(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*$(e){if(!e)return null;switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const n of t)yield*n}}function j(e){for(const t of e)if(t.length>2)return!0;return!1}function W(e){let t=0;for(let n=0;n<e.length;n++){const s=e[n],f=e[(n+1)%e.length];t+=s[0]*f[1]-f[0]*s[1]}return t<=0}function ne(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function U(e,t,n){switch(t.type){case"LineString":return function J(e,t,n){return R(e,t.coordinates,n),e}(e,t,n);case"MultiLineString":return function Y(e,t,n){for(const s of t.coordinates)R(e,s,n);return e}(e,t,n);case"MultiPoint":return function le(e,t,n){return R(e,t.coordinates,n),e}(e,t,n);case"MultiPolygon":return function ue(e,t,n){for(const s of t.coordinates){V(e,s[0],n);for(let f=1;f<s.length;f++)re(e,s[f],n)}return e}(e,t,n);case"Point":return function q(e,t,n){return x(e,t.coordinates,n),e}(e,t,n);case"Polygon":return function ce(e,t,n){const s=t.coordinates;V(e,s[0],n);for(let f=1;f<s.length;f++)re(e,s[f],n);return e}(e,t,n)}}function V(e,t,n){const s=ne(t);!function v(e){return!W(e)}(s)?R(e,s,n):oe(e,s,n)}function re(e,t,n){const s=ne(t);!function X(e){return W(e)}(s)?R(e,s,n):oe(e,s,n)}function R(e,t,n){for(const s of t)x(e,s,n);e.lengths.push(t.length)}function oe(e,t,n){for(let s=t.length-1;s>=0;s--)x(e,t[s],n);e.lengths.push(t.length)}function x(e,t,n){const[s,f,F]=t;e.coords.push(s,f),n.hasZ&&e.coords.push(F||0)}function pe(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function ee(e){if(!e)throw new O.Z("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new O.Z("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:t}=e;if(!t)return;const n="string"==typeof t?t:"name"===t.type?t.properties.name:"EPSG"===t.type?t.properties.code:null,s=new RegExp(".*(CRS84H?|4326)$","i");if(!n||!s.test(n))throw new O.Z("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}function de(e,t={}){const n=[],s=new Set,f=new Set;let F,C=!1,P=null,Z=!1,{geometryType:_=null}=t,r=!1;for(const i of N(e)){const{geometry:l,properties:p,id:d}=i;if((!l||(_||(_=y(l.type)),y(l.type)===_))&&(C||(C=j($(l))),Z||(Z=null!=d,Z&&(F=typeof d,P=Object.keys(p).filter(g=>p[g]===d))),Z&&null!=d&&(P.length>1?P=P.filter(g=>p[g]===d):1===P.length&&(P=p[P[0]]===d?P:[])),!r&&p)){let g=!0;for(const c in p){if(s.has(c))continue;const w=p[c];if(null==w){g=!1,f.add(c);continue}const G=pe(w);"unknown"!==G?(f.delete(c),s.add(c),n.push({name:c,alias:c,type:G})):f.add(c)}r=g}}const o=P&&1===P.length&&P[0]||null;if(o)for(const i of n)if(i.name===o&&(0,I.H7)(i)){i.type="esriFieldTypeOID";break}return{fields:n,geometryType:_,hasZ:C,objectIdFieldName:o,objectIdFieldType:F,unknownFields:Array.from(f)}}function fe(e,t){return Array.from(function*E(e,t={}){const{geometryType:n,objectIdField:s}=t;for(const F of e){var f;const{geometry:C,properties:P,id:Z}=F;if(C&&y(C.type)!==n)continue;const _=P||{};let r=null!=(f=_[s])?f:null;s&&null!=Z&&!_[s]&&(_[s]=r=Z),yield new te.ZP(C?U(new D.Z,C,t):null,_,null,r)}}(N(e),t))}},56554:(T,h,a)=>{a.d(h,{MS:()=>$,Dm:()=>y,Hq:()=>N,bU:()=>Q});var O=a(8314),te=a(58817),D=a(87757),I=a(24837);function Q(E){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===E||"esriGeometryMultipoint"===E?I.I4:"esriGeometryPolyline"===E?I.ET:I.lF}}}function y(E,j){if((0,O.Z)("esri-csp-restrictions"))return()=>b({[j]:null},E);try{let v=`this.${j} = null;`;for(const W in E)v+=`this${W.includes(".")?`["${W}"]`:`.${W}`} = ${JSON.stringify(E[W])};`;const X=new Function(v);return()=>new X}catch(v){return()=>b({[j]:null},E)}}function N(E={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,te.d9)(E)}}]}function $(E,j){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:E},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:j,supportsDelete:j,supportsEditing:j,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:j,supportsExceedsLimitStatistics:!0},query:D.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:j,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},89628:(T,h,a)=>{a.d(h,{$9:()=>le,Lu:()=>Y,w9:()=>ue,j:()=>ce,G4:()=>re,gp:()=>oe,eS:()=>pe,d:()=>de,yN:()=>fe,WW:()=>t});var O=a(15861),D=(a(29132),a(84792)),I=a(26584),Q=a(63290),y=a(62208),N=a(37053),$=a(46367),E=a(82054),j=a(95786),v=a(58775),X=a(56554),W=a(60466),ne=a(85),U=a(65234);const J=Q.Z.getLogger("esri.layers.graphics.sources.ogcfeature"),Y="http://www.opengis.net/def/crs/",le=`${Y}OGC/1.3/CRS84`;function ue(r,o){return q.apply(this,arguments)}function q(){return(q=(0,O.Z)(function*(r,o,i={},l=5){const{links:p}=r,d=_(p,"items","application/geo+json")||_(p,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,y.Wi)(d))throw new I.Z("ogc-feature-layer:missing-items-page","Missing items url");const{data:g}=yield(0,D.default)(d.href,{signal:i.signal,query:A(b({limit:l},i.customParameters),{token:i.apiKey}),headers:{accept:"application/geo+json"}});yield(0,v.O3)(g);const c=(0,v.my)(g,{geometryType:o.geometryType}),w=o.fields||c.fields||[],G=null!=o.hasZ?o.hasZ:c.hasZ,z=c.geometryType,L=o.objectIdField||c.objectIdFieldName||"OBJECTID";let m=o.timeInfo;const B=w.find(u=>u.name===L);if(B)B.type="esriFieldTypeOID",B.editable=!1,B.nullable=!1;else{if(!c.objectIdFieldType)throw new I.Z("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");w.unshift({name:L,alias:L,type:"esriFieldTypeOID",editable:!1,nullable:!1})}if(L!==c.objectIdFieldName){const u=w.find(M=>M.name===c.objectIdFieldName);u&&(u.type="esriFieldTypeInteger")}w===c.fields&&c.unknownFields.length>0&&J.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:c.unknownFields}});for(const u of w){if(null==u.name&&(u.name=u.alias),null==u.alias&&(u.alias=u.name),"esriFieldTypeOID"!==u.type&&"esriFieldTypeGlobalID"!==u.type&&(u.editable=null==u.editable||!!u.editable,u.nullable=null==u.nullable||!!u.nullable),!u.name)throw new I.Z("ogc-feature-layer:invalid-field-name","field name is missing",{field:u});if(-1===ne.v.jsonValues.indexOf(u.type))throw new I.Z("ogc-feature-layer:invalid-field-type",`invalid type for field "${u.name}"`,{field:u})}if(m){const u=new W.Z(w);if(m.startTimeField){const M=u.get(m.startTimeField);M?(m.startTimeField=M.name,M.type="esriFieldTypeDate"):m.startTimeField=null}if(m.endTimeField){const M=u.get(m.endTimeField);M?(m.endTimeField=M.name,M.type="esriFieldTypeDate"):m.endTimeField=null}if(m.trackIdField){const M=u.get(m.trackIdField);M?m.trackIdField=M.name:(m.trackIdField=null,J.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:m}}))}m.startTimeField||m.endTimeField||(J.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:m}}),m=null)}return{drawingInfo:z?(0,X.bU)(z):null,geometryType:z,fields:w,hasZ:!!G,objectIdField:L,timeInfo:m}})).apply(this,arguments)}function ce(r){return V.apply(this,arguments)}function V(){return(V=(0,O.Z)(function*(r,o={}){const{links:i}=r,l=_(i,"data","application/json")||_(i,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json");if((0,y.Wi)(l))throw new I.Z("ogc-feature-layer:missing-collections-page","Missing collections url");const{apiKey:p,customParameters:d,signal:g}=o,{data:c}=yield(0,D.default)(l.href,{signal:g,headers:{accept:"application/json"},query:A(b({},d),{token:p})});return c})).apply(this,arguments)}function re(r){return R.apply(this,arguments)}function R(){return(R=(0,O.Z)(function*(r,o={}){const{links:i}=r,l=_(i,"conformance","application/json")||_(i,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json");if((0,y.Wi)(l))throw new I.Z("ogc-feature-layer:missing-conformance-page","Missing conformance url");const{apiKey:p,customParameters:d,signal:g}=o,{data:c}=yield(0,D.default)(l.href,{signal:g,headers:{accept:"application/json"},query:A(b({},d),{token:p})});return c})).apply(this,arguments)}function oe(r){return x.apply(this,arguments)}function x(){return(x=(0,O.Z)(function*(r,o={}){const{apiKey:i,customParameters:l,signal:p}=o,{data:d}=yield(0,D.default)(r,{signal:p,headers:{accept:"application/json"},query:A(b({},l),{token:i})});return d})).apply(this,arguments)}function pe(r){return ee.apply(this,arguments)}function ee(){return(ee=(0,O.Z)(function*(r,o={}){const i="application/vnd.oai.openapi+json;version=3.0",l=_(r.links,"service-desc",i);if((0,y.Wi)(l))return J.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const{apiKey:p,customParameters:d,signal:g}=o,{data:c}=yield(0,D.default)(l.href,{signal:g,headers:{accept:i},query:A(b({},d),{token:p})});return c})).apply(this,arguments)}function de(r){const o=/^http:\/\/www\.opengis.net\/def\/crs\/(?<authority>.*)\/(?<version>.*)\/(?<code>.*)$/i.exec(r),i=null==o?void 0:o.groups;if(!i)return null;const{authority:l,code:p}=i;switch(l.toLowerCase()){case"ogc":switch(p.toLowerCase()){case"crs27":return U.Z.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return U.Z.WGS84.wkid;default:return null}case"esri":case"epsg":{const d=Number.parseInt(p,10);return Number.isNaN(d)?null:d}default:return null}}function fe(r,o,i){return e.apply(this,arguments)}function e(){return(e=(0,O.Z)(function*(r,o,i){const l=yield t(r,o,i);return(0,E.cn)(l)})).apply(this,arguments)}function t(r,o,i){return n.apply(this,arguments)}function n(){return(n=(0,O.Z)(function*(r,o,i){const{capabilities:{query:{maxRecordCount:l}},collection:p,layerDefinition:d,queryParameters:{apiKey:g,customParameters:c},spatialReference:w,supportedCrs:G}=r,{links:z}=p,L=_(z,"items","application/geo+json")||_(z,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,y.Wi)(L))throw new I.Z("ogc-feature-layer:missing-items-page","Missing items url");const{geometry:m,num:B,start:u,timeExtent:M,where:Pe}=o;if(o.objectIds)throw new I.Z("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");const Ie=U.Z.fromJSON(w),H=(0,y.Pt)(o.outSpatialReference,Ie),ie=H.isWGS84?null:f(H,G),Me=Z(m,G),Oe=C(M),je=P(Pe),Te=null!=B?B:null!=u&&void 0!==u?10:l,{data:K}=yield(0,D.default)(L.href,A(b({},i),{query:A(b(b({},c),Me),{crs:ie,datetime:Oe,query:je,limit:Te,startindex:u,token:g}),headers:{accept:"application/geo+json"}}));let se=!1;K.links&&(se=!!K.links.find(ae=>"next"===ae.rel)),!se&&Number.isInteger(K.numberMatched)&&Number.isInteger(K.numberReturned)&&(se=K.numberReturned<K.numberMatched);const{fields:we,globalIdField:be,hasM:De,hasZ:ye,objectIdField:me}=d,_e=d.geometryType,ge=(0,v.lG)(K,{geometryType:_e,hasZ:ye,objectIdField:me});if(!ie&&H.isWebMercator)for(const k of ge)if((0,y.pC)(k.geometry)){const ae=(0,E.di)(k.geometry,_e,ye,!1);ae.spatialReference=U.Z.WGS84,k.geometry=(0,E.GH)((0,$.iV)(ae,H))}for(const k of ge)k.objectId=k.attributes[me];const Fe=ie||!ie&&H.isWebMercator?H.toJSON():N.Zn,S=new j.Z;return S.exceededTransferLimit=se,S.features=ge,S.fields=we,S.geometryType=_e,S.globalIdFieldName=be,S.hasM=De,S.hasZ=ye,S.objectIdFieldName=me,S.spatialReference=Fe,S})).apply(this,arguments)}function f(r,o){var i,l,p;const{isWebMercator:d,wkid:g}=r;if(!g)return null;const c=d?null!=(i=null!=(l=null!=(p=o[3857])?p:o[102100])?l:o[102113])?i:o[900913]:o[r.wkid];return c?`${Y}${c}`:null}function F(r){if((0,y.Wi)(r))return"";const{xmin:o,ymin:i,xmax:l,ymax:p}=r;return`${o},${i},${l},${p}`}function C(r){if((0,y.Wi)(r))return null;const{start:o,end:i}=r;return`${(0,y.pC)(o)?o.toISOString():".."}/${(0,y.pC)(i)?i.toISOString():".."}`}function P(r){return(0,y.Wi)(r)||!r||"1=1"===r?null:r}function Z(r,o){if(!function s(r){return(0,y.pC)(r)&&"extent"===r.type}(r))return null;const{spatialReference:i}=r;if(!i||i.isWGS84)return{bbox:F(r)};const l=f(i,o);return(0,y.pC)(l)?{bbox:F(r),"bbox-crs":l}:i.isWebMercator?{bbox:F((0,$.iV)(r,U.Z.WGS84))}:null}function _(r,o,i){return r.find(l=>l.rel===o&&l.type===i)||r.find(l=>l.rel===o&&!l.type)}}}]);