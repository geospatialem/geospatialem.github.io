"use strict";var Fe=Object.defineProperty,je=Object.defineProperties,We=Object.getOwnPropertyDescriptors,Ne=Object.getOwnPropertySymbols,Ke=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable,Ve=(Se,ye,q)=>ye in Se?Fe(Se,ye,{enumerable:!0,configurable:!0,writable:!0,value:q}):Se[ye]=q,Ae=(Se,ye)=>{for(var q in ye||(ye={}))Ke.call(ye,q)&&Ve(Se,q,ye[q]);if(Ne)for(var q of Ne(ye))ze.call(ye,q)&&Ve(Se,q,ye[q]);return Se},Le=(Se,ye)=>je(Se,We(ye));(self.webpackChunksite=self.webpackChunksite||[]).push([[581],{3579:(Se,ye,q)=>{q.d(ye,{J:()=>me});var ne,de,le,se={exports:{}};ne=se,void 0!==(le=function(){function ee(u){this.message="JPEG error: "+u}return(ee.prototype=new Error).name="JpegError",ee.constructor=ee,ee}(),de=function(){if(!self||!self.Uint8ClampedArray)return null;var ee=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),u=4017,N=799,V=3406,H=2276,T=1567,X=3784,K=5793,Q=2896;function re(){this.decodeTransform=null,this.colorTransform=-1}function ae(b,L){for(var z,d,l=0,g=[],y=16;y>0&&!b[y-1];)y--;g.push({children:[],index:0});var w,S=g[0];for(z=0;z<y;z++){for(d=0;d<b[z];d++){for((S=g.pop()).children[S.index]=L[l];S.index>0;)S=g.pop();for(S.index++,g.push(S);g.length<=z;)g.push(w={children:[],index:0}),S.children[S.index]=w.children,S=w;l++}z+1<y&&(g.push(w={children:[],index:0}),S.children[S.index]=w.children,S=w)}return g[0].children}function fe(b,L,z){return 64*((b.blocksPerLine+1)*L+z)}function we(b,L,z,d,l,g,y,w,S){var O=z.mcusPerLine,Z=L,F=0,Y=0;function j(){if(Y>0)return Y--,F>>Y&1;if(255===(F=b[L++])){var x=b[L++];if(x)throw new le("unexpected marker "+(F<<8|x).toString(16))}return Y=7,F>>>7}function M(x){for(var E=x;;){if("number"==typeof(E=E[j()]))return E;if("object"!=typeof E)throw new le("invalid huffman sequence")}}function c(x){for(var E=0;x>0;)E=E<<1|j(),x--;return E}function k(x){if(1===x)return 1===j()?1:-1;var E=c(x);return E>=1<<x-1?E:E+(-1<<x)+1}var n,e=0,t=0;function f(x,E,U,oe,te){E(x,fe(x,(U/O|0)*x.v+oe,U%O*x.h+te))}var s,h,m,p,C,A,I=d.length;A=z.progressive?0===g?0===w?function P(x,E){var U=M(x.huffmanTableDC),oe=0===U?0:k(U)<<S;x.blockData[E]=x.pred+=oe}:function o(x,E){x.blockData[E]|=j()<<S}:0===w?function r(x,E){if(e>0)e--;else for(var U=g,oe=y;U<=oe;){var te=M(x.huffmanTableAC),ie=15&te,ue=te>>4;if(0!==ie){var Ce=ee[U+=ue];x.blockData[E+Ce]=k(ie)*(1<<S),U++}else{if(ue<15){e=c(ue)+(1<<ue)-1;break}U+=16}}}:function i(x,E){for(var U,oe,te=g,ie=y,ue=0;te<=ie;){var Ce=ee[te];switch(t){case 0:if(ue=(oe=M(x.huffmanTableAC))>>4,0==(U=15&oe))ue<15?(e=c(ue)+(1<<ue),t=4):(ue=16,t=1);else{if(1!==U)throw new le("invalid ACn encoding");n=k(U),t=ue?2:3}continue;case 1:case 2:x.blockData[E+Ce]?x.blockData[E+Ce]+=j()<<S:0==--ue&&(t=2===t?3:0);break;case 3:x.blockData[E+Ce]?x.blockData[E+Ce]+=j()<<S:(x.blockData[E+Ce]=n<<S,t=0);break;case 4:x.blockData[E+Ce]&&(x.blockData[E+Ce]+=j()<<S)}te++}4===t&&0==--e&&(t=0)}:function D(x,E){var U=M(x.huffmanTableDC),oe=0===U?0:k(U);x.blockData[E]=x.pred+=oe;for(var te=1;te<64;){var ie=M(x.huffmanTableAC),ue=15&ie,Ce=ie>>4;if(0!==ue){var ke=ee[te+=Ce];x.blockData[E+ke]=k(ue),te++}else{if(Ce<15)break;te+=16}}};var v,B,R,G,x,U,W=0;for(B=1===I?d[0].blocksPerLine*d[0].blocksPerColumn:O*z.mcusPerColumn;W<B;){var $=l?Math.min(B-W,l):B;for(h=0;h<I;h++)d[h].pred=0;if(e=0,1===I)for(s=d[0],C=0;C<$;C++)A(x=s,fe(x,(U=W)/x.blocksPerLine|0,U%x.blocksPerLine)),W++;else for(C=0;C<$;C++){for(h=0;h<I;h++)for(R=(s=d[h]).h,G=s.v,m=0;m<G;m++)for(p=0;p<R;p++)f(s,A,W,m,p);W++}Y=0,(v=ge(b,L))&&v.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+v.invalid),L=v.offset);var J=v&&v.marker;if(!J||J<=65280)throw new le("marker was not found");if(!(J>=65488&&J<=65495))break;L+=2}return(v=ge(b,L))&&v.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+v.invalid),L=v.offset),L-Z}function ve(b,L,z){var d,l,g,y,w,S,O,_,Z,F,Y,j,M,c,k,D,P,o=b.quantizationTable,e=b.blockData;if(!o)throw new le("missing required Quantization Table.");for(var r=0;r<64;r+=8)Z=e[L+r],Z*=o[r],0!=((F=e[L+r+1])|(Y=e[L+r+2])|(j=e[L+r+3])|(M=e[L+r+4])|(c=e[L+r+5])|(k=e[L+r+6])|(D=e[L+r+7]))?(l=(d=(d=K*Z+128>>8)+(l=K*(M*=o[r+4])+128>>8)+1>>1)-l,P=(g=Y*=o[r+2])*X+(y=k*=o[r+6])*T+128>>8,g=g*T-y*X+128>>8,O=(w=(w=Q*((F*=o[r+1])-(D*=o[r+7]))+128>>8)+(O=(c*=o[r+5])<<4)+1>>1)-O,S=(_=(_=Q*(F+D)+128>>8)+(S=(j*=o[r+3])<<4)+1>>1)-S,y=(d=d+(y=P)+1>>1)-y,g=(l=l+g+1>>1)-g,P=w*H+_*V+2048>>12,w=w*V-_*H+2048>>12,_=P,P=S*N+O*u+2048>>12,S=S*u-O*N+2048>>12,O=P,z[r]=d+_,z[r+7]=d-_,z[r+1]=l+O,z[r+6]=l-O,z[r+2]=g+S,z[r+5]=g-S,z[r+3]=y+w,z[r+4]=y-w):(z[r]=P=K*Z+512>>10,z[r+1]=P,z[r+2]=P,z[r+3]=P,z[r+4]=P,z[r+5]=P,z[r+6]=P,z[r+7]=P);for(var n=0;n<8;++n)Z=z[n],0!=((F=z[n+8])|(Y=z[n+16])|(j=z[n+24])|(M=z[n+32])|(c=z[n+40])|(k=z[n+48])|(D=z[n+56]))?(l=(d=4112+((d=K*Z+2048>>12)+(l=K*M+2048>>12)+1>>1))-l,P=(g=Y)*X+(y=k)*T+2048>>12,g=g*T-y*X+2048>>12,y=P,O=(w=(w=Q*(F-D)+2048>>12)+(O=c)+1>>1)-O,S=(_=(_=Q*(F+D)+2048>>12)+(S=j)+1>>1)-S,P=w*H+_*V+2048>>12,w=w*V-_*H+2048>>12,_=P,P=S*N+O*u+2048>>12,S=S*u-O*N+2048>>12,Z=(Z=(d=d+y+1>>1)+_)<16?0:Z>=4080?255:Z>>4,F=(F=(l=l+g+1>>1)+(O=P))<16?0:F>=4080?255:F>>4,Y=(Y=(g=l-g)+S)<16?0:Y>=4080?255:Y>>4,j=(j=(y=d-y)+w)<16?0:j>=4080?255:j>>4,M=(M=y-w)<16?0:M>=4080?255:M>>4,c=(c=g-S)<16?0:c>=4080?255:c>>4,k=(k=l-O)<16?0:k>=4080?255:k>>4,D=(D=d-_)<16?0:D>=4080?255:D>>4,e[L+n]=Z,e[L+n+8]=F,e[L+n+16]=Y,e[L+n+24]=j,e[L+n+32]=M,e[L+n+40]=c,e[L+n+48]=k,e[L+n+56]=D):(P=(P=K*Z+8192>>14)<-2040?0:P>=2024?255:P+2056>>4,e[L+n]=P,e[L+n+8]=P,e[L+n+16]=P,e[L+n+24]=P,e[L+n+32]=P,e[L+n+40]=P,e[L+n+48]=P,e[L+n+56]=P)}function pe(b,L){for(var z=L.blocksPerLine,d=L.blocksPerColumn,l=new Int16Array(64),g=0;g<d;g++)for(var y=0;y<z;y++)ve(L,fe(L,g,y),l);return L.blockData}function ge(b,L,z){function d(S){return b[S]<<8|b[S+1]}var l=b.length-1,g=z<L?z:L;if(L>=l)return null;var y=d(L);if(y>=65472&&y<=65534)return{invalid:null,marker:y,offset:L};for(var w=d(g);!(w>=65472&&w<=65534);){if(++g>=l)return null;w=d(g)}return{invalid:y.toString(16),marker:w,offset:g}}return re.prototype={parse:function(b){function L(){var x=b[y]<<8|b[y+1];return y+=2,x}function z(){var x=L(),E=y+x-2,U=ge(b,E,y);U&&U.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+U.invalid),E=U.offset);var oe=b.subarray(y,E);return y+=oe.length,oe}function d(x){for(var E=Math.ceil(x.samplesPerLine/8/x.maxH),U=Math.ceil(x.scanLines/8/x.maxV),oe=0;oe<x.components.length;oe++){C=x.components[oe];var te=Math.ceil(Math.ceil(x.samplesPerLine/8)*C.h/x.maxH),ie=Math.ceil(Math.ceil(x.scanLines/8)*C.v/x.maxV);C.blockData=new Int16Array(U*C.v*64*(E*C.h+1)),C.blocksPerLine=te,C.blocksPerColumn=ie}x.mcusPerLine=E,x.mcusPerColumn=U}var l,g,y=0,w=null,S=null,O=[],_=[],Z=[],F=L();if(65496!==F)throw new le("SOI not found");for(F=L();65497!==F;){var Y,j,M;switch(F){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var c=z();65504===F&&74===c[0]&&70===c[1]&&73===c[2]&&70===c[3]&&0===c[4]&&(w={version:{major:c[5],minor:c[6]},densityUnits:c[7],xDensity:c[8]<<8|c[9],yDensity:c[10]<<8|c[11],thumbWidth:c[12],thumbHeight:c[13],thumbData:c.subarray(14,14+3*c[12]*c[13])}),65518===F&&65===c[0]&&100===c[1]&&111===c[2]&&98===c[3]&&101===c[4]&&(S={version:c[5]<<8|c[6],flags0:c[7]<<8|c[8],flags1:c[9]<<8|c[10],transformCode:c[11]});break;case 65499:for(var k=L()+y-2;y<k;){var D=b[y++],P=new Uint16Array(64);if(D>>4==0)for(j=0;j<64;j++)P[ee[j]]=b[y++];else{if(D>>4!=1)throw new le("DQT - invalid table spec");for(j=0;j<64;j++)P[ee[j]]=L()}O[15&D]=P}break;case 65472:case 65473:case 65474:if(l)throw new le("Only single frame JPEGs supported");L(),(l={}).extended=65473===F,l.progressive=65474===F,l.precision=b[y++],l.scanLines=L(),l.samplesPerLine=L(),l.components=[],l.componentIds={};var o,e=b[y++],r=0,n=0;for(Y=0;Y<e;Y++){o=b[y];var t=b[y+1]>>4,i=15&b[y+1];r<t&&(r=t),n<i&&(n=i),M=l.components.push({h:t,v:i,quantizationId:b[y+2],quantizationTable:null}),l.componentIds[o]=M-1,y+=3}l.maxH=r,l.maxV=n,d(l);break;case 65476:var a=L();for(Y=2;Y<a;){var s=b[y++],h=new Uint8Array(16),m=0;for(j=0;j<16;j++,y++)m+=h[j]=b[y];var p=new Uint8Array(m);for(j=0;j<m;j++,y++)p[j]=b[y];Y+=17+m,(s>>4==0?Z:_)[15&s]=ae(h,p)}break;case 65501:L(),g=L();break;case 65498:L();var C,A=b[y++],I=[];for(Y=0;Y<A;Y++){var v=l.componentIds[b[y++]],B=b[y++];(C=l.components[v]).huffmanTableDC=Z[B>>4],C.huffmanTableAC=_[15&B],I.push(C)}var R=b[y++],G=b[y++],W=b[y++],$=we(b,y,l,I,g,R,G,W>>4,15&W);y+=$;break;case 65535:255!==b[y]&&y--;break;default:if(255===b[y-3]&&b[y-2]>=192&&b[y-2]<=254){y-=3;break}throw new le("unknown marker "+F.toString(16))}F=L()}for(this.width=l.samplesPerLine,this.height=l.scanLines,this.jfif=w,this.eof=y,this.adobe=S,this.components=[],Y=0;Y<l.components.length;Y++){var J=O[(C=l.components[Y]).quantizationId];J&&(C.quantizationTable=J),this.components.push({output:pe(0,C),scaleX:C.h/l.maxH,scaleY:C.v/l.maxV,blocksPerLine:C.blocksPerLine,blocksPerColumn:C.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(b,L){var z,d,l,g,y,w,S,O,_,Z,F,Y=this.width/b,j=this.height/L,M=0,c=this.components.length,k=b*L*c,D=new Uint8ClampedArray(k),P=new Uint32Array(b),o=4294967288;for(S=0;S<c;S++){for(d=(z=this.components[S]).scaleX*Y,l=z.scaleY*j,M=S,F=z.output,g=z.blocksPerLine+1<<3,y=0;y<b;y++)P[y]=((O=0|y*d)&o)<<3|7&O;for(w=0;w<L;w++)for(Z=g*((O=0|w*l)&o)|(7&O)<<3,y=0;y<b;y++)D[M]=F[Z+P[y]],M+=c}var e=this.decodeTransform;if(e)for(S=0;S<k;)for(O=0,_=0;O<c;O++,S++,_+=2)D[S]=(D[S]*e[_]>>8)+e[_+1];return D},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this.colorTransform:1===this.colorTransform},_convertYccToRgb:function(b){for(var L,z,d,l=0,g=b.length;l<g;l+=3)z=b[l+1],b[l]=(L=b[l])-179.456+1.402*(d=b[l+2]),b[l+1]=L+135.459-.344*z-.714*d,b[l+2]=L-226.816+1.772*z;return b},_convertYcckToRgb:function(b){for(var L,z,d,l,g=0,y=0,w=b.length;y<w;y+=4)b[g++]=(z=b[y+1])*(-660635669420364e-19*z+.000437130475926232*(d=b[y+2])-54080610064599e-18*(L=b[y])+.00048449797120281*(l=b[y+3])-.154362151871126)-122.67195406894+d*(-.000957964378445773*d+.000817076911346625*L-.00477271405408747*l+1.53380253221734)+L*(.000961250184130688*L-.00266257332283933*l+.48357088451265)+l*(-.000336197177618394*l+.484791561490776),b[g++]=107.268039397724+z*(219927104525741e-19*z-.000640992018297945*d+.000659397001245577*L+.000426105652938837*l-.176491792462875)+d*(-.000778269941513683*d+.00130872261408275*L+.000770482631801132*l-.151051492775562)+L*(.00126935368114843*L-.00265090189010898*l+.25802910206845)+l*(-.000318913117588328*l-.213742400323665),b[g++]=z*(-.000570115196973677*z-263409051004589e-19*d+.0020741088115012*L-.00288260236853442*l+.814272968359295)-20.810012546947+d*(-153496057440975e-19*d-.000132689043961446*L+.000560833691242812*l-.195152027534049)+L*(.00174418132927582*L-.00255243321439347*l+.116935020465145)+l*(-.000343531996510555*l+.24165260232407);return b},_convertYcckToCmyk:function(b){for(var L,z,d,l=0,g=b.length;l<g;l+=4)z=b[l+1],b[l]=434.456-(L=b[l])-1.402*(d=b[l+2]),b[l+1]=119.541-L+.344*z+.714*d,b[l+2]=481.816-L-1.772*z;return b},_convertCmykToRgb:function(b){for(var L,z,d,l,g=0,y=1/255,w=0,S=b.length;w<S;w+=4)b[g++]=255+(L=b[w]*y)*(-4.387332384609988*L+54.48615194189176*(z=b[w+1]*y)+18.82290502165302*(d=b[w+2]*y)+212.25662451639585*(l=b[w+3]*y)-285.2331026137004)+z*(1.7149763477362134*z-5.6096736904047315*d-17.873870861415444*l-5.497006427196366)+d*(-2.5217340131683033*d-21.248923337353073*l+17.5119270841813)-l*(21.86122147463605*l+189.48180835922747),b[g++]=255+L*(8.841041422036149*L+60.118027045597366*z+6.871425592049007*d+31.159100130055922*l-79.2970844816548)+z*(-15.310361306967817*z+17.575251261109482*d+131.35250912493976*l-190.9453302588951)+d*(4.444339102852739*d+9.8632861493405*l-24.86741582555878)-l*(20.737325471181034*l+187.80453709719578),b[g++]=255+L*(.8842522430003296*L+8.078677503112928*z+30.89978309703729*d-.23883238689178934*l-14.183576799673286)+z*(10.49593273432072*z+63.02378494754052*d+50.606957656360734*l-112.23884253719248)+d*(.03296041114873217*d+115.60384449646641*l-193.58209356861505)-l*(22.33816807309886*l+180.12613974708367);return b},getData:function(b,L,z){if(this.numComponents>4)throw new le("Unsupported color mode");var d=this._getLinearizedBlockData(b,L);if(1===this.numComponents&&z){for(var l=d.length,g=new Uint8ClampedArray(3*l),y=0,w=0;w<l;w++){var S=d[w];g[y++]=S,g[y++]=S,g[y++]=S}return g}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(d);if(4===this.numComponents){if(this._isColorConversionNeeded())return z?this._convertYcckToRgb(d):this._convertYcckToCmyk(d);if(z)return this._convertCmykToRgb(d)}return d}},re}())&&(ne.exports=de);const me=se.exports},10621:(Se,ye,q)=>{q.d(ye,{d:()=>u});var ne=q(21286),he={};he.defaultNoDataValue=(0,ne.oK)(-1/0),he.decode=function(N,V){var H=(V=V||{}).encodedMaskData||null===V.encodedMaskData,T=le(N,V.inputOffset||0,H),X=null!=V.noDataValue?(0,ne.oK)(V.noDataValue):he.defaultNoDataValue,K=de(T,V.pixelType||Float32Array,V.encodedMaskData,X,V.returnMask),Q={width:T.width,height:T.height,pixelData:K.resultPixels,minValue:T.pixels.minValue,maxValue:T.pixels.maxValue,noDataValue:X};return K.resultMask&&(Q.maskData=K.resultMask),V.returnEncodedMask&&T.mask&&(Q.encodedMaskData=T.mask.bitset?T.mask.bitset:null),V.returnFileInfo&&(Q.fileInfo=se(T,X),V.computeUsedBitDepths&&(Q.fileInfo.bitDepths=me(T))),Q};var de=function(N,V,H,T,X){var K,Q,re=0,ae=N.pixels.numBlocksX,fe=N.pixels.numBlocksY,we=Math.floor(N.width/ae),ve=Math.floor(N.height/fe),pe=2*N.maxZError;H=H||(N.mask?N.mask.bitset:null),K=new V(N.width*N.height),X&&H&&(Q=new Uint8Array(N.width*N.height));for(var ge,b,L=new Float32Array(we*ve),z=0;z<=fe;z++){var d=z!==fe?ve:N.height%fe;if(0!==d)for(var l=0;l<=ae;l++){var g=l!==ae?we:N.width%ae;if(0!==g){var y,w,S,O,_=z*N.width*ve+l*we,Z=N.width-g,F=N.pixels.blocks[re];if(F.encoding<2?(0===F.encoding?y=F.rawData:(ee(F.stuffedData,F.bitsPerPixel,F.numValidPixels,F.offset,pe,L,N.pixels.maxValue),y=L),w=0):S=2===F.encoding?0:F.offset,H)for(b=0;b<d;b++){for(7&_&&(O=H[_>>3],O<<=7&_),ge=0;ge<g;ge++)7&_||(O=H[_>>3]),128&O?(Q&&(Q[_]=1),K[_++]=F.encoding<2?y[w++]:S):(Q&&(Q[_]=0),K[_++]=T),O<<=1;_+=Z}else if(F.encoding<2)for(b=0;b<d;b++){for(ge=0;ge<g;ge++)K[_++]=y[w++];_+=Z}else for(b=0;b<d;b++)if(K.fill)K.fill(S,_,_+g),_+=g+Z;else{for(ge=0;ge<g;ge++)K[_++]=S;_+=Z}if(1===F.encoding&&w!==F.numValidPixels)throw"Block and Mask do not match";re++}}}return{resultPixels:K,resultMask:Q}},se=function(N,V){return{fileIdentifierString:N.fileIdentifierString,fileVersion:N.fileVersion,imageType:N.imageType,height:N.height,width:N.width,maxZError:N.maxZError,eofOffset:N.eofOffset,mask:N.mask?{numBlocksX:N.mask.numBlocksX,numBlocksY:N.mask.numBlocksY,numBytes:N.mask.numBytes,maxValue:N.mask.maxValue}:null,pixels:{numBlocksX:N.pixels.numBlocksX,numBlocksY:N.pixels.numBlocksY,numBytes:N.pixels.numBytes,maxValue:N.pixels.maxValue,minValue:N.pixels.minValue,noDataValue:V}}},me=function(N){for(var V=N.pixels.numBlocksX*N.pixels.numBlocksY,H={},T=0;T<V;T++){var X=N.pixels.blocks[T];0===X.encoding?H.float32=!0:1===X.encoding?H[X.bitsPerPixel]=!0:H[0]=!0}return Object.keys(H)},le=function(N,V,H){var T={},X=new Uint8Array(N,V,10);if(T.fileIdentifierString=String.fromCharCode.apply(null,X),"CntZImage"!=T.fileIdentifierString.trim())throw"Unexpected file identifier string: "+T.fileIdentifierString;V+=10;var K=new DataView(N,V,24);if(T.fileVersion=K.getInt32(0,!0),T.imageType=K.getInt32(4,!0),T.height=K.getUint32(8,!0),T.width=K.getUint32(12,!0),T.maxZError=K.getFloat64(16,!0),V+=24,!H)if(K=new DataView(N,V,16),T.mask={},T.mask.numBlocksY=K.getUint32(0,!0),T.mask.numBlocksX=K.getUint32(4,!0),T.mask.numBytes=K.getUint32(8,!0),T.mask.maxValue=K.getFloat32(12,!0),V+=16,T.mask.numBytes>0){var Q=new Uint8Array(Math.ceil(T.width*T.height/8)),re=(K=new DataView(N,V,T.mask.numBytes)).getInt16(0,!0),ae=2,fe=0;do{if(re>0)for(;re--;)Q[fe++]=K.getUint8(ae++);else{var we=K.getUint8(ae++);for(re=-re;re--;)Q[fe++]=we}re=K.getInt16(ae,!0),ae+=2}while(ae<T.mask.numBytes);if(-32768!==re||fe<Q.length)throw"Unexpected end of mask RLE encoding";T.mask.bitset=Q,V+=T.mask.numBytes}else 0==(T.mask.numBytes|T.mask.numBlocksY|T.mask.maxValue)&&(Q=new Uint8Array(Math.ceil(T.width*T.height/8)),T.mask.bitset=Q);K=new DataView(N,V,16),T.pixels={},T.pixels.numBlocksY=K.getUint32(0,!0),T.pixels.numBlocksX=K.getUint32(4,!0),T.pixels.numBytes=K.getUint32(8,!0),T.pixels.maxValue=K.getFloat32(12,!0),V+=16;var ve=T.pixels.numBlocksX,pe=T.pixels.numBlocksY,ge=ve+(T.width%ve>0?1:0),b=pe+(T.height%pe>0?1:0);T.pixels.blocks=new Array(ge*b);for(var L=1e9,z=0,d=0;d<b;d++)for(var l=0;l<ge;l++){var g=0;K=new DataView(N,V,Math.min(10,N.byteLength-V));var w={};T.pixels.blocks[z++]=w;var S=K.getUint8(0);if(g++,w.encoding=63&S,w.encoding>3)throw"Invalid block encoding ("+w.encoding+")";if(2!==w.encoding){if(0!==S&&2!==S){if(w.offsetType=S>>=6,2===S)w.offset=K.getInt8(1),g++;else if(1===S)w.offset=K.getInt16(1,!0),g+=2;else{if(0!==S)throw"Invalid block offset type";w.offset=K.getFloat32(1,!0),g+=4}if(L=Math.min(w.offset,L),1===w.encoding)if(S=K.getUint8(g),g++,w.bitsPerPixel=63&S,w.numValidPixelsType=S>>=6,2===S)w.numValidPixels=K.getUint8(g),g++;else if(1===S)w.numValidPixels=K.getUint16(g,!0),g+=2;else{if(0!==S)throw"Invalid valid pixel count type";w.numValidPixels=K.getUint32(g,!0),g+=4}}var O;if(V+=g,3!=w.encoding)if(0===w.encoding){var _=(T.pixels.numBytes-1)/4;if(_!==Math.floor(_))throw"uncompressed block has invalid length";O=new ArrayBuffer(4*_),new Uint8Array(O).set(new Uint8Array(N,V,4*_));for(var Z=new Float32Array(O),F=0;F<Z.length;F++)L=Math.min(L,Z[F]);w.rawData=Z,V+=4*_}else if(1===w.encoding){var Y=Math.ceil(w.numValidPixels*w.bitsPerPixel/8),j=Math.ceil(Y/4);O=new ArrayBuffer(4*j),new Uint8Array(O).set(new Uint8Array(N,V,Y)),w.stuffedData=new Uint32Array(O),V+=Y}}else V++,L=Math.min(L,0)}return T.pixels.minValue=L,T.eofOffset=V,T},ee=function(N,V,H,T,X,K,Q){var re,ae,fe,we=(1<<V)-1,ve=0,pe=0,ge=Math.ceil((Q-T)/X),b=4*N.length-Math.ceil(V*H/8);for(N[N.length-1]<<=8*b,re=0;re<H;re++){if(0===pe&&(fe=N[ve++],pe=32),pe>=V)ae=fe>>>pe-V&we,pe-=V;else{var L=V-pe;ae=(fe&we)<<L&we,ae+=(fe=N[ve++])>>>(pe=32-L)}K[re]=ae<ge?T+ae*X:Q}return K};const u=he.decode},46540:(Se,ye,q)=>{q.d(ye,{L:()=>X,a:()=>P,b:()=>c,c:()=>S,d:()=>D,g:()=>O,i:()=>_,p:()=>M});var ee,u,N,H,ne=q(15365),he=q(3579),de=q(94194),se=q(635),me=q(44853),le=q(34022),T={exports:{}};ee={unstuff:function(o,e,r,n,t,i,f,a){var s,h,m,p,C,A=(1<<r)-1,I=0,v=0,B=4*o.length-Math.ceil(r*n/8);if(o[o.length-1]<<=8*B,t)for(s=0;s<n;s++)0===v&&(m=o[I++],v=32),v>=r?(h=m>>>v-r&A,v-=r):(h=(m&A)<<(p=r-v)&A,h+=(m=o[I++])>>>(v=32-p)),e[s]=t[h];else for(C=Math.ceil((a-i)/f),s=0;s<n;s++)0===v&&(m=o[I++],v=32),v>=r?(h=m>>>v-r&A,v-=r):(h=(m&A)<<(p=r-v)&A,h+=(m=o[I++])>>>(v=32-p)),e[s]=h<C?i+h*f:a},unstuffLUT:function(o,e,r,n,t,i){var f,a=(1<<e)-1,s=0,h=0,m=0,p=0,C=0,A=[],I=4*o.length-Math.ceil(e*r/8);o[o.length-1]<<=8*I;var v=Math.ceil((i-n)/t);for(h=0;h<r;h++)0===p&&(f=o[s++],p=32),p>=e?(C=f>>>p-e&a,p-=e):(C=(f&a)<<(m=e-p)&a,C+=(f=o[s++])>>>(p=32-m)),A[h]=C<v?n+C*t:i;return A.unshift(n),A},unstuff2:function(o,e,r,n,t,i,f,a){var s,h,m,p,C=(1<<r)-1,A=0,I=0,v=0;if(t)for(s=0;s<n;s++)0===I&&(m=o[A++],I=32,v=0),I>=r?(h=m>>>v&C,I-=r,v+=r):(h=m>>>v&C,I=32-(p=r-I),h|=((m=o[A++])&(1<<p)-1)<<r-p,v=p),e[s]=t[h];else{var B=Math.ceil((a-i)/f);for(s=0;s<n;s++)0===I&&(m=o[A++],I=32,v=0),I>=r?(h=m>>>v&C,I-=r,v+=r):(h=m>>>v&C,I=32-(p=r-I),h|=((m=o[A++])&(1<<p)-1)<<r-p,v=p),e[s]=h<B?i+h*f:a}return e},unstuffLUT2:function(o,e,r,n,t,i){var f,a=(1<<e)-1,s=0,h=0,m=0,p=0,C=0,A=0,I=[],v=Math.ceil((i-n)/t);for(h=0;h<r;h++)0===p&&(f=o[s++],p=32,A=0),p>=e?(C=f>>>A&a,p-=e,A+=e):(C=f>>>A&a,p=32-(m=e-p),C|=((f=o[s++])&(1<<m)-1)<<e-m,A=m),I[h]=C<v?n+C*t:i;return I.unshift(n),I},originalUnstuff:function(o,e,r,n){var t,i,f,a,s=(1<<r)-1,h=0,m=0,p=4*o.length-Math.ceil(r*n/8);for(o[o.length-1]<<=8*p,t=0;t<n;t++)0===m&&(f=o[h++],m=32),m>=r?(i=f>>>m-r&s,m-=r):(i=(f&s)<<(a=r-m)&s,i+=(f=o[h++])>>>(m=32-a)),e[t]=i;return e},originalUnstuff2:function(o,e,r,n){var t,i,f,a,s=(1<<r)-1,h=0,m=0,p=0;for(t=0;t<n;t++)0===m&&(f=o[h++],m=32,p=0),m>=r?(i=f>>>p&s,m-=r,p+=r):(i=f>>>p&s,m=32-(a=r-m),i|=((f=o[h++])&(1<<a)-1)<<r-a,p=a),e[t]=i;return e}},u={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(o){for(var e=65535,r=65535,n=o.length,t=Math.floor(n/2),i=0;t;){var f=t>=359?359:t;t-=f;do{e+=o[i++]<<8,r+=e+=o[i++]}while(--f);e=(65535&e)+(e>>>16),r=(65535&r)+(r>>>16)}return 1&n&&(r+=e+=o[i]<<8),((r=(65535&r)+(r>>>16))<<16|(e=(65535&e)+(e>>>16)))>>>0},readHeaderInfo:function(o,e){var r=e.ptr,n=new Uint8Array(o,r,6),t={};if(t.fileIdentifierString=String.fromCharCode.apply(null,n),0!==t.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+t.fileIdentifierString;r+=6;var f=new DataView(o,r,8),a=f.getInt32(0,!0);if(t.fileVersion=a,r+=4,a>=3&&(t.checksum=f.getUint32(4,!0),r+=4),f=new DataView(o,r,12),t.height=f.getUint32(0,!0),t.width=f.getUint32(4,!0),r+=8,a>=4?(t.numDims=f.getUint32(8,!0),r+=4):t.numDims=1,f=new DataView(o,r,40),t.numValidPixel=f.getUint32(0,!0),t.microBlockSize=f.getInt32(4,!0),t.blobSize=f.getInt32(8,!0),t.imageType=f.getInt32(12,!0),t.maxZError=f.getFloat64(16,!0),t.zMin=f.getFloat64(24,!0),t.zMax=f.getFloat64(32,!0),r+=40,e.headerInfo=t,e.ptr=r,a>=3&&this.computeChecksumFletcher32(new Uint8Array(o,r-(a>=4?52:48),t.blobSize-14))!==t.checksum)throw"Checksum failed.";return!0},checkMinMaxRanges:function(o,e){var r=e.headerInfo,n=this.getDataTypeArray(r.imageType),t=r.numDims*this.getDataTypeSize(r.imageType),i=this.readSubArray(o,e.ptr,n,t),f=this.readSubArray(o,e.ptr+t,n,t);e.ptr+=2*t;var a,s=!0;for(a=0;a<r.numDims;a++)if(i[a]!==f[a]){s=!1;break}return r.minValues=i,r.maxValues=f,s},readSubArray:function(o,e,r,n){var t;if(r===Uint8Array)t=new Uint8Array(o,e,n);else{var i=new ArrayBuffer(n);new Uint8Array(i).set(new Uint8Array(o,e,n)),t=new r(i)}return t},readMask:function(o,e){var r,n,t=e.ptr,i=e.headerInfo,f=i.width*i.height,a=i.numValidPixel,s=new DataView(o,t,4),h={};if(h.numBytes=s.getUint32(0,!0),t+=4,(0===a||f===a)&&0!==h.numBytes)throw"invalid mask";if(0===a)r=new Uint8Array(Math.ceil(f/8)),h.bitset=r,n=new Uint8Array(f),e.pixels.resultMask=n,t+=h.numBytes;else if(h.numBytes>0){r=new Uint8Array(Math.ceil(f/8));var m=(s=new DataView(o,t,h.numBytes)).getInt16(0,!0),p=2,C=0,A=0;do{if(m>0)for(;m--;)r[C++]=s.getUint8(p++);else for(A=s.getUint8(p++),m=-m;m--;)r[C++]=A;m=s.getInt16(p,!0),p+=2}while(p<h.numBytes);if(-32768!==m||C<r.length)throw"Unexpected end of mask RLE encoding";n=new Uint8Array(f);var I=0,v=0;for(v=0;v<f;v++)7&v?(I=r[v>>3],I<<=7&v):I=r[v>>3],128&I&&(n[v]=1);e.pixels.resultMask=n,h.bitset=r,t+=h.numBytes}return e.ptr=t,e.mask=h,!0},readDataOneSweep:function(o,e,r,n){var t,i=e.ptr,f=e.headerInfo,a=f.numDims,s=f.width*f.height,m=f.numValidPixel*u.getDataTypeSize(f.imageType)*a,p=e.pixels.resultMask;if(r===Uint8Array)t=new Uint8Array(o,i,m);else{var C=new ArrayBuffer(m);new Uint8Array(C).set(new Uint8Array(o,i,m)),t=new r(C)}if(t.length===s*a)e.pixels.resultPixels=n?u.swapDimensionOrder(t,s,a,r,!0):t;else{e.pixels.resultPixels=new r(s*a);var A=0,I=0,v=0,B=0;if(a>1){if(n){for(I=0;I<s;I++)if(p[I])for(B=I,v=0;v<a;v++,B+=s)e.pixels.resultPixels[B]=t[A++]}else for(I=0;I<s;I++)if(p[I])for(B=I*a,v=0;v<a;v++)e.pixels.resultPixels[B+v]=t[A++]}else for(I=0;I<s;I++)p[I]&&(e.pixels.resultPixels[I]=t[A++])}return e.ptr=i+=m,!0},readHuffmanTree:function(o,e){var r=this.HUFFMAN_LUT_BITS_MAX,n=new DataView(o,e.ptr,16);if(e.ptr+=16,n.getInt32(0,!0)<2)throw"unsupported Huffman version";var t=n.getInt32(4,!0),i=n.getInt32(8,!0),f=n.getInt32(12,!0);if(i>=f)return!1;var a=new Uint32Array(f-i);u.decodeBits(o,e,a);var s,h,m,p,C=[];for(s=i;s<f;s++)C[h=s-(s<t?0:t)]={first:a[s-i],second:null};var A=o.byteLength-e.ptr,I=Math.ceil(A/4),v=new ArrayBuffer(4*I);new Uint8Array(v).set(new Uint8Array(o,e.ptr,A));var B,R=new Uint32Array(v),G=0,W=0;for(B=R[0],s=i;s<f;s++)(p=C[h=s-(s<t?0:t)].first)>0&&(C[h].second=B<<G>>>32-p,32-G>=p?32===(G+=p)&&(G=0,B=R[++W]):(B=R[++W],C[h].second|=B>>>32-(G+=p-32)));var J,$=0,x=new N;for(s=0;s<C.length;s++)void 0!==C[s]&&($=Math.max($,C[s].first));J=$>=r?r:$;var E,U,oe,te,ie,ue=[];for(s=i;s<f;s++)if((p=C[h=s-(s<t?0:t)].first)>0)if(E=[p,h],p<=J)for(U=C[h].second<<J-p,oe=1<<J-p,m=0;m<oe;m++)ue[U|m]=E;else for(U=C[h].second,ie=x,te=p-1;te>=0;te--)U>>>te&1?(ie.right||(ie.right=new N),ie=ie.right):(ie.left||(ie.left=new N),ie=ie.left),0!==te||ie.val||(ie.val=E[1]);return{decodeLut:ue,numBitsLUTQick:J,numBitsLUT:$,tree:x,stuffedData:R,srcPtr:W,bitPos:G}},readHuffman:function(o,e,r,n){var t,i,f,a,s,h,m,p,C,A=e.headerInfo.numDims,I=e.headerInfo.height,v=e.headerInfo.width,B=v*I,R=this.readHuffmanTree(o,e),G=R.decodeLut,W=R.tree,$=R.stuffedData,J=R.srcPtr,x=R.bitPos,E=R.numBitsLUTQick,U=R.numBitsLUT,oe=0===e.headerInfo.imageType?128:0,te=e.pixels.resultMask,ie=0;x>0&&(J++,x=0);var ue,Ce=$[J],ke=1===e.encodeMode,xe=new r(B*A),ce=xe;if(A<2||ke){for(ue=0;ue<A;ue++)if(A>1&&(ce=new r(xe.buffer,B*ue,B),ie=0),e.headerInfo.numValidPixel===v*I)for(p=0,h=0;h<I;h++)for(m=0;m<v;m++,p++){if(i=0,s=a=Ce<<x>>>32-E,32-x<E&&(s=a|=$[J+1]>>>64-x-E),G[s])i=G[s][1],x+=G[s][0];else for(s=a=Ce<<x>>>32-U,32-x<U&&(s=a|=$[J+1]>>>64-x-U),t=W,C=0;C<U;C++)if(!(t=a>>>U-C-1&1?t.right:t.left).left&&!t.right){i=t.val,x=x+C+1;break}x>=32&&(x-=32,Ce=$[++J]),f=i-oe,ke?(f+=m>0?ie:h>0?ce[p-v]:ie,ce[p]=f&=255,ie=f):ce[p]=f}else for(p=0,h=0;h<I;h++)for(m=0;m<v;m++,p++)if(te[p]){if(i=0,s=a=Ce<<x>>>32-E,32-x<E&&(s=a|=$[J+1]>>>64-x-E),G[s])i=G[s][1],x+=G[s][0];else for(s=a=Ce<<x>>>32-U,32-x<U&&(s=a|=$[J+1]>>>64-x-U),t=W,C=0;C<U;C++)if(!(t=a>>>U-C-1&1?t.right:t.left).left&&!t.right){i=t.val,x=x+C+1;break}x>=32&&(x-=32,Ce=$[++J]),f=i-oe,ke?(f+=m>0&&te[p-1]?ie:h>0&&te[p-v]?ce[p-v]:ie,ce[p]=f&=255,ie=f):ce[p]=f}}else for(p=0,h=0;h<I;h++)for(m=0;m<v;m++)if(p=h*v+m,!te||te[p])for(ue=0;ue<A;ue++,p+=B){if(i=0,s=a=Ce<<x>>>32-E,32-x<E&&(s=a|=$[J+1]>>>64-x-E),G[s])i=G[s][1],x+=G[s][0];else for(s=a=Ce<<x>>>32-U,32-x<U&&(s=a|=$[J+1]>>>64-x-U),t=W,C=0;C<U;C++)if(!(t=a>>>U-C-1&1?t.right:t.left).left&&!t.right){i=t.val,x=x+C+1;break}x>=32&&(x-=32,Ce=$[++J]),ce[p]=f=i-oe}e.ptr=e.ptr+4*(J+1)+(x>0?4:0),e.pixels.resultPixels=xe,A>1&&!n&&(e.pixels.resultPixels=u.swapDimensionOrder(xe,B,A,r))},decodeBits:function(o,e,r,n,t){var i=e.headerInfo,f=i.fileVersion,a=0,h=new DataView(o,e.ptr,o.byteLength-e.ptr>=5?5:o.byteLength-e.ptr),m=h.getUint8(0);a++;var p=m>>6,C=0===p?4:3-p,A=(32&m)>0,I=31&m,v=0;if(1===C)v=h.getUint8(a),a++;else if(2===C)v=h.getUint16(a,!0),a+=2;else{if(4!==C)throw"Invalid valid pixel count type";v=h.getUint32(a,!0),a+=4}var B,R,G,W,$,J,x,E,U,oe=2*i.maxZError,te=i.numDims>1?i.maxValues[t]:i.zMax;if(A){for(e.counter.lut++,E=h.getUint8(a),a++,W=Math.ceil((E-1)*I/8),$=Math.ceil(W/4),R=new ArrayBuffer(4*$),G=new Uint8Array(R),e.ptr+=a,G.set(new Uint8Array(o,e.ptr,W)),x=new Uint32Array(R),e.ptr+=W,U=0;E-1>>>U;)U++;W=Math.ceil(v*U/8),$=Math.ceil(W/4),R=new ArrayBuffer(4*$),(G=new Uint8Array(R)).set(new Uint8Array(o,e.ptr,W)),B=new Uint32Array(R),e.ptr+=W,J=f>=3?ee.unstuffLUT2(x,I,E-1,n,oe,te):ee.unstuffLUT(x,I,E-1,n,oe,te),f>=3?ee.unstuff2(B,r,U,v,J):ee.unstuff(B,r,U,v,J)}else e.counter.bitstuffer++,U=I,e.ptr+=a,U>0&&(W=Math.ceil(v*U/8),$=Math.ceil(W/4),R=new ArrayBuffer(4*$),(G=new Uint8Array(R)).set(new Uint8Array(o,e.ptr,W)),B=new Uint32Array(R),e.ptr+=W,f>=3?null==n?ee.originalUnstuff2(B,r,U,v):ee.unstuff2(B,r,U,v,!1,n,oe,te):null==n?ee.originalUnstuff(B,r,U,v):ee.unstuff(B,r,U,v,!1,n,oe,te))},readTiles:function(o,e,r,n){var t=e.headerInfo,i=t.width,f=t.height,a=i*f,s=t.microBlockSize,h=t.imageType,m=u.getDataTypeSize(h),p=Math.ceil(i/s),C=Math.ceil(f/s);e.pixels.numBlocksY=C,e.pixels.numBlocksX=p,e.pixels.ptr=0;var A,I,v,B,R,G,W,$,J,x,E=0,U=0,oe=0,te=0,ie=0,ue=0,ke=0,xe=0,ce=0,Ie=0,De=0,Re=0,Te=0,be=0,Ee=new r(s*s),Ue=f%s||s,Oe=i%s||s,Me=t.numDims,_e=e.pixels.resultMask,Pe=e.pixels.resultPixels,Ge=t.fileVersion>=5?14:15,Be=t.zMax;for(oe=0;oe<C;oe++)for(ie=oe!==C-1?s:Ue,te=0;te<p;te++)for(ce=oe*i*s+te*s,Ie=i-(ue=te!==p-1?s:Oe),$=0;$<Me;$++){if(Me>1?(x=Pe,ce=oe*i*s+te*s,Pe=new r(e.pixels.resultPixels.buffer,a*$*m,a),Be=t.maxValues[$]):x=null,I={},be=0,ke=(A=new DataView(o,e.ptr,Math.min(10,o.byteLength-e.ptr))).getUint8(0),be++,J=t.fileVersion>=5?4&ke:0,xe=ke>>6&255,(ke>>2&Ge)!=(te*s>>3&Ge)||J&&0===$)throw"integrity issue";if((R=3&ke)>3)throw e.ptr+=be,"Invalid block encoding ("+R+")";if(2!==R)if(0===R){if(J)throw"integrity issue";if(e.counter.uncompressed++,e.ptr+=be,De=(De=ie*ue*m)<(Re=o.byteLength-e.ptr)?De:Re,v=new ArrayBuffer(De%m==0?De:De+m-De%m),new Uint8Array(v).set(new Uint8Array(o,e.ptr,De)),B=new r(v),Te=0,_e)for(E=0;E<ie;E++){for(U=0;U<ue;U++)_e[ce]&&(Pe[ce]=B[Te++]),ce++;ce+=Ie}else for(E=0;E<ie;E++){for(U=0;U<ue;U++)Pe[ce++]=B[Te++];ce+=Ie}e.ptr+=Te*m}else if(G=u.getDataTypeUsed(J&&h<6?4:h,xe),W=u.getOnePixel(I,be,G,A),be+=u.getDataTypeSize(G),3===R)if(e.ptr+=be,e.counter.constantoffset++,_e)for(E=0;E<ie;E++){for(U=0;U<ue;U++)_e[ce]&&(Pe[ce]=J?Math.min(Be,x[ce]+W):W),ce++;ce+=Ie}else for(E=0;E<ie;E++){for(U=0;U<ue;U++)Pe[ce]=J?Math.min(Be,x[ce]+W):W,ce++;ce+=Ie}else if(e.ptr+=be,u.decodeBits(o,e,Ee,W,$),be=0,J)if(_e)for(E=0;E<ie;E++){for(U=0;U<ue;U++)_e[ce]&&(Pe[ce]=Ee[be++]+x[ce]),ce++;ce+=Ie}else for(E=0;E<ie;E++){for(U=0;U<ue;U++)Pe[ce]=Ee[be++]+x[ce],ce++;ce+=Ie}else if(_e)for(E=0;E<ie;E++){for(U=0;U<ue;U++)_e[ce]&&(Pe[ce]=Ee[be++]),ce++;ce+=Ie}else for(E=0;E<ie;E++){for(U=0;U<ue;U++)Pe[ce++]=Ee[be++];ce+=Ie}else{if(J)if(_e)for(E=0;E<ie;E++)for(U=0;U<ue;U++)_e[ce]&&(Pe[ce]=x[ce]),ce++;else for(E=0;E<ie;E++)for(U=0;U<ue;U++)Pe[ce]=x[ce],ce++;e.counter.constant++,e.ptr+=be}}Me>1&&!n&&(e.pixels.resultPixels=u.swapDimensionOrder(e.pixels.resultPixels,a,Me,r))},formatFileInfo:function(o){return{fileIdentifierString:o.headerInfo.fileIdentifierString,fileVersion:o.headerInfo.fileVersion,imageType:o.headerInfo.imageType,height:o.headerInfo.height,width:o.headerInfo.width,numValidPixel:o.headerInfo.numValidPixel,microBlockSize:o.headerInfo.microBlockSize,blobSize:o.headerInfo.blobSize,maxZError:o.headerInfo.maxZError,pixelType:u.getPixelType(o.headerInfo.imageType),eofOffset:o.eofOffset,mask:o.mask?{numBytes:o.mask.numBytes}:null,pixels:{numBlocksX:o.pixels.numBlocksX,numBlocksY:o.pixels.numBlocksY,maxValue:o.headerInfo.zMax,minValue:o.headerInfo.zMin,noDataValue:o.noDataValue}}},constructConstantSurface:function(o,e){var r=o.headerInfo.zMax,n=o.headerInfo.zMin,t=o.headerInfo.maxValues,i=o.headerInfo.numDims,f=o.headerInfo.height*o.headerInfo.width,a=0,s=0,h=0,m=o.pixels.resultMask,p=o.pixels.resultPixels;if(m)if(i>1){if(e)for(a=0;a<i;a++)for(h=a*f,r=t[a],s=0;s<f;s++)m[s]&&(p[h+s]=r);else for(s=0;s<f;s++)if(m[s])for(h=s*i,a=0;a<i;a++)p[h+i]=t[a]}else for(s=0;s<f;s++)m[s]&&(p[s]=r);else if(i>1&&n!==r)if(e)for(a=0;a<i;a++)for(h=a*f,r=t[a],s=0;s<f;s++)p[h+s]=r;else for(s=0;s<f;s++)for(h=s*i,a=0;a<i;a++)p[h+a]=t[a];else for(s=0;s<f*i;s++)p[s]=r},getDataTypeArray:function(o){var e;switch(o){case 0:e=Int8Array;break;case 1:e=Uint8Array;break;case 2:e=Int16Array;break;case 3:e=Uint16Array;break;case 4:e=Int32Array;break;case 5:e=Uint32Array;break;case 6:default:e=Float32Array;break;case 7:e=Float64Array}return e},getPixelType:function(o){var e;switch(o){case 0:e="S8";break;case 1:e="U8";break;case 2:e="S16";break;case 3:e="U16";break;case 4:e="S32";break;case 5:e="U32";break;case 6:default:e="F32";break;case 7:e="F64"}return e},isValidPixelValue:function(o,e){if(null==e)return!1;var r;switch(o){case 0:r=e>=-128&&e<=127;break;case 1:r=e>=0&&e<=255;break;case 2:r=e>=-32768&&e<=32767;break;case 3:r=e>=0&&e<=65536;break;case 4:r=e>=-2147483648&&e<=2147483647;break;case 5:r=e>=0&&e<=4294967296;break;case 6:r=e>=-34027999387901484e22&&e<=34027999387901484e22;break;case 7:r=e>=5e-324&&e<=17976931348623157e292;break;default:r=!1}return r},getDataTypeSize:function(o){var e=0;switch(o){case 0:case 1:e=1;break;case 2:case 3:e=2;break;case 4:case 5:case 6:e=4;break;case 7:e=8;break;default:e=o}return e},getDataTypeUsed:function(o,e){var r=o;switch(o){case 2:case 4:r=o-e;break;case 3:case 5:r=o-2*e;break;case 6:r=0===e?o:1===e?2:1;break;case 7:r=0===e?o:o-2*e+1;break;default:r=o}return r},getOnePixel:function(o,e,r,n){var t=0;switch(r){case 0:t=n.getInt8(e);break;case 1:t=n.getUint8(e);break;case 2:t=n.getInt16(e,!0);break;case 3:t=n.getUint16(e,!0);break;case 4:t=n.getInt32(e,!0);break;case 5:t=n.getUInt32(e,!0);break;case 6:t=n.getFloat32(e,!0);break;case 7:t=n.getFloat64(e,!0);break;default:throw"the decoder does not understand this pixel type"}return t},swapDimensionOrder:function(o,e,r,n,t){var i=0,f=0,a=0,s=0,h=o;if(r>1)if(h=new n(e*r),t)for(i=0;i<e;i++)for(s=i,a=0;a<r;a++,s+=e)h[s]=o[f++];else for(i=0;i<e;i++)for(s=i,a=0;a<r;a++,s+=e)h[f++]=o[s];return h}},N=function(o,e,r){this.val=o,this.left=e,this.right=r},void 0!==(H={decode:function(o,e){var r=(e=e||{}).noDataValue,n=0,t={};t.ptr=e.inputOffset||0,t.pixels={},u.readHeaderInfo(o,t);var i=t.headerInfo,f=i.fileVersion,a=u.getDataTypeArray(i.imageType);if(f>5)throw"unsupported lerc version 2."+f;u.readMask(o,t),i.numValidPixel===i.width*i.height||t.pixels.resultMask||(t.pixels.resultMask=e.maskData);var s=i.width*i.height;t.pixels.resultPixels=new a(s*i.numDims),t.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var h,m=!e.returnPixelInterleavedDims;if(0!==i.numValidPixel)if(i.zMax===i.zMin)u.constructConstantSurface(t,m);else if(f>=4&&u.checkMinMaxRanges(o,t))u.constructConstantSurface(t,m);else{var p=new DataView(o,t.ptr,2),C=p.getUint8(0);if(t.ptr++,C)u.readDataOneSweep(o,t,a,m);else if(f>1&&i.imageType<=1&&Math.abs(i.maxZError-.5)<1e-5){var A=p.getUint8(1);if(t.ptr++,t.encodeMode=A,A>2||f<4&&A>1)throw"Invalid Huffman flag "+A;A?u.readHuffman(o,t,a,m):u.readTiles(o,t,a,m)}else u.readTiles(o,t,a,m)}t.eofOffset=t.ptr,e.inputOffset?(h=t.headerInfo.blobSize+e.inputOffset-t.ptr,Math.abs(h)>=1&&(t.eofOffset=e.inputOffset+t.headerInfo.blobSize)):(h=t.headerInfo.blobSize-t.ptr,Math.abs(h)>=1&&(t.eofOffset=t.headerInfo.blobSize));var I={width:i.width,height:i.height,pixelData:t.pixels.resultPixels,minValue:i.zMin,maxValue:i.zMax,validPixelCount:i.numValidPixel,dimCount:i.numDims,dimStats:{minValues:i.minValues,maxValues:i.maxValues},maskData:t.pixels.resultMask};if(t.pixels.resultMask&&u.isValidPixelValue(i.imageType,r)){var v=t.pixels.resultMask;for(n=0;n<s;n++)v[n]||(I.pixelData[n]=r);I.noDataValue=r}return t.noDataValue=r,e.returnFileInfo&&(I.fileInfo=u.formatFileInfo(t)),I},getBandCount:function(o){for(var e=0,r=0,n={ptr:0,pixels:{}};r<o.byteLength-58;)u.readHeaderInfo(o,n),e++,n.ptr=r+=n.headerInfo.blobSize;return e}})&&(T.exports=H);const X=T.exports,K=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],Q=4294967296,re=new Set([1,5,6,7,8,34712,34887]);function ae(o,e){let r="unknown";return 3===o?r="f32":1===o?1===e?r="u1":2===e?r="u2":4===e?r="u4":e<=8?r="u8":e<=16?r="u16":e<=32&&(r="u32"):2===o&&(e<=8?r="s8":e<=16?r="s16":e<=32&&(r="s32")),r}function fe(o){let e=null;switch(o?o.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":e=Uint8Array;break;case"u16":e=Uint16Array;break;case"u32":e=Uint32Array;break;case"s8":e=Int8Array;break;case"s16":e=Int16Array;break;case"s32":e=Int32Array;break;default:e=Float32Array}return e}function we(o,e){return{x:e[0]*o.x+e[1]*o.y+e[2],y:e[3]*o.x+e[4]*o.y+e[5]}}function ve(o,e){var r;return null==(r=o.get(e))?void 0:r.values}function pe(o,e){var r;return null==(r=o.get(e))?void 0:r.values}function ge(o,e){var r;return null==(r=o.get(e))?void 0:r.values[0]}function b(o,e){var r;return null==(r=o.get(e))?void 0:r.values[0]}function L(o,e,r,n=0,t=se.Z.TIFF_TAGS,i=4){const f=8===i,a=f?F(new DataView(o,r,8),0,e):new DataView(o,r,2).getUint16(0,e),s=4+2*i,h=f?8:2,m=h+a*s;if(r+m>o.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:m};const p=r+m+4<=o.byteLength?j(new DataView(o,r+m,8===i?8:4),0,e,8===i):null,C=r+h,A=new Map;let I,v,B,R,G,W,$;for(let J=0;J<a;J++){v=new DataView(o,C+s*J,s),B=v.getUint16(0,e),G=v.getUint16(2,e),R=se.Z.getTagName(B,t);const x=[];2===i?(W=v.getUint16(4,e),$=v.getUint16(6,e)):4===i?(W=v.getUint32(4,e),$=v.getUint32(8,e)):8===i&&(W=j(v,4,e,!0),$=j(v,12,e,!0),x.push(v.getUint32(12,e)),x.push(v.getUint32(16,e))),I={id:B,type:G,valueCount:W,valueOffset:$,valueOffsets:x,values:null},S(o,e,I,n,!1,i),A.set(R,I)}return{success:!0,ifd:A,nextIFD:p,requiredBufferSize:m}}const d=function(o,e,r,n,t){var i,f;const a=me.f===e,s=b(r,"BITSPERSAMPLE"),h=ae(null!=(i=b(r,"SAMPLEFORMAT"))?i:1,s),m=null!=(f=b(r,"COMPRESSION"))?f:1,p=fe(h);let C,A,I,v,B,R,G;if(34887===m)return function(o,e){return X.decode(o,{inputOffset:e,returnFileInfo:!0}).pixelData}(o,n);if(1===m)I=o.slice(n,n+t),v=new Uint8Array(I);else if(8===m||32946===m)v=new Uint8Array(o,n,t),R=new le.Z(v),G=R.getBytes(),I=new ArrayBuffer(G.length),v=new Uint8Array(I),v.set(G);else if(6===m){v=new Uint8Array(o,n,t);const W=new he.J;W.parse(v);const $=W.getData(W.width,W.height,!0);I=new ArrayBuffer($.length),v=new Uint8Array(I),v.set($)}else if(7===m){const W=r.get("JPEGTABLES").values,$=W.length-2;v=new Uint8Array($+t-2);for(let U=0;U<$;U++)v[U]=W[U];const J=new Uint8Array(o,n+2,t-2);for(let U=0;U<J.length;U++)v[$+U]=J[U];const x=new he.J;x.parse(v);const E=x.getData(x.width,x.height,!0);I=new ArrayBuffer(E.length),v=new Uint8Array(I),v.set(E)}else 5===m&&(v=(0,de.J)(o,n,t,e),I=v.buffer);if("u8"===h||"s8"===h||a)A=new p(I);else{switch(I=new ArrayBuffer(v.length),B=new Uint8Array(I),h){case"u16":case"s16":for(C=0;C<v.length;C+=2)B[C]=v[C+1],B[C+1]=v[C];break;case"u32":case"s32":case"f32":for(C=0;C<v.length;C+=4)B[C]=v[C+3],B[C+1]=v[C+2],B[C+2]=v[C+1],B[C+3]=v[C]}A=new p(I)}return A};function S(o,e,r,n=0,t=!1,i=4){if(r.values)return!0;const f=r.type,a=r.valueCount;let s=r.valueOffset,h=[];const m=K[f],p=8*m,C=a*m,A=a*K[f]*8;let I,v;const B=8===i?64:32,R=r.valueOffsets;if(A>B&&C>(t?o.byteLength:o?o.byteLength-s+n:0))return r.offlineOffsetSize=[s,C],r.values=null,!1;if(A<=B){if(!e)if(B<=32)s>>>=32-A;else{const G=null!=R&&R.length?R[0]:s>>>0,W=null!=R&&R.length?R[1]:Math.round((s-G)/Q);A<=32?(s=G>>>32-A,R[0]=s):(s=G*2**(32-A)+(W>>>32-A),R[0]=G,R[1]=W>>>32-A)}if(1===a&&p===B)h=[s];else if(64===B){const G=null!=R&&R.length?R[0]:s>>>0,W=null!=R&&R.length?R[1]:Math.round((s-G)/Q);let $=G,J=32;for(v=1;v<=a;v++){const x=32-p*v%32;if(J<p){const E=$<<x>>>32-J;$=W,h.push(E+(W<<32-J>>>32-J)*2**(p-J)),J-=32-(p-J)}else h.push($<<x>>>32-p),J-=p;0===J&&(J=32,$=W)}}else for(v=1;v<=a;v++)h.push(s<<32-p*v>>>32-p)}else{s-=n,t&&(s=0);for(let G=s;G<s+C;G+=m){switch(f){case 1:case 2:case 7:I=new DataView(o,G,1).getUint8(0);break;case 3:I=new DataView(o,G,2).getUint16(0,e);break;case 4:case 13:I=new DataView(o,G,4).getUint32(0,e);break;case 5:I=new DataView(o,G,4).getUint32(0,e)/new DataView(o,G+4,4).getUint32(0,e);break;case 6:I=new DataView(o,G,1).getInt8(0);break;case 8:I=new DataView(o,G,2).getInt16(0,e);break;case 9:I=new DataView(o,G,4).getInt32(0,e);break;case 10:I=new DataView(o,G,4).getInt32(0,e)/new DataView(o,G+4,4).getInt32(0,e);break;case 11:I=new DataView(o,G,4).getFloat32(0,e);break;case 12:I=new DataView(o,G,8).getFloat64(0,e);break;case 16:case 18:I=F(new DataView(o,G,8),0,e);break;case 17:I=Y(new DataView(o,G,8),0,e);break;default:I=null}h.push(I)}}if(2===f){let G="";const W=h;for(h=[],v=0;v<W.length;v++)0===W[v]&&""!==G?(h.push(G),G=""):G+=String.fromCharCode(W[v]);""===G&&0!==h.length||h.push(G)}return r.values=h,!0}function O(o){var e,r;const n=o[0],t=b(n,"TILEWIDTH"),i=b(n,"TILELENGTH"),f=b(n,"IMAGEWIDTH"),a=b(n,"IMAGELENGTH"),s=b(n,"BITSPERSAMPLE"),h=b(n,"SAMPLESPERPIXEL"),m=null!=(e=b(n,"SAMPLEFORMAT"))?e:1,p=ae(m,s),C=_(n),A=ve(n,"GDAL_NODATA");let I;null!=A&&A.length&&(I=A.map(Te=>parseFloat(Te)),I.some(Te=>isNaN(Te))&&(I=null));const v=null!=(r=b(n,"COMPRESSION"))?r:1;let B;switch(v){case 1:B="NONE";break;case 2:case 3:case 4:case 32771:B="CCITT";break;case 5:B="LZW";break;case 6:case 7:B="JPEG";break;case 32773:B="PACKBITS";break;case 8:case 32946:B="DEFLATE";break;case 34712:B="JPEG2000";break;case 34887:B="LERC";break;default:B=String(v)}let R=!0,G="";re.has(v)||(R=!1,G+="unsupported tag compression "+v),m>3&&(R=!1,G+="unsupported tag sampleFormat "+m),s%8!=0&&(R=!1,G+="unsupported tag bitsPerSample "+s);const W=ge(n,"GEOASCIIPARAMS");let $;if(W){const Te=W.split("|").filter(Ee=>Ee.indexOf("ESRI PE String = ")>-1)[0],be=Te?Te.replace("ESRI PE String = ",""):"";$=be.startsWith("COMPD_CS")||be.startsWith("PROJCS")||be.startsWith("GEOGCS")?{wkid:null,wkt:be}:null}const J=pe(n,"GEOTIEPOINTS"),x=pe(n,"GEOPIXELSCALE"),E=pe(n,"GEOTRANSMATRIX"),U=n.has("GEOKEYDIRECTORY")?n.get("GEOKEYDIRECTORY").data:null;let oe,te,ie=!1;if(U){ie=2===b(U,"GTRasterTypeGeoKey");const Te=b(U,"GTModelTypeGeoKey");if(2===Te){const be=b(U,"GeographicTypeGeoKey");be>=1024&&be<=32766&&($={wkid:be})}else if(1===Te){const be=b(U,"ProjectedCSTypeGeoKey");be>=1024&&be<=32766&&($={wkid:be})}}if(x&&J&&J.length>=6?(oe=[x[0],0,J[3]-J[0]*x[0],0,-Math.abs(x[1]),J[4]-J[1]*x[1]],ie&&(oe[2]-=.5*oe[0]+.5*oe[1],oe[5]-=.5*oe[3]+.5*oe[4])):E&&16===E.length&&(oe=ie?[E[0],E[1],E[3]-.5*E[0],E[4],E[5],E[7]-.5*E[5]]:[E[0],E[1],E[3],E[4],E[5],E[7]]),oe){const Te=[{x:0,y:a},{x:0,y:0},{x:f,y:a},{x:f,y:0}];let be,Ee=Number.POSITIVE_INFINITY,Ue=Number.POSITIVE_INFINITY,Oe=Number.NEGATIVE_INFINITY,Me=Number.NEGATIVE_INFINITY;for(let _e=0;_e<Te.length;_e++)be=we(Te[_e],oe),Ee=be.x>Ee?Ee:be.x,Oe=be.x<Oe?Oe:be.x,Ue=be.y>Ue?Ue:be.y,Me=be.y<Me?Me:be.y;te={xmin:Ee,xmax:Oe,ymin:Ue,ymax:Me,spatialReference:$}}else te={xmin:-.5,ymin:.5-a,xmax:f-.5,ymax:.5,spatialReference:$};const ue=o.filter(Te=>1===ge(Te,"NEWSUBFILETYPE"));let Ce,ke,xe,ce,Ie;if(ue.length>0){Ce=Math.round(Math.log(f/b(ue[0],"IMAGEWIDTH"))/Math.LN2);const Te=ue[ue.length-1];ke=Math.round(Math.log(f/b(Te,"IMAGEWIDTH"))/Math.LN2),xe=b(Te,"TILEWIDTH"),ce=b(Te,"TILELENGTH")}xe=ke>0?xe||t:null,ce=ke>0?ce||i:null,t&&(Ie=[{maxCol:Math.ceil(f/t)-1,maxRow:Math.ceil(a/i)-1,minRow:0,minCol:0}],ue.forEach(Te=>{Ie.push({maxCol:Math.ceil(b(Te,"IMAGEWIDTH")/b(Te,"TILEWIDTH"))-1,maxRow:Math.ceil(b(Te,"IMAGELENGTH")/b(Te,"TILELENGTH"))-1,minRow:0,minCol:0})}));const Re=function(o){if(!o)return null;const e=o.match(/<Item(.*?)Item>/gi);if(!e||0===e.length)return null;const r=new Map;let n,t,i,f,a;for(let R=0;R<e.length;R++)n=e[R],t=n.slice(6,n.indexOf(">")),f=n.indexOf("sample="),f>-1&&(a=n.slice(f+8,n.indexOf('"',f+8))),f=n.indexOf("name="),f>-1&&(t=n.slice(f+6,n.indexOf('"',f+6))),t&&(i=n.slice(n.indexOf(">")+1,n.indexOf("</Item>")).trim(),null!=a?r.has(t)?r.get(t)[a]=i:r.set(t,[i]):r.set(t,i)),a=null;const s=r.get("STATISTICS_MINIMUM"),h=r.get("STATISTICS_MAXIMUM"),m=r.get("STATISTICS_MEAN"),p=r.get("STATISTICS_STDDEV");let C=null;if(s&&h){C=[];for(let R=0;R<s.length;R++)C.push({min:parseFloat(s[R]),max:parseFloat(h[R]),avg:m&&parseFloat(m[R]),stddev:p&&parseFloat(p[R])})}const A=r.get("BandName"),I=r.get("WavelengthMin"),v=r.get("WavelengthMax");let B=null;if(A){B=[];for(let R=0;R<A.length;R++)B.push({BandName:A[R],WavelengthMin:I&&parseFloat(I[R]),WavelengthMax:v&&parseFloat(v[R])})}return{statistics:C,bandProperties:B,dataType:r.get("DataType"),rawMetadata:r}}(ge(o[0],"GDAL_METADATA"));return G+=" "+k({width:f,height:a,tileWidth:t,tileHeight:i,planes:h,ifds:o}),{width:f,height:a,tileWidth:t,tileHeight:i,planes:h,isBSQ:C,pixelType:p,compression:B,noData:I,isSupported:R,message:G,extent:te,affine:x?null:oe,firstPyramidLevel:Ce,maximumPyramidLevel:ke,pyramidBlockWidth:xe,pyramidBlockHeight:ce,tileBoundary:Ie,metadata:Re}}function _(o,e){const r=ve(o,"PLANARCONFIGURATION");return r?2===r[0]:!!e&&e.isBSQ}function F(o,e,r){const n=o.getUint32(e,r),t=o.getUint32(e+4,r);return r?t*Q+n:n*Q+t}function Y(o,e,r){let n=r?o.getInt32(e,r):o.getUint32(e,r),t=r?o.getUint32(e+4,r):o.getInt32(e+4,r);const i=(r?n:t)>=0?1:-1;return r?n*=i:t*=i,i*(r?t*Q+n:n*Q+t)}function j(o,e,r,n){return n?F(o,e,r):o.getUint32(e,r)}function M(o){const e=new DataView(o,0,16),r=e.getUint16(0,!1);let n=null;if(18761===r)n=!0;else{if(19789!==r)throw"unexpected endianess byte";n=!1}const t=e.getUint16(2,n);if(42!==t&&43!==t)throw"unexpected tiff identifier";let i=4;const f=43===t;if(f){const a=e.getUint16(i,n);if(i+=2,8!==a||0!==e.getUint16(i,n))throw"unsupported bigtiff version";i+=2}return{littleEndian:n,isBigTiff:f,firstIFD:j(e,i,n,f)}}function c(o,e,r,n=0,t=se.Z.TIFF_TAGS,i=4){const f=L(o,e,r,n,t,i);let a;const s=f.ifd;if(s){if(se.Z.ifdTags.forEach((h,m)=>{s.has(m)&&(a=s.get(m),a.data=L(o,e,a.valueOffset-n,n,h).ifd)}),s.has("GEOKEYDIRECTORY")){a=s.get("GEOKEYDIRECTORY");const h=a.values;if(h&&h.length>4){const m=h[0]+"."+h[1]+"."+h[2];a.data=L(o,e,a.valueOffset+6-n,n,se.Z.GEO_KEYS,2).ifd,a.data&&a.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[m]})}}if(s.has("XMP")){a=s.get("XMP");const h=a.values;"number"==typeof h[0]&&7===a.type&&(a.values=[(0,ne.f)(new Uint8Array(h))])}}return f}function k(o){const{width:e,height:r,tileHeight:n,tileWidth:t}=o,i=o.planes,f=t?t*n:e*r,a=b(o.ifds[0],"BITSPERSAMPLE");let s="";return f*i>2**30/(a>8?a/8:1)&&(s=t?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported"),s}function D(o,e){var r;const{headerInfo:n,ifd:t,offsets:i,sizes:f}=e,a=i.map((te,ie)=>d(o,n.littleEndian,t,te,f[ie]||o.byteLength)),s=_(t,n),{pixelType:h,planes:m}=n,p=fe(h),C=b(t,"TILEWIDTH"),A=b(t,"TILELENGTH"),I=null!=(r=b(t,"COMPRESSION"))?r:1,v=C*A;let B;const R=[];let G=a[0];const W=34887===I;for(let te=0;te<m;te++){if(B=new p(v),s&&W){G=a[te];for(let ie=0;ie<v;ie++)B[ie]=G[te][ie+te]}else if(s||W&&!s)B=G.slice(v*te,v*(te+1));else for(let ie=0;ie<v;ie++)B[ie]=G[ie*m+te];R.push(B)}const $=n.noData?n.noData[0]:null,J=n.metadata?n.metadata.statistics:null,x=J?J.map(te=>te.min):null,E=J?J.map(te=>te.max):null;let U,oe;if(null!=$)if(U=new Uint8Array(v),Math.abs($)>1e24)for(oe=0;oe<v;oe++)U[oe]=Math.abs((R[0][oe]-$)/$)<1e-6?0:1;else for(oe=0;oe<v;oe++)U[oe]=R[0][oe]===$?0:1;else x&&E&&e.applyMinMaxConstraint&&(U=function(o,e,r){if(!(o&&o.length>0&&e&&r))return null;let n,t,i;const f=o[0].length,a=o.length,s=new Uint8Array(f);for(let h=0;h<a;h++)if(n=o[h],t=e[h],i=r[h],0===h)for(let m=0;m<f;m++)s[m]=n[m]<t||n[m]>i?0:1;else for(let m=0;m<f;m++)s[m]&&(s[m]=n[m]<t||n[m]>i?0:1);return s}(R,x,E));return{pixelType:h,width:C,height:A,pixels:R,mask:U,noDataValue:$}}function P(o,e=0,r){r=r||function Z(o){const{littleEndian:e,isBigTiff:r,firstIFD:n}=M(o);let t=n;const i=[];do{const f=c(o,e,t,0,se.Z.TIFF_TAGS,r?8:4);if(!f.success)break;i.push(f.ifd),t=f.nextIFD}while(t>0);return Le(Ae({},O(i)),{littleEndian:e,isBigTiff:r,ifds:i})}(o);const{ifds:n,noData:t}=r;if(0===n.length)throw"no valid image file directory";const i=k(r);if(i)throw i;let f,a;const s=-1===e?n[n.length-1]:n[e],h=t?t[0]:null;if(a=r.tileWidth?function(o,e,r){var n;const t=pe(r,"TILEOFFSETS");if(void 0===t)return null;const i=pe(r,"TILEBYTECOUNTS"),{width:f,height:a,pixelType:s,tileWidth:h,tileHeight:m}=O([r]),p=_(r,e),C=e.planes,A=f*a,I=b(r,"BITSPERSAMPLE"),v=34887===(null!=(n=b(r,"COMPRESSION"))?n:1),B=fe(s),R=[];for(let ce=0;ce<C;ce++)R.push(new B(A));let G,W,$,J,x,E,U,oe,te,ie,ue,Ce,ke;const xe=Math.ceil(f/h);if(I%8==0)if(v&&p&&C>1){const ce=Math.round(t.length/C);for(G=0;G<ce;G++){E=Math.floor(G/xe)*m,U=G%xe*h,oe=E*f+U;for(let Ie=0;Ie<C;Ie++){const De=G*C+Ie;for($=d(o,e.littleEndian,r,t[De],i[De]),ie=0,te=oe,Ce=Math.min(h,f-U),ue=Math.min(m,a-E),ke=R[Ie],J=0;J<ue;J++)for(te=oe+J*f,ie=J*h,x=0;x<Ce;x++,te++,ie++)ke[te]=$[ie]}}}else for(G=0;G<t.length;G++)for(E=Math.floor(G/xe)*m,U=G%xe*h,oe=E*f+U,$=d(o,e.littleEndian,r,t[G],i[G]),ie=0,te=oe,Ce=Math.min(h,f-U),ue=Math.min(m,a-E),W=0;W<C;W++)if(ke=R[W],p||v)for(J=0;J<ue;J++)for(te=oe+J*f,ie=h*m*W+J*h,x=0;x<Ce;x++,te++,ie++)ke[te]=$[ie];else for(J=0;J<ue;J++)for(te=oe+J*f,ie=J*h*C+W,x=0;x<Ce;x++,te++,ie+=C)ke[te]=$[ie];return{width:f,height:a,pixelType:s,pixels:R}}(o,r,s):function(o,e,r){var n;const t=me.f===e.littleEndian,i=pe(r,"STRIPOFFSETS");if(void 0===i)return null;const{width:f,height:a,pixelType:s}=O([r]),h=e.planes,m=f*a,p=b(r,"BITSPERSAMPLE"),C=fe(s),A=new C(m*h),I=pe(r,"STRIPBYTECOUNTS"),v=b(r,"ROWSPERSTRIP"),B=null!=(n=b(r,"COMPRESSION"))?n:1;let R,G,W,$,J,x,E,U,oe,te,ie,ue=v;if(p%8==0)for(R=0;R<i.length;R++){if(J=R*(v*f)*h,ue=(R+1)*v>a?a-R*v:v,"u8"===s||"s8"===s||t){if(8===B||32946===B)E=new Uint8Array(o,i[R],I[R]),te=new le.Z(E),ie=te.getBytes(),x=new ArrayBuffer(ie.length),E=new Uint8Array(x),E.set(ie),E.length!==ue*f*h*p/8&&console.log("strip byte counts is different than expected");else if(6===B){E=new Uint8Array(o,i[R],I[R]);const ke=new he.J;ke.parse(E);const xe=ke.getData(ke.width,ke.height,!0);x=new ArrayBuffer(xe.length),E=new Uint8Array(x),E.set(xe)}else 5===B?(E=(0,de.J)(o,i[R],I[R],e.littleEndian),x=E.buffer):1===B&&(I[R]!==ue*f*h*p/8&&console.log("strip byte counts is different than expected"),x=o.slice(i[R],i[R]+I[R]));$=new C(x)}else{switch(6===B||8===B||32946===B?(E=new Uint8Array(o,i[R],I[R]),te=new le.Z(E),E=te.getBytes(),x=new ArrayBuffer(E.length),U=new Uint8Array(x),E.length!==ue*f*h*p/8&&console.log("strip byte counts is different than expected")):1===B&&(I[R]!==ue*f*h*p/8&&console.log("strip byte counts is different than expected"),x=new ArrayBuffer(I[R]),E=new Uint8Array(o,i[R],I[R]),U=new Uint8Array(x)),s){case"u16":case"s16":for(W=0;W<E.length;W+=2)U[W]=E[W+1],U[W+1]=E[W];break;case"u32":case"s32":case"f32":for(W=0;W<E.length;W+=4)U[W]=E[W+3],U[W+1]=E[W+2],U[W+2]=E[W+1],U[W+3]=E[W]}$=new C(x)}A.set($,J)}const Ce=[];if(1===h)Ce.push(A);else for(R=0;R<h;R++){for(oe=new C(m),G=0;G<m;G++)oe[G]=A[G*h+R];Ce.push(oe)}return{width:f,height:a,pixelType:s,pixels:Ce}}(o,r,s),null!==h){if(a.mask=new Uint8Array(a.width*a.height),Math.abs(h)>1e24)for(f=0;f<a.width*a.height;f++)a.mask[f]=Math.abs((a.pixels[0][f]-h)/h)<1e-6?0:1;else for(f=0;f<a.width*a.height;f++)a.mask[f]=a.pixels[0][f]===h?0:1;a.noDataValue=h}return a}},34022:(Se,ye,q)=>{q.d(ye,{Z:()=>me});var ne,he,de,se={exports:{}};he=se,ne=function(){function le(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return le.prototype={ensureBuffer:function(ee){var u=this.buffer,N=u?u.byteLength:0;if(ee<N)return u;for(var V=512;V<ee;)V<<=1;for(var H=new Uint8Array(V),T=0;T<N;++T)H[T]=u[T];return this.buffer=H},getByte:function(){for(var ee=this.pos;this.bufferLength<=ee;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(ee){var u=this.pos;if(ee){this.ensureBuffer(u+ee);for(var N=u+ee;!this.eof&&this.bufferLength<N;)this.readBlock();var V=this.bufferLength;N>V&&(N=V)}else{for(;!this.eof;)this.readBlock();N=this.bufferLength}return this.pos=N,this.buffer.subarray(u,N)},lookChar:function(){for(var ee=this.pos;this.bufferLength<=ee;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var ee=this.pos;this.bufferLength<=ee;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(ee,u,N){for(var V=ee+u;this.bufferLength<=V&&!this.eof;)this.readBlock();return new Stream(this.buffer,ee,u,N)},skip:function(ee){ee||(ee=1),this.pos+=ee},reset:function(){this.pos=0}},le}(),void 0!==(de=function(){if(!self||!self.Uint32Array)return null;var le=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ee=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),u=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),N=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],V=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function H(X){throw new Error(X)}function T(X){var K=0,Q=X[K++],re=X[K++];-1!=Q&&-1!=re||H("Invalid header in flate stream"),8!=(15&Q)&&H("Unknown compression method in flate stream"),((Q<<8)+re)%31!=0&&H("Bad FCHECK in flate stream"),32&re&&H("FDICT bit set in flate stream"),this.bytes=X,this.bytesPos=2,this.codeSize=0,this.codeBuf=0,ne.call(this)}return(T.prototype=Object.create(ne.prototype)).getBits=function(X){for(var K,Q=this.codeSize,re=this.codeBuf,ae=this.bytes,fe=this.bytesPos;Q<X;)void 0===(K=ae[fe++])&&H("Bad encoding in flate stream"),re|=K<<Q,Q+=8;return K=re&(1<<X)-1,this.codeBuf=re>>X,this.codeSize=Q-=X,this.bytesPos=fe,K},T.prototype.getCode=function(X){for(var K=X[0],Q=X[1],re=this.codeSize,ae=this.codeBuf,fe=this.bytes,we=this.bytesPos;re<Q;){var ve;void 0===(ve=fe[we++])&&H("Bad encoding in flate stream"),ae|=ve<<re,re+=8}var pe=K[ae&(1<<Q)-1],ge=pe>>16,b=65535&pe;return(0==re||re<ge||0==ge)&&H("Bad encoding in flate stream"),this.codeBuf=ae>>ge,this.codeSize=re-ge,this.bytesPos=we,b},T.prototype.generateHuffmanTable=function(X){for(var K=X.length,Q=0,re=0;re<K;++re)X[re]>Q&&(Q=X[re]);for(var ae=1<<Q,fe=new Uint32Array(ae),we=1,ve=0,pe=2;we<=Q;++we,ve<<=1,pe<<=1)for(var ge=0;ge<K;++ge)if(X[ge]==we){var b=0,L=ve;for(re=0;re<we;++re)b=b<<1|1&L,L>>=1;for(re=b;re<ae;re+=pe)fe[re]=we<<16|ge;++ve}return[fe,Q]},T.prototype.readBlock=function(){function X(P,o,e,r,n){for(var t=P.getBits(e)+r;t-- >0;)o[pe++]=n}var K=this.getBits(3);if(1&K&&(this.eof=!0),0!=(K>>=1)){var Q,re;if(1==K)Q=N,re=V;else if(2==K){for(var ae=this.getBits(5)+257,fe=this.getBits(5)+1,we=this.getBits(4)+4,ve=Array(le.length),pe=0;pe<we;)ve[le[pe++]]=this.getBits(3);for(var ge=this.generateHuffmanTable(ve),b=0,L=(pe=0,ae+fe),z=new Array(L);pe<L;){var d=this.getCode(ge);16==d?X(this,z,2,3,b):17==d?X(this,z,3,3,b=0):18==d?X(this,z,7,11,b=0):z[pe++]=b=d}Q=this.generateHuffmanTable(z.slice(0,ae)),re=this.generateHuffmanTable(z.slice(ae,L))}else H("Unknown block type in flate stream");for(var l=(c=this.buffer)?c.length:0,g=this.bufferLength;;){var y=this.getCode(Q);if(y<256)g+1>=l&&(l=(c=this.ensureBuffer(g+1)).length),c[g++]=y;else{if(256==y)return void(this.bufferLength=g);var w=(y=ee[y-=257])>>16;w>0&&(w=this.getBits(w)),b=(65535&y)+w,y=this.getCode(re),(w=(y=u[y])>>16)>0&&(w=this.getBits(w));var S=(65535&y)+w;g+b>=l&&(l=(c=this.ensureBuffer(g+b)).length);for(var O=0;O<b;++O,++g)c[g]=c[g-S]}}}else{var _,Z=this.bytes,F=this.bytesPos;void 0===(_=Z[F++])&&H("Bad block header in flate stream");var Y=_;void 0===(_=Z[F++])&&H("Bad block header in flate stream"),Y|=_<<8,void 0===(_=Z[F++])&&H("Bad block header in flate stream");var j=_;void 0===(_=Z[F++])&&H("Bad block header in flate stream"),(j|=_<<8)!=(65535&~Y)&&H("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var M=this.bufferLength,c=this.ensureBuffer(M+Y),k=M+Y;this.bufferLength=k;for(var D=M;D<k;++D){if(void 0===(_=Z[F++])){this.eof=!0;break}c[D]=_}this.bytesPos=F}},T}())&&(he.exports=de);const me=se.exports},78260:(Se,ye,q)=>{function he(l){return"h"in l&&"s"in l&&"v"in l}function de(l){return"l"in l&&"a"in l&&"b"in l}function se(l){return"l"in l&&"c"in l&&"h"in l}q.d(ye,{_Y:()=>ge,Y3:()=>b,sJ:()=>L,xr:()=>pe});const le=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],ee=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function u(l,g){const y=[];let w,S;if(l[0].length!==g.length)throw"dimensions do not match";const O=l.length,_=l[0].length;let Z=0;for(w=0;w<O;w++){for(Z=0,S=0;S<_;S++)Z+=l[w][S]*g[S];y.push(Z)}return y}function N(l){const g=[l.r/255,l.g/255,l.b/255].map(w=>w<=.04045?w/12.92:((w+.055)/1.055)**2.4),y=u(le,g);return{x:100*y[0],y:100*y[1],z:100*y[2]}}function V(l){const g=u(ee,[l.x/100,l.y/100,l.z/100]).map(y=>Math.min(1,Math.max(y<=.0031308?12.92*y:1.055*y**.4166666666666667-.055,0)));return{r:Math.round(255*g[0]),g:Math.round(255*g[1]),b:Math.round(255*g[2])}}function H(l){const g=[l.x/95.047,l.y/100,l.z/108.883].map(y=>y>.008856451679035631?y**.3333333333333333:7.787037037037035*y+.13793103448275862);return{l:116*g[1]-16,a:500*(g[0]-g[1]),b:200*(g[1]-g[2])}}function T(l){const g=l.l,y=[(g+16)/116+l.a/500,(g+16)/116,(g+16)/116-l.b/200].map(w=>w>6/29?w**3:3*(6/29)**2*(w-4/29));return{x:95.047*y[0],y:100*y[1],z:108.883*y[2]}}function pe(l){return function ne(l){return"r"in l&&"g"in l&&"b"in l}(l)?l:se(l)?function fe(l){return V(T(function K(l){const y=l.c,w=l.h;return{l:l.l,a:y*Math.cos(w),b:y*Math.sin(w)}}(l)))}(l):de(l)?function re(l){return V(T(l))}(l):function me(l){return"x"in l&&"y"in l&&"z"in l}(l)?V(l):he(l)?function ve(l){const g=(l.h+360)%360/60,w=l.v/100*255,S=w*(l.s/100),O=S*(1-Math.abs(g%2-1));let _;switch(Math.floor(g)){case 0:_={r:S,g:O,b:0};break;case 1:_={r:O,g:S,b:0};break;case 2:_={r:0,g:S,b:O};break;case 3:_={r:0,g:O,b:S};break;case 4:_={r:O,g:0,b:S};break;case 5:case 6:_={r:S,g:0,b:O};break;default:_={r:0,g:0,b:0}}return _.r=Math.round(_.r+w-S),_.g=Math.round(_.g+w-S),_.b=Math.round(_.b+w-S),_}(l):l}function ge(l){return he(l)?l:function we(l){const g=l.r,y=l.g,w=l.b,S=Math.max(g,y,w),O=S-Math.min(g,y,w);let _=S,Z=0===O?0:S===g?(y-w)/O%6:S===y?(w-g)/O+2:(g-y)/O+4,F=0===O?0:O/_;return Z<0&&(Z+=6),Z*=60,F*=100,_*=100/255,{h:Z,s:F,v:_}}(pe(l))}function b(l){return de(l)?l:function Q(l){return H(N(l))}(pe(l))}function L(l){return se(l)?l:function ae(l){return function X(l){const g=l.l,y=l.a,w=l.b,S=Math.sqrt(y*y+w*w);let O=Math.atan2(w,y);return O=O>0?O:O+2*Math.PI,{l:g,c:S,h:O}}(H(N(l)))}(pe(l))}},79645:(Se,ye,q)=>{q.d(ye,{Z:()=>X});var ne=q(17626),he=q(86162),de=q(62208),se=q(77712),u=(q(85931),q(8314),q(90912),q(76898)),N=q(2004),V=q(65234),H=q(27497);let T=class extends he.wq{constructor(K){super(K),this.attributeTable=null,this.bandCount=null,this.colormap=null,this.extent=null,this.format=void 0,this.height=null,this.width=null,this.histograms=null,this.keyProperties={},this.multidimensionalInfo=null,this.noDataValue=null,this.pixelSize=null,this.pixelType=null,this.isPseudoSpatialReference=!1,this.spatialReference=null,this.statistics=null,this.storageInfo=null,this.transform=null}get dataType(){var K,Q,re;const ae=null!=(K=null==(Q=this.keyProperties)||null==(re=Q.DataType)?void 0:re.toLowerCase())?K:"generic";return"stdtime"===ae?"standard-time":ae}get nativeExtent(){return this._get("nativeExtent")||this.extent}set nativeExtent(K){K&&this._set("nativeExtent",K)}get nativePixelSize(){if(!(0,de.pC)(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const K=this.nativeExtent;return{x:K.width/this.width,y:K.height/this.height}}};(0,ne._)([(0,se.Cb)({json:{write:!0}})],T.prototype,"attributeTable",void 0),(0,ne._)([(0,se.Cb)({json:{write:!0}})],T.prototype,"bandCount",void 0),(0,ne._)([(0,se.Cb)({json:{write:!0}})],T.prototype,"colormap",void 0),(0,ne._)([(0,se.Cb)({type:String,readOnly:!0})],T.prototype,"dataType",null),(0,ne._)([(0,se.Cb)({type:N.Z,json:{write:!0}})],T.prototype,"extent",void 0),(0,ne._)([(0,se.Cb)({type:N.Z,json:{write:!0}})],T.prototype,"nativeExtent",null),(0,ne._)([(0,se.Cb)({json:{write:!0}})],T.prototype,"nativePixelSize",null),(0,ne._)([(0,se.Cb)({json:{write:!0}})],T.prototype,"format",void 0),(0,ne._)([(0,se.Cb)({json:{write:!0}})],T.prototype,"height",void 0),(0,ne._)([(0,se.Cb)({json:{write:!0}})],T.prototype,"width",void 0),(0,ne._)([(0,se.Cb)({json:{write:!0}})],T.prototype,"histograms",void 0),(0,ne._)([(0,se.Cb)({json:{write:!0}})],T.prototype,"keyProperties",void 0),(0,ne._)([(0,se.Cb)({json:{write:!0}})],T.prototype,"multidimensionalInfo",void 0),(0,ne._)([(0,se.Cb)()],T.prototype,"noDataValue",void 0),(0,ne._)([(0,se.Cb)({json:{write:!0}})],T.prototype,"pixelSize",void 0),(0,ne._)([(0,se.Cb)({json:{write:!0}})],T.prototype,"pixelType",void 0),(0,ne._)([(0,se.Cb)()],T.prototype,"isPseudoSpatialReference",void 0),(0,ne._)([(0,se.Cb)({type:V.Z,json:{write:!0}})],T.prototype,"spatialReference",void 0),(0,ne._)([(0,se.Cb)({json:{write:!0}})],T.prototype,"statistics",void 0),(0,ne._)([(0,se.Cb)({type:H.Z,json:{write:!0}})],T.prototype,"storageInfo",void 0),(0,ne._)([(0,se.Cb)({json:{write:!0}})],T.prototype,"transform",void 0),T=(0,ne._)([(0,u.j)("esri.layers.support.RasterInfo")],T);const X=T},27497:(Se,ye,q)=>{q.d(ye,{Z:()=>V});var ne=q(17626),he=q(86162),de=q(77712),ee=(q(85931),q(8314),q(90912),q(76898)),u=q(49672);let N=class extends he.wq{constructor(){super(...arguments),this.blockWidth=void 0,this.blockHeight=void 0,this.compression=null,this.origin=null,this.firstPyramidLevel=null,this.maximumPyramidLevel=null,this.pyramidScalingFactor=2,this.pyramidBlockWidth=null,this.pyramidBlockHeight=null,this.isVirtualTileInfo=!1,this.tileInfo=null,this.blockBoundary=null}};(0,ne._)([(0,de.Cb)({type:Number,json:{write:!0}})],N.prototype,"blockWidth",void 0),(0,ne._)([(0,de.Cb)({type:Number,json:{write:!0}})],N.prototype,"blockHeight",void 0),(0,ne._)([(0,de.Cb)({type:String,json:{write:!0}})],N.prototype,"compression",void 0),(0,ne._)([(0,de.Cb)({type:u.Z,json:{write:!0}})],N.prototype,"origin",void 0),(0,ne._)([(0,de.Cb)({type:Number,json:{write:!0}})],N.prototype,"firstPyramidLevel",void 0),(0,ne._)([(0,de.Cb)({type:Number,json:{write:!0}})],N.prototype,"maximumPyramidLevel",void 0),(0,ne._)([(0,de.Cb)({json:{write:!0}})],N.prototype,"pyramidResolutions",void 0),(0,ne._)([(0,de.Cb)({type:Number,json:{write:!0}})],N.prototype,"pyramidScalingFactor",void 0),(0,ne._)([(0,de.Cb)({type:Number,json:{write:!0}})],N.prototype,"pyramidBlockWidth",void 0),(0,ne._)([(0,de.Cb)({type:Number,json:{write:!0}})],N.prototype,"pyramidBlockHeight",void 0),(0,ne._)([(0,de.Cb)({type:Boolean,json:{write:!0}})],N.prototype,"isVirtualTileInfo",void 0),(0,ne._)([(0,de.Cb)({json:{write:!0}})],N.prototype,"tileInfo",void 0),(0,ne._)([(0,de.Cb)()],N.prototype,"blockBoundary",void 0),N=(0,ne._)([(0,ee.j)("esri.layers.support.RasterStorageInfo")],N);const V=N},15365:(Se,ye,q)=>{function ne(he,de){let se=0,me="",le=0,ee=0;const u=he.length;for(;se<u;)ee=he[se++],le=ee>>4,le<8?le=1:15===le?(le=4,ee=(7&ee)<<18|(63&he[se++])<<12|(63&he[se++])<<6|63&he[se++]):14===le?(le=3,ee=(15&ee)<<12|(63&he[se++])<<6|63&he[se++]):(le=2,ee=(31&ee)<<6|63&he[se++]),(0!==ee||de)&&(me+=String.fromCharCode(ee));return me}q.d(ye,{f:()=>ne})},94194:(Se,ye,q)=>{function he(){const le=[];for(let ee=0;ee<=257;ee++)le[ee]=[ee];return le}function de(le,ee){for(let u=0;u<ee.length;u++)le.push(ee[u])}q.d(ye,{J:()=>me});const se=new Set;function me(le,ee,u,N=!0){const V=function ne(le,ee,u,N=!0){if(ee%4!=0||u%4!=0){const V=new ArrayBuffer(4*Math.ceil(u/4)),H=new Uint8Array(V),T=new Uint8Array(le,ee,u);if(N)for(let X=0;X<H.length;X+=4)H[X]=T[X+3],H[X+1]=T[X+2],H[X+2]=T[X+1],H[X+3]=T[X];else H.set(T);return new Uint32Array(H.buffer)}if(N){const V=new Uint8Array(le,ee,u),H=new Uint8Array(V.length);for(let T=0;T<H.length;T+=4)H[T]=V[T+3],H[T+1]=V[T+2],H[T+2]=V[T+1],H[T+3]=V[T];return new Uint32Array(H.buffer)}return new Uint32Array(le,ee,u/4)}(le,ee,u,N);let H=9,T=he(),X=32,K=T.length,Q=[],re=1,ae=V[0],fe=0;const we=V.length,ve=8*(4*we-u),pe=[];for(;null!=ae;){if(X>=H)X-=H,fe=ae>>>32-H,ae<<=H;else{fe=ae>>>32-X,ae=V[re++];const b=H-X;X=32-b,fe=(fe<<b)+(ae>>>X),ae<<=b}if(257===fe)break;if(256===fe){H=9,T=he(),K=T.length,Q=[];continue}const ge=T[fe];if(null==ge){if(fe>T.length)throw"data integrity issue: code does not exist on code page";Q.push(Q[0]),T[K++]=Q.slice(),de(pe,Q)}else de(pe,ge),Q.push(ge[0]),Q.length>1&&(T[K++]=Q.slice()),Q=ge.slice();if(se.has(K)&&H++,0===X&&(ae=V[re++],X=32),re>we||re===we&&X<=ve)break}return new Uint8Array(pe)}se.add(511),se.add(1023),se.add(2047),se.add(4095),se.add(8191)},8614:(Se,ye,q)=>{q.d(ye,{Jx:()=>Y,y6:()=>F});var ne=q(15861),he=q(26584),de=q(60295),se=q(10699),me=q(34022);class le{constructor(c){c&&(this.canvas=c.canvas,this.ctx=c.ctx||c.canvas&&c.canvas.getContext("2d"))}decode(c,k,D){if(!c||c.byteLength<10)throw new he.Z("imagecanvasdecoder: decode","required a valid encoded data as input.");let{width:P,height:o,format:e}=k;const{applyJpegMask:r}=k;if(r&&(!P||!o))throw new he.Z("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((n,t)=>{let i=null;"jpg"===e&&r&&(i=le.getMask(c,{width:P,height:o}));const f=new Blob([new Uint8Array(c)],{type:"image/"+e=="jpg"?"jpeg":e}),a=URL.createObjectURL(f),s=new Image;let h;s.src=a,s.onload=()=>{if(URL.revokeObjectURL(a),(0,se.Hc)(D))return void t((0,se.zE)());P=s.width,o=s.height,this.canvas?(this.canvas.width===P&&this.canvas.height===o||(this.canvas.width=P,this.canvas.height=o),this.ctx.clearRect(0,0,P,o)):(this.canvas=document.createElement("canvas"),this.canvas.width=P,this.canvas.height=o,this.ctx=this.canvas.getContext("2d")),this.ctx.drawImage(s,0,0);const m=this.ctx.getImageData(0,0,P,o);let p;if(h=m.data,k.renderOnCanvas){if(i)for(p=0;p<i.length;p++)h[4*p+3]=i[p]?255:0;return this.ctx.putImageData(m,0,0),void n(null)}const C=P*o,A=new Uint8Array(C),I=new Uint8Array(C),v=new Uint8Array(C);if(i)for(p=0;p<C;p++)A[p]=h[4*p],I[p]=h[4*p+1],v[p]=h[4*p+2];else for(i=new Uint8Array(C),p=0;p<C;p++)A[p]=h[4*p],I[p]=h[4*p+1],v[p]=h[4*p+2],i[p]=h[4*p+3];n({width:P,height:o,pixels:[A,I,v],mask:i,pixelType:"u8"})},s.onerror=()=>{URL.revokeObjectURL(a),t("cannot load image")}})}static getMask(c,k){let D=null;try{const P=new Uint8Array(c),o=Math.ceil(P.length/2);let e=0;const r=P.length-2;for(e=o;e<r&&(255!==P[e]||217!==P[e+1]);e++);if(e+=2,e<P.length-1){const n=new me.Z(P.subarray(e)).getBytes();D=new Uint8Array(k.width*k.height);let t=0;for(let i=0;i<n.length;i++)for(let f=7;f>=0;f--)D[t++]=n[i]>>f&1}}catch(P){}return D}}var ee=q(3579),N=q(46540),V=q(10621),H=q(94194);const T=function(M,c){return Math.floor(M.byteLength/(c.width*c.height*X(c.pixelType)))},X=function(M){let c=1;switch(M){case Uint8Array:case Int8Array:c=1;break;case Uint16Array:case Int16Array:c=2;break;case Uint32Array:case Int32Array:case Float32Array:c=4;break;case Float64Array:c=8}return c};var re=q(44853),ae=function(M){var P,o,e;function r(n){var t,f,a,s,h,m,p,C,A,I,v,B;for(this.data=n,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},s=null;;){switch(t=this.readUInt32(),p=function(){var R,G;for(G=[],R=0;R<4;++R)G.push(String.fromCharCode(this.data[this.pos++]));return G}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":s&&this.animation.frames.push(s),this.pos+=4,s={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},a=this.readUInt16(),f=this.readUInt16()||100,s.delay=1e3*a/f,s.disposeOp=this.data[this.pos++],s.blendOp=this.data[this.pos++],s.data=[];break;case"IDAT":case"fdAT":for("fdAT"===p&&(this.pos+=4,t-=4),n=(null!=s?s.data:void 0)||this.imgData,I=0;0<=t?I<t:I>t;0<=t?++I:--I)n.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(t),(C=255-this.transparency.indexed.length)>0)for(v=0;0<=C?v<C:v>C;0<=C?++v:--v)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":h=(A=this.read(t)).indexOf(0),m=String.fromCharCode.apply(String,A.slice(0,h)),this.text[m]=String.fromCharCode.apply(String,A.slice(h+1));break;case"IEND":return s&&this.animation.frames.push(s),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(B=this.colorType)||6===B,this.pixelBitlength=this.bits*(this.colors+(this.hasAlphaChannel?1:0)),this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return r.load=function(n,t,i){var f;return"function"==typeof t&&(i=t),(f=new XMLHttpRequest).open("GET",n,!0),f.responseType="arraybuffer",f.onload=function(){var a;return a=new r(new Uint8Array(f.response||f.mozResponseArrayBuffer)),"function"==typeof(null!=t?t.getContext:void 0)&&a.render(t),"function"==typeof i?i(a):void 0},f.send(null)},r.prototype.read=function(n){var t,i;for(i=[],t=0;0<=n?t<n:t>n;0<=n?++t:--t)i.push(this.data[this.pos++]);return i},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(n){var t,i,f,a,s,h,m,p,A,I,v,B,R,G,W,$,J,x,E,U,oe,te;if(null==n&&(n=this.imgData),0===n.length)return new Uint8Array(0);for(n=(n=new me.Z(n)).getBytes(),W=(v=this.pixelBitlength/8)*this.width,B=new Uint8Array(W*this.height),h=n.length,G=0,R=0,i=0;R<h;){switch(n[R++]){case 0:for(a=x=0;x<W;a=x+=1)B[i++]=n[R++];break;case 1:for(a=E=0;E<W;a=E+=1)t=n[R++],s=a<v?0:B[i-v],B[i++]=(t+s)%256;break;case 2:for(a=U=0;U<W;a=U+=1)t=n[R++],f=(a-a%v)/v,B[i++]=(($=G&&B[(G-1)*W+f*v+a%v])+t)%256;break;case 3:for(a=oe=0;oe<W;a=oe+=1)t=n[R++],f=(a-a%v)/v,s=a<v?0:B[i-v],$=G&&B[(G-1)*W+f*v+a%v],B[i++]=(t+Math.floor((s+$)/2))%256;break;case 4:for(a=te=0;te<W;a=te+=1)t=n[R++],f=(a-a%v)/v,0===G?$=J=0:($=B[(G-1)*W+f*v+a%v],J=f&&B[(G-1)*W+(f-1)*v+a%v]),m=(s=a<v?0:B[i-v])+$-J,p=Math.abs(m-s),A=Math.abs(m-$),I=Math.abs(m-J),B[i++]=(t+(p<=A&&p<=I?s:A<=I?$:J))%256;break;default:throw new Error("Invalid filter algorithm: "+n[R-1])}G++}return B},r.prototype.decodePalette=function(){var n,t,i,f,a,s,h,m,p;for(i=this.palette,s=this.transparency.indexed||[],a=new Uint8Array((s.length||0)+i.length),f=0,n=0,t=h=0,m=i.length;h<m;t=h+=3)a[f++]=i[t],a[f++]=i[t+1],a[f++]=i[t+2],a[f++]=null!=(p=s[n++])?p:255;return a},r.prototype.copyToImageData=function(n,t){var i,f,a,s,h,m,p,C,A,I,v;if(f=this.colors,A=null,i=this.hasAlphaChannel,this.palette.length&&(A=null!=(v=this._decodedPalette)?v:this._decodedPalette=this.decodePalette(),f=4,i=!0),C=(a=n.data||n).length,h=A||t,s=m=0,1===f)for(;s<C;)p=A?4*t[s/4]:m,I=h[p++],a[s++]=I,a[s++]=I,a[s++]=I,a[s++]=i?h[p++]:this.transparency.grayscale&&this.transparency.grayscale===I?0:255,m=p;else for(;s<C;)p=A?4*t[s/4]:m,a[s++]=h[p++],a[s++]=h[p++],a[s++]=h[p++],a[s++]=i?h[p++]:this.transparency.rgb&&this.transparency.rgb[1]===h[p-3]&&this.transparency.rgb[3]===h[p-2]&&this.transparency.rgb[5]===h[p-1]?0:255,m=p},r.prototype.decode=function(){var n;return n=new Uint8Array(this.width*this.height*4),this.copyToImageData(n,this.decodePixels()),n},o=M.document&&M.document.createElement("canvas"),e=o&&o.getContext("2d"),P=function(n){var t;return e.width=n.width,e.height=n.height,e.clearRect(0,0,n.width,n.height),e.putImageData(n,0,0),(t=new Image).src=o.toDataURL(),t},r.prototype.decodeFrames=function(n){var t,i,f,a,s,h,m,p;if(this.animation){for(p=[],i=s=0,h=(m=this.animation.frames).length;s<h;i=++s)f=n.createImageData((t=m[i]).width,t.height),a=this.decodePixels(new Uint8Array(t.data)),this.copyToImageData(f,a),t.imageData=f,p.push(t.image=P(f));return p}},r.prototype.renderFrame=function(n,t){var i,f,a;return i=(f=this.animation.frames)[t],a=f[t-1],0===t&&n.clearRect(0,0,this.width,this.height),1===(null!=a?a.disposeOp:void 0)?n.clearRect(a.xOffset,a.yOffset,a.width,a.height):2===(null!=a?a.disposeOp:void 0)&&n.putImageData(a.imageData,a.xOffset,a.yOffset),0===i.blendOp&&n.clearRect(i.xOffset,i.yOffset,i.width,i.height),n.drawImage(i.image,i.xOffset,i.yOffset)},r.prototype.animate=function(n){var t,i,f,a,s,h,m=this;return i=0,a=(h=this.animation).numFrames,f=h.frames,s=h.numPlays,(t=function(){var p,C;if(p=i++%a,C=f[p],m.renderFrame(n,p),a>1&&i/a<s)return m.animation._timeout=setTimeout(t,C.delay)})()},r.prototype.stopAnimation=function(){var n;return clearTimeout(null!=(n=this.animation)?n._timeout:void 0)},r.prototype.render=function(n){var t,i;return n._png&&n._png.stopAnimation(),n._png=this,n.width=this.width,n.height=this.height,t=n.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(i=t.createImageData(this.width,this.height),this.copyToImageData(i,this.decodePixels()),t.putImageData(i,0,0))},r}(self);const fe=new Set(["jpg","png","bmp","gif"]);function we(M,c){if(!re.f)throw new he.Z("rasterCoded:decode","lerc decoder is not supported on big endian platform");const{width:k,height:D,pixelType:P}=c,o=_(P),e=o.pixelTypeCtor,r=null==c.noDataValue?o.noDataValue:c.noDataValue;let n,t,i=0,f=0;const a=M.byteLength-10;for(;f<a;){const s=(0,V.d)(M,{inputOffset:f,encodedMaskData:n,returnMask:0===i,returnEncodedMask:0===i,returnFileInfo:!0,pixelType:e,noDataValue:r});if(k&&D&&(s.width!==k||s.height!==D))throw new he.Z("rasterCoded:decode","lerc decoded result has width or height different from specified in options");if(f=s.fileInfo.eofOffset,0===i&&(n=s.encodedMaskData,t=new de.Z({width:s.width,height:s.height,pixels:[],pixelType:P,mask:s.maskData,statistics:[]})),i++,t.addData({pixels:s.pixelData,statistics:{minValue:s.minValue,maxValue:s.maxValue,noDataValue:s.noDataValue}}),a-f>10){const h=String.fromCharCode.apply(null,new Uint8Array(M,f,10));f+=h.indexOf("CntZ")>-1?h.indexOf("CntZ"):0}}return t}function ve(M,c){if(!re.f)throw new he.Z("rasterCoded:decode","lerc decoder is not supported on big endian platform");let k,D,P,o=0,e=c.offset||0,r=0;const n=c.eof||M.byteLength-10,t=[],{width:i,height:f}=c;let a=0;for(;e<n;){var s;if(D=N.L.decode(M,{inputOffset:e,maskData:k,returnFileInfo:!0}),i&&f&&(D.width!==i||D.height!==f))throw new he.Z("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");if(e=D.fileInfo.eofOffset,k=D.maskData,0===o&&(r=D.fileInfo.numValidPixel,P=new de.Z({width:D.width,height:D.height,pixels:[],pixelType:D.fileInfo.pixelType,mask:k,statistics:[]})),D.fileInfo.mask&&D.fileInfo.mask.numBytes>0&&a++,k&&t.push(k),D.dimCount>1&&(null==(s=D.pixelData)?void 0:s.length)===D.width*D.height*D.dimCount){var h,m,p,C;D.pixelData=D.pixelData.slice(-D.width*D.height);const B=null==(h=D.dimStats)||null==(m=h.minValues)?void 0:m[D.dimCount-1],R=null==(p=D.dimStats)||null==(C=p.maxValues)?void 0:C[D.dimCount-1];null!=B&&null!=R&&(D.minValue=B,D.maxValue=R)}if(o++,P.addData({pixels:D.pixelData,statistics:{minValue:D.minValue,maxValue:D.maxValue}}),n-e>10){const B=String.fromCharCode.apply(null,new Uint8Array(M,e,10));e+=B.indexOf("Lerc")>-1?B.indexOf("Lerc"):0}}let A=0,I=0,v=0;if(a>1){for(v=P.width*P.height,k=new Uint8Array(v),k.set(t[0]),A=1;A<t.length;A++){const B=t[A];for(I=0;I<v;I++)k[I]=k[I]&B[I]}for(r=0,I=0;I<v;I++)r+=k[I];P.mask=k}return P.validPixelCount=r,P}function pe(M,c){const k=(0,N.a)(M,c.pyramidLevel||0),D=new de.Z({width:k.width,height:k.height,pixels:k.pixels,pixelType:k.pixelType.toLowerCase(),mask:k.mask,statistics:null});return D.updateStatistics(),D}function ge(M,c){const k=(0,N.d)(M,c.customOptions),D=new de.Z({width:k.width,height:k.height,pixels:k.pixels,pixelType:k.pixelType.toLowerCase(),mask:k.mask,statistics:null});return D.updateStatistics(),D}function b(M,c){const k=c.pixelType||"u8",D=de.Z.getPixelArrayConstructor(k),P="u8"===k?M:new D(M.buffer),o=[],e=c.planes||1;if(1===e)o.push(P);else for(let n=0;n<e;n++){const t=(c.width||1)*(c.height||M.length),i=new D(t);for(let f=0;f<t;f++)i[f]=P[f*e+n];o.push(i)}const r=new de.Z({width:c.width||1,height:c.height||M.length,pixels:o,pixelType:k,statistics:null});return r.updateStatistics(),r}function L(M,c){return b(new me.Z(new Uint8Array(M)).getBytes(),c)}function z(M,c){return b((0,H.J)(M,c.offset,c.eof,!c.isInputBigEndian),c)}function l(M){const c=class u{static decode(c){const k=new Uint8Array(c),D=new ee.J;D.parse(k);const{width:P,height:o,numComponents:e,eof:r}=D,n=D.getData(P,o,!0);let t;const i=P*o;let f=0,a=0,s=0;if(r<k.length-1){const p=new me.Z(k.subarray(r)).getBytes();t=new Uint8Array(i);let C=0;for(f=0;f<p.length;f++)for(s=7;s>=0;s--)t[C++]=p[f]>>s&1}let h,m=null;if(1===e)m=[n,n,n];else{for(m=[],f=0;f<3;f++)h=new Uint8Array(i),m.push(h);for(s=0,a=0;a<i;a++)for(f=0;f<3;f++)m[f][a]=n[s++]}return{width:P,height:o,pixels:m,mask:t}}}.decode(M),k=new de.Z({width:c.width,height:c.height,pixels:c.pixels,pixelType:"U8",mask:c.mask,statistics:null});return k.updateStatistics(),k}function g(M,c){const k=new Uint8Array(M),D=new ae(k),{width:P,height:o}=c,e=P*o,r=D.decode();let n,t=0,i=0;const f=new Uint8Array(e);for(t=0;t<e;t++)f[t]=r[4*t+3];const a=new de.Z({width:P,height:o,pixels:[],pixelType:"U8",mask:f,statistics:[]});for(t=0;t<3;t++){for(n=new Uint8Array(e),i=0;i<e;i++)n[i]=r[4*i+t];a.addData({pixels:n})}return a.updateStatistics(),a}function y(M,c,k,D){return w.apply(this,arguments)}function w(){return(w=(0,ne.Z)(function*(M,c,k,D){const P=new le,o=Ae({applyJpegMask:!1,format:c},k),e=yield P.decode(M,o,D),r=new de.Z(e);return r.updateStatistics(),r})).apply(this,arguments)}function S(M){if(null==M)throw new he.Z("rasterCodec:decode","parameter encodeddata is required.");const c=new Uint8Array(M,0,10);let k="";return 255===c[0]&&216===c[1]?k="jpg":137===c[0]&&80===c[1]&&78===c[2]&&71===c[3]?k="png":67===c[0]&&110===c[1]&&116===c[2]&&90===c[3]&&73===c[4]&&109===c[5]&&97===c[6]&&103===c[7]&&101===c[8]&&32===c[9]?k="lerc":76===c[0]&&101===c[1]&&114===c[2]&&99===c[3]&&50===c[4]&&32===c[5]?k="lerc2":73===c[0]&&73===c[1]&&42===c[2]&&0===c[3]||77===c[0]&&77===c[1]&&0===c[2]&&42===c[3]||73===c[0]&&73===c[1]&&43===c[2]&&0===c[3]||77===c[0]&&77===c[1]&&0===c[2]&&43===c[3]?k="tiff":71===c[0]&&73===c[1]&&70===c[2]?k="gif":66===c[0]&&77===c[1]?k="bmp":String.fromCharCode.apply(null,c).toLowerCase().indexOf("error")>-1&&(k="error"),k}function O(M){let c=null;switch(M){case"lerc":c=we;break;case"lerc2":c=ve;break;case"jpg":c=l;break;case"png":c=g;break;case"bsq":case"bip":c=(k,D)=>function d(M,c,k){const{pixelTypeCtor:D}=_(c.pixelType),P=(0,class Q{static decode(c,k){const D=k.pixelType,P=[],o=k.width*k.height,e=T(c,k),{bandIds:r,format:n}=k,t=r&&r.length||T(c,k),i=c.byteLength-c.byteLength%(o*X(D)),f=new D(c,0,o*e);let a,s,h,m,p;if("bip"===n)for(a=0;a<t;a++){for(m=new D(o),p=r?r[a]:a,s=0;s<o;s++)m[s]=f[s*e+p];P.push(m)}else if("bsq"===n)for(a=0;a<t;a++)p=r?r[a]:a,P.push(f.subarray(p*o,(p+1)*o));return i<c.byteLength-1&&(h=function(M,c){if(8*M.byteLength<c)return null;const k=new Uint8Array(M,0,Math.ceil(c/8)),D=new Uint8Array(c);let P=0,o=0,e=0,r=0;for(e=0;e<k.length-1;e++)for(o=k[e],r=7;r>=0;r--)D[P++]=o>>r&1;for(r=7;P<c-1;)o=k[k.length-1],D[P++]=o>>r&1,r--;return D}(c.slice(i),o)),{pixels:P,mask:h}}}.decode)(M,{width:c.width,height:c.height,pixelType:D,format:k}),o=new de.Z({width:c.width,height:c.height,pixels:P.pixels,pixelType:c.pixelType,mask:P.mask,statistics:null});return o.updateStatistics(),o}(k,D,M);break;case"tiff":c=pe;break;case"deflate":c=L;break;case"lzw":c=z;break;case"error":c=()=>{throw new he.Z("rasterCodec:decode","input data contains error")};break;default:c=()=>{throw new he.Z("rasterCodec:decode","unsupported raster format")}}return c}function _(M){let c=null,k=null;switch(M?M.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":k=255,c=Uint8Array;break;case"u16":k=k||65535,c=Uint16Array;break;case"u32":k=k||2**32-1,c=Uint32Array;break;case"s8":k=k||-128,c=Int8Array;break;case"s16":k=k||-32768,c=Int16Array;break;case"s32":k=k||0-2**31,c=Int32Array;break;default:c=Float32Array}return{pixelTypeCtor:c,noDataValue:k}}function Z(M,c=1){if(!M)return;const{pixels:k,width:D,height:P,mask:o}=M;if(!k||0===k.length)return;const e=k.length,r=D-1,n=P-1,t=[];let i,f,a,s,h,m,p;const C=de.Z.getPixelArrayConstructor(M.pixelType);if(0===c){for(i=0;i<e;i++){for(h=k[i],m=new C(r*n),f=0;f<n;f++)for(s=f*D,a=0;a<r;a++)m[f*r+a]=h[s+a];t.push(m)}if(o)for(p=new Uint8Array(r*n),f=0;f<n;f++)for(s=f*D,a=0;a<r;a++)p[f*r+a]=o[s+a]}else{for(i=0;i<e;i++){for(h=k[i],m=new C(r*n),f=0;f<n;f++)for(s=f*D,a=0;a<r;a++)m[f*r+a]=(h[s+a]+h[s+a+1]+h[s+D+a]+h[s+D+a+1])/4;t.push(m)}if(o)for(p=new Uint8Array(r*n),f=0;f<n;f++)for(s=f*D,a=0;a<r;a++)p[f*r+a]=Math.min.apply(null,[o[s+a],o[s+a+1],o[s+D+a],o[s+D+a+1]])}M.width=r,M.height=n,M.mask=p,M.pixels=t}function F(M){let c=S(M);return"lerc2"===c?c="lerc":"error"===c&&(c=""),c}function Y(M){return j.apply(this,arguments)}function j(){return(j=(0,ne.Z)(function*(M,c={},k){if(null==M)throw new he.Z("rasterCodec:decode","missing encodeddata parameter.");let D,P,o=c.format&&c.format.toLowerCase();if(!("bsq"!==o&&"bip"!==o||null!=c.width&&null!=c.height))throw new he.Z("rasterCodec:decode","requires width and height in options parameter.");return"tiff"===o&&c.customOptions?ge(M,c):((!o||"bsq"!==o&&"bip"!==o&&"deflate"!==o&&"lzw"!==o)&&(o=S(M)),c.useCanvas&&fe.has(o)?P=yield y(M,o,c,k):(D=O(o),c.isPoint&&((c=Ae({},c)).width++,c.height++),P=D(M,c),c.isPoint&&Z(P)),P)})).apply(this,arguments)}},635:(Se,ye,q)=>{q.d(ye,{Z:()=>ee});const ne=(()=>{const u=[];return u[254]="NEWSUBFILETYPE",u[255]="SUBFILETYPE",u[256]="IMAGEWIDTH",u[257]="IMAGELENGTH",u[258]="BITSPERSAMPLE",u[259]="COMPRESSION",u[262]="PHOTOMETRICINTERPRETATION",u[263]="THRESHHOLDING",u[264]="CELLWIDTH",u[265]="CELLLENGTH",u[266]="FILLORDER",u[269]="DOCUMENTNAME",u[270]="IMAGEDESCRIPTION",u[271]="MAKE",u[272]="MODEL",u[273]="STRIPOFFSETS",u[274]="ORIENTATION",u[277]="SAMPLESPERPIXEL",u[278]="ROWSPERSTRIP",u[279]="STRIPBYTECOUNTS",u[280]="MINSAMPLEVALUE",u[281]="MAXSAMPLEVALUE",u[282]="XRESOLUTION",u[283]="YRESOLUTION",u[284]="PLANARCONFIGURATION",u[285]="PAGENAME",u[286]="XPOSITION",u[287]="YPOSITION",u[288]="FREEOFFSETS",u[289]="FREEBYTECOUNTS",u[290]="GRAYRESPONSEUNIT",u[291]="GRAYRESPONSECURVE",u[292]="T4OPTIONS",u[293]="T6OPTIONS",u[296]="RESOLUTIONUNIT",u[297]="PAGENUMBER",u[300]="COLORRESPONSEUNIT",u[301]="TRANSFERFUNCTION",u[305]="SOFTWARE",u[306]="DATETIME",u[315]="ARTIST",u[316]="HOSTCOMPUTER",u[317]="PREDICTOR",u[318]="WHITEPOINT",u[319]="PRIMARYCHROMATICITIES",u[320]="COLORMAP",u[321]="HALFTONEHINTS",u[322]="TILEWIDTH",u[323]="TILELENGTH",u[324]="TILEOFFSETS",u[325]="TILEBYTECOUNTS",u[326]="BADFAXLINES",u[327]="CLEANFAXDATA",u[328]="CONSECUTIVEBADFAXLINES",u[330]="SUBIFD",u[332]="INKSET",u[333]="INKNAMES",u[334]="NUMBEROFINKS",u[336]="DOTRANGE",u[337]="TARGETPRINTER",u[338]="EXTRASAMPLES",u[339]="SAMPLEFORMAT",u[340]="SMINSAMPLEVALUE",u[341]="SMAXSAMPLEVALUE",u[342]="TRANSFERRANGE",u[347]="JPEGTABLES",u[512]="JPEGPROC",u[513]="JPEGIFOFFSET",u[514]="JPEGIFBYTECOUNT",u[515]="JPEGRESTARTINTERVAL",u[517]="JPEGLOSSLESSPREDICTORS",u[518]="JPEGPOINTTRANSFORM",u[519]="JPEGQTABLES",u[520]="JPEGDCTABLES",u[521]="JPEGACTABLES",u[529]="YCBCRCOEFFICIENTS",u[530]="YCBCRSUBSAMPLING",u[531]="YCBCRPOSITIONING",u[532]="REFERENCEBLACKWHITE",u[700]="XMP",u[33550]="GEOPIXELSCALE",u[33922]="GEOTIEPOINTS",u[33432]="COPYRIGHT",u[42112]="GDAL_METADATA",u[42113]="GDAL_NODATA",u[50844]="RPCCOEFFICIENT",u[34264]="GEOTRANSMATRIX",u[34735]="GEOKEYDIRECTORY",u[34736]="GEODOUBLEPARAMS",u[34737]="GEOASCIIPARAMS",u[34665]="EXIFIFD",u[34853]="GPSIFD",u[40965]="INTEROPERABILITYIFD",u})(),he=(()=>{const u=[].concat(ne);return u[36864]="ExifVersion",u[40960]="FlashpixVersion",u[40961]="ColorSpace",u[42240]="Gamma",u[37121]="ComponentsConfiguration",u[37122]="CompressedBitsPerPixel",u[40962]="PixelXDimension",u[40963]="PixelYDimension",u[37500]="MakerNote",u[37510]="UserComment",u[40964]="RelatedSoundFile",u[36867]="DateTimeOriginal",u[36868]="DateTimeDigitized",u[36880]="OffsetTime",u[36881]="OffsetTimeOriginal",u[36882]="OffsetTimeDigitized",u[37520]="SubSecTime",u[37521]="SubSecTimeOriginal",u[37522]="SubSecTimeDigitized",u[37888]="Temperature",u[37889]="Humidity",u[37890]="Pressure",u[37891]="WaterDepth",u[37892]="Acceleration",u[37893]="CameraElevationAngle",u[42016]="ImageUniqueID",u[42032]="CameraOwnerName",u[42033]="BodySerialNumber",u[42034]="LensSpecification",u[42035]="LensMake",u[42036]="LensModel",u[42037]="LensSerialNumber",u[33434]="ExposureTime",u[33437]="FNumber",u[34850]="ExposureProgram",u[34852]="SpectralSensitivity",u[34855]="PhotographicSensitivity",u[34856]="OECF",u[34864]="SensitivityType",u[34865]="StandardOutputSensitivity",u[34866]="RecommendedExposureIndex",u[34867]="ISOSpeed",u[34868]="ISOSpeedLatitudeyyy",u[34869]="ISOSpeedLatitudezzz",u[37377]="ShutterSpeedValue",u[37378]="ApertureValue",u[37379]="BrightnessValue",u[37380]="ExposureBiasValue",u[37381]="MaxApertureValue",u[37382]="SubjectDistance",u[37383]="MeteringMode",u[37384]="LightSource",u[37385]="Flash",u[37386]="FocalLength",u[37396]="SubjectArea",u[41483]="FlashEnergy",u[41484]="SpatialFrequencyResponse",u[41486]="FocalPlaneXResolution",u[41487]="FocalPlaneYResolution",u[41488]="FocalPlaneResolutionUnit",u[41492]="SubjectLocation",u[41493]="ExposureIndex",u[41495]="SensingMethod",u[41728]="FileSource",u[41729]="SceneType",u[41730]="CFAPattern",u[41985]="CustomRendered",u[41986]="ExposureMode",u[41987]="WhiteBalance",u[41988]="DigitalZoomRatio",u[41989]="FocalLengthIn35mmFilm",u[41990]="SceneCaptureType",u[41991]="GainControl",u[41992]="Contrast",u[41993]="Saturation",u[41994]="Sharpness",u[41995]="DeviceSettingDescription",u[41996]="SubjectDistanceRange",u})(),se=(()=>{const u=[];return u[1024]="GTModelTypeGeoKey",u[1025]="GTRasterTypeGeoKey",u[1026]="GTCitationGeoKey",u[2048]="GeographicTypeGeoKey",u[2049]="GeogCitationGeoKey",u[2050]="GeogGeodeticDatumGeoKey",u[2051]="GeogPrimeMeridianGeoKey",u[2052]="GeogLinearUnitsGeoKey",u[2053]="GeogLinearUnitSizeGeoKey",u[2054]="GeogAngularUnitsGeoKey",u[2055]="GeogAngularUnitSizeGeoKey",u[2056]="GeogEllipsoidGeoKey",u[2057]="GeogSemiMajorAxisGeoKey",u[2058]="GeogSemiMinorAxisGeoKey",u[2059]="GeogInvFlatteningGeoKey",u[2061]="GeogPrimeMeridianLongGeoKey",u[2060]="GeogAzimuthUnitsGeoKey",u[3072]="ProjectedCSTypeGeoKey",u[3073]="PCSCitationGeoKey",u[3074]="ProjectionGeoKey",u[3075]="ProjCoordTransGeoKey",u[3076]="ProjLinearUnitsGeoKey",u[3077]="ProjLinearUnitSizeGeoKey",u[3078]="ProjStdParallel1GeoKey",u[3079]="ProjStdParallel2GeoKey",u[3080]="ProjNatOriginLongGeoKey",u[3081]="ProjNatOriginLatGeoKey",u[3082]="ProjFalseEastingGeoKey",u[3083]="ProjFalseNorthingGeoKey",u[3084]="ProjFalseOriginLongGeoKey",u[3085]="ProjFalseOriginLatGeoKey",u[3086]="ProjFalseOriginEastingGeoKey",u[3087]="ProjFalseOriginNorthingGeoKey",u[3088]="ProjCenterLongGeoKey",u[3090]="ProjCenterEastingGeoKey",u[3091]="ProjCenterNorthingGeoKey",u[3092]="ProjScaleAtNatOriginGeoKey",u[3093]="ProjScaleAtCenterGeoKey",u[3094]="ProjAzimuthAngleGeoKey",u[3095]="ProjStraightVertPoleLongGeoKey",u[4096]="VerticalCSTypeGeoKey",u[4097]="VerticalCitationGeoKey",u[4098]="VerticalDatumGeoKey",u[4099]="VerticalUnitsGeoKey",u})(),le=new Map;le.set("EXIFIFD",he),le.set("GPSIFD",["GPSVersionID","GPSLatitudeRef","GPSLatitude","GPSLongitudeRef","GPSLongitude","GPSAltitudeRef","GPSAltitude","GPSTimeStamp","GPSSatellites","GPSStatus","GPSMeasureMode","GPSDOP","GPSSpeedRef","GPSSpeed","GPSTrackRef","GPSTrack","GPSImgDirectionRef","GPSImgDirection","GPSMapDatum","GPSDestLatitudeRef","GPSDestLatitude","GPSDestLongitudeRef","GPSDestLongitude","GPSDestBearingRef","GPSDestBearing","GPSDestDistanceRef","GPSDestDistance","GPSProcessingMethod","GPSAreaInformation","GPSDateStamp","GPSDifferential","GPSHPositioningError"]);const ee={TIFF_TAGS:ne,ifdTags:le,GEO_KEYS:se,getTagName:function(u,N){let V=(N||ne)[u];return void 0===V&&(V="unknown"+String(u)),V}}},44853:(Se,ye,q)=>{q.d(ye,{f:()=>ne});const ne=(()=>{const he=new ArrayBuffer(4),de=new Uint8Array(he);return new Uint32Array(he)[0]=1,1===de[0]})()},54805:(Se,ye,q)=>{q.d(ye,{Z:()=>z});var ne=q(17626),he=q(78260),de=q(86162),se=q(63290),me=q(62208),le=q(77712),V=(q(85931),q(8314),q(90912),q(76898)),H=q(79645),T=q(77692),X=q(60295);function K(d){let{altitude:l,azimuth:g}=d;const{hillshadeType:y,pixelSizePower:w,pixelSizeFactor:S,scalingType:O,isGCS:_,resolution:Z}=d,F="multi-directional"===y?2*d.zFactor:d.zFactor,{x:Y,y:j}=Z;let M=F/(8*Y),c=F/(8*j);if(_&&F>.001&&(M/=111e3,c/=111e3),"adjusted"===O)if(_){const p=111e3*Y,C=111e3*j;M=(F+p**w*S)/(8*p),c=(F+C**w*S)/(8*C)}else M=(F+Y**w*S)/(8*Y),c=(F+j**w*S)/(8*j);let k=(90-l)*Math.PI/180,D=Math.cos(k),P=(360-g+90)*Math.PI/180,o=Math.sin(k)*Math.cos(P),e=Math.sin(k)*Math.sin(P);const r=[315,270,225,360,180,0],n=[60,60,60,60,60,90],t=new Float32Array([3,5,3,2,1,4]),i=t.reduce((p,C)=>p+C),f=t.map(p=>p/i),a="multi-directional"===y?r.length:1,s=new Float32Array(6),h=new Float32Array(6),m=new Float32Array(6);if("multi-directional"===y)for(let p=0;p<a;p++)l=n[p],g=r[p],k=(90-l)*Math.PI/180,D=Math.cos(k),P=(360-g+90)*Math.PI/180,o=Math.sin(k)*Math.cos(P),e=Math.sin(k)*Math.sin(P),s[p]=D,h[p]=o,m[p]=e;else s.fill(D),h.fill(o),m.fill(e);return{resolution:Z,factor:[M,c],sinZcosA:o,sinZsinA:e,cosZ:D,sinZcosAs:h,sinZsinAs:m,cosZs:s,weights:f,hillshadeType:["traditional","multi-directional"].indexOf(y)}}var ae=q(70208);const fe=se.Z.getLogger("esri.renderers.support.RasterSymbolizer"),ge={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34e38,34e38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};let b=class extends de.wq{constructor(d){super(d)}bind(){const{rendererJSON:d}=this;if(!d)return{success:!1};let l;switch(this.lookup={rendererJSON:{}},d.type){case"uniqueValue":l={success:this._updateUVRenderer(d)};break;case"rasterColormap":l={success:this._updateColormapRenderer(d)};break;case"rasterStretch":l={success:this._updateStretchRenderer(d)};break;case"classBreaks":l={success:this._updateClassBreaksRenderer(d)};break;case"rasterShadedRelief":l={success:this._updateShadedReliefRenderer(d)};break;case"vectorField":l={success:this._updateVectorFieldRenderer()};break;case"animatedFlow":l=this._updateAnimatedFlowRenderer()}return l}symbolize(d){let l=d&&d.pixelBlock;if(!L(l))return l;if(d.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(l,d.simpleStretchParams);try{let g;switch(l.pixels.length>3&&(l=(0,T.qF)(l,[0,1,2])),this.rendererJSON.type){case"uniqueValue":case"rasterColormap":g=this._symbolize_colormap(l);break;case"classBreaks":g=this._symbolize_classBreaks(l);break;case"rasterStretch":g=this._symbolize_stretch(l,d.bandIds);break;case"rasterShadedRelief":{const{extent:y}=d;g=this._symbolize_shadedRelief(l,{isGCS:y.spatialReference.isGeographic,resolution:{x:(y.xmax-y.xmin)/l.width,y:(y.ymax-y.ymin)/l.height}});break}}return g}catch(g){return fe.error("symbolize",g.message),l}}simpleStretch(d,l){if(!L(d))return d;try{return d.pixels.length>3&&(d=(0,T.qF)(d,[0,1,2])),(0,T.dy)(d,l)}catch(g){return fe.error("symbolize",g.message),d}}generateWebGLParameters(d){if(["uniqueValue","rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)>-1){var l;const{indexedColormap:_,offset:Z}=(null==(l=this.lookup)?void 0:l.colormapLut)||{};return{colormap:_,colormapOffset:Z,type:"lut"}}const{pixelBlock:g,isGCS:y,resolution:w,bandIds:S}=d,{rendererJSON:O}=this;return"rasterStretch"===O.type?this.generateStretchWebGLParams(g,O,S):"rasterShadedRelief"===O.type?this.generateShadedReliefWebGLParams(O,y,w):"vectorField"===O.type?this._generateVectorFieldWebGLParams(O):null}_isLUTChanged(d){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const l=this.rendererJSON.colorRamp;return d?JSON.stringify(l)!==JSON.stringify(this.lookup.rendererJSON.colorRamp):JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)}_symbolize_colormap(d){return this._isLUTChanged()&&!this.bind().success?d:(0,T.SJ)(d,this.lookup.colormapLut)}_symbolize_classBreaks(d){const g=["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType)>-1;return this._isLUTChanged()&&!this.bind().success?d:g?(0,T.SJ)(d,this.lookup.colormapLut):(0,T.zp)(d,this.lookup.remapLut)}_symbolize_stretch(d,l){const{pixelType:g,bandCount:y}=this.rasterInfo,w=this.rendererJSON,S=["u8","u16","s8","s16"].indexOf(g)>-1;let O,_;const{dra:Z}=w,F=w.useGamma?w.gamma:null;if("histogramEqualization"===w.stretchType){const M=Z?null:this.lookup.histogramLut,c=this.getStretchCutoff(w,d,l,!M),k=(0,T.dy)(d,Le(Ae({},c),{gamma:F}));_=(0,T.XV)(k,{lut:Z?c.histogramLut:M,offset:0})}else if(S){var Y,j;if(Z){const M=this.getStretchCutoff(w,d,l);O=(0,T.hE)(Le(Ae({pixelType:g},M),{gamma:F}))}else if(this._isLUTChanged()){if(!this.bind().success)return d;O=this.lookup?this.lookup.stretchLut:null}else O=this.lookup?this.lookup.stretchLut:null;if(!O)return d;y>1&&(null==l?void 0:l.length)===(null==(Y=(0,me.Wg)(d))?void 0:Y.pixels.length)&&(null==(j=O)?void 0:j.lut.length)===y&&(O={lut:l.map(M=>O.lut[M]),offset:O.offset}),_=(0,T.XV)(d,O)}else{const M=this.getStretchCutoff(w,d,l);_=(0,T.dy)(d,Le(Ae({},M),{gamma:F}))}if(w.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return d;_=(0,T.SJ)(_,this.lookup.colormapLut)}return _}_symbolize_shadedRelief(d,l){var g,y;const w=this.rendererJSON,O=function Q(d,l){if(!(0,T.nk)(d))return d;const{width:g,height:y,mask:w}=d,S=new Uint8Array(g*y);w&&S.set(w);const{factor:O,sinZcosA:_,sinZsinA:Z,cosZ:F,sinZcosAs:Y,sinZsinAs:j,cosZs:M,weights:c}=K(l),[k,D]=O,{hillshadeType:P}=l,o=d.pixels[0],e=new Uint8Array(g*y);let r,n,t,i,f,a,s,h;for(let p=1;p<y-1;p++){const C=p*g;for(let A=1;A<g-1;A++){if(w&&!w[C+A]){e[C+A]=0;continue}let I=8;if(w&&(I=w[C-g+A-1]+w[C-g+A]+w[C-g+A+1]+w[C+A-1]+w[C+A+1]+w[C+g+A-1]+w[C+g+A]+w[C+g+A+1],I<7)){e[C+A]=0,S[C+A]=0;continue}7===I?(r=w[C-g+A-1]?o[C-g+A-1]:o[C+A],n=w[C-g+A]?o[C-g+A]:o[C+A],t=w[C-g+A+1]?o[C-g+A+1]:o[C+A],i=w[C+A-1]?o[C+A-1]:o[C+A],f=w[C+A+1]?o[C+A+1]:o[C+A],a=w[C+g+A-1]?o[C+g+A-1]:o[C+A],s=w[C+g+A]?o[C+g+A]:o[C+A],h=w[C+g+A+1]?o[C+g+A+1]:o[C+A]):(r=o[C-g+A-1],n=o[C-g+A],t=o[C-g+A+1],i=o[C+A-1],f=o[C+A+1],a=o[C+g+A-1],s=o[C+g+A],h=o[C+g+A+1]);const v=(t+f+f+h-(r+i+i+a))*k,B=(a+s+s+h-(r+n+n+t))*D,R=Math.sqrt(1+v*v+B*B);let G=0;if("traditional"===P){let W=255*(F+Z*B-_*v)/R;W<0&&(W=0),G=W}else{const W=j.length;for(let $=0;$<W;$++){let J=255*(M[$]+j[$]*B-Y[$]*v)/R;J<0&&(J=0),G+=J*c[$]}}e[C+A]=255&G}}for(let p=0;p<y;p++)e[p*g]=e[p*g+1],e[(p+1)*g-1]=e[(p+1)*g-2];for(let p=1;p<g-1;p++)e[p]=e[p+g],e[p+(y-1)*g]=e[p+(y-2)*g];return new X.Z({width:g,height:y,pixels:[e],mask:w?S:null,pixelType:"u8",validPixelCount:d.validPixelCount,statistics:[{minValue:0,maxValue:255}]})}(d,Ae(Ae({},w),l));if(!w.colorRamp)return O;let _;if(this._isLUTChanged(!0)){if(!this.bind().success)return O;_=this.lookup?this.lookup.hsvMap:null}else _=this.lookup?this.lookup.hsvMap:null;return _?(function re(d,l,g,y){if(!(0,T.nk)(d)||!(0,T.nk)(l))return;const{min:w,max:S}=y,O=d.pixels[0],{pixels:_,mask:Z}=l,F=_[0],Y=255.00001/(S-w),j=new Uint8ClampedArray(F.length),M=new Uint8ClampedArray(F.length),c=new Uint8ClampedArray(F.length),k=g.length-1;for(let D=0;D<F.length;D++){if(Z&&0===Z[D])continue;const P=Math.floor((F[D]-w)*Y),[o,e]=g[P<0?0:P>k?k:P],r=O[D],n=r*e,t=n*(1-Math.abs(o%2-1)),i=r-n;switch(Math.floor(o)){case 0:j[D]=n+i,M[D]=t+i,c[D]=i;break;case 1:j[D]=t+i,M[D]=n+i,c[D]=i;break;case 2:j[D]=i,M[D]=n+i,c[D]=t+i;break;case 3:j[D]=i,M[D]=t+i,c[D]=n+i;break;case 4:j[D]=t+i,M[D]=i,c[D]=n+i;break;case 5:case 6:j[D]=n+i,M[D]=i,c[D]=t+i}}d.pixels=[j,M,c],d.updateStatistics()}(O,d,_,null!=(g=null==(y=(0,me.Wg)(this.rasterInfo.statistics))?void 0:y[0])?g:{min:0,max:8e3}),O):O}_updateVectorFieldRenderer(){const{bandCount:d,dataType:l}=this.rasterInfo;return 2===d&&("vector-magdir"===l||"vector-uv"===l)}_updateAnimatedFlowRenderer(){const{bandCount:d,dataType:l}=this.rasterInfo;return 2!==d||"vector-magdir"!==l&&"vector-uv"!==l?{success:!1,error:`Unsupported data type "${l}"; AnimatedFlowRenderer only supports "vector-magdir" and "vector-uv".`}:{success:!0}}_updateUVRenderer(d){const{bandCount:l,attributeTable:g,pixelType:y}=this.rasterInfo,w=d.field1;if(!w)return!1;const S=d.defaultSymbol,O=1===l&&["u8","s8"].includes(y);if(!function we(d,l){const{attributeTable:g,bandCount:y}=d;return!(!(0,me.pC)(g)||y>1||l&&null==g.fields.find(w=>w.name.toLowerCase()===l.toLowerCase()))}(this.rasterInfo,w)&&!O)return!1;const _=[];if(g){const F=g.fields.filter(Y=>"value"===Y.name.toLowerCase())[0];if(!F)return!1;g.features.forEach(Y=>{var j;const M=d.uniqueValueInfos.filter(k=>String(k.value)===String(Y.attributes[w]))[0],c=null==M||null==(j=M.symbol)?void 0:j.color;c?_.push([Y.attributes[F.name]].concat(c)):S&&_.push([Y.attributes[F.name]].concat(S.color))})}else{if("value"!==w.toLowerCase())return!1;d.uniqueValueInfos.forEach(F=>{var Y;const j=null==F||null==(Y=F.symbol)?void 0:Y.color;j?_.push([parseInt(""+F.value,10)].concat(j)):S&&_.push([parseInt(""+F.value,10)].concat(S.color))})}if(0===_.length)return!1;const Z=(0,T.Pz)({colormap:_});return this.lookup={rendererJSON:d,colormapLut:Z},this.canRenderInWebGL=!0,!0}_updateColormapRenderer(d){if(!function pe(d){const{bandCount:l,colormap:g}=d;return(0,me.pC)(g)&&g.length&&1===l}(this.rasterInfo))return!1;const l=d.colormapInfos.map(y=>[y.value].concat(y.color)).sort((y,w)=>y[0]-w[0]);if(!l||0===l.length)return!1;const g=(0,T.Pz)({colormap:l});return this.lookup={rendererJSON:d,colormapLut:g},this.canRenderInWebGL=!0,!0}_updateShadedReliefRenderer(d){if(!function ve(d){return"elevation"===d.dataType}(this.rasterInfo))return!1;if(d.colorRamp){const l=(0,ae.Jw)(d.colorRamp,256,!0),g=(0,T.Pz)({colormap:l}),y=[],w=g.indexedColormap;for(let S=0;S<w.length;S+=4){const O=(0,he._Y)({r:w[S],g:w[S+1],b:w[S+2]});y.push([O.h/60,O.s/100,255*O.v/100])}this.lookup={rendererJSON:d,colormapLut:g,hsvMap:y}}else this.lookup=null;return this.canRenderInWebGL=!0,!0}_updateClassBreaksRenderer(d){const g=["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType)>-1,y=d.classBreakInfos;if(null==y||!y.length)return!1;const w=y.sort((Y,j)=>Y.classMaxValue-j.classMaxValue),S=w[w.length-1];let O=d.minValue;if(!g){const Y=[];for(let j=0;j<w.length;j++){var _;Y.push({value:null!=(_=w[j].classMinValue)?_:O,mappedColor:w[j].symbol.color}),O=w[j].classMaxValue}return Y.push({value:S.classMaxValue,mappedColor:S.symbol.color}),this.lookup={rendererJSON:d,remapLut:Y},this.canRenderInWebGL=!1,!0}const Z=[];O=Math.floor(d.minValue);for(let Y=0;Y<w.length;Y++){const j=w[Y];for(let M=O;M<j.classMaxValue;M++)Z.push([M].concat(j.symbol.color));O=Math.ceil(j.classMaxValue)}S.classMaxValue===O&&Z.push([S.classMaxValue].concat(S.symbol.color));const F=(0,T.Pz)({colormap:Z,fillUnspecified:!1});return this.lookup={rendererJSON:d,colormapLut:F},this.canRenderInWebGL=!0,!0}_isHistogramRequired(d){return"percentClip"===d||"histogramEqualization"===d}_isValidRasterStatistics(d){return(0,me.pC)(d)&&d.length>0&&null!=d[0].min&&null!=d[0].max}_updateStretchRenderer(d){var l;let{stretchType:g,dra:y}=d;if(!("none"===g||null!=(l=d.statistics)&&l.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||y))return!1;const w=(0,me.Wg)(d.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(d.stretchType)||null!=w&&w.length||y||(g="minMax");const{gamma:S,useGamma:O,colorRamp:_}=d,Z=this.rasterInfo.pixelType,F=!y&&["u8","u16","s8","s16"].indexOf(Z)>-1;if("histogramEqualization"===g){const Y=w.map(j=>(0,T.oc)(j));this.lookup={rendererJSON:d,histogramLut:Y}}else if(F){const Y=this.getStretchCutoff(d),j=(0,T.hE)(Le(Ae({pixelType:Z},Y),{gamma:O?S:null}));this.lookup={rendererJSON:d,stretchLut:j}}if(_){const Y=(0,ae.Jw)(_,256,!0);this.lookup||(this.lookup={rendererJSON:d}),this.lookup.colormapLut=(0,T.Pz)({colormap:Y}),this.lookup.rendererJSON=d}return this.canRenderInWebGL=!0,!0}getStretchCutoff(d,l=null,g,y){var w,S,O;let _,Z,F=d.stretchType;var Y;if(d.dra)if("minMax"===F&&(0,me.pC)(l)&&l.statistics)_=l.statistics.map(m=>[m.minValue,m.maxValue,0,0]);else{const m=(0,T.Hv)(l);_=(0,me.pC)(m)?m.statistics:null,Z=(0,me.pC)(m)?m.histograms:null}else _=(null==(Y=d.statistics)?void 0:Y.length)>0?d.statistics:(0,me.Wg)(this.rasterInfo.statistics),Z=d.histograms||(0,me.Wg)(this.rasterInfo.histograms);!this._isHistogramRequired(F)||null!=(w=Z)&&w.length||(F="minMax");const j=(null==(S=_)?void 0:S.length)||(null==(O=Z)?void 0:O.length)||this.rasterInfo.bandCount,M=[],c=[];let k,D,P,o,e,r,n,t,i,f,a,s;switch(_&&!Array.isArray(_[0])&&(_=_.map(m=>[m.min,m.max,m.avg,m.stddev])),F){case"none":{const m=ge[this.rasterInfo.pixelType]||ge.f32;for(t=0;t<j;t++)M[t]=m[0],c[t]=m[1]}break;case"minMax":for(t=0;t<j;t++)M[t]=_[t][0],c[t]=_[t][1];break;case"standardDeviation":for(t=0;t<j;t++)M[t]=_[t][2]-d.numberOfStandardDeviations*_[t][3],c[t]=_[t][2]+d.numberOfStandardDeviations*_[t][3],M[t]<_[t][0]&&(M[t]=_[t][0]),c[t]>_[t][1]&&(c[t]=_[t][1]);break;case"histogramEqualization":for(t=0;t<j;t++)M[t]=Z[t].min,c[t]=Z[t].max;break;case"percentClip":for(t=0;t<Z.length;t++){for(k=Z[t],e=new Uint32Array(k.size),o=k.counts,P=0,D=(k.max-k.min)/k.size,n=-.5===k.min&&1===D?.5:0,i=0;i<k.size;i++)P+=o[i],e[i]=P;for(r=(d.minPercent||0)*P/100,i=0;i<k.size;i++)if(e[i]>r){M[t]=k.min+D*(i+n);break}for(r=(1-(d.maxPercent||0)/100)*P,i=k.size-2;i>=0;i--)if(e[i]<r){c[t]=k.min+D*(i+2-n);break}}break;default:for(t=0;t<j;t++)M[t]=_[t][0],c[t]=_[t][1]}return"histogramEqualization"===F?(a=Z[0].size||256,f=0,y&&(s=Z.map(m=>(0,T.oc)(m)))):(a=d.max||255,f=d.min||0),this.getSelectedBandCutoffs({minCutOff:M,maxCutOff:c,outMax:a,outMin:f,histogramLut:s},g)}getSelectedBandCutoffs(d,l){if(null==l||0===l.length)return d;const g=Math.max.apply(null,l),{minCutOff:y,maxCutOff:w,outMin:S,outMax:O,histogramLut:_}=d;return y.length===l.length||y.length<=g?d:{minCutOff:l.map(Z=>y[Z]),maxCutOff:l.map(Z=>w[Z]),histogramLut:_?l.map(Z=>_[Z]):null,outMin:S,outMax:O}}generateStretchWebGLParams(d,l,g){let y=null,w=null;const S=this.lookup&&this.lookup.colormapLut;l.colorRamp&&S&&(y=S.indexedColormap,w=S.offset),"histogramEqualization"===l.stretchType&&(l=Le(Ae({},l),{stretchType:"minMax"}));const{gamma:O}=l,_=!!(l.useGamma&&O&&O.some(e=>1!==e)),{minCutOff:Z,maxCutOff:F,outMin:Y,outMax:j}=this.getStretchCutoff(l,d,g);let M=0;(0,me.pC)(d)&&(M=d.getPlaneCount(),2===M&&((d=d.clone()).statistics=[d.statistics[0]],d.pixels=[d.pixels[0]]));const c=Math.min(3,(null==g?void 0:g.length)||M||this.rasterInfo.bandCount),k=new Float32Array(c),D=y||_?1:255;let P;for(P=0;P<c;P++)k[P]=(j-Y)/(F[P]-Z[P])/D;const o=new Float32Array(c);if(_)for(P=0;P<c;P++)o[P]=O[P]>1?O[P]>2?6.5+(O[P]-2)**2.5:6.5+100*(2-O[P])**4:1;return{bandCount:c,outMin:Y/D,outMax:j/D,minCutOff:Z,maxCutOff:F,factor:k,useGamma:_,gamma:_?O:[1,1,1],gammaCorrection:_?o:[1,1,1],colormap:y,colormapOffset:w,stretchType:l.stretchType,type:"stretch"}}generateShadedReliefWebGLParams(d,l,g){var y,w,S;let O=null,_=null;const Z=this.lookup&&this.lookup.colormapLut;d.colorRamp&&Z&&(O=Z.indexedColormap,_=Z.offset);const Y=K(Le(Ae({},d),{isGCS:l,resolution:g})),j=null==(y=(0,me.Wg)(this.rasterInfo.statistics))?void 0:y[0];return Le(Ae({},Y),{minValue:null!=(w=null==j?void 0:j.min)?w:0,maxValue:null!=(S=null==j?void 0:j.max)?S:8e3,hillshadeType:"traditional"===d.hillshadeType?0:1,type:"hillshade",colormap:O,colormapOffset:_})}_generateVectorFieldWebGLParams(d){var l,g,y,w,S,O;const{style:_,inputUnit:Z,outputUnit:F,visualVariables:Y,symbolTileSize:j,flowRepresentation:M}=d;let c;const k=null!=(l=null==Y?void 0:Y.find(t=>"sizeInfo"===t.type))?l:{type:"sizeInfo",field:"Magnitude",maxDataValue:null==(g=this.rasterInfo.statistics)?void 0:g[0].max,maxSize:.8*j,minDataValue:null==(y=this.rasterInfo.statistics)?void 0:y[0].min,minSize:.2*j},D=k?k.minDataValue:null==(w=this.rasterInfo.statistics)?void 0:w[0].min,P=k?k.maxDataValue:null==(S=this.rasterInfo.statistics)?void 0:S[0].max,o=(0,me.pC)(k.maxSize)&&(0,me.pC)(k.minSize)?[k.minSize/j,k.maxSize/j]:[.2,.8];"wind_speed"!==_&&"simple_scalar"!==_||(o[0]=o[1]=(o[0]+o[1])/2);const e=(0,me.pC)(D)&&(0,me.pC)(P)?[D,P]:null;if("classified_arrow"===_)if((0,me.pC)(D)&&(0,me.pC)(P)&&(0,me.pC)(k)){c=[];const t=(k.maxDataValue-k.minDataValue)/5;for(let i=0;i<6;i++)c.push(k.minDataValue+t*i)}else c=[0,1e-6,3.5,7,10.5,14];const r="flow_to"===M==("ocean_current_kn"===_||"ocean_current_m"===_)?0:Math.PI,n=null==Y?void 0:Y.find(t=>"rotationInfo"===t.type);return{breakValues:c,dataRange:e,inputUnit:Z,outputUnit:F,symbolTileSize:j,symbolPercentRange:o,style:_||"single_arrow",rotation:r,rotationType:(null==(O=this.rasterInfo.storageInfo)?void 0:O.tileInfo)&&"vector-uv"===this.rasterInfo.dataType?"geographic":(null==n?void 0:n.rotationType)||d.rotationType,type:"vectorField"}}};function L(d){return(0,T.nk)(d)&&0!==d.validPixelCount}(0,ne._)([(0,le.Cb)({json:{write:!0}})],b.prototype,"rendererJSON",void 0),(0,ne._)([(0,le.Cb)({type:H.Z,json:{write:!0}})],b.prototype,"rasterInfo",void 0),(0,ne._)([(0,le.Cb)({json:{write:!0}})],b.prototype,"lookup",void 0),(0,ne._)([(0,le.Cb)()],b.prototype,"canRenderInWebGL",void 0),b=(0,ne._)([(0,V.j)("esri.renderers.support.RasterSymbolizer")],b);const z=b},70208:(Se,ye,q)=>{q.d(ye,{Ms:()=>de,Jw:()=>N,Uh:()=>u});var ne=q(91558),he=q(78260);const de=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],se={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};function me(V,H){if(!V||!H||V.length!==H.length)return!1;for(let T=0;T<V.length;T++)if(V[T]>H[T]+2||V[T]<H[T]-2)return!1;return!0}function le(V,H,T){const X=(0,he.Y3)(V),K=(0,he.Y3)(H);return(0,he.xr)({l:X.l*(1-T)+T*K.l,a:X.a*(1-T)+T*K.a,b:X.b*(1-T)+T*K.b})}function u(V){const H=function ee(V,H){if(!V)return;const T=H||de;let X,K=null;return"algorithmic"===V.type?T.some(Q=>{if(me(V.fromColor.toRgb(),Q.fromColor)&&me(V.toColor.toRgb(),Q.toColor))return K=Q.id,!0}):"multipart"===V.type&&T.some(Q=>{if(V.colorRamps&&Q.colorRamps&&V.colorRamps.length===Q.colorRamps.length&&(X=V.colorRamps,!Q.colorRamps.some((re,ae)=>{if(!me(X[ae].fromColor.toRgb(),new ne.Z(re.fromColor).toRgb())||!me(X[ae].toColor.toRgb(),new ne.Z(re.toColor).toRgb()))return!0}))){if(K)return!0;K=Q.id}}),K}(V);return H?se[H]:null}function N(V,H,T=!1){if(!V||!H||H<1)return;const X="toJSON"in V?V.toJSON():V,K="multipart"===X.type?X.colorRamps.length:1,Q=[],re=[];let ae,fe,we,ve,pe,ge=0;if(1===H)return ae="multipart"===X.type?X.colorRamps[0].fromColor:X.fromColor,re.push([0].concat(ae)),re;for(let b=0;b<K;b++)Q[b]={start:null,end:null},Q[b].start=ge,Q[b].end=ge+1/K,ge=Q[b].end;for(let b=0;b<H;b++)ve=b/(H-1),Q.forEach((L,z)=>{if(ve>=L.start&&(ve<L.end||b===H-1&&z===K-1)){pe=(ve-L.start)/(L.end-L.start),"multipart"===X.type?(ae=X.colorRamps[z].fromColor,fe=X.colorRamps[z].toColor):(ae=X.fromColor,fe=X.toColor),0===b?re.push([b].concat(ae.slice(0,3))):b===H-1?re.push([b].concat(fe.slice(0,3))):(we=le({r:ae[0],g:ae[1],b:ae[2]},{r:fe[0],g:fe[1],b:fe[2]},pe),re.push([b,we.r,we.g,we.b]));const d=null!=ae[3]?ae[3]>1?ae[3]/255:ae[3]:1,l=null!=fe[3]?fe[3]>1?fe[3]/255:fe[3]:1;T&&re[b].push(Math.min(255,Math.round(255*(d*(1-pe)+l*pe))))}});return re}}}]);