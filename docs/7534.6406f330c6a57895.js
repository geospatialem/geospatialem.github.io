"use strict";var z=Object.defineProperty,J=Object.defineProperties,H=Object.getOwnPropertyDescriptors,F=Object.getOwnPropertySymbols,Q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,G=(c,f,t)=>f in c?z(c,f,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[f]=t,x=(c,f)=>{for(var t in f||(f={}))Q.call(f,t)&&G(c,t,f[t]);if(F)for(var t of F(f))X.call(f,t)&&G(c,t,f[t]);return c},V=(c,f)=>J(c,H(f));(self.webpackChunksite=self.webpackChunksite||[]).push([[7534,3705],{30164:(c,f,t)=>{t.d(f,{T:()=>L});var s=t(15861);const L={BingMapsLayer:(e=(0,s.Z)(function*(){return(yield t.e(2248).then(t.bind(t,72248))).default}),function(){return e.apply(this,arguments)}),BuildingSceneLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(4900),t.e(8592),t.e(9319)]).then(t.bind(t,19319))).default});return function(){return e.apply(this,arguments)}}(),CSVLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(5625).then(t.bind(t,85625))).default});return function(){return e.apply(this,arguments)}}(),ElevationLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(5227)]).then(t.bind(t,25227))).default});return function(){return e.apply(this,arguments)}}(),FeatureLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.resolve().then(t.bind(t,15382))).default});return function(){return e.apply(this,arguments)}}(),GroupLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(5964).then(t.bind(t,25964))).default});return function(){return e.apply(this,arguments)}}(),GeoRSSLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(6306).then(t.bind(t,96306))).default});return function(){return e.apply(this,arguments)}}(),GeoJSONLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(2903).then(t.bind(t,72903))).default});return function(){return e.apply(this,arguments)}}(),ImageryLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(7692),t.e(6926),t.e(581),t.e(1693),t.e(2599)]).then(t.bind(t,2599))).default});return function(){return e.apply(this,arguments)}}(),ImageryTileLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(7692),t.e(6926),t.e(581),t.e(1693),t.e(7897),t.e(8592),t.e(3490)]).then(t.bind(t,23490))).default});return function(){return e.apply(this,arguments)}}(),IntegratedMeshLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(4900),t.e(8592),t.e(3586)]).then(t.bind(t,13586))).default});return function(){return e.apply(this,arguments)}}(),KMLLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(8411)]).then(t.bind(t,38411))).default});return function(){return e.apply(this,arguments)}}(),MapImageLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(3130),t.e(8592),t.e(9530)]).then(t.bind(t,48887))).default});return function(){return e.apply(this,arguments)}}(),MapNotesLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(9114)]).then(t.bind(t,49114))).default});return function(){return e.apply(this,arguments)}}(),OGCFeatureLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(9628),t.e(2955)]).then(t.bind(t,36554))).default});return function(){return e.apply(this,arguments)}}(),OpenStreetMapLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(1591)]).then(t.bind(t,71591))).default});return function(){return e.apply(this,arguments)}}(),PointCloudLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(4900),t.e(8592),t.e(7155)]).then(t.bind(t,7155))).default});return function(){return e.apply(this,arguments)}}(),RouteLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(2010).then(t.bind(t,42010))).default});return function(){return e.apply(this,arguments)}}(),SceneLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(4900),t.e(8592),t.e(5941)]).then(t.bind(t,55941))).default});return function(){return e.apply(this,arguments)}}(),StreamLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(289).then(t.bind(t,70289))).default});return function(){return e.apply(this,arguments)}}(),TileLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(3130),t.e(8592),t.e(8731)]).then(t.bind(t,59735))).default});return function(){return e.apply(this,arguments)}}(),UnknownLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(6339).then(t.bind(t,56339))).default});return function(){return e.apply(this,arguments)}}(),UnsupportedLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(6240).then(t.bind(t,16240))).default});return function(){return e.apply(this,arguments)}}(),VectorTileLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8364),t.e(8592),t.e(5765)]).then(t.bind(t,68585))).default});return function(){return e.apply(this,arguments)}}(),VoxelLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(4900),t.e(177)]).then(t.bind(t,90177))).default});return function(){return e.apply(this,arguments)}}(),WebTileLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(8592).then(t.bind(t,28678))).default});return function(){return e.apply(this,arguments)}}(),WFSLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(3774),t.e(8762)]).then(t.bind(t,98762))).default});return function(){return e.apply(this,arguments)}}(),WMSLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(6894)]).then(t.bind(t,46894))).default});return function(){return e.apply(this,arguments)}}(),WMTSLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(4223)]).then(t.bind(t,64223))).default});return function(){return e.apply(this,arguments)}}()};var e},88755:(c,f,t)=>{t.d(f,{m:()=>e});var s=t(21726),L=t(84687);function e(o){return{origin:"portal-item",url:(0,s.mN)(o.itemUrl),portal:o.portal||L.Z.getDefault(),portalItem:o,readResourcePaths:[]}}},83705:(c,f,t)=>{t.r(f),t.d(f,{getFirstLayerOrTableId:()=>W,getNumLayersAndTables:()=>T,load:()=>K,preprocessFSItemData:()=>M});var s=t(15861),L=t(26584),e=t(30164),o=t(84687),m=t(88755),h=t(39683),p=t(45205);function K(r,i){return E.apply(this,arguments)}function E(){return(E=(0,s.Z)(function*(r,i){const l=r.instance.portalItem;return l&&l.id?(yield l.load(i),Z(r),j(r,i)):Promise.resolve()})).apply(this,arguments)}function Z(r){const i=r.instance.portalItem;if(-1===r.supportedTypes.indexOf(i.type))throw new L.Z("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}'",{type:i.type,expectedType:r.supportedTypes.join(", ")})}function j(r,i){return S.apply(this,arguments)}function S(){return(S=(0,s.Z)(function*(r,i){const l=r.instance,y=l.portalItem,{url:u,title:n}=y,a=(0,m.m)(y);if("group"===l.type)return l.read({title:n},a),R(l,r);u&&l.read({url:u},a);const d=yield N(r,i);return d&&l.read(d,a),l.resourceReferences={portalItem:y,paths:a.readResourcePaths},l.read({title:n},a),(0,h.y)(l,a)})).apply(this,arguments)}function R(r,i){let l;const y=r.portalItem.type;switch(y){case"Feature Service":case"Feature Collection":l=e.T.FeatureLayer;break;case"Stream Service":l=e.T.StreamLayer;break;case"Scene Service":l=e.T.SceneLayer;break;default:throw new L.Z("portal:unsupported-item-type-as-group",`The item type '${y}' is not supported as a 'IGroupLayer'`)}let u;return l().then(n=>(u=n,N(i))).then(function(){var n=(0,s.Z)(function*(a){return"Feature Service"===y?(a=yield M(a,r.portalItem.url),D(r,u,a)):T(a)>0?D(r,u,a):function U(r,i){return r.portalItem.url?(0,p.b)(r.portalItem.url).then(l=>{var y,u;function n(a){return{id:a.id,name:a.name}}l&&D(r,i,{layers:null==(y=l.layers)?void 0:y.map(n),tables:null==(u=l.tables)?void 0:u.map(n)})}):Promise.resolve()}(r,u)});return function(a){return n.apply(this,arguments)}}())}function D(r,i,l){let y=l.layers||[];const u=l.tables||[];"Feature Collection"===r.portalItem.type&&(y.forEach(n=>{var a;"Table"===(null==n||null==(a=n.layerDefinition)?void 0:a.type)&&u.push(n)}),y=y.filter(n=>{var a;return"Table"!==(null==n||null==(a=n.layerDefinition)?void 0:a.type)})),y.reverse().forEach(n=>{const a=P(r,i,l,n);r.add(a)}),u.reverse().forEach(n=>{const a=P(r,i,l,n);r.tables.add(a)})}function P(r,i,l,y){const u=new i({portalItem:r.portalItem.clone(),layerId:y.id,sublayerTitleMode:"service-name"});if("Feature Collection"===r.portalItem.type){const n={origin:"portal-item",portal:r.portalItem.portal||o.Z.getDefault()};u.read(y,n);const a=l.showLegend;null!=a&&u.read({showLegend:a},n)}return u}function N(r,i){if(!1===r.supportsData)return Promise.resolve(void 0);const l=r.instance;return l.portalItem.fetchData("json",i).catch(()=>null).then(function(){var y=(0,s.Z)(function*(u){if(function B(r){return"stream"!==r.type&&"layerId"in r}(l)){let n,a=!0;return u&&T(u)>0&&(null==l.layerId&&(l.layerId=W(u)),n=function A(r,i){const l=r.layers;if(l)for(let u=0;u<l.length;u++)if(l[u].id===i)return l[u];const y=r.tables;if(y)for(let u=0;u<y.length;u++)if(y[u].id===i)return y[u];return null}(u,l.layerId),n&&(1===T(u)&&(a=!1),null!=u.showLegend&&(n.showLegend=u.showLegend))),a&&"service-name"!==l.sublayerTitleMode&&(l.sublayerTitleMode="item-title-and-service-name"),n}return u});return function(u){return y.apply(this,arguments)}}())}function M(r,i){return O.apply(this,arguments)}function O(){return(O=(0,s.Z)(function*(r,i){var l,y;if(null==(null==(l=r)?void 0:l.layers)||null==(null==(y=r)?void 0:y.tables)){const u=yield(0,p.b)(i);(r=r||{}).layers=r.layers||(null==u?void 0:u.layers),r.tables=r.tables||(null==u?void 0:u.tables)}return r})).apply(this,arguments)}function W(r){const i=r.layers;if(i&&i.length)return i[0].id;const l=r.tables;return l&&l.length?l[0].id:null}function T(r){var i,l,y,u;return(null!=(i=null==r||null==(l=r.layers)?void 0:l.length)?i:0)+(null!=(y=null==r||null==(u=r.tables)?void 0:u.length)?y:0)}},37281:(c,f,t)=>{function L(o,m){return!!o.typeKeywords&&o.typeKeywords.indexOf(m)>-1}t.d(f,{_$:()=>L})},7534:(c,f,t)=>{t.r(f),t.d(f,{fromItem:()=>K,selectLayerClassPath:()=>Z});var s=t(15861),L=t(26584),e=t(30164),o=t(55463),m=t(83705),h=t(37281),p=t(45205);function K(n){return!n.portalItem||n.portalItem instanceof o.default||(n=V(x({},n),{portalItem:new o.default(n.portalItem)})),function E(n){return n.load().then(Z).then(j)}(n.portalItem).then(a=>{const d=x({portalItem:n.portalItem},a.properties);return Promise.resolve(new(0,a.constructor)(d))})}function Z(n){switch(n.type){case"Map Service":return function S(n){return function l(n){return(0,p.b)(n.url).then(a=>a.tileInfo)}(n).then(a=>a?{className:"TileLayer"}:{className:"MapImageLayer"})}(n);case"Feature Service":return function R(n){return y(n).then(a=>{if("object"==typeof a){const d={};return null!=a.id&&(d.layerId=a.id),{className:"FeatureLayer",properties:d}}return{className:"GroupLayer"}})}(n);case"Feature Collection":return function D(n){return P.apply(this,arguments)}(n);case"Scene Service":return function U(n){return y(n).then(a=>{if("object"==typeof a){const d={};let g;if(null!=a.id?(d.layerId=a.id,g=`${n.url}/layers/${a.id}`):g=n.url,Array.isArray(n.typeKeywords)&&n.typeKeywords.length>0){const v={IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",Point:"SceneLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};for(const I of Object.keys(v))if(-1!==n.typeKeywords.indexOf(I))return{className:v[I]}}return(0,p.b)(g).then(v=>{let I="SceneLayer";const C={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};return v&&v.layerType&&C[v.layerType]&&(I=C[v.layerType]),{className:I,properties:d}})}return!1===a?(0,p.b)(n.url).then(d=>"Voxel"===(null==d?void 0:d.layerType)?{className:"VoxelLayer"}:{className:"GroupLayer"}):{className:"GroupLayer"}})}(n);case"Image Service":return function N(n){return M.apply(this,arguments)}(n);case"Stream Service":case"Feed":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"KML":return{className:"KMLLayer"};case"WFS":return{className:"WFSLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};default:return Promise.reject(new L.Z("portal:unknown-item-type","Unknown item type '${type}'",{type:n.type}))}}function j(n){return(0,e.T[n.className])().then(a=>({constructor:a,properties:n.properties}))}function P(){return(P=(0,s.Z)(function*(n){if(yield n.load(),(0,h._$)(n,"Map Notes"))return{className:"MapNotesLayer"};if((0,h._$)(n,"Route Layer"))return{className:"RouteLayer"};const a=yield n.fetchData();return 1===(0,m.getNumLayersAndTables)(a)?{className:"FeatureLayer"}:{className:"GroupLayer"}})).apply(this,arguments)}function M(){return(M=(0,s.Z)(function*(n){var a,d,g;yield n.load();const v=null!=(a=null==(d=n.typeKeywords)?void 0:d.map($=>$.toLowerCase()))?a:[];if(v.indexOf("elevation 3d layer")>-1)return{className:"ElevationLayer"};if(v.indexOf("tiled imagery")>-1)return{className:"ImageryTileLayer"};const I=yield n.fetchData(),C=null==I?void 0:I.layerType;return"ArcGISTiledImageServiceLayer"===C?{className:"ImageryTileLayer"}:"ArcGISImageServiceLayer"===C?{className:"ImageryLayer"}:"map"===(null==(g=(yield(0,p.b)(n.url)).cacheType)?void 0:g.toLowerCase())?{className:"ImageryTileLayer"}:{className:"ImageryLayer"}})).apply(this,arguments)}function y(n){return!n.url||n.url.match(/\/\d+$/)?Promise.resolve({}):n.load().then(()=>n.fetchData()).then(function(){var a=(0,s.Z)(function*(d){return"Feature Service"===n.type?u(d=yield(0,m.preprocessFSItemData)(d,n.url)):(0,m.getNumLayersAndTables)(d)>0?u(d):(0,p.b)(n.url).then(u)});return function(d){return a.apply(this,arguments)}}())}function u(n){return 1===(0,m.getNumLayersAndTables)(n)&&{id:(0,m.getFirstLayerOrTableId)(n)}}},45205:(c,f,t)=>{t.d(f,{b:()=>e});var s=t(15861),L=t(84792);function e(m){return o.apply(this,arguments)}function o(){return(o=(0,s.Z)(function*(m){const{data:h}=yield(0,L.default)(m,{responseType:"json",query:{f:"json"}});return h})).apply(this,arguments)}}}]);