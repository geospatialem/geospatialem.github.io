"use strict";var Ke=Object.defineProperty,We=Object.defineProperties,$e=Object.getOwnPropertyDescriptors,Ze=Object.getOwnPropertySymbols,He=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable,Ge=(q,z,S)=>z in q?Ke(q,z,{enumerable:!0,configurable:!0,writable:!0,value:S}):q[z]=S,le=(q,z)=>{for(var S in z||(z={}))He.call(z,S)&&Ge(q,S,z[S]);if(Ze)for(var S of Ze(z))Je.call(z,S)&&Ge(q,S,z[S]);return q},Ve=(q,z)=>We(q,$e(z));(self.webpackChunksite=self.webpackChunksite||[]).push([[8990],{98148:(q,z,S)=>{function G(Z,L){const w=Z.count;L||(L=new Z.TypedArrayConstructor(w));for(let A=0;A<w;A++)L[A]=Z.get(A);return L}S.d(z,{m:()=>G}),Object.freeze({__proto__:null,copy:function I(Z,L,w){const A=Z.typedBuffer,M=Z.typedBufferStride,T=L.typedBuffer,P=L.typedBufferStride,O=w?w.count:L.count;let R=(w&&w.dstIndex?w.dstIndex:0)*M,E=(w&&w.srcIndex?w.srcIndex:0)*P;for(let D=0;D<O;++D)A[R]=T[E],R+=M,E+=P},makeDense:G})},35995:(q,z,S)=>{S.d(z,{f:()=>Z,n:()=>$});var I=S(67866);function G(w,A,M){const T=w.typedBuffer,P=w.typedBufferStride,O=A.typedBuffer,R=A.typedBufferStride,E=M?M.count:A.count;let D=(M&&M.dstIndex?M.dstIndex:0)*P,j=(M&&M.srcIndex?M.srcIndex:0)*R;for(let W=0;W<E;++W)T[D]=O[j],T[D+1]=O[j+1],D+=P,j+=R}function $(w,A,M){const T=w.typedBuffer,P=w.typedBufferStride,O=A.typedBuffer,R=A.typedBufferStride,E=M?M.count:A.count;let D=(M&&M.dstIndex?M.dstIndex:0)*P,j=(M&&M.srcIndex?M.srcIndex:0)*R;if((0,I.U)(A.elementType)){const W=(0,I.Op)(A.elementType);if((0,I.B3)(A.elementType))for(let N=0;N<E;++N)T[D]=Math.max(O[j]/W,-1),T[D+1]=Math.max(O[j+1]/W,-1),D+=P,j+=R;else for(let N=0;N<E;++N)T[D]=O[j]/W,T[D+1]=O[j+1]/W,D+=P,j+=R}else G(w,A,M);return w}function Z(w,A,M,T){var P,O;const R=w.typedBuffer,E=w.typedBufferStride,D=null!=(P=null==T?void 0:T.count)?P:w.count;let j=(null!=(O=null==T?void 0:T.dstIndex)?O:0)*E;for(let W=0;W<D;++W)R[j]=A,R[j+1]=M,j+=E}Object.freeze({__proto__:null,copy:G,normalizeIntegerBuffer:$,fill:Z})},63657:(q,z,S)=>{S.d(z,{a:()=>L,s:()=>Z,t:()=>$});var I=S(96286);function $(A,M,T){if(A.count!==M.count)return void I.k.error("source and destination buffers need to have the same number of elements");const P=A.count,O=T[0],R=T[1],E=T[2],D=T[3],j=T[4],W=T[5],N=T[6],oe=T[7],H=T[8],Q=A.typedBuffer,ee=A.typedBufferStride,Y=M.typedBuffer,_e=M.typedBufferStride;for(let xe=0;xe<P;xe++){const be=xe*ee,ye=xe*_e,de=Y[ye],pe=Y[ye+1],re=Y[ye+2],Se=Y[ye+3];Q[be]=O*de+D*pe+N*re,Q[be+1]=R*de+j*pe+oe*re,Q[be+2]=E*de+W*pe+H*re,Q[be+3]=Se}}function Z(A,M,T){const P=Math.min(A.count,M.count),O=A.typedBuffer,R=A.typedBufferStride,E=M.typedBuffer,D=M.typedBufferStride;for(let j=0;j<P;j++){const W=j*R,N=j*D;O[W]=T*E[N],O[W+1]=T*E[N+1],O[W+2]=T*E[N+2],O[W+3]=T*E[N+3]}}function L(A,M,T){const P=Math.min(A.count,M.count),O=A.typedBuffer,R=A.typedBufferStride,E=M.typedBuffer,D=M.typedBufferStride;for(let j=0;j<P;j++){const W=j*R,N=j*D;O[W]=E[N]>>T,O[W+1]=E[N+1]>>T,O[W+2]=E[N+2]>>T,O[W+3]=E[N+3]>>T}}Object.freeze({__proto__:null,transformMat4:function G(A,M,T){if(A.count!==M.count)return void I.k.error("source and destination buffers need to have the same number of elements");const P=A.count,O=T[0],R=T[1],E=T[2],D=T[3],j=T[4],W=T[5],N=T[6],oe=T[7],H=T[8],Q=T[9],ee=T[10],Y=T[11],_e=T[12],xe=T[13],be=T[14],ye=T[15],de=A.typedBuffer,pe=A.typedBufferStride,re=M.typedBuffer,Se=M.typedBufferStride;for(let Te=0;Te<P;Te++){const ce=Te*pe,we=Te*Se,ge=re[we],ve=re[we+1],ie=re[we+2],me=re[we+3];de[ce]=O*ge+j*ve+H*ie+_e*me,de[ce+1]=R*ge+W*ve+Q*ie+xe*me,de[ce+2]=E*ge+N*ve+ee*ie+be*me,de[ce+3]=D*ge+oe*ve+Y*ie+ye*me}},transformMat3:$,scale:Z,shiftRight:L})},63470:(q,z,S)=>{function I(Z,L,w){const A=Z.typedBuffer,M=Z.typedBufferStride,T=L.typedBuffer,P=L.typedBufferStride,O=w?w.count:L.count;let R=(w&&w.dstIndex?w.dstIndex:0)*M,E=(w&&w.srcIndex?w.srcIndex:0)*P;for(let D=0;D<O;++D)A[R]=T[E],A[R+1]=T[E+1],A[R+2]=T[E+2],A[R+3]=T[E+3],R+=M,E+=P}function G(Z,L,w,A,M,T){var P,O;const R=Z.typedBuffer,E=Z.typedBufferStride,D=null!=(P=null==T?void 0:T.count)?P:Z.count;let j=(null!=(O=null==T?void 0:T.dstIndex)?O:0)*E;for(let W=0;W<D;++W)R[j]=L,R[j+1]=w,R[j+2]=A,R[j+3]=M,j+=E}S.d(z,{c:()=>I,f:()=>G}),Object.freeze({__proto__:null,copy:I,fill:G})},4794:(q,z,S)=>{function I(){return[0,0,0,0]}function $(H,Q,ee,Y){return[H,Q,ee,Y]}function L(H,Q){return new Float64Array(H,Q,4)}function A(){return $(1,1,1,1)}function M(){return $(1,0,0,0)}function T(){return $(0,1,0,0)}function P(){return $(0,0,1,0)}function O(){return $(0,0,0,1)}S.d(z,{a:()=>L,c:()=>I,f:()=>$});const E=A(),D=M(),j=T(),W=P(),N=O();Object.freeze({__proto__:null,create:I,clone:function G(H){return[H[0],H[1],H[2],H[3]]},fromValues:$,fromArray:function Z(H){const Q=[0,0,0,0],ee=Math.min(4,H.length);for(let Y=0;Y<ee;++Y)Q[Y]=H[Y];return Q},createView:L,zeros:function w(){return[0,0,0,0]},ones:A,unitX:M,unitY:T,unitZ:P,unitW:O,ZEROS:[0,0,0,0],ONES:E,UNIT_X:D,UNIT_Y:j,UNIT_Z:W,UNIT_W:N})},97535:(q,z,S)=>{S.d(z,{x:()=>G});var I=S(79682);class G{constructor(L){this.allocator=L,this._items=[],this._itemsPtr=0,this.grow()}get(){return 0===this._itemsPtr&&(0,I.Y)(()=>this.reset()),this._itemsPtr===this._items.length&&this.grow(),this._items[this._itemsPtr++]}reset(){const L=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*$);this._items.length=Math.min(L,this._items.length),this._itemsPtr=0}grow(){for(let L=0;L<Math.max(8,Math.min(this._items.length,$));L++)this._items.push(this.allocator())}}const $=1024},10349:(q,z,S)=>{S.d(z,{G:()=>G});var I=S(26584);class G{constructor(Z,L,w=""){this.major=Z,this.minor=L,this._context=w}lessThan(Z,L){return this.major<Z||Z===this.major&&this.minor<L}since(Z,L){return!this.lessThan(Z,L)}validate(Z){if(this.major!==Z.major)throw new I.Z((this._context&&this._context+":")+"unsupported-version",`Required major ${this._context&&this._context+" "}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:Z})}clone(){return new G(this.major,this.minor,this._context)}static parse(Z,L=""){const[w,A]=Z.split("."),M=/^\s*\d+\s*$/;if(!w||!w.match||!w.match(M))throw new I.Z((L&&L+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:Z});if(!A||!A.match||!A.match(M))throw new I.Z((L&&L+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:Z});const T=parseInt(w,10),P=parseInt(A,10);return new G(T,P,L)}}},67866:(q,z,S)=>{function G(w){switch(w){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8;default:return}}function $(w){switch(w){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function Z(w){switch(w){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function L(w){switch(w){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}S.d(z,{n1:()=>G,U:()=>Z,B3:()=>$,Op:()=>L}),S(8314)},60490:(q,z,S)=>{S.d(z,{gS:()=>P});var I=S(67866);function P(O,R){return new O(new ArrayBuffer(R*O.ElementCount*(0,I.n1)(O.ElementType)))}Object.freeze({__proto__:null,copy:function G(O,R,E){const D=O.typedBuffer,j=O.typedBufferStride,W=R.typedBuffer,N=R.typedBufferStride,oe=E?E.count:R.count;let H=(E&&E.dstIndex?E.dstIndex:0)*j,Q=(E&&E.srcIndex?E.srcIndex:0)*N;for(let ee=0;ee<oe;++ee){for(let Y=0;Y<9;++Y)D[H+Y]=W[Q+Y];H+=j,Q+=N}}}),Object.freeze({__proto__:null,copy:function Z(O,R,E){const D=O.typedBuffer,j=O.typedBufferStride,W=R.typedBuffer,N=R.typedBufferStride,oe=E?E.count:R.count;let H=(E&&E.dstIndex?E.dstIndex:0)*j,Q=(E&&E.srcIndex?E.srcIndex:0)*N;for(let ee=0;ee<oe;++ee){for(let Y=0;Y<16;++Y)D[H+Y]=W[Q+Y];H+=j,Q+=N}}}),S(98148),S(35995),S(9554),S(63470)},26242:(q,z,S)=>{S.d(z,{MP:()=>D,WM:()=>O});var I=S(79682),G=S(550),$=S(43703),Z=S(78451),L=S(99770),w=S(28093),A=S(4794);class M{constructor(N,oe,H){this.itemByteSize=N,this.itemCreate=oe,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(H/this.itemByteSize)}get(){0===this._itemsPtr&&(0,I.Y)(()=>this.reset());const N=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=N;){const oe=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let H=0;H<this._itemsPerBuffer;++H)this._items.push(this.itemCreate(oe,H*this.itemByteSize));this._buffers.push(oe)}return this._items[this._itemsPtr++]}reset(){const N=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>N;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(N=T){return new M(16,L.c,N)}static createVec3f64(N=T){return new M(24,w.b,N)}static createVec4f64(N=T){return new M(32,A.a,N)}static createMat3f64(N=T){return new M(72,G.a,N)}static createMat4f64(N=T){return new M(128,$.a,N)}static createQuatf64(N=T){return new M(32,Z.c,N)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}const T=4096,O=(M.createVec2f64(),M.createVec3f64()),D=(M.createVec4f64(),M.createMat3f64(),M.createMat4f64());M.createQuatf64()},9160:(q,z,S)=>{S.d(z,{C:()=>M});var I=S(15861),G=S(84792),$=S(59213),Z=S(26584),L=S(62208),w=S(10699),A=S(21726);class M{constructor(O){this.streamDataRequester=O}loadJSON(O,R){var E=this;return(0,I.Z)(function*(){return E.load("json",O,R)})()}loadBinary(O,R){var E=this;return(0,I.Z)(function*(){return(0,A.HK)(O)?((0,w.k_)(R),(0,A.AH)(O)):E.load("binary",O,R)})()}loadImage(O,R){var E=this;return(0,I.Z)(function*(){return E.load("image",O,R)})()}load(O,R,E){var D=this;return(0,I.Z)(function*(){if((0,L.Wi)(D.streamDataRequester))return(yield(0,G.default)(R,{responseType:T[O]})).data;const j=yield(0,$.q6)(D.streamDataRequester.request(R,O,E));if(!0===j.ok)return j.value;throw(0,w.r9)(j.error),new Z.Z("",`Request for resource failed: ${j.error}`)})()}}const T={image:"image",binary:"array-buffer",json:"json"}},96170:(q,z,S)=>{S.d(z,{jX:()=>L,DA:()=>Z,nh:()=>$});var I=S(55713),G=S(73825);function $(w,A=G.p){return"number"==typeof w?A(w):(0,I.Uc)(w)||(0,I.lq)(w)?new Uint32Array(w):w}function Z(w){const A="number"==typeof w?w:w.length;if(A<3)return new Uint16Array(0);const M=A-2,T=M<=65536?new Uint16Array(3*M):new Uint32Array(3*M);if("number"==typeof w){let P=0;for(let O=0;O<M;O+=1)O%2==0?(T[P++]=O,T[P++]=O+1,T[P++]=O+2):(T[P++]=O+1,T[P++]=O,T[P++]=O+2)}else{let P=0;for(let O=0;O<M;O+=1)if(O%2==0){const E=w[O+1],D=w[O+2];T[P++]=w[O],T[P++]=E,T[P++]=D}else{const E=w[O],D=w[O+2];T[P++]=w[O+1],T[P++]=E,T[P++]=D}}return T}function L(w){const A="number"==typeof w?w:w.length;if(A<3)return new Uint16Array(0);const M=A-2,T=M<=65536?new Uint16Array(3*M):new Uint32Array(3*M);if("number"==typeof w){let P=0;for(let O=0;O<M;++O)T[P++]=0,T[P++]=O+1,T[P++]=O+2;return T}{const P=w[0];let O=w[1],R=0;for(let E=0;E<M;++E){const D=w[E+2];T[R++]=P,T[R++]=O,T[R++]=D,O=D}return T}}},31365:(q,z,S)=>{S.d(z,{z:()=>je});var I=S(15861),G=S(62208),$=S(43703),Z=S(26584);const w=S(63290).Z.getLogger("esri.views.3d.glTF");var P=S(94573),O=S(88159),R=S(21726),E=S(10349),D=S(28347),j=S(48977),W=S(78451),N=S(60479),oe=S(98148);class H{constructor(a){this.data=a,this.offset4=0,this.dataUint32=new Uint32Array(this.data,0,Math.floor(this.data.byteLength/4))}readUint32(){const a=this.offset4;return this.offset4+=1,this.dataUint32[a]}readUint8Array(a){const h=4*this.offset4;return this.offset4+=a/4,new Uint8Array(this.data,h,a)}remainingBytes(){return this.data.byteLength-4*this.offset4}}const Q={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1},ee={pbrMetallicRoughness:Q,emissiveFactor:[0,0,0],alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1},Y={ESRI_externalColorMixMode:"tint"},_e=(x={})=>{const a=le(le({},Q),x.pbrMetallicRoughness),h=function xe(x){switch(x.ESRI_externalColorMixMode){case"multiply":case"tint":case"ignore":case"replace":break;default:(0,P.Bg)(x.ESRI_externalColorMixMode),x.ESRI_externalColorMixMode="tint"}return x}(le(le({},Y),x.extras));return Ve(le(le({},ee),x),{pbrMetallicRoughness:a,extras:h})},be={magFilter:9729,minFilter:9987,wrapS:10497,wrapT:10497};class re{constructor(a,h,y,d,_){this.context=a,this.errorContext=h,this.uri=y,this.json=d,this.glbBuffer=_,this.bufferLoaders=new Map,this.textureLoaders=new Map,this.textureCache=new Map,this.materialCache=new Map,this.nodeParentMap=new Map,this.nodeTransformCache=new Map,this.baseUri=function de(x){let a,h;return x.replace(/^(.*\/)?([^/]*)$/,(y,d,_)=>(a=d||"",h=_||"","")),{dirPart:a,filePart:h}}(this.uri).dirPart,this.checkVersionSupported(),this.checkRequiredExtensionsSupported(),h.errorUnsupportedIf(null==d.scenes,"Scenes must be defined."),h.errorUnsupportedIf(null==d.meshes,"Meshes must be defined"),h.errorUnsupportedIf(null==d.nodes,"Nodes must be defined."),this.computeNodeParents()}static load(a,h,y,d){var _=this;return(0,I.Z)(function*(){if((0,R.HK)(y)){const k=(0,R.sJ)(y);if("model/gltf-binary"!==k.mediaType)try{const F=JSON.parse(k.isBase64?atob(k.data):k.data);return new re(a,h,y,F)}catch(F){}const K=(0,R.AH)(y);if(re.isGLBData(K))return _.fromGLBData(a,h,y,K)}if(y.endsWith(".gltf")){const k=yield a.loadJSON(y,d);return new re(a,h,y,k)}const b=yield a.loadBinary(y,d);if(re.isGLBData(b))return _.fromGLBData(a,h,y,b);const C=yield a.loadJSON(y,d);return new re(a,h,y,C)})()}static isGLBData(a){const h=new H(a);return h.remainingBytes()>=4&&1179937895===h.readUint32()}static fromGLBData(a,h,y,d){return(0,I.Z)(function*(){const _=yield re.parseGLBData(h,d);return new re(a,h,y,_.json,_.binaryData)})()}static parseGLBData(a,h){return(0,I.Z)(function*(){const y=new H(h);a.assert(y.remainingBytes()>=12,"GLB binary data is insufficiently large.");const d=y.readUint32(),_=y.readUint32(),b=y.readUint32();a.assert(1179937895===d,"Magic first 4 bytes do not fit to expected GLB value."),a.assert(h.byteLength>=b,"GLB binary data is smaller than header specifies."),a.errorUnsupportedIf(2!==_,"An unsupported GLB container version was detected. Only version 2 is supported.");let C,k,K=0;for(;y.remainingBytes()>=8;){const F=y.readUint32(),J=y.readUint32();0===K?(a.assert(1313821514===J,"First GLB chunk must be JSON."),a.assert(F>=0,"No JSON data found."),C=yield ie(y.readUint8Array(F))):1===K?(a.errorUnsupportedIf(5130562!==J,"Second GLB chunk expected to be BIN."),k=y.readUint8Array(F)):a.warnUnsupported("More than 2 GLB chunks detected. Skipping."),K+=1}return C||a.error("No GLB JSON chunk detected."),{json:C,binaryData:k}})()}getBuffer(a,h){var y=this;return(0,I.Z)(function*(){const d=y.json.buffers[a],_=y.errorContext;if(null==d.uri)return _.assert(null!=y.glbBuffer,"GLB buffer not present"),y.glbBuffer;const b=yield y.getBufferLoader(a,h);return _.assert(b.byteLength===d.byteLength,"Buffer byte lengths should match."),b})()}getBufferLoader(a,h){var y=this;return(0,I.Z)(function*(){const d=y.bufferLoaders.get(a);if(d)return d;const b=y.context.loadBinary(y.resolveUri(y.json.buffers[a].uri),h).then(C=>new Uint8Array(C));return y.bufferLoaders.set(a,b),b})()}getAccessor(a,h){var y=this;return(0,I.Z)(function*(){const d=y.errorContext;d.errorUnsupportedIf(!y.json.accessors,"Accessors missing.");const _=y.json.accessors[a];d.errorUnsupportedIf(null==(null==_?void 0:_.bufferView),"Some accessor does not specify a bufferView."),d.errorUnsupportedIf(_.type in["MAT2","MAT3","MAT4"],`AttributeType ${_.type} is not supported`);const b=y.json.bufferViews[_.bufferView],C=yield y.getBuffer(b.buffer,h),k=we[_.type],K=ge[_.componentType],F=k*K,J=b.byteStride||F;return{raw:C.buffer,byteStride:J,byteOffset:C.byteOffset+(b.byteOffset||0)+(_.byteOffset||0),entryCount:_.count,isDenselyPacked:J===F,componentCount:k,componentByteSize:K,componentType:_.componentType,min:_.min,max:_.max,normalized:!!_.normalized}})()}getIndexData(a,h){var y=this;return(0,I.Z)(function*(){if(null==a.indices)return null;const d=yield y.getAccessor(a.indices,h);if(d.isDenselyPacked)switch(d.componentType){case 5121:return new Uint8Array(d.raw,d.byteOffset,d.entryCount);case 5123:return new Uint16Array(d.raw,d.byteOffset,d.entryCount);case 5125:return new Uint32Array(d.raw,d.byteOffset,d.entryCount)}else switch(d.componentType){case 5121:return(0,oe.m)(y.wrapAccessor(N.D_,d));case 5123:return(0,oe.m)(y.wrapAccessor(N.av,d));case 5125:return(0,oe.m)(y.wrapAccessor(N.Nu,d))}})()}getPositionData(a,h){var y=this;return(0,I.Z)(function*(){const d=y.errorContext;d.errorUnsupportedIf(null==a.attributes.POSITION,"No POSITION vertex data found.");const _=yield y.getAccessor(a.attributes.POSITION,h);return d.errorUnsupportedIf(5126!==_.componentType,"Expected type FLOAT for POSITION vertex attribute, but found "+Me[_.componentType]),d.errorUnsupportedIf(3!==_.componentCount,"POSITION vertex attribute must have 3 components, but found "+_.componentCount.toFixed()),y.wrapAccessor(N.ct,_)})()}getNormalData(a,h){var y=this;return(0,I.Z)(function*(){const d=y.errorContext;d.assert(null!=a.attributes.NORMAL,"No NORMAL vertex data found.");const _=yield y.getAccessor(a.attributes.NORMAL,h);return d.errorUnsupportedIf(5126!==_.componentType,"Expected type FLOAT for NORMAL vertex attribute, but found "+Me[_.componentType]),d.errorUnsupportedIf(3!==_.componentCount,"NORMAL vertex attribute must have 3 components, but found "+_.componentCount.toFixed()),y.wrapAccessor(N.ct,_)})()}getTangentData(a,h){var y=this;return(0,I.Z)(function*(){const d=y.errorContext;d.assert(null!=a.attributes.TANGENT,"No TANGENT vertex data found.");const _=yield y.getAccessor(a.attributes.TANGENT,h);return d.errorUnsupportedIf(5126!==_.componentType,"Expected type FLOAT for TANGENT vertex attribute, but found "+Me[_.componentType]),d.errorUnsupportedIf(4!==_.componentCount,"TANGENT vertex attribute must have 4 components, but found "+_.componentCount.toFixed()),new N.ek(_.raw,_.byteOffset,_.byteStride,_.byteOffset+_.byteStride*_.entryCount)})()}getTextureCoordinates(a,h){var y=this;return(0,I.Z)(function*(){const d=y.errorContext;d.assert(null!=a.attributes.TEXCOORD_0,"No TEXCOORD_0 vertex data found.");const _=yield y.getAccessor(a.attributes.TEXCOORD_0,h);return d.errorUnsupportedIf(2!==_.componentCount,"TEXCOORD_0 vertex attribute must have 2 components, but found "+_.componentCount.toFixed()),5126===_.componentType?y.wrapAccessor(N.Eu,_):(d.errorUnsupportedIf(!_.normalized,"Integer component types are only supported for a normalized accessor for TEXCOORD_0."),function ve(x){switch(x.componentType){case 5120:return new N.Vs(x.raw,x.byteOffset,x.byteStride,x.byteOffset+x.byteStride*x.entryCount);case 5121:return new N.xA(x.raw,x.byteOffset,x.byteStride,x.byteOffset+x.byteStride*x.entryCount);case 5122:return new N.or(x.raw,x.byteOffset,x.byteStride,x.byteOffset+x.byteStride*x.entryCount);case 5123:return new N.TS(x.raw,x.byteOffset,x.byteStride,x.byteOffset+x.byteStride*x.entryCount);case 5125:return new N.qt(x.raw,x.byteOffset,x.byteStride,x.byteOffset+x.byteStride*x.entryCount);case 5126:return new N.Eu(x.raw,x.byteOffset,x.byteStride,x.byteOffset+x.byteStride*x.entryCount);default:return void(0,P.Bg)(x.componentType)}}(_))})()}getVertexColors(a,h){var y=this;return(0,I.Z)(function*(){const d=y.errorContext;d.assert(null!=a.attributes.COLOR_0,"No COLOR_0 vertex data found.");const _=yield y.getAccessor(a.attributes.COLOR_0,h);if(d.errorUnsupportedIf(4!==_.componentCount&&3!==_.componentCount,"COLOR_0 attribute must have 3 or 4 components, but found "+_.componentCount.toFixed()),4===_.componentCount){if(5126===_.componentType)return y.wrapAccessor(N.ek,_);if(5121===_.componentType)return y.wrapAccessor(N.mc,_);if(5123===_.componentType)return y.wrapAccessor(N.v6,_)}else if(3===_.componentCount){if(5126===_.componentType)return y.wrapAccessor(N.ct,_);if(5121===_.componentType)return y.wrapAccessor(N.ne,_);if(5123===_.componentType)return y.wrapAccessor(N.mw,_)}d.errorUnsupported("Unsupported component type for COLOR_0 attribute: "+Me[_.componentType])})()}hasPositions(a){return void 0!==a.attributes.POSITION}hasNormals(a){return void 0!==a.attributes.NORMAL}hasVertexColors(a){return void 0!==a.attributes.COLOR_0}hasTextureCoordinates(a){return void 0!==a.attributes.TEXCOORD_0}hasTangents(a){return void 0!==a.attributes.TANGENT}getMaterial(a,h,y){var d=this;return(0,I.Z)(function*(){let _=d.materialCache.get(a.material);if(!_){const b=null!=a.material?_e(d.json.materials[a.material]):_e(),C=b.pbrMetallicRoughness,k=d.hasVertexColors(a),K=d.getTexture(C.baseColorTexture,h),F=d.getTexture(b.normalTexture,h),J=y?d.getTexture(b.occlusionTexture,h):null,X=y?d.getTexture(b.emissiveTexture,h):null,ne=y?d.getTexture(C.metallicRoughnessTexture,h):null,se=null!=a.material?a.material:-1;_={alphaMode:b.alphaMode,alphaCutoff:b.alphaCutoff,color:C.baseColorFactor,doubleSided:!!b.doubleSided,colorTexture:yield K,normalTexture:yield F,name:b.name,id:se,occlusionTexture:yield J,emissiveTexture:yield X,emissiveFactor:b.emissiveFactor,metallicFactor:C.metallicFactor,roughnessFactor:C.roughnessFactor,metallicRoughnessTexture:yield ne,vertexColors:k,ESRI_externalColorMixMode:b.extras.ESRI_externalColorMixMode}}return _})()}getTexture(a,h){var y=this;return(0,I.Z)(function*(){if(!a)return null;y.errorContext.errorUnsupportedIf(0!==(a.texCoord||0),"Only TEXCOORD with index 0 is supported.");const d=a.index,_=y.errorContext,b=y.json.textures[d],C=(x=null!=b.sampler?y.json.samplers[b.sampler]:{},le(le({},be),x));var x;_.errorUnsupportedIf(null==b.source,"Source is expected to be defined for a texture.");const k=y.json.images[b.source],K=yield y.loadTextureImageData(d,b,h);return(0,O.s1)(y.textureCache,d,()=>{const F=X=>33071===X||33648===X||10497===X,J=X=>(_.error(`Unexpected TextureSampler WrapMode: ${X}. Using default REPEAT(10497).`),10497);return{data:K,wrapS:F(C.wrapS)?C.wrapS:J(C.wrapS),wrapT:F(C.wrapT)?C.wrapT:J(C.wrapT),minFilter:C.minFilter,name:k.name,id:d}})})()}getNodeTransform(a){if(void 0===a)return Te;let h=this.nodeTransformCache.get(a);if(!h){const y=this.getNodeTransform(this.getNodeParent(a)),d=this.json.nodes[a];d.matrix?h=(0,D.m)((0,$.c)(),y,d.matrix):d.translation||d.rotation||d.scale?(h=(0,$.b)(y),d.translation&&(0,D.a)(h,h,d.translation),d.rotation&&(ce[3]=(0,j.g)(ce,d.rotation),(0,D.e)(h,h,ce[3],ce)),d.scale&&(0,D.f)(h,h,d.scale)):h=y,this.nodeTransformCache.set(a,h)}return h}wrapAccessor(a,h){return new a(h.raw,h.byteOffset,h.byteStride,h.byteOffset+h.byteStride*(h.entryCount-1)+h.componentByteSize*h.componentCount)}resolveUri(a){return(0,R.hF)(a,this.baseUri)}getNodeParent(a){return this.nodeParentMap.get(a)}checkVersionSupported(){const a=E.G.parse(this.json.asset.version,"glTF");Se.validate(a)}checkRequiredExtensionsSupported(){const a=this.json;a.extensionsRequired&&0!==a.extensionsRequired.length&&this.errorContext.errorUnsupported("gltf loader was not able to load unsupported feature. Required extensions: "+a.extensionsRequired.join(", "))}computeNodeParents(){this.json.nodes.forEach((a,h)=>{a.children&&a.children.forEach(y=>{this.nodeParentMap.set(y,h)})})}loadTextureImageData(a,h,y){var d=this;return(0,I.Z)(function*(){const _=d.textureLoaders.get(a);if(_)return _;const b=d.createTextureLoader(h,y);return d.textureLoaders.set(a,b),b})()}createTextureLoader(a,h){var y=this;return(0,I.Z)(function*(){const d=y.json.images[a.source];if(d.uri)return y.context.loadImage(y.resolveUri(d.uri),h);const _=y.errorContext;_.errorUnsupportedIf(null==d.bufferView,"Image bufferView must be defined."),_.errorUnsupportedIf(null==d.mimeType,"Image mimeType must be defined.");const b=y.json.bufferViews[d.bufferView],C=yield y.getBuffer(b.buffer,h);return _.errorUnsupportedIf(null!=b.byteStride,"byteStride not supported for image buffer"),function Ue(x,a){return Be.apply(this,arguments)}(new Uint8Array(C.buffer,C.byteOffset+(b.byteOffset||0),b.byteLength),d.mimeType)})()}}const Se=new E.G(2,0,"glTF"),Te=(0,D.u)((0,$.c)(),Math.PI/2),ce=(0,W.a)(),we={SCALAR:1,VEC2:2,VEC3:3,VEC4:4},ge={5120:1,5121:1,5122:2,5123:2,5126:4,5125:4};function ie(x){return me.apply(this,arguments)}function me(){return(me=(0,I.Z)(function*(x){return new Promise((a,h)=>{const y=new Blob([x]),d=new FileReader;d.onload=()=>{a(JSON.parse(d.result))},d.onerror=_=>{h(_)},d.readAsText(y)})})).apply(this,arguments)}function Be(){return(Be=(0,I.Z)(function*(x,a){return new Promise((h,y)=>{const d=new Blob([x],{type:a}),_=URL.createObjectURL(d),b=new Image;b.addEventListener("load",()=>{URL.revokeObjectURL(_),"decode"in b?b.decode().then(()=>h(b),()=>h(b)):h(b)}),b.addEventListener("error",C=>{URL.revokeObjectURL(_),y(C)}),b.src=_})})).apply(this,arguments)}const Me={5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5125:"UNSIGNED_INT",5126:"FLOAT"};let De=0;function je(x,a){return Le.apply(this,arguments)}function Le(){return Le=(0,I.Z)(function*(x,a,h={},y=!0){const d=yield re.load(x,U,a,h),_="gltf_"+De++,b={lods:[],materials:new Map,textures:new Map,meta:te(d)},C=!(!d.json.asset.extras||"symbolResource"!==d.json.asset.extras.ESRI_type),k=new Map;yield he(d,function(){var K=(0,I.Z)(function*(F,J,X,ne){var se;const fe=null!=(se=k.get(X))?se:0;k.set(X,fe+1);const ae=void 0!==F.mode?F.mode:4,Ie=4===ae||5===ae||6===ae?ae:null;if((0,G.Wi)(Ie))return void U.warnUnsupported("Unsupported primitive mode ("+V[ae]+"). Skipping primitive.");if(!d.hasPositions(F))return void U.warn("Skipping primitive without POSITION vertex attribute.");const Ce=d.getPositionData(F,h),Ae=d.getMaterial(F,h,y),Ee=d.hasNormals(F)?d.getNormalData(F,h):null,Re=d.hasTangents(F)?d.getTangentData(F,h):null,Ne=d.hasTextureCoordinates(F)?d.getTextureCoordinates(F,h):null,Pe=d.hasVertexColors(F)?d.getVertexColors(F,h):null,ze=d.getIndexData(F,h),ke={transform:(0,$.b)(J),attributes:{position:yield Ce,normal:Ee?yield Ee:null,texCoord0:Ne?yield Ne:null,color:Pe?yield Pe:null,tangent:Re?yield Re:null},indices:yield ze,primitiveType:Ie,material:v(b,yield Ae,_)};let Fe=null;(0,G.pC)(b.meta)&&(0,G.pC)(b.meta.ESRI_lod)&&"screenSpaceRadius"===b.meta.ESRI_lod.metric&&(Fe=b.meta.ESRI_lod.thresholds[X]),b.lods[X]=b.lods[X]||{parts:[],name:ne,lodThreshold:Fe},b.lods[X].parts[fe]=ke});return function(F,J,X,ne){return K.apply(this,arguments)}}());for(const K of b.lods)K.parts=K.parts.filter(F=>!!F);return{model:b,meta:{isEsriSymbolResource:C,uri:d.uri},customMeta:{}}}),Le.apply(this,arguments)}function te(x){let h=null;return x.json.nodes.forEach(y=>{const d=y.extras;(0,G.pC)(d)&&(d.ESRI_proxyEllipsoid||d.ESRI_lod)&&(h=d)}),h}function he(x,a){return Oe.apply(this,arguments)}function Oe(){return Oe=(0,I.Z)(function*(x,a){const h=x.json,y=h.scenes[h.scene||0].nodes,d=y.length>1,_=[];for(const k of y){const K=h.nodes[k];_.push(b(k,0)),ue(K)&&!d&&K.extensions.MSFT_lod.ids.forEach((F,J)=>b(F,J+1))}function b(k,K){return C.apply(this,arguments)}function C(){return(C=(0,I.Z)(function*(k,K){const F=h.nodes[k],J=x.getNodeTransform(k);if(U.warnUnsupportedIf(null!=F.weights,"Morph targets are not supported."),null!=F.mesh){const X=h.meshes[F.mesh];for(const ne of X.primitives)_.push(a(ne,J,K,X.name))}for(const X of F.children||[])_.push(b(X,K))})).apply(this,arguments)}yield Promise.all(_)}),Oe.apply(this,arguments)}function ue(x){return x.extensions&&x.extensions.MSFT_lod&&Array.isArray(x.extensions.MSFT_lod.ids)}function v(x,a,h){const y=_=>{const b=`${h}_tex_${_&&_.id}${_&&_.name?"_"+_.name:""}`;if(_&&!x.textures.has(b)){const C=function T(x,a={}){return{data:x,parameters:le({wrap:le({s:10497,t:10497},a.wrap),noUnpackFlip:!0,mipmap:!1},a)}}(_.data,{wrap:{s:_.wrapS,t:_.wrapT},mipmap:B.some(k=>k===_.minFilter),noUnpackFlip:!0});x.textures.set(b,C)}return b},d=`${h}_mat_${a.id}_${a.name}`;if(!x.materials.has(d)){const _=function M(x={}){return le({color:[1,1,1],opacity:1,alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1,castShadows:!0,receiveShadows:!0,receiveAmbientOcclustion:!0,textureColor:null,textureNormal:null,textureOcclusion:null,textureEmissive:null,textureMetallicRoughness:null,emissiveFactor:[0,0,0],metallicFactor:1,roughnessFactor:1,colorMixMode:"multiply"},x)}({color:[a.color[0],a.color[1],a.color[2]],opacity:a.color[3],alphaMode:a.alphaMode,alphaCutoff:a.alphaCutoff,doubleSided:a.doubleSided,colorMixMode:a.ESRI_externalColorMixMode,textureColor:a.colorTexture?y(a.colorTexture):void 0,textureNormal:a.normalTexture?y(a.normalTexture):void 0,textureOcclusion:a.occlusionTexture?y(a.occlusionTexture):void 0,textureEmissive:a.emissiveTexture?y(a.emissiveTexture):void 0,textureMetallicRoughness:a.metallicRoughnessTexture?y(a.metallicRoughnessTexture):void 0,emissiveFactor:[a.emissiveFactor[0],a.emissiveFactor[1],a.emissiveFactor[2]],metallicFactor:a.metallicFactor,roughnessFactor:a.roughnessFactor});x.materials.set(d,_)}return d}const U=new class A{error(a){throw new Z.Z("gltf-loader-error",a)}errorUnsupported(a){throw new Z.Z("gltf-loader-unsupported-feature",a)}errorUnsupportedIf(a,h){a&&this.errorUnsupported(h)}assert(a,h){a||this.error(h)}warn(a){w.warn(a)}warnUnsupported(a){this.warn("[Unsupported Feature] "+a)}warnUnsupportedIf(a,h){a&&this.warnUnsupported(h)}},B=[9987,9985],V=["POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN"]},73825:(q,z,S)=>{S.d(z,{NO:()=>je,cM:()=>De,p:()=>Be,DX:()=>Me});var I=S(84161),G=S(28093),$=S(97535);function Te(v,U,B){return(0,I.f)(ge,U,v),(0,I.f)(ve,B,v),(0,I.l)((0,I.c)(ge,ge,ve))/2}S(67831),S(21286),S(26242),(0,G.c)(),(0,G.c)(),new $.x(()=>({origin:null,vector:null})),new $.x(function A(v){return v?{origin:(0,G.a)(v.origin),vector:(0,G.a)(v.vector)}:{origin:(0,G.c)(),vector:(0,G.c)()}}),new $.x(()=>({p0:null,p1:null,p2:null}));const ge=(0,G.c)(),ve=(0,G.c)();let ie=(()=>{const v=new Uint32Array(131072);for(let U=0;U<v.length;++U)v[U]=U;return v})();const me=new Uint16Array([0]),Ue=(()=>{const v=new Uint16Array(65536);for(let U=0;U<v.length;++U)v[U]=U;return v})();function Be(v){if(1===v)return me;if(v<Ue.length)return new Uint16Array(Ue.buffer,0,v);if(v>ie.length){const U=Math.max(2*ie.length,v);ie=new Uint32Array(U);for(let B=0;B<ie.length;B++)ie[B]=B}return new Uint32Array(ie.buffer,0,v)}function Me(v){if(1===v)return new Uint16Array(me);if(v<Ue.length)return new Uint16Array(Ue.slice(0,v));if(v>ie.length){const U=new Uint32Array(v);for(let B=0;B<U.length;B++)U[B]=B;return U}return new Uint32Array(ie.slice(0,v))}function De(v,U,B){if(!v)return!1;const{size:V,data:x}=v;(0,I.s)(B,0,0,0),(0,I.s)(ue,0,0,0);let a=0,h=0;for(let y=0;y<U.length-2;y+=3){const d=U[y+0]*V,_=U[y+1]*V,b=U[y+2]*V;(0,I.s)(te,x[d+0],x[d+1],x[d+2]),(0,I.s)(he,x[_+0],x[_+1],x[_+2]),(0,I.s)(Oe,x[b+0],x[b+1],x[b+2]);const C=Te(te,he,Oe);C?((0,I.b)(te,te,he),(0,I.b)(te,te,Oe),(0,I.a)(te,te,1/3*C),(0,I.b)(B,B,te),a+=C):((0,I.b)(ue,ue,te),(0,I.b)(ue,ue,he),(0,I.b)(ue,ue,Oe),h+=3)}return!(0===h&&0===a||(0!==a?((0,I.a)(B,B,1/a),0):0===h||((0,I.a)(B,ue,1/h),0)))}function je(v,U,B){if(!v||!U)return!1;const{size:V,data:x}=v;(0,I.s)(B,0,0,0);let a=-1,h=0;for(let y=0;y<U.length;y++){const d=U[y]*V;a!==d&&(B[0]+=x[d+0],B[1]+=x[d+1],B[2]+=x[d+2],h++),a=d}return h>1&&(0,I.a)(B,B,1/h),h>0}const te=(0,G.c)(),he=(0,G.c)(),Oe=(0,G.c)(),ue=(0,G.c)()},79331:(q,z,S)=>{S.d(z,{K:()=>I});const I=2.1}}]);