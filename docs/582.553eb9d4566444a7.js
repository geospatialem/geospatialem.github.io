"use strict";var Je=Object.defineProperty,Ve=Object.defineProperties,Ye=Object.getOwnPropertyDescriptors,fe=Object.getOwnPropertySymbols,Ge=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable,ge=(it,K,u)=>K in it?Je(it,K,{enumerable:!0,configurable:!0,writable:!0,value:u}):it[K]=u,Kt=(it,K)=>{for(var u in K||(K={}))Ge.call(K,u)&&ge(it,u,K[u]);if(fe)for(var u of fe(K))Xe.call(K,u)&&ge(it,u,K[u]);return it},zt=(it,K)=>Ve(it,Ye(K));(self.webpackChunksite=self.webpackChunksite||[]).push([[582],{11915:(it,K,u)=>{u.d(K,{e:()=>b});var O,F,R={exports:{}};O=R,void 0!==(F=function(){function G(n,i,a){a=a||2;var l,c,p,f,C,Z,k,ut=i&&i.length,nt=ut?i[0]*a:n.length,X=ct(n,0,nt,a,!0),L=[];if(!X||X.next===X.prev)return L;if(ut&&(X=function T(n,i,a,l){var c,p,f,C=[];for(c=0,p=i.length;c<p;c++)(f=ct(n,i[c]*l,c<p-1?i[c+1]*l:n.length,l,!1))===f.next&&(f.steiner=!0),C.push(xt(f));for(C.sort(Y),c=0;c<C.length;c++)a=J(a=d(C[c],a),a.next);return a}(n,i,X,a)),n.length>80*a){l=p=n[0],c=f=n[1];for(var U=a;U<nt;U+=a)(C=n[U])<l&&(l=C),(Z=n[U+1])<c&&(c=Z),C>p&&(p=C),Z>f&&(f=Z);k=0!==(k=Math.max(p-l,f-c))?1/k:0}return z(X,L,a,l,c,k),L}function ct(n,i,a,l,c){var p,f;if(c===It(n,i,a,l)>0)for(p=i;p<a;p+=l)f=Mt(p,n[p],n[p+1],f);else for(p=a-l;p>=i;p-=l)f=Mt(p,n[p],n[p+1],f);if(f&&At(f,f.next)){var C=f.next;mt(f),f=C}return f}function J(n,i){if(!n)return n;i||(i=n);var a,l=n;do{if(a=!1,l.steiner||!At(l,l.next)&&0!==N(l.prev,l,l.next))l=l.next;else{var c=l.prev;if(mt(l),(l=i=c)===l.next)break;a=!0}}while(a||l!==i);return i}function z(n,i,a,l,c,p,f){if(n){!f&&p&&W(n,l,c,p);for(var C,Z,k=n;n.prev!==n.next;)if(C=n.prev,Z=n.next,p?$(n,l,c,p):I(n))i.push(C.i/a),i.push(n.i/a),i.push(Z.i/a),mt(n),n=Z.next,k=Z.next;else if((n=Z)===k){f?1===f?z(n=P(J(n),i,a),i,a,l,c,p,2):2===f&&B(n,i,a,l,c,p):z(J(n),i,a,l,c,p,1);break}}}function I(n){var i=n.prev,a=n,l=n.next;if(N(i,a,l)>=0)return!1;for(var c=n.next.next;c!==n.prev;){if(ft(i.x,i.y,a.x,a.y,l.x,l.y,c.x,c.y)&&N(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function $(n,i,a,l){var c=n.prev,p=n,f=n.next;if(N(c,p,f)>=0)return!1;for(var k=c.x>p.x?c.x>f.x?c.x:f.x:p.x>f.x?p.x:f.x,ut=c.y>p.y?c.y>f.y?c.y:f.y:p.y>f.y?p.y:f.y,nt=H(c.x<p.x?c.x<f.x?c.x:f.x:p.x<f.x?p.x:f.x,c.y<p.y?c.y<f.y?c.y:f.y:p.y<f.y?p.y:f.y,i,a,l),X=H(k,ut,i,a,l),L=n.prevZ,U=n.nextZ;L&&L.z>=nt&&U&&U.z<=X;){if(L!==n.prev&&L!==n.next&&ft(c.x,c.y,p.x,p.y,f.x,f.y,L.x,L.y)&&N(L.prev,L,L.next)>=0||(L=L.prevZ,U!==n.prev&&U!==n.next&&ft(c.x,c.y,p.x,p.y,f.x,f.y,U.x,U.y)&&N(U.prev,U,U.next)>=0))return!1;U=U.nextZ}for(;L&&L.z>=nt;){if(L!==n.prev&&L!==n.next&&ft(c.x,c.y,p.x,p.y,f.x,f.y,L.x,L.y)&&N(L.prev,L,L.next)>=0)return!1;L=L.prevZ}for(;U&&U.z<=X;){if(U!==n.prev&&U!==n.next&&ft(c.x,c.y,p.x,p.y,f.x,f.y,U.x,U.y)&&N(U.prev,U,U.next)>=0)return!1;U=U.nextZ}return!0}function P(n,i,a){var l=n;do{var c=l.prev,p=l.next.next;!At(c,p)&&Wt(c,l,l.next,p)&&dt(c,p)&&dt(p,c)&&(i.push(c.i/a),i.push(l.i/a),i.push(p.i/a),mt(l),mt(l.next),l=n=p),l=l.next}while(l!==n);return J(l)}function B(n,i,a,l,c,p){var f=n;do{for(var C=f.next.next;C!==f.prev;){if(f.i!==C.i&&_t(f,C)){var Z=lt(f,C);return f=J(f,f.next),Z=J(Z,Z.next),z(f,i,a,l,c,p),void z(Z,i,a,l,c,p)}C=C.next}f=f.next}while(f!==n)}function Y(n,i){return n.x-i.x}function v(n){if(n.next.prev===n)return n;let i=n;for(;;){const a=i.next;if(a.prev===i||a===i||a===n)break;i=a}return i}function d(n,i){var a=function x(n,i){var a,l=i,c=n.x,p=n.y,f=-1/0;do{if(p<=l.y&&p>=l.next.y&&l.next.y!==l.y){var C=l.x+(p-l.y)*(l.next.x-l.x)/(l.next.y-l.y);if(C<=c&&C>f){if(f=C,C===c){if(p===l.y)return l;if(p===l.next.y)return l.next}a=l.x<l.next.x?l:l.next}}l=l.next}while(l!==i);if(!a)return null;if(c===f)return a;var Z,k=a,ut=a.x,nt=a.y,X=1/0;l=a;do{c>=l.x&&l.x>=ut&&c!==l.x&&ft(p<nt?c:f,p,ut,nt,p<nt?f:c,p,l.x,l.y)&&(Z=Math.abs(p-l.y)/(c-l.x),dt(l,n)&&(Z<X||Z===X&&(l.x>a.x||l.x===a.x&&j(a,l)))&&(a=l,X=Z)),l=l.next}while(l!==k);return a}(n,i);if(!a)return i;var l=lt(a,n),c=J(a,a.next);let p=v(l);return J(p,p.next),c=v(c),v(i===a?c:i)}function j(n,i){return N(n.prev,n,i.prev)<0&&N(i.next,n,n.next)<0}function W(n,i,a,l){var c=n;do{if(null===c.z&&(c.z=H(c.x,c.y,i,a,l)),c.prev.next!==c||c.next.prev!==c)return c.prev.next=c,c.next.prev=c,W(n,i,a,l);c.prevZ=c.prev,c.nextZ=c.next,c=c.next}while(c!==n);c.prevZ.nextZ=null,c.prevZ=null,function tt(n){var i,a,l,c,p,f,C,Z,k=1;do{for(a=n,n=null,p=null,f=0;a;){for(f++,l=a,C=0,i=0;i<k&&(C++,l=l.nextZ);i++);for(Z=k;C>0||Z>0&&l;)0!==C&&(0===Z||!l||a.z<=l.z)?(c=a,a=a.nextZ,C--):(c=l,l=l.nextZ,Z--),p?p.nextZ=c:n=c,c.prevZ=p,p=c;a=l}p.nextZ=null,k*=2}while(f>1)}(c)}function H(n,i,a,l,c){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-a)*c)|n<<8))|n<<4))|n<<2))|n<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-l)*c)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function xt(n){var i=n,a=n;do{(i.x<a.x||i.x===a.x&&i.y<a.y)&&(a=i),i=i.next}while(i!==n);return a}function ft(n,i,a,l,c,p,f,C){return(c-f)*(i-C)-(n-f)*(p-C)>=0&&(n-f)*(l-C)-(a-f)*(i-C)>=0&&(a-f)*(p-C)-(c-f)*(l-C)>=0}function _t(n,i){return n.next.i!==i.i&&n.prev.i!==i.i&&!function Nt(n,i){var a=n;do{if(a.i!==n.i&&a.next.i!==n.i&&a.i!==i.i&&a.next.i!==i.i&&Wt(a,a.next,n,i))return!0;a=a.next}while(a!==n);return!1}(n,i)&&(dt(n,i)&&dt(i,n)&&function $t(n,i){var a=n,l=!1,c=(n.x+i.x)/2,p=(n.y+i.y)/2;do{a.y>p!=a.next.y>p&&a.next.y!==a.y&&c<(a.next.x-a.x)*(p-a.y)/(a.next.y-a.y)+a.x&&(l=!l),a=a.next}while(a!==n);return l}(n,i)&&(N(n.prev,n,i.prev)||N(n,i.prev,i))||At(n,i)&&N(n.prev,n,n.next)>0&&N(i.prev,i,i.next)>0)}function N(n,i,a){return(i.y-n.y)*(a.x-i.x)-(i.x-n.x)*(a.y-i.y)}function At(n,i){return n.x===i.x&&n.y===i.y}function Wt(n,i,a,l){var c=Ot(N(n,i,a)),p=Ot(N(n,i,l)),f=Ot(N(a,l,n)),C=Ot(N(a,l,i));return c!==p&&f!==C||!(0!==c||!Et(n,a,i))||!(0!==p||!Et(n,l,i))||!(0!==f||!Et(a,n,l))||!(0!==C||!Et(a,i,l))}function Et(n,i,a){return i.x<=Math.max(n.x,a.x)&&i.x>=Math.min(n.x,a.x)&&i.y<=Math.max(n.y,a.y)&&i.y>=Math.min(n.y,a.y)}function Ot(n){return n>0?1:n<0?-1:0}function dt(n,i){return N(n.prev,n,n.next)<0?N(n,i,n.next)>=0&&N(n,n.prev,i)>=0:N(n,i,n.prev)<0||N(n,n.next,i)<0}function lt(n,i){var a=new Ct(n.i,n.x,n.y),l=new Ct(i.i,i.x,i.y),c=n.next,p=i.prev;return n.next=i,i.prev=n,a.next=c,c.prev=a,l.next=a,a.prev=l,p.next=l,l.prev=p,l}function Mt(n,i,a,l){var c=new Ct(n,i,a);return l?(c.next=l.next,c.prev=l,l.next.prev=c,l.next=c):(c.prev=c,c.next=c),c}function mt(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Ct(n,i,a){this.i=n,this.x=i,this.y=a,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function It(n,i,a,l){for(var c=0,p=i,f=a-l;p<a;p+=l)c+=(n[f]-n[p])*(n[p+1]+n[f+1]),f=p;return c}return G.deviation=function(n,i,a,l){var c=i&&i.length,f=Math.abs(It(n,0,c?i[0]*a:n.length,a));if(c)for(var C=0,Z=i.length;C<Z;C++)f-=Math.abs(It(n,i[C]*a,C<Z-1?i[C+1]*a:n.length,a));var nt=0;for(C=0;C<l.length;C+=3){var X=l[C]*a,L=l[C+1]*a,U=l[C+2]*a;nt+=Math.abs((n[X]-n[U])*(n[L+1]-n[X+1])-(n[X]-n[L])*(n[U+1]-n[X+1]))}return 0===f&&0===nt?0:Math.abs((nt-f)/f)},G.flatten=function(n){for(var i=n[0][0].length,a={vertices:[],holes:[],dimensions:i},l=0,c=0;c<n.length;c++){for(var p=0;p<n[c].length;p++)for(var f=0;f<i;f++)a.vertices.push(n[c][p][f]);c>0&&a.holes.push(l+=n[c-1].length)}return a},G}())&&(O.exports=F);const b=R.exports},61751:(it,K,u)=>{u.d(K,{Z:()=>Y});var P,O=u(17626),_=u(86162),F=u(58817),R=u(63290),b=u(77712),G=u(66656),ct=u(76898),J=u(90912),z=u(45348),I=u(27530),$=u(92529);const B=R.Z.getLogger("esri.geometry.support.MeshComponent");let T=P=class extends _.wq{constructor(v){super(v),this.faces=null,this.material=null,this.shading="source",this.trustSourceNormals=!1}static from(v){return(0,J.TJ)(P,v)}castFaces(v){return(0,$.XQ)(v,Uint32Array,[Uint16Array],{loggerTag:".faces=",stride:3},B)}castMaterial(v){return(0,J.TJ)(v&&"object"==typeof v&&("metallic"in v||"roughness"in v||"metallicRoughnessTexture"in v)?I.Z:z.Z,v)}clone(){return new P({faces:(0,F.d9)(this.faces),shading:this.shading,material:(0,F.d9)(this.material),trustSourceNormals:this.trustSourceNormals})}cloneWithDeduplication(v,d){const x={faces:(0,F.d9)(this.faces),shading:this.shading,material:this.material?this.material.cloneWithDeduplication(v,d):null,trustSourceNormals:this.trustSourceNormals};return new P(x)}};(0,O._)([(0,b.Cb)({json:{write:!0}})],T.prototype,"faces",void 0),(0,O._)([(0,G.p)("faces")],T.prototype,"castFaces",null),(0,O._)([(0,b.Cb)({type:z.Z,json:{write:!0}})],T.prototype,"material",void 0),(0,O._)([(0,G.p)("material")],T.prototype,"castMaterial",null),(0,O._)([(0,b.Cb)({type:String,json:{write:!0}})],T.prototype,"shading",void 0),(0,O._)([(0,b.Cb)({type:Boolean})],T.prototype,"trustSourceNormals",void 0),T=P=(0,O._)([(0,ct.j)("esri.geometry.support.MeshComponent")],T);const Y=T},45348:(it,K,u)=>{u.d(K,{Z:()=>B});var $,O=u(17626),_=u(91558),F=u(86162),R=u(62208),b=u(77712),z=(u(85931),u(8314),u(90912),u(76898)),I=u(1607);let P=$=class extends F.wq{constructor(T){super(T),this.color=null,this.colorTexture=null,this.normalTexture=null,this.alphaMode="auto",this.alphaCutoff=.5,this.doubleSided=!0}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(T,Y){const v=(0,R.pC)(T)?T.get(this):null;if(v)return v;const d=new $(this.clonePropertiesWithDeduplication(Y));return(0,R.pC)(T)&&T.set(this,d),d}clonePropertiesWithDeduplication(T){return{color:(0,R.pC)(this.color)?this.color.clone():null,colorTexture:(0,R.pC)(this.colorTexture)?this.colorTexture.cloneWithDeduplication(T):null,normalTexture:(0,R.pC)(this.normalTexture)?this.normalTexture.cloneWithDeduplication(T):null,alphaMode:this.alphaMode,alphaCutoff:this.alphaCutoff,doubleSided:this.doubleSided}}};(0,O._)([(0,b.Cb)({type:_.Z,json:{write:!0}})],P.prototype,"color",void 0),(0,O._)([(0,b.Cb)({type:I.Z,json:{write:!0}})],P.prototype,"colorTexture",void 0),(0,O._)([(0,b.Cb)({type:I.Z,json:{write:!0}})],P.prototype,"normalTexture",void 0),(0,O._)([(0,b.Cb)({nonNullable:!0,json:{write:!0}})],P.prototype,"alphaMode",void 0),(0,O._)([(0,b.Cb)({nonNullable:!0,json:{write:!0}})],P.prototype,"alphaCutoff",void 0),(0,O._)([(0,b.Cb)({nonNullable:!0,json:{write:!0}})],P.prototype,"doubleSided",void 0),P=$=(0,O._)([(0,z.j)("esri.geometry.support.MeshMaterial")],P);const B=P},27530:(it,K,u)=>{u.d(K,{Z:()=>B});var $,O=u(17626),_=u(91558),F=u(62208),R=u(77712),J=(u(85931),u(8314),u(90912),u(76898)),z=u(45348),I=u(1607);let P=$=class extends z.Z{constructor(T){super(T),this.emissiveColor=null,this.emissiveTexture=null,this.occlusionTexture=null,this.metallic=1,this.roughness=1,this.metallicRoughnessTexture=null}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(T,Y){const v=(0,F.pC)(T)?T.get(this):null;if(v)return v;const d=new $(this.clonePropertiesWithDeduplication(Y));return(0,F.pC)(T)&&T.set(this,d),d}clonePropertiesWithDeduplication(T){return zt(Kt({},super.clonePropertiesWithDeduplication(T)),{emissiveColor:(0,F.pC)(this.emissiveColor)?this.emissiveColor.clone():null,emissiveTexture:(0,F.pC)(this.emissiveTexture)?this.emissiveTexture.cloneWithDeduplication(T):null,occlusionTexture:(0,F.pC)(this.occlusionTexture)?this.occlusionTexture.cloneWithDeduplication(T):null,metallic:this.metallic,roughness:this.roughness,metallicRoughnessTexture:(0,F.pC)(this.metallicRoughnessTexture)?this.metallicRoughnessTexture.cloneWithDeduplication(T):null})}};(0,O._)([(0,R.Cb)({type:_.Z,json:{write:!0}})],P.prototype,"emissiveColor",void 0),(0,O._)([(0,R.Cb)({type:I.Z,json:{write:!0}})],P.prototype,"emissiveTexture",void 0),(0,O._)([(0,R.Cb)({type:I.Z,json:{write:!0}})],P.prototype,"occlusionTexture",void 0),(0,O._)([(0,R.Cb)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],P.prototype,"metallic",void 0),(0,O._)([(0,R.Cb)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],P.prototype,"roughness",void 0),(0,O._)([(0,R.Cb)({type:I.Z,json:{write:!0}})],P.prototype,"metallicRoughnessTexture",void 0),P=$=(0,O._)([(0,J.j)("esri.geometry.support.MeshMaterialMetallicRoughness")],P);const B=P},1607:(it,K,u)=>{u.d(K,{Z:()=>v});var P,O=u(17626),F=(u(8314),u(86162)),R=u(77712),G=(u(85931),u(90912)),ct=u(68653),J=u(76898),z=u(99433),I=u(29840),$=u(18605);const B=new WeakMap;let T=0,Y=P=class extends F.wq{constructor(d){super(d),this.wrap="repeat"}get url(){return this._get("url")||null}set url(d){this._set("url",d),d&&this._set("data",null)}get data(){return this._get("data")||null}set data(d){this._set("data",d),d&&this._set("url",null)}writeData(d,x,j,W){if(d instanceof HTMLImageElement){const tt={type:"image-element",src:(0,I.t)(d.src,W),crossOrigin:d.crossOrigin};x[j]=tt}else if(d instanceof HTMLCanvasElement){const tt=d.getContext("2d").getImageData(0,0,d.width,d.height),H={type:"canvas-element",imageData:this.encodeImageData(tt)};x[j]=H}else if(d instanceof HTMLVideoElement){const tt={type:"video-element",src:(0,I.t)(d.src,W),autoplay:d.autoplay,loop:d.loop,muted:d.muted,crossOrigin:d.crossOrigin,preload:d.preload};x[j]=tt}else{const tt={type:"image-data",imageData:this.encodeImageData(d)};x[j]=tt}}readData(d){switch(d.type){case"image-element":{const x=new Image;return x.src=d.src,x.crossOrigin=d.crossOrigin,x}case"canvas-element":{const x=this.decodeImageData(d.imageData),j=document.createElement("canvas");return j.width=x.width,j.height=x.height,j.getContext("2d").putImageData(x,0,0),j}case"image-data":return this.decodeImageData(d.imageData);case"video-element":{const x=document.createElement("video");return x.src=d.src,x.crossOrigin=d.crossOrigin,x.autoplay=d.autoplay,x.loop=d.loop,x.muted=d.muted,x.preload=d.preload,x}default:return}}get transparent(){const d=this.data,x=this.url;if(d instanceof HTMLCanvasElement)return this.imageDataContainsTransparent(d.getContext("2d").getImageData(0,0,d.width,d.height));if(d instanceof ImageData)return this.imageDataContainsTransparent(d);if(x){const j=x.substr(x.length-4,4).toLowerCase(),W=x.substr(0,15).toLocaleLowerCase();if(".png"===j||"data:image/png;"===W)return!0}return!1}set transparent(d){null!=d?this._override("transparent",d):this._clearOverride("transparent")}get contentHash(){const d="string"==typeof this.wrap?this.wrap:"object"==typeof this.wrap?`${this.wrap.horizontal}/${this.wrap.vertical}`:"",x=(j="")=>`d:${j},t:${this.transparent},w:${d}`;return null!=this.url?x(this.url):null!=this.data?this.data instanceof HTMLImageElement||this.data instanceof HTMLVideoElement?x(this.data.src):(B.has(this.data)||B.set(this.data,++T),x(B.get(this.data))):x()}clone(){const d={url:this.url,data:this.data,wrap:this.cloneWrap()};return new P(d)}cloneWithDeduplication(d){const x=d.get(this);if(x)return x;const j=this.clone();return d.set(this,j),j}cloneWrap(){return"string"==typeof this.wrap?this.wrap:{horizontal:this.wrap.horizontal,vertical:this.wrap.vertical}}encodeImageData(d){let x="";for(let j=0;j<d.data.length;j++)x+=String.fromCharCode(d.data[j]);return{data:btoa(x),width:d.width,height:d.height}}decodeImageData(d){const x=atob(d.data),j=new Uint8ClampedArray(x.length);for(let W=0;W<x.length;W++)j[W]=x.charCodeAt(W);return(0,$.Jl)(j,d.width,d.height)}imageDataContainsTransparent(d){for(let x=3;x<d.data.length;x+=4)if(255!==d.data[x])return!0;return!1}static from(d){return"string"==typeof d?new P({url:d}):d instanceof HTMLImageElement||d instanceof HTMLCanvasElement||d instanceof ImageData||d instanceof HTMLVideoElement?new P({data:d}):(0,G.TJ)(P,d)}};(0,O._)([(0,R.Cb)({type:String,json:{write:I.w}})],Y.prototype,"url",null),(0,O._)([(0,R.Cb)({json:{write:{overridePolicy(){return{enabled:!this.url}}}}}),(0,R.Cb)()],Y.prototype,"data",null),(0,O._)([(0,z.c)("data")],Y.prototype,"writeData",null),(0,O._)([(0,ct.r)("data")],Y.prototype,"readData",null),(0,O._)([(0,R.Cb)({type:Boolean,json:{write:{overridePolicy(){return{enabled:this._isOverridden("transparent")}}}}})],Y.prototype,"transparent",null),(0,O._)([(0,R.Cb)({json:{write:!0}})],Y.prototype,"wrap",void 0),(0,O._)([(0,R.Cb)({readOnly:!0})],Y.prototype,"contentHash",null),Y=P=(0,O._)([(0,J.j)("esri.geometry.support.MeshTexture")],Y);const v=Y},92529:(it,K,u)=>{u.d(K,{QL:()=>I,XQ:()=>P,ZP:()=>Y});var J,O=u(17626),_=u(86162),F=u(58817),R=u(63290),b=u(77712),G=u(66656),ct=u(76898);const z=R.Z.getLogger("esri.geometry.support.MeshVertexAttributes");let I=J=class extends _.wq{constructor(v){super(v),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null}castColor(v){return P(v,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},z)}castPosition(v){return v&&v instanceof Float32Array&&z.warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array"),P(v,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},z)}castUv(v){return P(v,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},z)}castNormal(v){return P(v,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},z)}castTangent(v){return P(v,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},z)}clone(){const v={position:(0,F.d9)(this.position),uv:(0,F.d9)(this.uv),normal:(0,F.d9)(this.normal),tangent:(0,F.d9)(this.tangent),color:(0,F.d9)(this.color)};return new J(v)}clonePositional(){const v={position:(0,F.d9)(this.position),normal:(0,F.d9)(this.normal),tangent:(0,F.d9)(this.tangent),uv:this.uv,color:this.color};return new J(v)}};function $(v,d,x,j){const{loggerTag:W,stride:tt}=d;return v.length%tt!=0?(j.error(W,`Invalid array length, expected a multiple of ${tt}`),new x([])):v}function P(v,d,x,j,W){if(!v)return v;if(v instanceof d)return $(v,j,d,W);for(const tt of x)if(v instanceof tt)return $(new d(v),j,d,W);if(Array.isArray(v))return $(new d(v),j,d,W);{const tt=x.map(H=>`'${H.name}'`);return W.error(`Failed to set property, expected one of ${tt}, but got ${v.constructor.name}`),new d([])}}function B(v,d,x){d[x]=function T(v){const d=new Array(v.length);for(let x=0;x<v.length;x++)d[x]=v[x];return d}(v)}(0,O._)([(0,b.Cb)({json:{write:B}})],I.prototype,"color",void 0),(0,O._)([(0,G.p)("color")],I.prototype,"castColor",null),(0,O._)([(0,b.Cb)({nonNullable:!0,json:{write:B}})],I.prototype,"position",void 0),(0,O._)([(0,G.p)("position")],I.prototype,"castPosition",null),(0,O._)([(0,b.Cb)({json:{write:B}})],I.prototype,"uv",void 0),(0,O._)([(0,G.p)("uv")],I.prototype,"castUv",null),(0,O._)([(0,b.Cb)({json:{write:B}})],I.prototype,"normal",void 0),(0,O._)([(0,G.p)("normal")],I.prototype,"castNormal",null),(0,O._)([(0,b.Cb)({json:{write:B}})],I.prototype,"tangent",void 0),(0,O._)([(0,G.p)("tangent")],I.prototype,"castTangent",null),I=J=(0,O._)([(0,ct.j)("esri.geometry.support.MeshVertexAttributes")],I);const Y=I},10582:(it,K,u)=>{u.r(K),u.d(K,{meshFeatureSetFromJSON:()=>Be});var O=u(88879),_=u(62208),F=u(2004),R=u(15861),b=u(17626),G=u(26584),ct=u(80542),J=u(47996),z=u(63290),I=u(60330),$=u(10699),P=u(32917),B=u(77712),d=(u(85931),u(8314),u(90912),u(76898)),x=u(28093),j=u(21674),W=u(49672),tt=u(37118),H=u(89586),xt=u(61751),ft=u(99746),_t=u(92529),N=u(11915),At=u(25748),Wt=u(13757);function dt(t,r,e,o,s,h,g){s*=3;for(let m=0;m<h;++m){const M=t[r];o[s++]=M[0],o[s++]=M[1],o[s++]=g?M[2]:0,r+=e}return s/3}function $t(t){return!(0,At.bu)(t,!1,!1)}var lt=u(56741),Mt=u(92545),mt=u(60853);const Ct=z.Z.getLogger("esri.geometry.support.meshUtils.centerAt");const c=(0,x.c)(),p=(0,x.c)();var f=u(21726);function Z(){return(Z=(0,R.Z)(function*(t,r,e){const{loadGLTFMesh:o}=yield(0,$.Hl)(Promise.all([u.e(8990),u.e(9185)]).then(u.bind(u,29185)),e),s=yield ut(r,e),h=o(new W.Z({x:0,y:0,z:0,spatialReference:t.spatialReference}),s.url,{resolveFile:k(s),useTransform:!0,signal:(0,_.pC)(e)?e.signal:null});h.then(()=>s.dispose(),()=>s.dispose());const{vertexAttributes:g,components:m}=yield h;t.vertexAttributes=g,t.components=m})).apply(this,arguments)}function k(t){const r=(0,f.Yd)(t.url);return e=>{var o;const s=(0,f.PF)(e,r,r),h=s?s.replace(/^ *\.\//,""):null;return null!=(o=t.files.get(h))?o:e}}function ut(t,r){return nt.apply(this,arguments)}function nt(){return(nt=(0,R.Z)(function*(t,r){return t instanceof Blob?Dt.fromBlob(t):"string"==typeof t?new Dt(t):Array.isArray(t)?X(t,r):U(t,r)})).apply(this,arguments)}function X(t,r){return L.apply(this,arguments)}function L(){return L=(0,R.Z)(function*(t,r){const e=new Map;let o=null;const s=yield(0,$.WW)(t.map(function(){var g=(0,R.Z)(function*(m){return{name:m.name,source:yield ut(m instanceof Blob?m:m.source,r)}});return function(m){return g.apply(this,arguments)}}())),h=[];for(const g of s)g&&((0,$.Hc)(r)?g.source.dispose():h.push(g));(0,$.k_)(r);for(const{name:g,source:m}of h)((0,_.Wi)(o)||/\.(gltf|glb)/i.test(g))&&(o=m.url),e.set(g,m.url),m.files&&m.files.forEach((M,y)=>e.set(y,M));if((0,_.Wi)(o))throw new G.Z("mesh-load-external:missing-files","Missing files to load external mesh source");return new Dt(o,()=>h.forEach(({source:g})=>g.dispose()),e)}),L.apply(this,arguments)}function U(t,r){return Ht.apply(this,arguments)}function Ht(){return Ht=(0,R.Z)(function*(t,r){const{default:e}=yield(0,$.Hl)(Promise.resolve().then(u.bind(u,84792)),r),o="string"==typeof t.multipart[0]?yield Promise.all(t.multipart.map(function(){var s=(0,R.Z)(function*(h){return(yield e(h,{responseType:"array-buffer"})).data});return function(h){return s.apply(this,arguments)}}())):t.multipart;return Dt.fromBlob(new Blob(o))}),Ht.apply(this,arguments)}class Dt{constructor(r,e=(()=>{}),o=new Map){this.url=r,this.dispose=e,this.files=o}static fromBlob(r){const e=URL.createObjectURL(r);return new Dt(e,()=>URL.revokeObjectURL(e))}}var Gt=u(30217),Jt=u(550),Xt=u(43703),rt=u(84161),Vt=u(12080),et=u(65231);const de=z.Z.getLogger("esri.geometry.support.meshUtils.offset");function Qt(t,r){if(t)for(let e=0;e<t.length;e+=3)for(let o=0;o<3;o++)t[e+o]+=r[o]}const Me=(0,x.c)(),kt=(0,Xt.c)(),qt=(0,Jt.c)(),Ft={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};function St(t,r,e){(function Pe(t){for(let r=0;r<t.position.length;r+=3)t.position[r+2]+=.5})(t),function we(t,r){if(null==r)return;const e="number"==typeof r?[r,r,r]:[null!=r.width?r.width:1,null!=r.depth?r.depth:1,null!=r.height?r.height:1];vt[0]=e[0],vt[4]=e[1],vt[8]=e[2];for(let o=0;o<t.position.length;o+=3){for(let s=0;s<3;s++)Q[s]=t.position[o+s];(0,rt.t)(Q,Q,vt);for(let s=0;s<3;s++)t.position[o+s]=Q[s]}if(e[0]!==e[1]||e[1]!==e[2]){vt[0]=1/e[0],vt[4]=1/e[1],vt[8]=1/e[2];for(let o=0;o<t.normal.length;o+=3){for(let s=0;s<3;s++)Q[s]=t.normal[o+s];(0,rt.t)(Q,Q,vt),(0,rt.n)(Q,Q);for(let s=0;s<3;s++)t.normal[o+s]=Q[s]}}}(t,e&&e.size);const{vertexAttributes:o,transform:s}=(0,mt.w1)(t,r,e);return{vertexAttributes:new _t.ZP(zt(Kt({},o),{uv:t.uv})),transform:s,components:[new xt.Z({faces:t.faces,material:e&&e.material||null})],spatialReference:r.spatialReference}}const Te={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},Re={south:0,east:1,north:2,west:3,up:4,down:5},Q=(0,x.c)(),vt=(0,Jt.c)();var te=u(28347);const ee=z.Z.getLogger("esri.geometry.support.meshUtils.rotate");function Rt(t,r,e,o=x.Z){if(!(0,_.Wi)(t)){(0,te.i)(Zt),(0,te.e)(Zt,Zt,(0,H.WH)(r),(0,H.ZZ)(r));for(let s=0;s<t.length;s+=e){for(let h=0;h<3;h++)bt[h]=t[s+h]-o[h];(0,rt.m)(bt,bt,Zt);for(let h=0;h<3;h++)t[s+h]=bt[h]+o[h]}}}const bt=(0,x.c)(),ne=(0,x.c)(),re=(0,H.Ue)(),Zt=(0,Xt.c)(),oe=(0,Jt.c)(),se=(0,x.c)(),ie=z.Z.getLogger("esri.geometry.support.meshUtils.scale");function ae(t,r,e=x.Z){if(t)for(let o=0;o<t.length;o+=3){for(let s=0;s<3;s++)jt[s]=t[o+s]-e[s];(0,rt.a)(jt,jt,r);for(let s=0;s<3;s++)t[o+s]=jt[s]+e[s]}}const jt=(0,x.c)(),le=(0,x.c)(),ce=(0,x.c)();var gt;const pt=z.Z.getLogger("esri.geometry.Mesh");let at=gt=class extends((0,ct.p)(J.Z.LoadableMixin((0,I.v)(j.Z)))){constructor(t){super(t),this.components=null,this.transform=null,this.external=null,this.hasZ=!0,this.hasM=!1,this.vertexAttributes=new _t.QL,this.type="mesh"}initialize(){((0,_.Wi)(this.external)||this.vertexAttributes.position.length)&&(this.loadStatus="loaded"),this.when(()=>{this.handles.add((0,P.Ym)(()=>{var t;return{vertexAttributes:this.vertexAttributes,components:null==(t=this.components)?void 0:t.map(r=>r.clone()),transform:(0,_.pC)(this.transform)?this.transform.clone():null}},()=>this._set("external",null),{once:!0,sync:!0}))})}get hasExtent(){return!this.loaded&&(0,_.pC)(this.external)&&(0,_.pC)(this.external.extent)||this.loaded&&this.vertexAttributes.position.length>0&&(!this.components||this.components.length>0)}get boundingInfo(){const t=this.vertexAttributes.position,r=this.spatialReference;if(0===t.length||this.components&&0===this.components.length)return{extent:new F.Z({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:r}),center:new W.Z({x:0,y:0,z:0,spatialReference:r})};const e=(0,_.pC)(this.transform)?this.transform.project(t,r):t;let o=1/0,s=1/0,h=1/0,g=-1/0,m=-1/0,M=-1/0,y=0,D=0,w=0;const A=e.length,E=1/(A/3);let S=0;for(;S<A;){const ht=e[S++],q=e[S++],ot=e[S++];o=Math.min(o,ht),s=Math.min(s,q),h=Math.min(h,ot),g=Math.max(g,ht),m=Math.max(m,q),M=Math.max(M,ot),y+=E*ht,D+=E*q,w+=E*ot}return{extent:new F.Z({xmin:o,ymin:s,zmin:h,xmax:g,ymax:m,zmax:M,spatialReference:r}),center:new W.Z({x:y,y:D,z:w,spatialReference:r})}}get anchor(){if((0,_.pC)(this.transform))return this.transform.getOriginPoint(this.spatialReference);const t=this.boundingInfo;return new W.Z({x:t.center.x,y:t.center.y,z:t.extent.zmin,spatialReference:this.spatialReference})}get origin(){return(0,_.pC)(this.transform)?this.transform.getOriginPoint(this.spatialReference):this.boundingInfo.center}get extent(){return!this.loaded&&(0,_.pC)(this.external)&&(0,_.pC)(this.external.extent)?this.external.extent.clone():this.boundingInfo.extent}addComponent(t){this.loaded?(this.components||(this.components=[]),this.components.push(xt.Z.from(t)),this.notifyChange("components")):pt.error("addComponent()","Mesh must be loaded before applying operations")}removeComponent(t){if(this.loaded){if(this.components){const r=this.components.indexOf(t);if(-1!==r)return this.components.splice(r,1),void this.notifyChange("components")}pt.error("removeComponent()","Provided component is not part of the list of components")}else pt.error("removeComponent()","Mesh must be loaded before applying operations")}rotate(t,r,e,o){return(0,H.uT)(Yt.x,t,Lt),(0,H.uT)(Yt.y,r,ue),(0,H.uT)(Yt.z,e,pe),(0,H.qC)(Lt,ue,Lt),(0,H.qC)(Lt,pe,Lt),function be(t,r,e){if(!t.vertexAttributes||!t.vertexAttributes.position||0===r[3])return;const o=t.spatialReference;if((0,_.pC)(t.transform)){var s;null!=(null==e?void 0:e.geographic)&&e.geographic!==t.transform.geographic&&ee.warn(`Specifying the 'geographic' parameter (${e.geographic}) different from the Mesh transform setting (${t.transform.geographic}) is not supported`);const g=null!=(s=null==e?void 0:e.origin)?s:t.transform.getOriginPoint(o);!function Ze(t,r,e){const o=(0,rt.s)(bt,e.x,e.y,e.z),s=(0,rt.f)(bt,o,t.origin);t.applyLocalInverse(s,ne),t.rotation=(0,H.qC)(t.rotation,r,(0,H.Ue)()),t.applyLocalInverse(s,s),(0,rt.f)(s,s,ne),t.translation=(0,rt.b)((0,x.c)(),t.translation,s)}(t.transform,r,g)}else{var h;const g=null!=(h=null==e?void 0:e.origin)?h:t.origin;(0,Mt.h)(t.spatialReference,e)?function je(t,r,e){const o=t.spatialReference,s=(0,Vt.rS)(o),h=se;(0,lt.KC)(e,h,s)||(0,lt.KC)(t.origin,h,s);const g=t.vertexAttributes.position,m=t.vertexAttributes.normal,M=t.vertexAttributes.tangent,y=new Float64Array(g.length),D=(0,_.pC)(m)?new Float32Array(m.length):null,w=(0,_.pC)(M)?new Float32Array(M.length):null;(0,lt.Bm)(s,h,Zt,s),(0,Gt.f)(oe,Zt);const A=re;(0,rt.t)((0,H.ZZ)(re),(0,H.ZZ)(r),oe),A[3]=r[3],(0,et.XO)(g,o,y),(0,_.pC)(m)&&(0,et.Iz)(m,g,y,o,D),(0,_.pC)(M)&&(0,et.wi)(M,g,y,o,w),Rt(y,A,3,h),(0,et.To)(y,g,o),(0,_.pC)(m)&&(Rt(D,A,3),(0,et.Yk)(D,g,y,o,m)),(0,_.pC)(M)&&(Rt(w,A,4),(0,et.M2)(w,g,y,o,M)),t.vertexAttributesChanged()}(t,r,g):function Le(t,r,e){const o=se;if(!(0,lt.KC)(e,o,t.spatialReference)){const s=t.origin;o[0]=s.x,o[1]=s.y,o[2]=s.z,ee.error(`Failed to project specified origin (wkid:${e.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}).`)}Rt(t.vertexAttributes.position,r,3,o),Rt(t.vertexAttributes.normal,r,3),Rt(t.vertexAttributes.tangent,r,4),t.vertexAttributesChanged()}(t,r,g)}}(this,Lt,o),this}offset(t,r,e,o){return this.loaded?(Bt[0]=t,Bt[1]=r,Bt[2]=e,function me(t,r,e){t.vertexAttributes&&t.vertexAttributes.position&&((0,_.pC)(t.transform)?(null!=(null==e?void 0:e.geographic)&&e.geographic!==t.transform.geographic&&de.warn(`Specifying the 'geographic' parameter (${e.geographic}) different from the Mesh transform setting (${t.transform.geographic}) is not supported`),function xe(t,r){const e=t.origin;t.origin=(0,rt.b)((0,x.c)(),e,r)}(t.transform,r)):(0,Mt.h)(t.spatialReference,e)?function ve(t,r){const e=t.spatialReference,o=t.vertexAttributes.position,s=t.vertexAttributes.normal,h=t.vertexAttributes.tangent,g=new Float64Array(o.length),m=(0,_.pC)(s)?new Float32Array(s.length):null,M=(0,_.pC)(h)?new Float32Array(h.length):null,y=t.extent.center,D=Me;(0,lt.Bm)(e,[y.x,y.y,y.z],kt,(0,Vt.rS)(e)),(0,Gt.f)(qt,kt),(0,rt.t)(D,r,qt),(0,et.XO)(o,e,g),(0,_.pC)(s)&&(0,et.Iz)(s,o,g,e,m),(0,_.pC)(h)&&(0,et.wi)(h,o,g,e,M),Qt(g,D),(0,et.To)(g,o,e),(0,_.pC)(s)&&(0,et.Yk)(m,o,g,e,s),(0,_.pC)(h)&&(0,et.M2)(M,o,g,e,h),t.vertexAttributesChanged()}(t,r):function ye(t,r){Qt(t.vertexAttributes.position,r),t.vertexAttributesChanged()}(t,r))}(this,Bt,o),this):(pt.error("offset()","Mesh must be loaded before applying operations"),this)}scale(t,r){return this.loaded?(function Ue(t,r,e){if(!t.vertexAttributes||!t.vertexAttributes.position)return;const o=t.spatialReference;if((0,_.pC)(t.transform)){var s;null!=(null==e?void 0:e.geographic)&&e.geographic!==t.transform.geographic&&ie.warn(`Specifying the 'geographic' parameter (${e.geographic}) different from the Mesh transform setting (${t.transform.geographic}) is not supported`);const h=null!=(s=null==e?void 0:e.origin)?s:t.transform.getOriginPoint(o);!function Ie(t,r,e){const o=(0,rt.s)(jt,e.x,e.y,e.z),s=(0,rt.f)(jt,o,t.origin);t.applyLocalInverse(s,le);const h=(0,rt.a)((0,x.c)(),t.scale,r);t.scale=h,t.applyLocalInverse(s,s),(0,rt.f)(s,s,le),t.translation=(0,rt.b)((0,x.c)(),t.translation,s)}(t.transform,r,h)}else{const h=(0,Mt.h)(t.spatialReference,e),g=e&&e.origin||t.origin;h?function Fe(t,r,e){const o=t.spatialReference,s=(0,Vt.rS)(o),h=ce;(0,lt.KC)(e,h,s)||(0,lt.KC)(t.origin,h,s);const g=t.vertexAttributes.position,m=t.vertexAttributes.normal,M=t.vertexAttributes.tangent,y=new Float64Array(g.length),D=(0,_.pC)(m)?new Float32Array(m.length):null,w=(0,_.pC)(M)?new Float32Array(M.length):null;(0,et.XO)(g,o,y),(0,_.pC)(m)&&(0,et.Iz)(m,g,y,o,D),(0,_.pC)(M)&&(0,et.wi)(M,g,y,o,w),ae(y,r,h),(0,et.To)(y,g,o),(0,_.pC)(m)&&(0,et.Yk)(D,g,y,o,m),(0,_.pC)(M)&&(0,et.M2)(w,g,y,o,M),t.vertexAttributesChanged()}(t,r,g):function We(t,r,e){const o=ce;if(!(0,lt.KC)(e,o,t.spatialReference)){const s=t.origin;o[0]=s.x,o[1]=s.y,o[2]=s.z,ie.error(`Failed to project specified origin (wkid:${e.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}).`)}ae(t.vertexAttributes.position,r,o),t.vertexAttributesChanged()}(t,r,g)}}(this,t,r),this):(pt.error("scale()","Mesh must be loaded before applying operations"),this)}centerAt(t,r){return this.loaded?(function It(t,r,e){var o;if(!t.vertexAttributes||!t.vertexAttributes.position)return;const s=null!=(o=null==e?void 0:e.origin)?o:t.origin;(0,_.pC)(t.transform)?(null!=(null==e?void 0:e.geographic)&&e.geographic!==t.transform.geographic&&Ct.warn(`Specifying the 'geographic' parameter (${e.geographic}) different from the Mesh transform setting (${t.transform.geographic}) is not supported`),function n(t,r,e){const g=t.origin;t.origin=[g[0]+(r.x-e.x),g[1]+(r.y-e.y),g[2]+(r.hasZ&&e.hasZ?r.z-e.z:0)]}(t.transform,r,s)):(0,Mt.h)(t.spatialReference,e)?function i(t,r,e){const o=(0,mt.FF)(t.vertexAttributes,e,{geographic:!0}),{position:s,normal:h,tangent:g}=(0,mt.iv)(o,r,{geographic:!0});t.vertexAttributes.position=s,t.vertexAttributes.normal=h,t.vertexAttributes.tangent=g,t.vertexAttributesChanged()}(t,r,s):function a(t,r,e){const o=p,s=c;if((0,lt.KC)(r,s,t.spatialReference)){if(!(0,lt.KC)(e,o,t.spatialReference)){const h=t.origin;o[0]=h.x,o[1]=h.y,o[2]=h.z,Ct.error(`Failed to project specified origin (wkid:${e.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}).`)}(function l(t,r,e){if(t)for(let o=0;o<t.length;o+=3)for(let s=0;s<3;s++)t[o+s]+=r[s]-e[s]})(t.vertexAttributes.position,s,o),t.vertexAttributesChanged()}else Ct.error(`Failed to project centerAt location (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid})`)}(t,r,s)}(this,t,r),this):(pt.error("centerAt()","Mesh must be loaded before applying operations"),this)}load(t){return(0,_.pC)(this.external)&&this.addResolvingPromise(function C(t,r,e){return Z.apply(this,arguments)}(this,this.external.source,t)),Promise.resolve(this)}clone(){const t=this.components?new Map:null,r=this.components?new Map:null,e={components:this.components?this.components.map(o=>o.cloneWithDeduplication(t,r)):null,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes.clone(),transform:(0,_.pC)(this.transform)?this.transform.clone():null,external:(0,_.pC)(this.external)?{source:this.external.source,extent:(0,_.pC)(this.external.extent)?this.external.extent.clone():null}:null};return new gt(e)}vertexAttributesChanged(){this.notifyChange("vertexAttributes")}toBinaryGLTF(t){var r=this;return(0,R.Z)(function*(){const{toBinaryGLTF:e}=yield u.e(7627).then(u.bind(u,57627));return e(r,t)})()}static createBox(t,r){if(!(t instanceof W.Z))return pt.error(".createBox()","expected location to be a Point instance"),null;const e=new gt(St(function Ce(){const{faceDescriptions:t,faceVertexOffsets:r,uvScales:e}=Te,o=4*t.length,s=new Float64Array(3*o),h=new Float32Array(3*o),g=new Float32Array(2*o),m=new Uint32Array(2*t.length*3);let M=0,y=0,D=0,w=0;for(let A=0;A<t.length;A++){const E=t[A],S=M/3;for(const q of r)m[w++]=S+q;const ht=E.corners;for(let q=0;q<4;q++){const ot=ht[q];let V=0;g[D++]=.25*e[q][0]+E.uvOrigin[0],g[D++]=E.uvOrigin[1]-.25*e[q][1];for(let st=0;st<3;st++)0!==E.axis[st]?(s[M++]=.5*E.axis[st],h[y++]=E.axis[st]):(s[M++]=.5*ot[V++],h[y++]=0)}}return{position:s,normal:h,uv:g,faces:m}}(),t,r));return r&&r.imageFace&&"all"!==r.imageFace?function _e(t,r){const e=t.components[0],o=e.faces,s=Re[r],h=6*s,g=new Uint32Array(6),m=new Uint32Array(o.length-6);let M=0,y=0;for(let D=0;D<o.length;D++)D>=h&&D<h+6?g[M++]=o[D]:m[y++]=o[D];if((0,_.pC)(t.vertexAttributes.uv)){const D=new Float32Array(t.vertexAttributes.uv),w=4*s*2,A=[0,1,1,1,1,0,0,0];for(let E=0;E<A.length;E++)D[w+E]=A[E];t.vertexAttributes.uv=D}return t.components=[new xt.Z({faces:g,material:e.material}),new xt.Z({faces:m})],t}(e,r.imageFace):e}static createSphere(t,r){return t instanceof W.Z?new gt(St(function Ae(t=0){const r=Math.round(8*2**t),e=2*r,o=(r-1)*(e+1)+2*e,s=new Float64Array(3*o),h=new Float32Array(3*o),g=new Float32Array(2*o),m=new Uint32Array((r-1)*e*2*3);let M=0,y=0,D=0,w=0;for(let A=0;A<=r;A++){const E=A/r*Math.PI+.5*Math.PI,S=Math.cos(E),ht=Math.sin(E);Q[2]=ht;const q=0===A||A===r,ot=q?e-1:e;for(let V=0;V<=ot;V++){const st=V/ot*2*Math.PI;Q[0]=-Math.sin(st)*S,Q[1]=Math.cos(st)*S;for(let yt=0;yt<3;yt++)s[M]=.5*Q[yt],h[M]=Q[yt],++M;g[y++]=(V+(q?.5:0))/e,g[y++]=A/r,0!==A&&V!==e&&(A!==r&&(m[D++]=w,m[D++]=w+1,m[D++]=w-e),1!==A&&(m[D++]=w,m[D++]=w-e,m[D++]=w-e-1)),w++}}return{position:s,normal:h,uv:g,faces:m}}(r&&r.densificationFactor||0),t,r)):(pt.error(".createSphere()","expected location to be a Point instance"),null)}static createCylinder(t,r){return t instanceof W.Z?new gt(St(function Ee(t=0){const e=Math.round(16*2**t),o=4*(e+1)+2*e,s=new Float64Array(3*o),h=new Float32Array(3*o),g=new Float32Array(2*o),m=new Uint32Array(4*e*3);let M=0,y=0,D=0,w=0,A=0;for(let E=0;E<=5;E++){const S=0===E||5===E,ht=E<=1||E>=4,q=2===E||4===E,ot=S?e-1:e;for(let V=0;V<=ot;V++){const st=V/ot*2*Math.PI,yt=S?0:.5;Q[0]=yt*Math.sin(st),Q[1]=yt*-Math.cos(st),Q[2]=E<=2?.5:-.5;for(let Ut=0;Ut<3;Ut++)s[M++]=Q[Ut],h[y++]=ht?2===Ut?E<=1?1:-1:0:2===Ut?0:Q[Ut]/yt;g[D++]=(V+(S?.5:0))/e,g[D++]=E<=1?1*E/3:E<=3?1*(E-2)/3+1/3:1*(E-4)/3+2/3,q||0===E||V===e||(5!==E&&(m[w++]=A,m[w++]=A+1,m[w++]=A-e),1!==E&&(m[w++]=A,m[w++]=A-e,m[w++]=A-e-1)),A++}}return{position:s,normal:h,uv:g,faces:m}}(r&&r.densificationFactor||0),t,r)):(pt.error(".createCylinder()","expected location to be a Point instance"),null)}static createPlane(t,r){var e;if(!(t instanceof W.Z))return pt.error(".createPlane()","expected location to be a Point instance"),null;const o=null!=(e=null==r?void 0:r.facing)?e:"up",s=function Oe(t,r){const e="number"==typeof r?r:null!=r?r.width:1,o="number"==typeof r?r:null!=r?r.height:1;switch(t){case"up":case"down":return{width:e,depth:o};case"north":case"south":return{width:e,height:o};case"east":case"west":return{depth:e,height:o}}}(o,null==r?void 0:r.size);return new gt(St(function De(t){const r=Ft.facingAxisOrderSwap[t],e=Ft.position,o=Ft.normal,s=new Float64Array(e.length),h=new Float32Array(o.length);let g=0;for(let m=0;m<4;m++){const M=g;for(let y=0;y<3;y++){const D=r[y],w=Math.abs(D)-1,A=D>=0?1:-1;s[g]=e[M+w]*A,h[g]=o[M+w]*A,g++}}return{position:s,normal:h,uv:new Float32Array(Ft.uv),faces:new Uint32Array(Ft.faces)}}(o),t,zt(Kt({},r),{size:s})))}static createFromPolygon(t,r){if(!(t instanceof tt.Z))return pt.error(".createFromPolygon()","expected polygon to be a Polygon instance"),null;const e=function Et(t){const r=function Nt(t,r,e){const o=t.length,s=new Array(o),h=new Array(o),g=new Array(o);let m=0,M=0,y=0,D=0;for(let E=0;E<o;++E)D+=t[E].length;const w=new Float64Array(3*D);let A=0;for(let E=o-1;E>=0;E--){const S=t[E],ht=1===e&&$t(S);if(ht&&1!==o)s[m++]=S;else{let q=S.length;for(let V=0;V<m;++V)q+=s[V].length;const ot={index:A,pathLengths:new Array(m+1),count:q,holeIndices:new Array(m)};ot.pathLengths[0]=S.length,S.length>0&&(g[y++]={index:A,count:S.length}),A=ht?dt(S,S.length-1,-1,w,A,S.length,r):dt(S,0,1,w,A,S.length,r);for(let V=0;V<m;++V){const st=s[V];ot.holeIndices[V]=A,ot.pathLengths[V+1]=st.length,st.length>0&&(g[y++]={index:A,count:st.length}),A=dt(st,0,1,w,A,st.length,r)}m=0,ot.count>0&&(h[M++]=ot)}}for(let E=0;E<m;++E){const S=s[E];S.length>0&&(g[y++]={index:A,count:S.length}),A=dt(S,0,1,w,A,S.length,r)}return M<o&&(h.length=M),y<o&&(g.length=y),{position:w,polygons:h,outlines:g}}(t.rings,t.hasZ,1),e=[];let o=0,s=0;for(const m of r.polygons){const y=m.index,D=new Float64Array(r.position.buffer,3*y*r.position.BYTES_PER_ELEMENT,3*m.count),w=m.holeIndices.map(E=>E-y),A=new Uint32Array((0,N.e)(D,w,3));e.push({position:D,faces:A}),o+=D.length,s+=A.length}const h=function Ot(t,r,e){if(1===t.length)return t[0];const o=new Float64Array(r),s=new Uint32Array(e);let h=0,g=0,m=0;for(const M of t){for(let y=0;y<M.position.length;y++)o[h++]=M.position[y];for(let y=0;y<M.faces.length;y++)s[g++]=M.faces[y]+m;m=h/3}return{position:o,faces:s}}(e,o,s),g=(0,Wt.d)(h.position.buffer,6,{originalIndices:h.faces});return h.position=new Float64Array(g.buffer),h.faces=g.indices,h}(t);return new gt({vertexAttributes:new _t.QL({position:e.position}),components:[new xt.Z({faces:e.faces,shading:"flat",material:r&&r.material||null})],spatialReference:t.spatialReference})}static createFromGLTF(t,r,e){return(0,R.Z)(function*(){if(!(t instanceof W.Z))throw pt.error(".createfromGLTF()","expected location to be a Point instance"),new G.Z("invalid-input","Expected location to be a Point instance");const{loadGLTFMesh:o}=yield(0,$.Hl)(Promise.all([u.e(8990),u.e(9185)]).then(u.bind(u,29185)),e);return new gt(yield o(t,r,e))})()}static createWithExternalSource(t,r,e){var o,s,h;const g=null!=(o=null==e?void 0:e.extent)?o:null,m=null!=(s=null==e?void 0:e.transform.clone())?s:new ft.Z;return m.origin=[t.x,t.y,null!=(h=t.z)?h:0],new gt({external:{source:r,extent:g},transform:m,spatialReference:t.spatialReference})}static createIncomplete(t,r){var e,o;const s=null!=(e=null==r?void 0:r.transform.clone())?e:new ft.Z;s.origin=[t.x,t.y,null!=(o=t.z)?o:0];const g=new gt({transform:s,spatialReference:t.spatialReference});return g.addResolvingPromise(Promise.reject(new G.Z("mesh-incomplete","Mesh resources are not complete"))),g}};(0,b._)([(0,B.Cb)({type:[xt.Z],json:{write:!0}})],at.prototype,"components",void 0),(0,b._)([(0,B.Cb)({type:ft.Z,json:{write:!0}})],at.prototype,"transform",void 0),(0,b._)([(0,B.Cb)({constructOnly:!0})],at.prototype,"external",void 0),(0,b._)([(0,B.Cb)({readOnly:!0})],at.prototype,"hasExtent",null),(0,b._)([(0,B.Cb)({readOnly:!0})],at.prototype,"boundingInfo",null),(0,b._)([(0,B.Cb)({readOnly:!0})],at.prototype,"anchor",null),(0,b._)([(0,B.Cb)({readOnly:!0})],at.prototype,"origin",null),(0,b._)([(0,B.Cb)({readOnly:!0,json:{read:!1}})],at.prototype,"extent",null),(0,b._)([(0,B.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!0}})],at.prototype,"hasZ",void 0),(0,b._)([(0,B.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!1}})],at.prototype,"hasM",void 0),(0,b._)([(0,B.Cb)({type:_t.QL,nonNullable:!0,json:{write:!0}})],at.prototype,"vertexAttributes",void 0),at=gt=(0,b._)([(0,d.j)("esri.geometry.Mesh")],at);const Yt={x:(0,x.f)(1,0,0),y:(0,x.f)(0,1,0),z:(0,x.f)(0,0,1)},Lt=(0,H.Ue)(),ue=(0,H.Ue)(),pe=(0,H.Ue)(),Bt=(0,x.c)(),he=at;var Se=u(17253);function Be(t,r,e){const o=e.features;e.features=[],delete e.geometryType;const s=Se.default.fromJSON(e);s.geometryType="mesh";const h=s.spatialReference,g=(0,_.Wi)(t.outFields)||!t.outFields.length?()=>({}):function Ke(t){return({attributes:r})=>{if(!r)return{};if(!t)return r;for(const e in r)t.has(e)||delete r[e];return r}}(t.outFields.includes("*")?null:new Set(t.outFields));for(const m of o){const M=ze(m,h,r);(0,_.pC)(M)&&s.features.push(new O.Z({geometry:M,attributes:g(m)}))}return s}function ze(t,r,e){const{status:o,source:s}=function He(t){if(!t.assetMappings)return{status:0};const r=[],e=new Map;for(const o of t.assetMappings){const s=o.seqNo,h=o.assetName,g=o.assetURL,m=o.conversionStatus;if("FAILED"===m)return{status:0};if("COMPLETED"!==m)return{status:1};if(null==s)r.push({name:h,source:g});else{const M=e.get(h);let y;M?y=M.multipart:(y=[],r.push({name:h,source:{multipart:y}}),e.set(h,{multipart:y})),y[s]=g}}return{status:2,source:r}}(t);if(0===o)return null;const h=function Ne({attributes:t},r,{transformFieldRoles:e}){return new W.Z({x:t[e.originX],y:t[e.originY],z:t[e.originZ],spatialReference:r})}(t,r,e),g=F.Z.fromJSON(t.geometry);g.spatialReference=r;const m=function $e({attributes:t,assetMappings:r},{transformFieldRoles:e}){var o;return new ft.Z({translation:[t[e.translationX],t[e.translationY],t[e.translationZ]],rotation:(0,H.uT)([t[e.rotationX],t[e.rotationY],t[e.rotationZ]],t[e.rotationDeg]),scale:[t[e.scaleX],t[e.scaleY],t[e.scaleZ]],geographic:!(null!=(o=r.flags)&&o.includes("PROJECT_VERTICES"))})}(t,e);return 1===o?he.createIncomplete(h,{extent:g,transform:m}):he.createWithExternalSource(h,s,{extent:g,transform:m})}}}]);