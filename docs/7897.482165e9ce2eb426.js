"use strict";var Mt=Object.defineProperty,dt=Object.defineProperties,Et=Object.getOwnPropertyDescriptors,ft=Object.getOwnPropertySymbols,vt=Object.prototype.hasOwnProperty,Ct=Object.prototype.propertyIsEnumerable,ut=(Z,R,r)=>R in Z?Mt(Z,R,{enumerable:!0,configurable:!0,writable:!0,value:r}):Z[R]=r,_t=(Z,R)=>{for(var r in R||(R={}))vt.call(R,r)&&ut(Z,r,R[r]);if(ft)for(var r of ft(R))Ct.call(R,r)&&ut(Z,r,R[r]);return Z},pt=(Z,R)=>dt(Z,Et(R));(self.webpackChunksite=self.webpackChunksite||[]).push([[7897],{28594:(Z,R,r)=>{r.d(R,{vF:()=>yt,_D:()=>n,Qp:()=>lt,P_:()=>z,ut:()=>M,Hq:()=>W,zD:()=>U,tB:()=>S,nF:()=>c,VO:()=>x,Mk:()=>X,kZ:()=>xt,kr:()=>ht});var D=r(15861),F=(r(29132),r(26584)),N=r(62208),st=r(16730),A=r(56741),J=r(2004),O=r(49672);const L=5e-4;function X(t,s,e){return!(0,A.Up)(t,s,e)}function p(t,s,e){const a=X(t,s,e);if(a&&!(0,A.kR)())throw new F.Z("rasterprojectionhelper-project","projection engine is not loaded");return a}const nt=function(t,s,e){const a=(t[0]+t[4]+t[4*s.cols]+t[4*s.cols+4])/4,i=(t[1]+t[5]+t[4*s.rows+1]+t[4*s.rows+5])/4,o=(t[4*s.cols]-t[0]+t[4*s.cols+4]-t[4])/e[0]*.5,l=(t[4*s.cols+1]-t[1]+t[4*s.cols+5]-t[5])/e[1]*.5;return[0===o||isNaN(o)?0:Math.abs(a-t[2*s.rows+2])/Math.abs(o),0===l||isNaN(l)?0:Math.abs(i-t[2*s.rows+3])/Math.abs(l)]},rt={3395:20037508.342789244,3410:17334193.943686873,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53034:20015086.79602057,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54034:20037508.342789244,54079:20037508.342789244,54080:20037508.342789244,54100:20037508.342789244,54101:20037508.342789244};function U(){return K.apply(this,arguments)}function K(){return(K=(0,D.Z)(function*(){if((0,A.kR)())return null;yield(0,A.zD)()})).apply(this,arguments)}function n(t,s,e){return p(t.spatialReference,s)?e?(0,A.rS)(s,t.spatialReference,t):(0,A.rS)(t.spatialReference,s,t):null}function x(t,s,e,a=null){if(t.spatialReference.equals(s))return t;p(t.spatialReference,s,a);const i=e.center,o=new J.Z({xmin:i.x-t.x/2,xmax:i.x+t.x/2,ymin:i.y-t.y/2,ymax:i.y+t.y/2,spatialReference:t.spatialReference}),l=(0,A.iV)(o,s,a);return(0,N.Wi)(l)?null:{x:l.xmax-l.xmin,y:l.ymax-l.ymin}}function P(t,s=.01){return(0,st.c9)(t)?s/(0,st.c9)(t):0}function c(t,s,e=null,a=!0){const i=t.spatialReference;if(i.equals(s))return t;p(i,s,e);const o=(0,A.iV)(t,s,e);if(a&&s.isGeographic){const[l,f]=H(i,!0),h=P(i);h&&null!=l&&null!=f&&(Math.abs(t.x-l)<h&&Math.abs(180-o.x)<L?o.x-=360:Math.abs(t.x-f)<h&&Math.abs(180+o.x)<L&&(o.x+=360))}return o}function _(t){const s=M(t[0].spatialReference);if(t.length<2||!(0,N.pC)(s))return t[0];let{xmin:e,xmax:a,ymin:i,ymax:o}=t[0];for(let l=1;l<t.length;l++){const f=t[l];a=f.xmax+s*l,i=Math.min(i,f.ymin),o=Math.max(o,f.ymax)}return new J.Z({xmin:e,xmax:a,ymin:i,ymax:o,spatialReference:t[0].spatialReference})}function S(t,s,e=null,a=!0){if(t.spatialReference.equals(s))return t;const i=W(t),o=M(t.spatialReference,!0);return(0,N.pC)(o)&&0!==i?_(t.clone().normalize().map(l=>Y(l,s,e,a))):Y(t,s,e,a)}function Y(t,s,e=null,a=!0){const i=t.spatialReference;if(i.equals(s))return t;p(i,s,e);const o=(0,A.iV)(t,s,e);let[l,f]=H(i,!0);if(o&&a&&i.isWebMercator&&s.isGeographic&&null!=l&&null!=f){if(Math.abs(t.xmin-l)<.001&&Math.abs(f-t.xmax)>1e3&&Math.abs(180-o.xmax)<L){o.xmin=-180;const E=[];E.push(new O.Z(t.xmax,t.ymin,i)),E.push(new O.Z(t.xmax,(t.ymin+t.ymax)/2,i)),E.push(new O.Z(t.xmax,t.ymax,i));const y=E.map(v=>c(v,s,e)).filter(v=>!isNaN(null==v?void 0:v.x)).map(v=>v.x);o.xmax=Math.max.apply(null,y)}if(Math.abs(t.xmax-f)<.001&&Math.abs(l-t.xmin)>1e3&&Math.abs(180+o.xmin)<L){o.xmax=180;const E=[];E.push(new O.Z(t.xmin,t.ymin,i)),E.push(new O.Z(t.xmin,(t.ymin+t.ymax)/2,i)),E.push(new O.Z(t.xmin,t.ymax,i));const y=E.map(v=>c(v,s,e)).filter(v=>!isNaN(null==v?void 0:v.x)).map(v=>v.x);o.xmin=Math.min.apply(null,y)}}[l,f]=H(s,!0);const h=P(s);return h&&null!=l&&null!=f&&o&&(Math.abs(o.xmin-l)<h&&(o.xmin=l),Math.abs(o.xmax-f)<h&&(o.xmax=f)),o}function M(t,s=!1){return t.isWebMercator?2*(s?20037508.342787:20037508.342788905):t.wkid&&t.isGeographic?360:2*rt[t.wkid]||null}function H(t,s=!1){const e=[],a=M(t,s);return(0,N.pC)(a)&&(e.push(-a/2),e.push(a/2)),e}function q(t,s,e,a){let i=(t-s)/e;return i-Math.floor(i)!=0?i=Math.floor(i):a&&(i-=1),i}function W(t,s=!1){const e=M(t.spatialReference);if(!(0,N.pC)(e))return 0;const a=s?0:-e/2;return q(t.xmax,a,e,!0)-q(t.xmin,a,e,!1)}function z(t){const s=t.storageInfo.origin.x,e=M(t.spatialReference,!0);if(!(0,N.pC)(e))return{originX:s,halfWorldWidth:null,pyramidsInfo:null};const a=e/2,{nativePixelSize:i,storageInfo:o,extent:l}=t,{maximumPyramidLevel:f,blockWidth:h,pyramidScalingFactor:j}=o;let d=i.x;const E=[],y=(0,N.pC)(t.transform)&&"gcs-shift"===t.transform.type,v=s+(y?0:a),C=y?e-s:a-s;for(let g=0;g<=f;g++){const I=(l.xmax-s)/d/h,w=I-Math.floor(I)==0?I:Math.ceil(I),B=C/d/h,m=B-Math.floor(B)==0?B:Math.ceil(B),G=Math.floor(v/d/h),T=Math.round(v/d)%h,V=(h-Math.round(C/d)%h)%h;E.push({resolutionX:d,blockWidth:h,datsetColumnCount:w,worldColumnCountFromOrigin:m,leftMargin:T,rightPadding:V,originColumnOffset:G}),d*=j}return{originX:s,halfWorldWidth:a,pyramidsInfo:E,hasGCSSShiftTransform:y}}function lt(t){const s=t.isAdaptive&&null==t.spacing,e=t.spacing||[32,32];let a=at(t),i={cols:a.size[0]+1,rows:a.size[1]+1},o=nt(a.offsets,i,e);const f=a.outofBoundPointCount>0&&a.outofBoundPointCount<a.offsets.length/2;return s&&(f||(o[0]+o[1])/2>4)&&(a=at(pt(_t({},t),{spacing:[4,4]})),i={cols:a.size[0]+1,rows:a.size[1]+1},o=nt(a.offsets,i,e)),a.error=o,a.coefficients=function mt(t,s,e){const{cols:a,rows:i}=s,o=new Float32Array((a-1)*(i-1)*2*6),l=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),f=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let h=0;h<a-1;h++){for(let j=0;j<i-1;j++){let d=h*i*2+2*j;const E=t[d],y=t[d+1],v=t[d+2],C=t[d+3];d+=2*i;const g=t[d],I=t[d+1],w=t[d+2],B=t[d+3];let m=0,G=12*(j*(a-1)+h);for(let T=0;T<3;T++)o[G++]=l[m++]*E+l[m++]*v+l[m++]*w;m=0;for(let T=0;T<3;T++)o[G++]=l[m++]*y+l[m++]*C+l[m++]*B;m=0;for(let T=0;T<3;T++)o[G++]=f[m++]*E+f[m++]*g+f[m++]*w;m=0;for(let T=0;T<3;T++)o[G++]=f[m++]*y+f[m++]*I+f[m++]*B}if(e)for(let j=0;j<o.length;j++)isNaN(o[j])&&(o[j]=-1)}return o}(a.offsets,i,f),a}function at(t){const{projectedExtent:s,srcBufferExtent:e,pixelSize:a,datumTransformation:i,rasterTransform:o}=t,l=s.spatialReference,f=e.spatialReference;p(l,f);const{xmin:h,ymin:j,xmax:d,ymax:E}=s,y=M(f),v=t.hasWrapAround||"gcs-shift"===(null==o?void 0:o.type),C=t.spacing||[32,32],g={x:C[0]*a.x,y:C[1]*a.y},I_cols=Math.ceil((d-h)/g.x-.1/C[0])+1,I_rows=Math.ceil((E-j)/g.y-.1/C[1])+1,w=g.x,B=g.y,m=[];let G,T=0;const V=[];for(let tt=0;tt<I_cols;tt++)for(let ot=0;ot<I_rows;ot++)V.push(new O.Z({x:h+w*tt,y:E-B*ot,spatialReference:l}));const ct=function u(t,s,e=null){const a=t[0].spatialReference;return a.equals(s)?t:(p(a,s,e),(0,A.iV)(t,s,e))}(V,f,i);for(let tt=0;tt<I_cols;tt++){const ot=[];for(let it=0;it<I_rows;it++){let Q=ct[tt*I_rows+it];o&&(Q=o.inverseTransform(Q)),ot.push(Q),tt>0&&v&&Q&&G[it]&&(0,N.pC)(y)&&Q.x<G[it].x&&(Q.x+=y),Q?(m.push((Q.x-e.xmin)/(e.xmax-e.xmin)),m.push((e.ymax-Q.y)/(e.ymax-e.ymin))):(m.push(NaN),m.push(NaN),T++)}G=ot}return{offsets:m,error:null,coefficients:null,outofBoundPointCount:T,spacing:C,size:[I_cols-1,I_rows-1]}}function xt(t){const s=t.clone().normalize();return 1===s.length?s[0]:_(s)}function ht(t,s,e){const{storageInfo:a,pixelSize:i}=s;let o,l=!1;const{pyramidResolutions:f}=a;if((0,N.pC)(f)&&f.length){const y=(t.x+t.y)/2,v=f[f.length-1],C=(v.x+v.y)/2,g=(i.x+i.y)/2;if(y<=g)o=0;else if(y>=C)o=f.length,l=y/C>8;else{let w,B=g;for(let m=1;m<=f.length;m++){if(w=(f[m-1].x+f[m-1].y)/2,y<=w){y===w?o=m:"down"===e?(o=m-1,l=y/B>8):o="up"===e||y-B>w-y||y/B>2?m:m-1;break}B=w}}const I=0===o?i:f[o-1];return{pyramidLevel:o,pyramidResolution:new O.Z({x:I.x,y:I.y,spatialReference:s.spatialReference}),excessiveReading:l}}const h=Math.log(t.x/i.x)/Math.LN2,j=Math.log(t.y/i.y)/Math.LN2,d=s.storageInfo.maximumPyramidLevel||0;o="down"===e?Math.floor(Math.min(h,j)):"up"===e?Math.ceil(Math.max(h,j)):Math.round((h+j)/2),o<0?o=0:o>d&&(l=o>d+3,o=d);const E=2**o;return{pyramidLevel:o,pyramidResolution:new O.Z({x:E*s.nativePixelSize.x,y:E*s.nativePixelSize.y,spatialReference:s.spatialReference}),excessiveReading:l}}function yt(t,s,e=512,a=!0){const{extent:i,spatialReference:o,pixelSize:l}=t,f=x(new O.Z({x:l.x,y:l.y,spatialReference:o}),s,i);if(null==f)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const h=(f.x+f.y)/2,j=(0,st.c9)(s),d=h*j*96*39.37,E=s.isGeographic?256/e*295828763.7958547:256/e*591657527.591555;let y="vector-magdir"===t.dataType||"vector-uv"===t.dataType;const v=S(i,s);y||a&&(s.isGeographic||s.isWebMercator)&&(y=v.xmin*v.xmax<0);let C,g=d;const I=1.001;if(y){g=E;const T=s.isGeographic?1341104507446289e-21:.29858214164761665,V=T*(96*j*39.37);C=x(new O.Z({x:T,y:T,spatialReference:{wkid:s.isGeographic?4326:3857}}),o,v),C.x*=g/V,C.y*=g/V}else{C={x:l.x,y:l.y};const T=Math.ceil(Math.log(Math.min(t.width,t.height)/32)/Math.LN2);let V=0;for(;g<E*(I/2)&&V<T;)V++,g*=2,C.x*=2,C.y*=2;Math.max(g,E)/Math.min(g,E)<=I&&(g=E)}const w=[g],B=[{x:C.x,y:C.y}],G=Math.min(70.5310735,d)/I;for(;g>=G;)g/=2,C.x/=2,C.y/=2,w.push(g),B.push({x:C.x,y:C.y});return{projectedPixelSize:f,scales:w,srcResolutions:B,isCustomTilingScheme:!y}}},96504:(Z,R,r)=>{r.d(R,{Z:()=>L});var D=r(17626),$=r(86162),F=r(77712),J=(r(85931),r(8314),r(90912),r(76898));let O=class extends $.wq{get affectsPixelSize(){return!1}forwardTransform(X){return X}inverseTransform(X){return X}};(0,D._)([(0,F.Cb)()],O.prototype,"affectsPixelSize",null),(0,D._)([(0,F.Cb)({json:{write:!0}})],O.prototype,"spatialReference",void 0),O=(0,D._)([(0,J.j)("esri.layers.support.rasterTransforms.BaseRasterTransform")],O);const L=O},76671:(Z,R,r)=>{r.d(R,{Z:()=>X});var D=r(17626),$=r(77712),A=(r(85931),r(8314),r(90912),r(55342)),J=r(76898),O=r(96504);let L=class extends O.Z{constructor(){super(...arguments),this.type="gcs-shift",this.tolerance=1e-8}forwardTransform(p){return"point"===(p=p.clone()).type?(p.x>180+this.tolerance&&(p.x-=360),p):(p.xmin>=180-this.tolerance?(p.xmax-=360,p.xmin-=360):p.xmax>180+this.tolerance&&(p.xmin=-180,p.xmax=180),p)}inverseTransform(p){return"point"===(p=p.clone()).type?(p.x<-this.tolerance&&(p.x+=360),p):(p.xmin<-this.tolerance&&(p.xmin+=360,p.xmax+=360),p)}};(0,D._)([(0,A.J)({GCSShiftXform:"gcs-shift"})],L.prototype,"type",void 0),(0,D._)([(0,$.Cb)()],L.prototype,"tolerance",void 0),L=(0,D._)([(0,J.j)("esri.layers.support.rasterTransforms.GCSShiftTransform")],L);const X=L},85374:(Z,R,r)=>{r.d(R,{Z:()=>K});var D=r(17626),F=(r(29132),r(77712)),J=(r(85931),r(8314),r(90912),r(55342)),O=r(68653),L=r(76898),X=r(99433),p=r(96504),nt=r(49672),rt=r(2004);function b(n,x,P){const{x:c,y:u}=x;if(P<2)return{x:n[0]+c*n[2]+u*n[4],y:n[1]+c*n[3]+u*n[5]};if(2===P){const z=c*c,lt=u*u,at=c*u;return{x:n[0]+c*n[2]+u*n[4]+z*n[6]+at*n[8]+lt*n[10],y:n[1]+c*n[3]+u*n[5]+z*n[7]+at*n[9]+lt*n[11]}}const _=c*c,S=u*u,Y=c*u,M=_*c,H=_*u,q=c*S,W=u*S;return{x:n[0]+c*n[2]+u*n[4]+_*n[6]+Y*n[8]+S*n[10]+M*n[12]+H*n[14]+q*n[16]+W*n[18],y:n[1]+c*n[3]+u*n[5]+_*n[7]+Y*n[9]+S*n[11]+M*n[13]+H*n[15]+q*n[17]+W*n[19]}}function k(n,x,P){const{xmin:c,ymin:u,xmax:_,ymax:S,spatialReference:Y}=x;let M=[];if(P<2)M.push({x:c,y:S}),M.push({x:_,y:S}),M.push({x:c,y:u}),M.push({x:_,y:u});else{let W=10;for(let z=0;z<W;z++)M.push({x:c,y:u+(S-u)*z/(W-1)}),M.push({x:_,y:u+(S-u)*z/(W-1)});W=8;for(let z=1;z<=W;z++)M.push({x:c+(_-c)*z/W,y:u}),M.push({x:c+(_-c)*z/W,y:S})}M=M.map(W=>b(n,W,P));const H=M.map(W=>W.x),q=M.map(W=>W.y);return new rt.Z({xmin:Math.min.apply(null,H),xmax:Math.max.apply(null,H),ymin:Math.min.apply(null,q),ymax:Math.max.apply(null,q),spatialReference:Y})}let U=class extends p.Z{constructor(){super(...arguments),this.polynomialOrder=1,this.type="polynomial"}readForwardCoefficients(n,x){const{coeffX:P,coeffY:c}=x;if(null==P||!P.length||null==c||!c.length||P.length!==c.length)return null;const u=[];for(let _=0;_<P.length;_++)u.push(P[_]),u.push(c[_]);return u}writeForwardCoefficients(n,x,P){const c=[],u=[];for(let _=0;_<(null==n?void 0:n.length);_++)_%2==0?c.push(n[_]):u.push(n[_]);x.coeffX=c,x.coeffY=u}get inverseCoefficients(){let n=this._get("inverseCoefficients");const x=this._get("forwardCoefficients");return!n&&x&&this.polynomialOrder<2&&(n=function et(n){const[x,P,c,u,_,S]=n,Y=c*S-_*u,M=_*u-c*S;return[(_*P-x*S)/Y,(c*P-x*u)/M,S/Y,u/M,-_/Y,-c/M]}(x)),n}set inverseCoefficients(n){this._set("inverseCoefficients",n)}readInverseCoefficients(n,x){const{inverseCoeffX:P,inverseCoeffY:c}=x;if(null==P||!P.length||null==c||!c.length||P.length!==c.length)return null;const u=[];for(let _=0;_<P.length;_++)u.push(P[_]),u.push(c[_]);return u}writeInverseCoefficients(n,x,P){const c=[],u=[];for(let _=0;_<(null==n?void 0:n.length);_++)_%2==0?c.push(n[_]):u.push(n[_]);x.inverseCoeffX=c,x.inverseCoeffY=u}get affectsPixelSize(){return this.polynomialOrder>0}forwardTransform(n){if("point"===n.type){const x=b(this.forwardCoefficients,n,this.polynomialOrder);return new nt.Z({x:x.x,y:x.y,spatialReference:n.spatialReference})}return k(this.forwardCoefficients,n,this.polynomialOrder)}inverseTransform(n){if("point"===n.type){const x=b(this.inverseCoefficients,n,this.polynomialOrder);return new nt.Z({x:x.x,y:x.y,spatialReference:n.spatialReference})}return k(this.inverseCoefficients,n,this.polynomialOrder)}};(0,D._)([(0,F.Cb)({json:{write:!0}})],U.prototype,"polynomialOrder",void 0),(0,D._)([(0,F.Cb)()],U.prototype,"forwardCoefficients",void 0),(0,D._)([(0,O.r)("forwardCoefficients",["coeffX","coeffY"])],U.prototype,"readForwardCoefficients",null),(0,D._)([(0,X.c)("forwardCoefficients")],U.prototype,"writeForwardCoefficients",null),(0,D._)([(0,F.Cb)({json:{write:!0}})],U.prototype,"inverseCoefficients",null),(0,D._)([(0,O.r)("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],U.prototype,"readInverseCoefficients",null),(0,D._)([(0,X.c)("inverseCoefficients")],U.prototype,"writeInverseCoefficients",null),(0,D._)([(0,F.Cb)()],U.prototype,"affectsPixelSize",null),(0,D._)([(0,J.J)({PolynomialXform:"polynomial"})],U.prototype,"type",void 0),U=(0,D._)([(0,L.j)("esri.layers.support.rasterTransforms.PolynomialTransform")],U);const K=U},46572:(Z,R,r)=>{r.d(R,{j:()=>et,c:()=>U});var D=r(76671),$=r(17626),O=(r(63290),r(90912),r(85931),r(8314),r(82255),r(55342)),L=r(76898),X=r(96504);let p=class extends X.Z{constructor(){super(...arguments),this.type="identity"}};(0,$._)([(0,O.J)({IdentityXform:"identity"})],p.prototype,"type",void 0),p=(0,$._)([(0,L.j)("esri.layers.support.rasterTransforms.IdentityTransform")],p);const nt=p;var rt=r(85374);const b={GCSShiftXform:D.Z,IdentityXform:nt,PolynomialXform:rt.Z},k=Object.keys(b);function et(K){return!K||k.includes(null==K?void 0:K.type)}function U(K){if(!(null==K?void 0:K.type))return null;const n=b[null==K?void 0:K.type];if(n){const x=new n;return x.read(K),x}return null}}}]);