"use strict";var Di=Object.defineProperty,Bn=Object.getOwnPropertySymbols,gi=Object.prototype.hasOwnProperty,Ei=Object.prototype.propertyIsEnumerable,Rn=(Ie,Ce,Q)=>Ce in Ie?Di(Ie,Ce,{enumerable:!0,configurable:!0,writable:!0,value:Q}):Ie[Ce]=Q,Mn=(Ie,Ce)=>{for(var Q in Ce||(Ce={}))gi.call(Ce,Q)&&Rn(Ie,Q,Ce[Q]);if(Bn)for(var Q of Bn(Ce))Ei.call(Ce,Q)&&Rn(Ie,Q,Ce[Q]);return Ie};(self.webpackChunksite=self.webpackChunksite||[]).push([[5068],{37780:(Ie,Ce,Q)=>{Q.d(Ce,{Z:()=>fe});var K=Q(6729);class fe extends K.Z{constructor(W){super(),this.immutable=!1,this.setField("url",W),this.immutable=!0}}},22386:(Ie,Ce,Q)=>{Q.d(Ce,{Z:()=>fe});var K=Q(6729);class fe extends K.Z{constructor(W,z,le,D,S,X){super(),this.attachmentUrl=S,this.immutable=!1,this.setField("id",W),this.setField("name",z),this.setField("contenttype",le),this.setField("size",D),this.setField("exifinfo",X),this.immutable=!0}}},6729:(Ie,Ce,Q)=>{Q.d(Ce,{Z:()=>le});var K=Q(98362),fe=Q(47562),y=Q(10699),W=Q(21674);function z(D,S=!1){if(null==D)return null;if((0,fe.j)(D))return(0,fe.t)(D);if((0,fe.i)(D))return(0,fe.y)(D);if((0,fe.f)(D))return(0,fe.d)(D);if((0,fe.n)(D))return(0,fe.z)(D);if((0,fe.a)(D)){const N=[];for(const G of D)N.push(z(G,S));return N}const X=new le;X.immutable=!1;for(const N of Object.keys(D)){const G=D[N];void 0!==G&&X.setField(N,z(G,S))}return X.immutable=S,X}class le{constructor(S){this.declaredClass="esri.arcade.Dictionary",this.attributes=null,this.plain=!1,this.immutable=!0,this.attributes=S instanceof le?S.attributes:null==S?{}:S}field(S){const X=S.toLowerCase(),N=this.attributes[S];if(void 0!==N)return N;for(const G in this.attributes)if(G.toLowerCase()===X)return this.attributes[G];throw new Error("Field not Found : "+S)}setField(S,X){if(this.immutable)throw new Error("Dictionary is Immutable");const N=S.toLowerCase();if(void 0===this.attributes[S]){for(const G in this.attributes)if(G.toLowerCase()===N)return void(this.attributes[G]=X);this.attributes[S]=X}else this.attributes[S]=X}hasField(S){const X=S.toLowerCase();if(void 0!==this.attributes[S])return!0;for(const N in this.attributes)if(N.toLowerCase()===X)return!0;return!1}keys(){let S=[];for(const X in this.attributes)S.push(X);return S=S.sort(),S}castToText(){let S="";for(const X in this.attributes){""!==S&&(S+=",");const N=this.attributes[X];null==N?S+=JSON.stringify(X)+":null":(0,fe.i)(N)||(0,fe.j)(N)||(0,fe.f)(N)?S+=JSON.stringify(X)+":"+JSON.stringify(N):N instanceof W.Z||N instanceof K.Z||N instanceof Array?S+=JSON.stringify(X)+":"+(0,fe.s)(N):N instanceof Date?S+=JSON.stringify(X)+":"+JSON.stringify(N):null!==N&&"object"==typeof N&&void 0!==N.castToText&&(S+=JSON.stringify(X)+":"+N.castToText())}return"{"+S+"}"}static convertObjectToArcadeDictionary(S,X=!0){const N=new le;N.immutable=!1;for(const G in S){const ee=S[G];void 0!==ee&&N.setField(G.toString(),z(ee))}return N.immutable=X,N}static convertJsonToArcade(S,X=!1){return z(S,X)}castAsJson(S=null){const X={};for(let N in this.attributes){const G=this.attributes[N];void 0!==G&&(null!=S&&S.keyTranslate&&(N=S.keyTranslate(N)),X[N]=(0,fe.u)(G,S))}return X}castDictionaryValueAsJsonAsync(S,X,N,G=null,ee){return(0,fe.w)(N,G,ee).then(w=>(S[X]=w,w))}castAsJsonAsync(S=null,X=null){const N={},G=[];for(let ee in this.attributes){const w=this.attributes[ee];null!=X&&X.keyTranslate&&(ee=X.keyTranslate(ee)),void 0!==w&&((0,fe.x)(w)||w instanceof W.Z||w instanceof Date?N[ee]=(0,fe.u)(w,X):G.push(this.castDictionaryValueAsJsonAsync(N,ee,w,S,X)))}return G.length>0?(0,y.$6)(G).then(()=>N):(0,y.DB)(N)}}},42275:(Ie,Ce,Q)=>{Q.d(Ce,{Z:()=>G});var K=Q(6729),fe=Q(98362),y=Q(47562),W=Q(10699),z=Q(21674),le=Q(49672),D=Q(91179),S=Q(77132),X=Q(82054),N=Q(62208);class G{constructor(){this.declaredClass="esri.arcade.Feature",this._optimizedGeomDefinition=null,this._geometry=null,this.attributes=null,this._layer=null,this._datesfixed=!0,this.immutable=!0,this._datefields=null,this.immutable=!0}static createFromGraphic(w){const g=new G;return g._geometry=(0,N.pC)(w.geometry)?w.geometry:null,g.attributes=null==w.attributes?{}:w.attributes,w._sourceLayer?(g._layer=w._sourceLayer,g._datesfixed=!1):w._layer?(g._layer=w._layer,g._datesfixed=!1):w.layer&&"fields"in w.layer?(g._layer=w.layer,g._datesfixed=!1):w.sourceLayer&&"fields"in w.sourceLayer&&(g._layer=w.sourceLayer,g._datesfixed=!1),g}static createFromArcadeFeature(w){const g=new G;return g._datesfixed=w._datesfixed,g.attributes=w.attributes,g._geometry=w._geometry,g._optimizedGeomDefinition=w._optimizedGeomDefinition,w._layer&&(g._layer=w._layer),g}static createFromOptimisedFeature(w,g,R){const _=new G;return _._geometry=w.geometry?{geometry:w.geometry}:null,_._optimizedGeomDefinition=R,_.attributes=w.attributes||{},_._layer=g,_._datesfixed=!1,_}static createFromArcadeDictionary(w){const g=new G;return g.attributes=w.field("attributes"),null!==g.attributes&&g.attributes instanceof K.Z?(g.attributes=g.attributes.attributes,null===g.attributes&&(g.attributes={})):g.attributes={},g._geometry=w.field("geometry"),null!==g._geometry&&(g._geometry instanceof K.Z?g._geometry=G.parseGeometryFromDictionary(g._geometry):g._geometry instanceof z.Z||(g._geometry=null)),g}static createFromGraphicLikeObject(w,g,R=null){const _=new G;return null===g&&(g={}),_.attributes=g,_._geometry=(0,N.pC)(w)?w:null,_._layer=R,_._layer&&(_._datesfixed=!1),_._adapter=null,_}repurposeFromGraphicLikeObject(w,g,R=null){null===g&&(g={}),this.attributes=g,this._geometry=w||null,this._layer=R,this._datesfixed=!this._layer}repurposeFromAdapter(w,g=null){this._adapter=w,this._layer=g}castToText(){if(this._adapter)return this._adapter.castToText();let w="";!1===this._datesfixed&&this._fixDates();for(const g in this.attributes){""!==w&&(w+=",");const R=this.attributes[g];null==R?w+=JSON.stringify(g)+":null":(0,y.i)(R)||(0,y.j)(R)||(0,y.f)(R)?w+=JSON.stringify(g)+":"+JSON.stringify(R):R instanceof z.Z||R instanceof fe.Z||R instanceof Array?w+=JSON.stringify(g)+":"+(0,y.s)(R):R instanceof Date?w+=JSON.stringify(g)+":"+JSON.stringify(R):null!==R&&"object"==typeof R&&void 0!==R.castToText&&(w+=JSON.stringify(g)+":"+R.castToText())}return'{"geometry":'+(null===this.geometry()?"null":(0,y.s)(this.geometry()))+',"attributes":{'+w+"}}"}_fixDates(){if(null!==this._datefields)return this._datefields.length>0&&this._fixDateFields(this._datefields),void(this._datesfixed=!0);const w=[];for(let g=0;g<this._layer.fields.length;g++){const R=this._layer.fields[g];"date"!==R.type&&"esriFieldTypeDate"!==R.type||w.push(R.name)}this._datefields=w,w.length>0&&this._fixDateFields(w),this._datesfixed=!0}_fixDateFields(w){this.attributes=Mn({},this.attributes);for(let g=0;g<w.length;g++){let R=this.attributes[w[g]];if(null!==R)if(void 0===R){for(const _ in this.attributes)if(_.toLowerCase()===w[g].toLowerCase()){R=this.attributes[_],null!==R&&(R instanceof Date||(this.attributes[_]=new Date(R)));break}}else R instanceof Date||(this.attributes[w[g]]=new Date(R))}}geometry(){return this._adapter?this._adapter.geometry():(null===this._geometry||this._geometry instanceof z.Z||(this._optimizedGeomDefinition?(this._geometry=(0,N.Wg)((0,D.im)((0,X.di)(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM))),this._geometry.spatialReference=this._optimizedGeomDefinition.spatialReference):this._geometry=(0,N.Wg)((0,D.im)(this._geometry))),this._geometry)}field(w){if(this._adapter)return this._adapter.field(w);!1===this._datesfixed&&this._fixDates();const g=this.attributes[w];if(void 0!==g)return g;const R=w.toLowerCase();for(const _ in this.attributes)if(_.toLowerCase()===R)return this.attributes[_];if(this._hasFieldDefinition(R))return null;throw new Error("Field not Found : "+w)}_hasFieldDefinition(w){if(null===this._layer)return!1;for(let g=0;g<this._layer.fields.length;g++)if(this._layer.fields[g].name.toLowerCase()===w)return!0;return!1}_field(w){var g;if(this._adapter)return null!=(g=this._adapter.field(w))?g:null;!1===this._datesfixed&&this._fixDates();const R=w.toLowerCase(),_=this.attributes[w];if(void 0!==_)return _;for(const re in this.attributes)if(re.toLowerCase()===R)return this.attributes[re];return null}setField(w,g){if(this.immutable)throw new Error("Feature is Immutable");if(!1===(0,y.x)(g))throw new Error("Illegal Value Assignment to Feature");if(this._adapter)return void this._adapter.setField(w,g);const R=w.toLowerCase();if(void 0===this.attributes[w]){for(const _ in this.attributes)if(_.toLowerCase()===R)return void(this.attributes[_]=g);this.attributes[w]=g}else this.attributes[w]=g}hasField(w){if(this._adapter)return this._adapter.hasField(w);const g=w.toLowerCase();if(void 0!==this.attributes[w])return!0;for(const R in this.attributes)if(R.toLowerCase()===g)return!0;return!!this._hasFieldDefinition(g)}keys(){if(this._adapter)return this._adapter.keys();let w=[];const g={};for(const R in this.attributes)w.push(R),g[R.toLowerCase()]=1;if(null!==this._layer)for(let R=0;R<this._layer.fields.length;R++){const _=this._layer.fields[R];1!==g[_.name.toLowerCase()]&&w.push(_.name)}return w=w.sort(),w}static parseGeometryFromDictionary(w){const g=G.convertDictionaryToJson(w,!0);return void 0!==g.hasm&&(g.hasM=g.hasm,delete g.hasm),void 0!==g.hasz&&(g.hasZ=g.hasz,delete g.hasz),void 0!==g.spatialreference&&(g.spatialReference=g.spatialreference,delete g.spatialreference),void 0!==g.rings&&(g.rings=this.fixPathArrays(g.rings,!0===g.hasZ,!0===g.hasZ)),void 0!==g.paths&&(g.paths=this.fixPathArrays(g.paths,!0===g.hasZ,!0===g.hasM)),void 0!==g.points&&(g.points=this.fixPointArrays(g.points,!0===g.hasZ,!0===g.hasM)),(0,D.im)(g)}static fixPathArrays(w,g,R){const _=[];if(w instanceof Array)for(let re=0;re<w.length;re++)_.push(this.fixPointArrays(w[re],g,R));else if(w instanceof fe.Z)for(let re=0;re<w.length();re++)_.push(this.fixPointArrays(w.get(re),g,R));return _}static fixPointArrays(w,g,R){const _=[];if(w instanceof Array)for(let re=0;re<w.length;re++){const O=w[re];_.push(O instanceof le.Z?g&&R?[O.x,O.y,O.z,O.m]:g?[O.x,O.y,O.z]:R?[O.x,O.y,O.m]:[O.x,O.y]:O instanceof fe.Z?O.toArray():O)}else if(w instanceof fe.Z)for(let re=0;re<w.length();re++){const O=w.get(re);_.push(O instanceof le.Z?g&&R?[O.x,O.y,O.z,O.m]:g?[O.x,O.y,O.z]:R?[O.x,O.y,O.m]:[O.x,O.y]:O instanceof fe.Z?O.toArray():O)}return _}static convertDictionaryToJson(w,g=!1){const R={};for(const _ in w.attributes){let re=w.attributes[_];re instanceof K.Z&&(re=G.convertDictionaryToJson(re)),g?R[_.toLowerCase()]=re:R[_]=re}return R}static parseAttributesFromDictionary(w){const g={};for(const R in w.attributes){const _=w.attributes[R];if(!(0,y.x)(_))throw new Error("Illegal Argument");g[R]=_}return g}static fromJson(w){let g=null;null!=w.geometry&&(g=(0,D.im)(w.geometry));const R={};if(null!=w.attributes)for(const _ in w.attributes){const re=w.attributes[_];if(null===re)R[_]=re;else{if(!((0,y.f)(re)||(0,y.j)(re)||(0,y.i)(re)||(0,y.n)(re)))throw new Error("Illegal Argument");R[_]=re}}return G.createFromGraphicLikeObject(g,R,null)}fullDomain(w,g){return null!==this._layer&&this._layer.fields?(0,y.A)(w,this._layer,this,g):null}subtypes(){return null===this._layer?null:this._layer.fields&&this._layer.typeIdField?{subtypeField:this._layer.typeIdField,subtypes:this._layer.types?this._layer.types.map(w=>({name:w.name,code:w.id})):[]}:null}domainValueLookup(w,g,R){if(null===this._layer||!this._layer.fields)return null;const _=(0,y.A)(w,this._layer,this,R);if(void 0===g)try{g=this.field(w)}catch(re){return null}return(0,y.B)(_,g)}gdbVersion(){if(null===this._layer)return"";const w=this._layer.gdbVersion;return void 0===w?"":""===w&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":w}domainCodeLookup(w,g,R){if(null===this._layer||!this._layer.fields)return null;if(void 0===g){try{g=this.field(w)}catch(re){return null}return g}const _=(0,y.A)(w,this._layer,this,R);return(0,y.C)(_,g)}schema(){if(null===this._layer||!this._layer.fields)return null;const w=[];for(const g of this._layer.fields)w.push((0,S.Sh)(g));return{objectIdField:this._layer.objectIdField,globalIdField:this._layer.globalIdField,geometryType:void 0===S.q2[this._layer.geometryType]?"":S.q2[this._layer.geometryType],fields:w}}castAsJson(w=null){const g={attributes:{},geometry:!0===(null==w?void 0:w.keepGeometryType)?this.geometry():this.geometry().toJSON()};for(const R in this.attributes){const _=this.attributes[R];void 0!==_&&(g.attributes[R]=(0,y.u)(_,w))}return g}castAsJsonAsync(w=null,g=null){return(0,W.DB)(this.castAsJson(g))}}},77132:(Ie,Ce,Q)=>{Q.d(Ce,{Bj:()=>W,dj:()=>z,JW:()=>le,Lz:()=>re,EI:()=>R,tI:()=>Z,tt:()=>w,Sh:()=>D,US:()=>ie,hj:()=>N,HD:()=>S,yE:()=>ue,Qk:()=>I,q2:()=>$,Dt:()=>v,SV:()=>_,hd:()=>te});var W,z,ne,K=Q(10699),fe=Q(2004),y=Q(36255);function le(ne){return y.Z.fromJSON(ne.toJSON())}function D(ne){return ne.toJSON()}function S(ne){return"string"==typeof ne||ne instanceof String}function N(ne){return"number"==typeof ne}function ee(ne){return ne instanceof Date}function w(ne,d){return ne===d||!(!ee(ne)||!ee(d))&&ne.getTime()===d.getTime()}function R(ne){if(void 0===ne)return null;if("number"==typeof ne)return ne;switch(ne.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109413;case"kilometers":case"kilometer":case"km":return 109414}return null}function _(ne){if(null===ne)return null;switch(ne.type){case"polygon":case"multipoint":case"polyline":return ne.extent;case"point":return new fe.Z({xmin:ne.x,ymin:ne.y,xmax:ne.x,ymax:ne.y,spatialReference:ne.spatialReference});case"extent":return ne}return null}function re(ne){if(void 0===ne)return null;if("number"==typeof ne||"number"==typeof ne)return ne;switch(ne.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9035;case"kilometers":case"kilometer":case"km":return 9036}return null}(ne=W||(W={}))[ne.Standardised=0]="Standardised",ne[ne.StandardisedNoInterval=1]="StandardisedNoInterval",ne[ne.SqlServer=2]="SqlServer",ne[ne.Oracle=3]="Oracle",ne[ne.Postgres=4]="Postgres",ne[ne.PGDB=5]="PGDB",ne[ne.FILEGDB=6]="FILEGDB",ne[ne.NotEvaluated=7]="NotEvaluated",function(ne){ne[ne.InFeatureSet=0]="InFeatureSet",ne[ne.NotInFeatureSet=1]="NotInFeatureSet",ne[ne.Unknown=2]="Unknown"}(z||(z={}));const Z=1e3,I={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},$={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},ue={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};function v(ne,d){return(0,K.Ue)((T,E)=>{const V=(0,K.DB)(!0);ne.reduce((he,pe,De,ve)=>he.then(Te=>{try{return d(Te,pe,De,ve)}catch(ze){return(0,K.d1)(ze)}},Te=>(0,K.d1)(Te)),V).then(T,E)})}function ie(ne){return void 0===ne?"":ne=(ne=(ne=ne.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function te(ne,d){d||(d={}),"function"==typeof d&&(d={cmp:d});const T="boolean"==typeof d.cycles&&d.cycles,E=d.cmp&&(V=d.cmp,function(pe){return function(De,ve){return V({key:De,value:pe[De]},{key:ve,value:pe[ve]})}});var V;const he=[];return function pe(De){if(De&&De.toJSON&&"function"==typeof De.toJSON&&(De=De.toJSON()),void 0===De)return;if("number"==typeof De)return isFinite(De)?""+De:"null";if("object"!=typeof De)return JSON.stringify(De);let ve,Te;if(Array.isArray(De)){for(Te="[",ve=0;ve<De.length;ve++)ve&&(Te+=","),Te+=pe(De[ve])||"null";return Te+"]"}if(null===De)return"null";if(-1!==he.indexOf(De)){if(T)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const ze=he.push(De)-1,Me=Object.keys(De).sort(E&&E(De));for(Te="",ve=0;ve<Me.length;ve++){const nt=Me[ve],_e=pe(De[nt]);_e&&(Te&&(Te+=","),Te+=JSON.stringify(nt)+":"+_e)}return he.splice(ze,1),"{"+Te+"}"}(ne)}},85692:(Ie,Ce,Q)=>{Q.d(Ce,{RI:()=>O,ws:()=>H,B9:()=>Z,Es:()=>I,Ay:()=>w,s9:()=>ee,_R:()=>le,nB:()=>ue,AW:()=>y});var K=Q(49672),fe=Q(11519);function y(m,v,ie){return Math.sqrt((m[0]-v[0])**2+(m[1]-v[1])**2+(void 0!==m[2]&&void 0!==v[2]?(m[2]*ie-v[2]*ie)**2:0))}const W=[];for(const m of[[9002,56146130,6131,6132,8050,8051,8228],[9003,5702,6358,6359,6360,8052,8053],[9095,5754]]){const v=m[0];for(let ie=1;ie<m.length;ie++)W[m[ie]]=v}const z=[];function le(m){return m.vcsWkid&&void 0!==W[m.vcsWkid]?z[W[m.vcsWkid]]:m.latestVcsWkid&&void 0!==W[m.latestVcsWkid]?z[W[m.latestVcsWkid]]:1}function D(m,v,ie){const te={x:0,y:0};v&&(te.z=0),ie&&(te.m=0);let ne=0,d=m[0];for(let T=0;T<m.length;T++){const E=m[T];if(!1===G(E,d)){const V=N(d,E,v),he=S(d,E,v,ie);he.x*=V,he.y*=V,te.x+=he.x,te.y+=he.y,v&&(he.z*=V,te.z+=he.z),ie&&(he.m*=V,te.m+=he.m),ne+=V,d=E}}return ne>0?(te.x/=ne,te.y/=ne,v&&(te.z/=ne),ie&&(te.m/=ne)):(te.x=m[0][0],te.y=m[0][1],v&&(te.z=m[0][2]),ie&&v?te.m=m[0][3]:ie&&(te.m=m[0][2])),te}function S(m,v,ie,te){const ne={x:(m[0]+v[0])/2,y:(m[1]+v[1])/2};return ie&&(ne.z=(m[2]+v[2])/2),ie&&te?ne.m=(m[3]+v[3])/2:te&&(ne.m=(m[2]+v[2])/2),ne}function X(m,v){if(m.length<=1)return 0;let ie=0;for(let te=1;te<m.length;te++)ie+=N(m[te-1],m[te],v);return ie}function N(m,v,ie){const te=v[0]-m[0],ne=v[1]-m[1];if(ie){const d=v[2]-v[2];return Math.sqrt(te*te+ne*ne+d*d)}return Math.sqrt(te*te+ne*ne)}function G(m,v){if(m.length!==v.length)return!1;for(let ie=0;ie<m.length;ie++)if(m[ie]!==v[ie])return!1;return!0}function ee(m){const v={x:0,y:0,spatialReference:m.spatialReference.toJSON()},ie={x:0,y:0,spatialReference:m.spatialReference.toJSON()};let te=0,ne=0;for(let d=0;d<m.paths.length;d++){if(0===m.paths[d].length)continue;const T=X(m.paths[d],!0===m.hasZ);if(0===T){const E=D(m.paths[d],!0===m.hasZ,!0===m.hasM);v.x+=E.x,v.y+=E.y,!0===m.hasZ&&(v.z+=E.z),!0===m.hasM&&(v.m+=E.m),++te}else{const E=D(m.paths[d],!0===m.hasZ,!0===m.hasM);ie.x+=E.x*T,ie.y+=E.y*T,!0===m.hasZ&&(ie.z+=E.z*T),!0===m.hasM&&(ie.m+=E.m*T),ne+=T}}return ne>0?(ie.x/=ne,ie.y/=ne,!0===m.hasZ&&(ie.z/=ne),!0===m.hasM&&(ie.m/=ne),new K.Z(ie)):te>0?(v.x/=te,v.y/=te,!0===m.hasZ&&(ie.z/=te),!0===m.hasM&&(v.m/=te),new K.Z(v)):null}function w(m){if(0===m.points.length)return null;let v=0,ie=0,te=0,ne=0;for(let T=0;T<m.points.length;T++){const E=m.getPoint(T);!0===E.hasZ&&(te+=E.z),!0===E.hasM&&(ne+=E.m),v+=E.x,ie+=E.y,ne+=E.m}const d={x:v/m.points.length,y:ie/m.points.length,spatialReference:null};return d.spatialReference=m.spatialReference.toJSON(),!0===m.hasZ&&(d.z=te/m.points.length),!0===m.hasM&&(d.m=ne/m.points.length),new K.Z(d)}function _(m,v,ie=0){for(;m<ie;)m+=v;const te=ie+v;for(;m>=te;)m-=v;return m}function re(m,v){return Math.atan2(v.y-m.y,v.x-m.x)}function O(m,v){return _(re(m,v),2*Math.PI)*(180/Math.PI)}function Z(m,v){return _(Math.PI/2-re(m,v),2*Math.PI)*(180/Math.PI)}function se(m,v,ie){const te={x:m.x-v.x,y:m.y-v.y},ne={x:ie.x-v.x,y:ie.y-v.y};return Math.atan2(function R(m,v){return m.x*v.y-v.x*m.y}(te,ne),function g(m,v){return m.x*v.x+m.y*v.y}(te,ne))}function H(m,v,ie){return _(se(m,v,ie),2*Math.PI)*(180/Math.PI)}function I(m,v,ie){return _(-1*se(m,v,ie),2*Math.PI)*(180/Math.PI)}z[9002]=.3048,z[9003]=.3048006096012192,z[9095]=.3048007491;const $=[0,0];function ue(m){for(let v=0;v<m.length;v++){const ie=m[v];for(let ne=0;ne<ie.length-1;ne++){const d=ie[ne],T=ie[ne+1];for(let E=v+1;E<m.length;E++)for(let V=0;V<m[E].length-1;V++){const he=m[E][V],pe=m[E][V+1];if((0,fe.UT)(d,T,he,pe,$)&&!($[0]===d[0]&&$[1]===d[1]||$[0]===he[0]&&$[1]===he[1]||$[0]===T[0]&&$[1]===T[1]||$[0]===pe[0]&&$[1]===pe[1]))return!0}}const te=ie.length;if(!(te<3))for(let ne=0;ne<=te-2;ne++){const d=ie[ne],T=ie[ne+1];for(let E=ne+2;E<=te-2;E++){const V=ie[E],he=ie[E+1];if((0,fe.UT)(d,T,V,he,$)&&!($[0]===d[0]&&$[1]===d[1]||$[0]===V[0]&&$[1]===V[1]||$[0]===T[0]&&$[1]===T[1]||$[0]===he[0]&&$[1]===he[1]))return!0}}}return!1}},84228:(Ie,Ce,Q)=>{Q.d(Ce,{r:()=>ee});var K=Q(47562),fe=Q(56683),y=Q(27122);function W(w){const g=new Date(w.getTime()),R=g.getFullYear(),_=new Date(0);_.setFullYear(R+1,0,4),_.setHours(0,0,0,0);const re=z(_),O=new Date(0);O.setFullYear(R,0,4),O.setHours(0,0,0,0);const Z=z(O);return g.getTime()>=re.getTime()?R+1:g.getTime()>=Z.getTime()?R:R-1}function z(w){const R=new Date(w.getTime()),_=R.getDay(),re=(_<1?7:0)+_-1;return R.setDate(R.getDate()-re),R.setHours(0,0,0,0),R}const X=[0,31,59,90,120,151,181,212,243,273,304,334],N=[0,31,60,91,121,152,182,213,244,274,305,335];function G(w){return null===w?w:isNaN(w.getTime())?null:w}function ee(w,g){w.today=function(R,_){return g(R,_,function(re,O,Z){(0,K.p)(Z,0,0);const se=new Date;return se.setHours(0,0,0,0),se})},w.now=function(R,_){return g(R,_,function(re,O,Z){return(0,K.p)(Z,0,0),new Date})},w.timestamp=function(R,_){return g(R,_,function(re,O,Z){(0,K.p)(Z,0,0);let se=new Date;return se=new Date(se.getUTCFullYear(),se.getUTCMonth(),se.getUTCDate(),se.getUTCHours(),se.getUTCMinutes(),se.getUTCSeconds(),se.getUTCMilliseconds()),se})},w.toutc=function(R,_){return g(R,_,function(re,O,Z){(0,K.p)(Z,1,1);const se=(0,K.z)(Z[0]);return null===se?null:new Date(se.getUTCFullYear(),se.getUTCMonth(),se.getUTCDate(),se.getUTCHours(),se.getUTCMinutes(),se.getUTCSeconds(),se.getUTCMilliseconds())})},w.tolocal=function(R,_){return g(R,_,function(re,O,Z){(0,K.p)(Z,1,1);const se=(0,K.z)(Z[0]);return null===se?null:y.ou.utc(se.getFullYear(),se.getMonth()+1,se.getDate(),se.getHours(),se.getMinutes(),se.getSeconds(),se.getMilliseconds()).toJSDate()})},w.day=function(R,_){return g(R,_,function(re,O,Z){(0,K.p)(Z,1,1);const se=(0,K.z)(Z[0]);return null===se?NaN:se.getDate()})},w.month=function(R,_){return g(R,_,function(re,O,Z){(0,K.p)(Z,1,1);const se=(0,K.z)(Z[0]);return null===se?NaN:se.getMonth()})},w.year=function(R,_){return g(R,_,function(re,O,Z){(0,K.p)(Z,1,1);const se=(0,K.z)(Z[0]);return null===se?NaN:se.getFullYear()})},w.hour=function(R,_){return g(R,_,function(re,O,Z){(0,K.p)(Z,1,1);const se=(0,K.z)(Z[0]);return null===se?NaN:se.getHours()})},w.second=function(R,_){return g(R,_,function(re,O,Z){(0,K.p)(Z,1,1);const se=(0,K.z)(Z[0]);return null===se?NaN:se.getSeconds()})},w.millisecond=function(R,_){return g(R,_,function(re,O,Z){(0,K.p)(Z,1,1);const se=(0,K.z)(Z[0]);return null===se?NaN:se.getMilliseconds()})},w.minute=function(R,_){return g(R,_,function(re,O,Z){(0,K.p)(Z,1,1);const se=(0,K.z)(Z[0]);return null===se?NaN:se.getMinutes()})},w.week=function(R,_){return g(R,_,function(re,O,Z){(0,K.p)(Z,1,2);const se=(0,K.z)(Z[0]);if(null===se)return NaN;const H=(0,K.t)((0,K.E)(Z[1],0));if(H<0||H>6)throw new Error("Invalid Parameter");const I=se.getDate(),$=se.getMonth(),ue=se.getFullYear(),m=se.getDay(),v=function D(w,g,R){return w+(function S(w){return w%4==0&&(w%100!=0||w%400==0)}(R)?N:X)[g]}(I,$,ue)-1,ie=Math.floor(v/7);return m-H+(m-H<0?7:0)<v-7*ie?ie+1:ie})},w.weekday=function(R,_){return g(R,_,function(re,O,Z){(0,K.p)(Z,1,1);const se=(0,K.z)(Z[0]);return null===se?NaN:se.getDay()})},w.isoweekday=function(R,_){return g(R,_,function(re,O,Z){(0,K.p)(Z,1,1);const se=(0,K.z)(Z[0]);if(null===se)return NaN;let H=se.getDay();return 0===H&&(H=7),H})},w.isomonth=function(R,_){return g(R,_,function(re,O,Z){(0,K.p)(Z,1,1);const se=(0,K.z)(Z[0]);return null===se?NaN:se.getMonth()+1})},w.isoweek=function(R,_){return g(R,_,function(re,O,Z){(0,K.p)(Z,1,1);const se=(0,K.z)(Z[0]);if(null===se)return NaN;const H=z(se).getTime()-function le(w){const g=W(w),R=new Date(0);return R.setFullYear(g,0,4),R.setHours(0,0,0,0),z(R)}(se).getTime();return Math.round(H/6048e5)+1})},w.isoyear=function(R,_){return g(R,_,function(re,O,Z){(0,K.p)(Z,1,1);const se=(0,K.z)(Z[0]);return null===se?NaN:W(se)})},w.date=function(R,_){return g(R,_,function(re,O,Z){if((0,K.p)(Z,0,7),3===Z.length)return G(new Date((0,K.t)(Z[0]),(0,K.t)(Z[1]),(0,K.t)(Z[2]),0,0,0,0));if(4===Z.length)return G(new Date((0,K.t)(Z[0]),(0,K.t)(Z[1]),(0,K.t)(Z[2]),(0,K.t)(Z[3]),0,0,0));if(5===Z.length)return G(new Date((0,K.t)(Z[0]),(0,K.t)(Z[1]),(0,K.t)(Z[2]),(0,K.t)(Z[3]),(0,K.t)(Z[4]),0,0));if(6===Z.length)return G(new Date((0,K.t)(Z[0]),(0,K.t)(Z[1]),(0,K.t)(Z[2]),(0,K.t)(Z[3]),(0,K.t)(Z[4]),(0,K.t)(Z[5]),0));if(7===Z.length)return G(new Date((0,K.t)(Z[0]),(0,K.t)(Z[1]),(0,K.t)(Z[2]),(0,K.t)(Z[3]),(0,K.t)(Z[4]),(0,K.t)(Z[5]),(0,K.t)(Z[6])));if(2===Z.length){let se,H=(0,K.d)(Z[1]);return""===H?null:(H=(0,K.F)(H),se="X"===H?y.ou.fromSeconds((0,K.t)(Z[0])):"x"===H?y.ou.fromMillis((0,K.t)(Z[0])):y.ou.fromFormat((0,K.d)(Z[0]),H,{locale:(0,fe.Kd)(),numberingSystem:"latn"}),se.isValid?se.toJSDate():null)}if(1===Z.length){if((0,K.f)(Z[0])){if(""===Z[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(Z[0]))return(0,K.z)(Z[0]+"-01-01")}const se=(0,K.t)(Z[0]);return!1===isNaN(se)?G(new Date(se)):(0,K.z)(Z[0])}return 0===Z.length?new Date:void 0})},w.datediff=function(R,_){return g(R,_,function(re,O,Z){(0,K.p)(Z,2,3);const se=(0,K.G)(Z[0]),H=(0,K.G)(Z[1]);if(null===se||null===H)return NaN;switch((0,K.d)(Z[2]).toLowerCase()){case"days":case"day":case"d":return se.diff(H,"days").days;case"months":case"month":return se.diff(H,"months").months;case"minutes":case"minute":case"m":return"M"===Z[2]?se.diff(H,"months").months:se.diff(H,"minutes").minutes;case"seconds":case"second":case"s":return se.diff(H,"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return se.diff(H).milliseconds;case"hours":case"hour":case"h":return se.diff(H,"hours").hours;case"years":case"year":case"y":return se.diff(H,"years").years}})},w.dateadd=function(R,_){return g(R,_,function(re,O,Z){(0,K.p)(Z,2,3);const se=(0,K.G)(Z[0]);if(null===se)return null;let H=(0,K.t)(Z[1]);if(isNaN(H))return se.toJSDate();let I="milliseconds";switch((0,K.d)(Z[2]).toLowerCase()){case"days":case"day":case"d":I="days",H=(0,K.H)(H);break;case"months":case"month":I="months",H=(0,K.H)(H);break;case"minutes":case"minute":case"m":I="M"===Z[2]?"months":"minutes";break;case"seconds":case"second":case"s":I="seconds";break;case"milliseconds":case"millisecond":case"ms":I="milliseconds";break;case"hours":case"hour":case"h":I="hours";break;case"years":case"year":case"y":I="years"}return se.plus({[I]:H}).toJSDate()})}}},50818:(Ie,Ce,Q)=>{Q.d(Ce,{t:()=>D});var K=Q(47562);function fe(S){let X=0;for(let N=0;N<S.length;N++)X+=S[N];return X/S.length}function y(S){const X=fe(S);let N=0;for(let G=0;G<S.length;G++)N+=(X-S[G])**2;return N/S.length}function D(S,X,N=1e3){switch(S.toLowerCase()){case"distinct":return function z(S,X){const N=[],G={},ee=[];for(let w=0;w<S.length;w++){if(null!=S[w]&&S[w]!==K.v){const g=S[w];if((0,K.j)(g)||(0,K.f)(g))void 0===G[g]&&(N.push(g),G[g]=1);else{let R=!1;for(let _=0;_<ee.length;_++)!0===(0,K.e)(ee[_],g)&&(R=!0);!1===R&&(ee.push(g),N.push(g))}}if(N.length>=X&&-1!==X)return N}return N}(X,N);case"avg":case"mean":return fe((0,K.T)(X));case"min":return Math.min.apply(Math,(0,K.T)(X));case"sum":return function W(S){let X=0;for(let N=0;N<S.length;N++)X+=S[N];return X}((0,K.T)(X));case"max":return Math.max.apply(Math,(0,K.T)(X));case"stdev":case"stddev":return Math.sqrt(y((0,K.T)(X)));case"var":case"variance":return y((0,K.T)(X));case"count":return X.length}return 0}},24499:(Ie,Ce,Q)=>{Q.d(Ce,{r:()=>R});var K=Q(6729),fe=Q(42275),y=Q(26685),W=Q(47562),z=Q(2004),le=Q(21674),D=Q(72854),S=Q(49672),X=Q(37118),N=Q(55214),G=Q(85692),ee=Q(91179),w=Q(25748);function g(_){return _&&(_ instanceof fe.Z||"object"==typeof _&&"FeatureSetReader"===_.type)}function R(_,re){_.ringisclockwise=function(O,Z){return re(O,Z,function(se,H,I){(0,W.p)(I,1,1);let $=[],ue=!1,m=!1;if(null===I[0])return!1;if((0,W.a)(I[0])){for(const v of I[0]){if(!(v instanceof S.Z))throw new Error("Invalid Argument");$.push(v.hasZ?v.hasM?[v.x,v.y,v.z,v.m]:[v.x,v.y,v.z]:[v.x,v.y])}$.length>0&&(ue=I[0][0].hasZ,m=I[0][0].hasM)}else if(I[0]instanceof y.Z)$=I[0]._elements,$.length>0&&(ue=I[0]._hasZ,m=I[0]._hasM);else{if(!(0,W.b)(I[0]))throw new Error("Invalid Argument");for(const v of I[0].toArray()){if(!(v instanceof S.Z))throw new Error("Invalid Argument");$.push(v.hasZ?v.hasM?[v.x,v.y,v.z,v.m]:[v.x,v.y,v.z]:[v.x,v.y])}$.length>0&&(ue=I[0].get(0).hasZ,m=I[0].get(0).hasM)}return!($.length<3)&&(0,w.bu)($,m,ue)})},_.polygon=function(O,Z){return re(O,Z,function(se,H,I){(0,W.p)(I,1,1);let $=null;if(I[0]instanceof K.Z){if($=(0,W.r)(fe.Z.parseGeometryFromDictionary(I[0]),O.spatialReference),!($ instanceof X.Z))throw new Error("Illegal Parameter")}else $=I[0]instanceof X.Z?(0,ee.im)(I[0].toJSON()):(0,W.r)(new X.Z(JSON.parse(I[0])),O.spatialReference);if(null!==$&&!1===$.spatialReference.equals(O.spatialReference))throw new Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return(0,W.J)($)})},_.polyline=function(O,Z){return re(O,Z,function(se,H,I){(0,W.p)(I,1,1);let $=null;if(I[0]instanceof K.Z){if($=(0,W.r)(fe.Z.parseGeometryFromDictionary(I[0]),O.spatialReference),!($ instanceof N.Z))throw new Error("Illegal Parameter")}else $=I[0]instanceof N.Z?(0,ee.im)(I[0].toJSON()):(0,W.r)(new N.Z(JSON.parse(I[0])),O.spatialReference);if(null!==$&&!1===$.spatialReference.equals(O.spatialReference))throw new Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return(0,W.J)($)})},_.point=function(O,Z){return re(O,Z,function(se,H,I){(0,W.p)(I,1,1);let $=null;if(I[0]instanceof K.Z){if($=(0,W.r)(fe.Z.parseGeometryFromDictionary(I[0]),O.spatialReference),!($ instanceof S.Z))throw new Error("Illegal Parameter")}else $=I[0]instanceof S.Z?(0,ee.im)(I[0].toJSON()):(0,W.r)(new S.Z(JSON.parse(I[0])),O.spatialReference);if(null!==$&&!1===$.spatialReference.equals(O.spatialReference))throw new Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return(0,W.J)($)})},_.multipoint=function(O,Z){return re(O,Z,function(se,H,I){(0,W.p)(I,1,1);let $=null;if(I[0]instanceof K.Z){if($=(0,W.r)(fe.Z.parseGeometryFromDictionary(I[0]),O.spatialReference),!($ instanceof D.Z))throw new Error("Illegal Parameter")}else $=I[0]instanceof D.Z?(0,ee.im)(I[0].toJSON()):(0,W.r)(new D.Z(JSON.parse(I[0])),O.spatialReference);if(null!==$&&!1===$.spatialReference.equals(O.spatialReference))throw new Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return(0,W.J)($)})},_.extent=function(O,Z){return re(O,Z,function(se,H,I){I=(0,W.K)(I),(0,W.p)(I,1,1);let $=null;if(I[0]instanceof K.Z)$=(0,W.r)(fe.Z.parseGeometryFromDictionary(I[0]),O.spatialReference);else if(I[0]instanceof S.Z){const ue={xmin:I[0].x,ymin:I[0].y,xmax:I[0].x,ymax:I[0].y,spatialReference:I[0].spatialReference.toJSON()},m=I[0];m.hasZ?(ue.zmin=m.z,ue.zmax=m.z):m.hasM&&(ue.mmin=m.m,ue.mmax=m.m),$=(0,ee.im)(ue)}else $=I[0]instanceof X.Z||I[0]instanceof N.Z||I[0]instanceof D.Z?(0,ee.im)(I[0].extent.toJSON()):I[0]instanceof z.Z?(0,ee.im)(I[0].toJSON()):(0,W.r)(new z.Z(JSON.parse(I[0])),O.spatialReference);if(null!==$&&!1===$.spatialReference.equals(O.spatialReference))throw new Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return(0,W.J)($)})},_.geometry=function(O,Z){return re(O,Z,function(se,H,I){(0,W.p)(I,1,1);let $=null;if(null===I[0])return null;if($=g(I[0])?(0,W.r)(I[0].geometry(),O.spatialReference):(0,W.r)(I[0]instanceof K.Z?fe.Z.parseGeometryFromDictionary(I[0]):(0,ee.im)(JSON.parse(I[0])),O.spatialReference),null!==$&&!1===$.spatialReference.equals(O.spatialReference))throw new Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return(0,W.J)($)})},_.setgeometry=function(O,Z){return re(O,Z,function(se,H,I){if((0,W.p)(I,2,2),!g(I[0]))throw new Error("Illegal Argument");if(!0===I[0].immutable)throw new Error("Feature is Immutable");if(!(I[1]instanceof le.Z||null===I[1]))throw new Error("Illegal Argument");return I[0]._geometry=I[1],W.v})},_.feature=function(O,Z){return re(O,Z,function(se,H,I){if(0===I.length)throw new Error("Missing Parameters");let $=null;if(1===I.length)if((0,W.f)(I[0]))$=fe.Z.fromJson(JSON.parse(I[0]));else if(g(I[0]))$=fe.Z.createFromArcadeFeature(I[0]);else if(I[0]instanceof le.Z)$=fe.Z.createFromGraphicLikeObject(I[0],null,null);else{if(!(I[0]instanceof K.Z))throw new Error("Illegal Argument");{let ue=I[0].hasField("geometry")?I[0].field("geometry"):null,m=I[0].hasField("attributes")?I[0].field("attributes"):null;null!==ue&&ue instanceof K.Z&&(ue=fe.Z.parseGeometryFromDictionary(ue)),null!==m&&(m=fe.Z.parseAttributesFromDictionary(m)),$=fe.Z.createFromGraphicLikeObject(ue,m,null)}}else if(2===I.length){let ue=null,m=null;if(null!==I[0])if(I[0]instanceof le.Z)ue=I[0];else{if(!(ue instanceof K.Z))throw new Error("Illegal Argument");ue=fe.Z.parseGeometryFromDictionary(I[0])}if(null!==I[1]){if(!(I[1]instanceof K.Z))throw new Error("Illegal Argument");m=fe.Z.parseAttributesFromDictionary(I[1])}$=fe.Z.createFromGraphicLikeObject(ue,m,null)}else{let ue=null;const m={};if(null!==I[0])if(I[0]instanceof le.Z)ue=I[0];else{if(!(ue instanceof K.Z))throw new Error("Illegal Argument");ue=fe.Z.parseGeometryFromDictionary(I[0])}for(let v=1;v<I.length;v+=2){const ie=(0,W.d)(I[v]),te=I[v+1];if(!(null==te||(0,W.f)(te)||isNaN(te)||(0,W.n)(te)||(0,W.j)(te)||(0,W.i)(te)))throw new Error("Illegal Argument");if((0,W.c)(te)||!1===(0,W.x)(te))throw new Error("Illegal Argument");m[ie]=te===W.v?null:te}$=fe.Z.createFromGraphicLikeObject(ue,m,null)}return $._geometry=(0,W.r)($.geometry(),O.spatialReference),$.immutable=!1,$})},_.dictionary=function(O,Z){return re(O,Z,function(se,H,I){if(0===I.length){const m=new K.Z;return m.immutable=!1,m}if(1===I.length&&(0,W.f)(I[0]))try{const m=JSON.parse(I[0]),v=K.Z.convertObjectToArcadeDictionary(m,!1);return v.immutable=!1,v}catch(m){throw new Error("Missing Parameters or Illegal Json")}if(I.length%2!=0)throw new Error("Missing Parameters");const $={};for(let m=0;m<I.length;m+=2){const v=(0,W.d)(I[m]),ie=I[m+1];if(!(null==ie||(0,W.f)(ie)||isNaN(ie)||(0,W.n)(ie)||(0,W.j)(ie)||(0,W.i)(ie)||(0,W.a)(ie)||(0,W.b)(ie)))throw new Error("Illegal Argument");if((0,W.c)(ie))throw new Error("Illegal Argument");$[v]=ie===W.v?null:ie}const ue=new K.Z($);return ue.immutable=!1,ue})},_.haskey=function(O,Z){return re(O,Z,function(se,H,I){(0,W.p)(I,2,2);const $=(0,W.d)(I[1]);if(g(I[0])||I[0]instanceof K.Z)return I[0].hasField($);throw new Error("Illegal Argument")})},_.indexof=function(O,Z){return re(O,Z,function(se,H,I){(0,W.p)(I,2,2);const $=I[1];if((0,W.a)(I[0])){for(let ue=0;ue<I[0].length;ue++)if((0,W.e)($,I[0][ue]))return ue;return-1}if((0,W.b)(I[0])){const ue=I[0].length();for(let m=0;m<ue;m++)if((0,W.e)($,I[0].get(m)))return m;return-1}throw new Error("Illegal Argument")})},_.angle=function(O,Z){return re(O,Z,function(se,H,I){if(I=(0,W.K)(I),(0,W.p)(I,2,3),!(I[0]instanceof S.Z))throw new Error("Illegal Argument");if(!(I[1]instanceof S.Z))throw new Error("Illegal Argument");if(I.length>2&&!(I[2]instanceof S.Z))throw new Error("Illegal Argument");return 2===I.length?(0,G.RI)(I[0],I[1]):(0,G.ws)(I[0],I[1],I[2])})},_.bearing=function(O,Z){return re(O,Z,function(se,H,I){if(I=(0,W.K)(I),(0,W.p)(I,2,3),!(I[0]instanceof S.Z))throw new Error("Illegal Argument");if(!(I[1]instanceof S.Z))throw new Error("Illegal Argument");if(I.length>2&&!(I[2]instanceof S.Z))throw new Error("Illegal Argument");return 2===I.length?(0,G.B9)(I[0],I[1]):(0,G.Es)(I[0],I[1],I[2])})},_.isselfintersecting=function(O,Z){return re(O,Z,function(se,H,I){I=(0,W.K)(I),(0,W.p)(I,1,1);let $=I[0];if($ instanceof X.Z)return $.isSelfIntersecting;if($ instanceof N.Z)return $=$.paths,(0,G.nB)($);if($ instanceof D.Z){const ue=$.points;for(let m=0;m<ue.length;m++)for(let v=0;v<ue.length;v++)if(v!==m){let ie=!0;for(let te=0;te<ue[m].length;te++)if(ue[m][te]!==ue[v][te]){ie=!1;break}if(!0===ie)return!0}}return!(!(0,W.a)($)&&!(0,W.b)($))&&($=(0,W.L)($,O.spatialReference),null!==$&&($=$.paths),(0,G.nB)($))})}}},63461:(Ie,Ce,Q)=>{Q.r(Ce),Q.d(Ce,{registerFunctions:()=>re,setGeometryEngine:()=>R});var K=Q(24263),fe=Q(27187),y=Q(47562),W=Q(85692),z=Q(2004),le=Q(21674),D=Q(72854),S=Q(49672),X=Q(37118),N=Q(55214),G=Q(91179),ee=Q(16730);let w=null;function g(O){return 0===K.i8.indexOf("4.")?X.Z.fromExtent(O):new X.Z({spatialReference:O.spatialReference,rings:[[[O.xmin,O.ymin],[O.xmin,O.ymax],[O.xmax,O.ymax],[O.xmax,O.ymin],[O.xmin,O.ymin]]]})}function R(O){w=O}function _(O,Z){if("polygon"!==O.type&&"polyline"!==O.type&&"extent"!==O.type)return 0;let se=1;(O.spatialReference.vcsWkid||O.spatialReference.latestVcsWkid)&&(se=(0,W._R)(O.spatialReference)/(0,ee.c9)(O.spatialReference));let H=0;if("polyline"===O.type)for(const $ of O.paths)for(let ue=1;ue<$.length;ue++)H+=(0,W.AW)($[ue],$[ue-1],se);else if("polygon"===O.type)for(const $ of O.rings){for(let ue=1;ue<$.length;ue++)H+=(0,W.AW)($[ue],$[ue-1],se);($[0][0]!==$[$.length-1][0]||$[0][1]!==$[$.length-1][1]||void 0!==$[0][2]&&$[0][2]!==$[$.length-1][2])&&(H+=(0,W.AW)($[0],$[$.length-1],se))}else"extent"===O.type&&(H+=2*(0,W.AW)([O.xmin,O.ymin,0],[O.xmax,O.ymin,0],se),H+=2*(0,W.AW)([O.xmin,O.ymin,0],[O.xmin,O.ymax,0],se),H*=2,H+=4*Math.abs((0,y.E)(O.zmax,0)*se-(0,y.E)(O.zmin,0)*se));const I=new N.Z({hasZ:!1,hasM:!1,spatialReference:O.spatialReference,paths:[[0,0],[0,H]]});return w.planarLength(I,Z)}function re(O,Z){function se(H){if((0,y.p)(H,2,2),!(H[0]instanceof le.Z&&H[1]instanceof le.Z||H[0]instanceof le.Z&&null===H[1]||H[1]instanceof le.Z&&null===H[0]||null===H[0]&&null===H[1]))throw new Error("Illegal Argument")}O.disjoint=function(H,I){return Z(H,I,function($,ue,m){return se(m=(0,y.K)(m)),null===m[0]||null===m[1]||w.disjoint(m[0],m[1])})},O.intersects=function(H,I){return Z(H,I,function($,ue,m){return se(m=(0,y.K)(m)),null!==m[0]&&null!==m[1]&&w.intersects(m[0],m[1])})},O.touches=function(H,I){return Z(H,I,function($,ue,m){return se(m=(0,y.K)(m)),null!==m[0]&&null!==m[1]&&w.touches(m[0],m[1])})},O.crosses=function(H,I){return Z(H,I,function($,ue,m){return se(m=(0,y.K)(m)),null!==m[0]&&null!==m[1]&&w.crosses(m[0],m[1])})},O.within=function(H,I){return Z(H,I,function($,ue,m){return se(m=(0,y.K)(m)),null!==m[0]&&null!==m[1]&&w.within(m[0],m[1])})},O.contains=function(H,I){return Z(H,I,function($,ue,m){return se(m=(0,y.K)(m)),null!==m[0]&&null!==m[1]&&w.contains(m[0],m[1])})},O.overlaps=function(H,I){return Z(H,I,function($,ue,m){return se(m=(0,y.K)(m)),null!==m[0]&&null!==m[1]&&w.overlaps(m[0],m[1])})},O.equals=function(H,I){return Z(H,I,function($,ue,m){return(0,y.p)(m,2,2),m[0]===m[1]||(m[0]instanceof le.Z&&m[1]instanceof le.Z?w.equals(m[0],m[1]):!(!(0,y.n)(m[0])||!(0,y.n)(m[1]))&&m[0].getTime()===m[1].getTime())})},O.relate=function(H,I){return Z(H,I,function($,ue,m){if(m=(0,y.K)(m),(0,y.p)(m,3,3),m[0]instanceof le.Z&&m[1]instanceof le.Z)return w.relate(m[0],m[1],(0,y.d)(m[2]));if(m[0]instanceof le.Z&&null===m[1]||m[1]instanceof le.Z&&null===m[0]||null===m[0]&&null===m[1])return!1;throw new Error("Illegal Argument")})},O.intersection=function(H,I){return Z(H,I,function($,ue,m){return se(m=(0,y.K)(m)),null===m[0]||null===m[1]?null:w.intersect(m[0],m[1])})},O.union=function(H,I){return Z(H,I,function($,ue,m){const v=[];if(0===(m=(0,y.K)(m)).length)throw new Error("Function called with wrong number of Parameters");if(1===m.length)if((0,y.a)(m[0])){const ie=(0,y.K)(m[0]);for(let te=0;te<ie.length;te++)if(null!==ie[te]){if(!(ie[te]instanceof le.Z))throw new Error("Illegal Argument");v.push(ie[te])}}else{if(!(0,y.b)(m[0])){if(m[0]instanceof le.Z)return(0,y.r)((0,fe.r1)(m[0]),H.spatialReference);if(null===m[0])return null;throw new Error("Illegal Argument")}{const ie=(0,y.K)(m[0].toArray());for(let te=0;te<ie.length;te++)if(null!==ie[te]){if(!(ie[te]instanceof le.Z))throw new Error("Illegal Argument");v.push(ie[te])}}}else for(let ie=0;ie<m.length;ie++)if(null!==m[ie]){if(!(m[ie]instanceof le.Z))throw new Error("Illegal Argument");v.push(m[ie])}return 0===v.length?null:w.union(v)})},O.difference=function(H,I){return Z(H,I,function($,ue,m){return se(m=(0,y.K)(m)),null!==m[0]&&null===m[1]?(0,fe.r1)(m[0]):null===m[0]?null:w.difference(m[0],m[1])})},O.symmetricdifference=function(H,I){return Z(H,I,function($,ue,m){return se(m=(0,y.K)(m)),null===m[0]&&null===m[1]?null:null===m[0]?(0,fe.r1)(m[1]):null===m[1]?(0,fe.r1)(m[0]):w.symmetricDifference(m[0],m[1])})},O.clip=function(H,I){return Z(H,I,function($,ue,m){if(m=(0,y.K)(m),(0,y.p)(m,2,2),!(m[1]instanceof z.Z)&&null!==m[1])throw new Error("Illegal Argument");if(null===m[0])return null;if(!(m[0]instanceof le.Z))throw new Error("Illegal Argument");return null===m[1]?null:w.clip(m[0],m[1])})},O.cut=function(H,I){return Z(H,I,function($,ue,m){if(m=(0,y.K)(m),(0,y.p)(m,2,2),!(m[1]instanceof N.Z)&&null!==m[1])throw new Error("Illegal Argument");if(null===m[0])return[];if(!(m[0]instanceof le.Z))throw new Error("Illegal Argument");return null===m[1]?[(0,fe.r1)(m[0])]:w.cut(m[0],m[1])})},O.area=function(H,I){return Z(H,I,function($,ue,m){if((0,y.p)(m,1,2),null===(m=(0,y.K)(m))[0])return 0;if((0,y.a)(m[0])||(0,y.b)(m[0])){const v=(0,y.M)(m[0],H.spatialReference);return null===v?0:w.planarArea(v,(0,fe.EI)((0,y.E)(m[1],-1)))}if(!(m[0]instanceof le.Z))throw new Error("Illegal Argument");return w.planarArea(m[0],(0,fe.EI)((0,y.E)(m[1],-1)))})},O.areageodetic=function(H,I){return Z(H,I,function($,ue,m){if((0,y.p)(m,1,2),null===(m=(0,y.K)(m))[0])return 0;if((0,y.a)(m[0])||(0,y.b)(m[0])){const v=(0,y.M)(m[0],H.spatialReference);return null===v?0:w.geodesicArea(v,(0,fe.EI)((0,y.E)(m[1],-1)))}if(!(m[0]instanceof le.Z))throw new Error("Illegal Argument");return w.geodesicArea(m[0],(0,fe.EI)((0,y.E)(m[1],-1)))})},O.length=function(H,I){return Z(H,I,function($,ue,m){if((0,y.p)(m,1,2),null===(m=(0,y.K)(m))[0])return 0;if((0,y.a)(m[0])||(0,y.b)(m[0])){const v=(0,y.L)(m[0],H.spatialReference);return null===v?0:w.planarLength(v,(0,fe.Lz)((0,y.E)(m[1],-1)))}if(!(m[0]instanceof le.Z))throw new Error("Illegal Argument");return w.planarLength(m[0],(0,fe.Lz)((0,y.E)(m[1],-1)))})},O.length3d=function(H,I){return Z(H,I,function($,ue,m){if((0,y.p)(m,1,2),null===(m=(0,y.K)(m))[0])return 0;if((0,y.a)(m[0])||(0,y.b)(m[0])){const v=(0,y.L)(m[0],H.spatialReference);return null===v?0:!0===v.hasZ?_(v,(0,fe.Lz)((0,y.E)(m[1],-1))):w.planarLength(v,(0,fe.Lz)((0,y.E)(m[1],-1)))}if(!(m[0]instanceof le.Z))throw new Error("Illegal Argument");return!0===m[0].hasZ?_(m[0],(0,fe.Lz)((0,y.E)(m[1],-1))):w.planarLength(m[0],(0,fe.Lz)((0,y.E)(m[1],-1)))})},O.lengthgeodetic=function(H,I){return Z(H,I,function($,ue,m){if((0,y.p)(m,1,2),null===(m=(0,y.K)(m))[0])return 0;if((0,y.a)(m[0])||(0,y.b)(m[0])){const v=(0,y.L)(m[0],H.spatialReference);return null===v?0:w.geodesicLength(v,(0,fe.Lz)((0,y.E)(m[1],-1)))}if(!(m[0]instanceof le.Z))throw new Error("Illegal Argument");return w.geodesicLength(m[0],(0,fe.Lz)((0,y.E)(m[1],-1)))})},O.distance=function(H,I){return Z(H,I,function($,ue,m){m=(0,y.K)(m),(0,y.p)(m,2,3);let v=m[0];((0,y.a)(m[0])||(0,y.b)(m[0]))&&(v=(0,y.O)(m[0],H.spatialReference));let ie=m[1];if(((0,y.a)(m[1])||(0,y.b)(m[1]))&&(ie=(0,y.O)(m[1],H.spatialReference)),!(v instanceof le.Z))throw new Error("Illegal Argument");if(!(ie instanceof le.Z))throw new Error("Illegal Argument");return w.distance(v,ie,(0,fe.Lz)((0,y.E)(m[2],-1)))})},O.distancegeodetic=function(H,I){return Z(H,I,function($,ue,m){m=(0,y.K)(m),(0,y.p)(m,2,3);const v=m[0],ie=m[1];if(!(v instanceof S.Z))throw new Error("Illegal Argument");if(!(ie instanceof S.Z))throw new Error("Illegal Argument");const te=new N.Z({paths:[],spatialReference:v.spatialReference});return te.addPath([v,ie]),w.geodesicLength(te,(0,fe.Lz)((0,y.E)(m[2],-1)))})},O.densify=function(H,I){return Z(H,I,function($,ue,m){if(m=(0,y.K)(m),(0,y.p)(m,2,3),null===m[0])return null;if(!(m[0]instanceof le.Z))throw new Error("Illegal Argument");const v=(0,y.t)(m[1]);if(isNaN(v))throw new Error("Illegal Argument");if(v<=0)throw new Error("Illegal Argument");return m[0]instanceof X.Z||m[0]instanceof N.Z?w.densify(m[0],v,(0,fe.Lz)((0,y.E)(m[2],-1))):m[0]instanceof z.Z?w.densify(g(m[0]),v,(0,fe.Lz)((0,y.E)(m[2],-1))):m[0]})},O.densifygeodetic=function(H,I){return Z(H,I,function($,ue,m){if(m=(0,y.K)(m),(0,y.p)(m,2,3),null===m[0])return null;if(!(m[0]instanceof le.Z))throw new Error("Illegal Argument");const v=(0,y.t)(m[1]);if(isNaN(v))throw new Error("Illegal Argument");if(v<=0)throw new Error("Illegal Argument");return m[0]instanceof X.Z||m[0]instanceof N.Z?w.geodesicDensify(m[0],v,(0,fe.Lz)((0,y.E)(m[2],-1))):m[0]instanceof z.Z?w.geodesicDensify(g(m[0]),v,(0,fe.Lz)((0,y.E)(m[2],-1))):m[0]})},O.generalize=function(H,I){return Z(H,I,function($,ue,m){if(m=(0,y.K)(m),(0,y.p)(m,2,4),null===m[0])return null;if(!(m[0]instanceof le.Z))throw new Error("Illegal Argument");const v=(0,y.t)(m[1]);if(isNaN(v))throw new Error("Illegal Argument");return w.generalize(m[0],v,(0,y.y)((0,y.E)(m[2],!0)),(0,fe.Lz)((0,y.E)(m[3],-1)))})},O.buffer=function(H,I){return Z(H,I,function($,ue,m){if(m=(0,y.K)(m),(0,y.p)(m,2,3),null===m[0])return null;if(!(m[0]instanceof le.Z))throw new Error("Illegal Argument");const v=(0,y.t)(m[1]);if(isNaN(v))throw new Error("Illegal Argument");return 0===v?(0,fe.r1)(m[0]):w.buffer(m[0],v,(0,fe.Lz)((0,y.E)(m[2],-1)))})},O.buffergeodetic=function(H,I){return Z(H,I,function($,ue,m){if(m=(0,y.K)(m),(0,y.p)(m,2,3),null===m[0])return null;if(!(m[0]instanceof le.Z))throw new Error("Illegal Argument");const v=(0,y.t)(m[1]);if(isNaN(v))throw new Error("Illegal Argument");return 0===v?(0,fe.r1)(m[0]):w.geodesicBuffer(m[0],v,(0,fe.Lz)((0,y.E)(m[2],-1)))})},O.offset=function(H,I){return Z(H,I,function($,ue,m){if(m=(0,y.K)(m),(0,y.p)(m,2,6),null===m[0])return null;if(!(m[0]instanceof X.Z||m[0]instanceof N.Z))throw new Error("Illegal Argument");const v=(0,y.t)(m[1]);if(isNaN(v))throw new Error("Illegal Argument");const ie=(0,y.t)((0,y.E)(m[4],10));if(isNaN(ie))throw new Error("Illegal Argument");const te=(0,y.t)((0,y.E)(m[5],0));if(isNaN(te))throw new Error("Illegal Argument");return w.offset(m[0],v,(0,fe.Lz)((0,y.E)(m[2],-1)),(0,y.d)((0,y.E)(m[3],"round")).toLowerCase(),ie,te)})},O.rotate=function(H,I){return Z(H,I,function($,ue,m){m=(0,y.K)(m),(0,y.p)(m,2,3);let v=m[0];if(null===v)return null;if(!(v instanceof le.Z))throw new Error("Illegal Argument");v instanceof z.Z&&(v=X.Z.fromExtent(v));const ie=(0,y.t)(m[1]);if(isNaN(ie))throw new Error("Illegal Argument");const te=(0,y.E)(m[2],null);if(null===te)return w.rotate(v,ie);if(te instanceof S.Z)return w.rotate(v,ie,te);throw new Error("Illegal Argument")})},O.centroid=function(H,I){return Z(H,I,function($,ue,m){if(m=(0,y.K)(m),(0,y.p)(m,1,1),null===m[0])return null;let v=m[0];if(((0,y.a)(m[0])||(0,y.b)(m[0]))&&(v=(0,y.O)(m[0],H.spatialReference)),null===v)return null;if(!(v instanceof le.Z))throw new Error("Illegal Argument");return v instanceof S.Z?(0,y.r)((0,fe.r1)(m[0]),H.spatialReference):v instanceof X.Z?v.centroid:v instanceof N.Z?(0,W.s9)(v):v instanceof D.Z?(0,W.Ay)(v):v instanceof z.Z?v.center:null})},O.multiparttosinglepart=function(H,I){return Z(H,I,function($,ue,m){m=(0,y.K)(m),(0,y.p)(m,1,1);const v=[];if(null===m[0])return null;if(!(m[0]instanceof le.Z))throw new Error("Illegal Argument");if(m[0]instanceof S.Z)return[(0,y.r)((0,fe.r1)(m[0]),H.spatialReference)];if(m[0]instanceof z.Z)return[(0,y.r)((0,fe.r1)(m[0]),H.spatialReference)];const ie=w.simplify(m[0]);if(ie instanceof X.Z){const te=[],ne=[];for(let d=0;d<ie.rings.length;d++)if(ie.isClockwise(ie.rings[d])){const T=(0,G.im)({rings:[ie.rings[d]],hasZ:!0===ie.hasZ,hasM:!0===ie.hasM,spatialReference:ie.spatialReference.toJSON()});te.push(T)}else ne.push({ring:ie.rings[d],pt:ie.getPoint(d,0)});for(let d=0;d<ne.length;d++)for(let T=0;T<te.length;T++)if(te[T].contains(ne[d].pt)){te[T].addRing(ne[d].ring);break}return te}if(ie instanceof N.Z){const te=[];for(let ne=0;ne<ie.paths.length;ne++){const d=(0,G.im)({paths:[ie.paths[ne]],hasZ:!0===ie.hasZ,hasM:!0===ie.hasM,spatialReference:ie.spatialReference.toJSON()});te.push(d)}return te}if(m[0]instanceof D.Z){const te=(0,y.r)((0,fe.r1)(m[0]),H.spatialReference);for(let ne=0;ne<te.points.length;ne++)v.push(te.getPoint(ne));return v}return null})},O.issimple=function(H,I){return Z(H,I,function($,ue,m){if(m=(0,y.K)(m),(0,y.p)(m,1,1),null===m[0])return!0;if(!(m[0]instanceof le.Z))throw new Error("Illegal Argument");return w.isSimple(m[0])})},O.simplify=function(H,I){return Z(H,I,function($,ue,m){if(m=(0,y.K)(m),(0,y.p)(m,1,1),null===m[0])return null;if(!(m[0]instanceof le.Z))throw new Error("Illegal Argument");return w.simplify(m[0])})}}},53840:(Ie,Ce,Q)=>{Q.d(Ce,{r:()=>W});var K=Q(47562),fe=Q(75327);function y(z,le,D){return void 0===D||0==+D?Math[z](le):(le=+le,D=+D,isNaN(le)||"number"!=typeof D||D%1!=0?NaN:(le=le.toString().split("e"),+((le=(le=Math[z](+(le[0]+"e"+(le[1]?+le[1]-D:-D)))).toString().split("e"))[0]+"e"+(le[1]?+le[1]+D:D))))}function W(z,le){function D(S,X,N){const G=(0,K.t)(S);return isNaN(G)?G:isNaN(X)||isNaN(N)||X>N?NaN:G<X?X:G>N?N:G}z.number=function(S,X){return le(S,X,function(N,G,ee){(0,K.p)(ee,1,2);const w=ee[0];if((0,K.j)(w))return w;if(null===w)return 0;if((0,K.n)(w)||(0,K.i)(w))return Number(w);if((0,K.a)(w))return NaN;if(""===w||void 0===w)return Number(w);if((0,K.f)(w)){if(void 0!==ee[1]){let g=(0,K.P)(ee[1],"\u2030","");return g=(0,K.P)(g,"\xa4",""),(0,fe.Qc)(w,{pattern:g})}return Number(w.trim())}return Number(w)})},z.abs=function(S,X){return le(S,X,function(N,G,ee){return(0,K.p)(ee,1,1),Math.abs((0,K.t)(ee[0]))})},z.acos=function(S,X){return le(S,X,function(N,G,ee){return(0,K.p)(ee,1,1),Math.acos((0,K.t)(ee[0]))})},z.asin=function(S,X){return le(S,X,function(N,G,ee){return(0,K.p)(ee,1,1),Math.asin((0,K.t)(ee[0]))})},z.atan=function(S,X){return le(S,X,function(N,G,ee){return(0,K.p)(ee,1,1),Math.atan((0,K.t)(ee[0]))})},z.atan2=function(S,X){return le(S,X,function(N,G,ee){return(0,K.p)(ee,2,2),Math.atan2((0,K.t)(ee[0]),(0,K.t)(ee[1]))})},z.ceil=function(S,X){return le(S,X,function(N,G,ee){if((0,K.p)(ee,1,2),2===ee.length){let w=(0,K.t)(ee[1]);return isNaN(w)&&(w=0),y("ceil",(0,K.t)(ee[0]),-1*w)}return Math.ceil((0,K.t)(ee[0]))})},z.round=function(S,X){return le(S,X,function(N,G,ee){if((0,K.p)(ee,1,2),2===ee.length){let w=(0,K.t)(ee[1]);return isNaN(w)&&(w=0),y("round",(0,K.t)(ee[0]),-1*w)}return Math.round((0,K.t)(ee[0]))})},z.floor=function(S,X){return le(S,X,function(N,G,ee){if((0,K.p)(ee,1,2),2===ee.length){let w=(0,K.t)(ee[1]);return isNaN(w)&&(w=0),y("floor",(0,K.t)(ee[0]),-1*w)}return Math.floor((0,K.t)(ee[0]))})},z.cos=function(S,X){return le(S,X,function(N,G,ee){return(0,K.p)(ee,1,1),Math.cos((0,K.t)(ee[0]))})},z.isnan=function(S,X){return le(S,X,function(N,G,ee){return(0,K.p)(ee,1,1),"number"==typeof ee[0]&&isNaN(ee[0])})},z.exp=function(S,X){return le(S,X,function(N,G,ee){return(0,K.p)(ee,1,1),Math.exp((0,K.t)(ee[0]))})},z.log=function(S,X){return le(S,X,function(N,G,ee){return(0,K.p)(ee,1,1),Math.log((0,K.t)(ee[0]))})},z.pow=function(S,X){return le(S,X,function(N,G,ee){return(0,K.p)(ee,2,2),(0,K.t)(ee[0])**(0,K.t)(ee[1])})},z.random=function(S,X){return le(S,X,function(N,G,ee){return(0,K.p)(ee,0,0),Math.random()})},z.sin=function(S,X){return le(S,X,function(N,G,ee){return(0,K.p)(ee,1,1),Math.sin((0,K.t)(ee[0]))})},z.sqrt=function(S,X){return le(S,X,function(N,G,ee){return(0,K.p)(ee,1,1),Math.sqrt((0,K.t)(ee[0]))})},z.tan=function(S,X){return le(S,X,function(N,G,ee){return(0,K.p)(ee,1,1),Math.tan((0,K.t)(ee[0]))})},z.defaultvalue=function(S,X){return le(S,X,function(N,G,ee){return(0,K.p)(ee,2,2),null===ee[0]||""===ee[0]||void 0===ee[0]?ee[1]:ee[0]})},z.isempty=function(S,X){return le(S,X,function(N,G,ee){return(0,K.p)(ee,1,1),null===ee[0]||""===ee[0]||void 0===ee[0]})},z.boolean=function(S,X){return le(S,X,function(N,G,ee){return(0,K.p)(ee,1,1),(0,K.y)(ee[0])})},z.constrain=function(S,X){return le(S,X,function(N,G,ee){(0,K.p)(ee,3,3);const w=(0,K.t)(ee[1]),g=(0,K.t)(ee[2]);if((0,K.a)(ee[0])){const R=[];for(const _ of ee[0])R.push(D(_,w,g));return R}if((0,K.b)(ee[0])){const R=[];for(let _=0;_<ee[0].length();_++)R.push(D(ee[0].get(_),w,g));return R}return D(ee[0],w,g)})}}},97536:(Ie,Ce,Q)=>{Q.d(Ce,{r:()=>W});var K=Q(47562),fe=Q(50818);function y(z,le,D,S){if(1===S.length){if((0,K.a)(S[0]))return(0,fe.t)(z,S[0],-1);if((0,K.b)(S[0]))return(0,fe.t)(z,S[0].toArray(),-1)}return(0,fe.t)(z,S,-1)}function W(z,le){z.stdev=function(D,S){return le(D,S,function(X,N,G){return y("stdev",0,0,G)})},z.variance=function(D,S){return le(D,S,function(X,N,G){return y("variance",0,0,G)})},z.average=function(D,S){return le(D,S,function(X,N,G){return y("mean",0,0,G)})},z.mean=function(D,S){return le(D,S,function(X,N,G){return y("mean",0,0,G)})},z.sum=function(D,S){return le(D,S,function(X,N,G){return y("sum",0,0,G)})},z.min=function(D,S){return le(D,S,function(X,N,G){return y("min",0,0,G)})},z.max=function(D,S){return le(D,S,function(X,N,G){return y("max",0,0,G)})},z.distinct=function(D,S){return le(D,S,function(X,N,G){return y("distinct",0,0,G)})},z.count=function(D,S){return le(D,S,function(X,N,G){if((0,K.p)(G,1,1),(0,K.a)(G[0])||(0,K.f)(G[0]))return G[0].length;if((0,K.b)(G[0]))return G[0].length();throw new Error("Invalid Parameters for Count")})}}},31975:(Ie,Ce,Q)=>{Q.d(Ce,{r:()=>ft});var K=Q(37780),fe=Q(22386),y=Q(6729),W=Q(42275),z=Q(47562),le=Q(77132);const D=j=>(b,P,Y)=>(Y=Y||14,+j(b,P).toFixed(Y)),S=(j,b)=>j+b,N=(j,b)=>j*b,G=(j,b)=>j/b,ee=(j,b,P)=>D(S)(j,b,P),g=(j,b,P)=>D(N)(j,b,P),R=(j,b,P)=>D(G)(j,b,P),_=360,O=2*Math.PI,Z=3600,I=60,$=180*Z/Math.PI,ue=60*_*I,m=90*Z,v=180*Z,te=String.fromCharCode(7501);function d(j){if(!1===(0,z.f)(j))throw new Error("Invalid Parameter");return j}function T(j,b){const P=10**b;return Math.round(j*P)/P}function V(j){const b=parseFloat(j.toString().replace(Math.trunc(j).toString(),"0"))*Math.sign(j);return j<0?{fraction:b,integer:Math.ceil(j)}:{fraction:b,integer:Math.floor(j)}}function he(j,b){switch(j){case 0:return"SHORT"===b?"N":"North";case 1:return"SHORT"===b?"E":"East";case 2:return"SHORT"===b?"S":"South";case 3:return"SHORT"===b?"W":"West"}}function pe(j,b,P){for(;j.length<P;)j=b+j;return j}function De(j,b){return j-Math.floor(j/b)*b}function ve(j){switch(j){case 6:case 1:return _;case 4:return O;case 5:return 400;case 2:return ue;case 7:return 60;case 8:return I;default:throw new Error("Unnexpected evaluations")}}function Te(j){switch(j.toUpperCase().trim()){case"NORTH":case"NORTHAZIMUTH":case"NORTH AZIMUTH":return 1;case"POLAR":return 2;case"QUADRANT":return 3;case"SOUTH":case"SOUTHAZIMUTH":case"SOUTH AZIMUTH":return 4}throw new Error("Unsupported direction type")}function ze(j){switch(j.toUpperCase().trim()){case"D":case"DD":case"DECIMALDEGREE":case"DECIMAL DEGREE":case"DEGREE":case"DECIMALDEGREES":case"DECIMAL DEGREES":case"DEGREES":return 1;case"DMS":case"DEGREESMINUTESSECONDS":case"DEGREES MINUTES SECONDS":return 3;case"R":case"RAD":case"RADS":case"RADIAN":case"RADIANS":return 4;case"G":case"GON":case"GONS":case"GRAD":case"GRADS":case"GRADIAN":case"GRADIANS":return 5}throw new Error("Unsupported units")}class Me{constructor(b,P,Y){this.m_degrees=b,this.m_minutes=P,this.m_seconds=Y}get_field(b){switch(b){case 1:case 6:return this.m_degrees;case 7:return this.m_minutes;case 2:case 8:return this.m_seconds;default:throw new Error("Unnexpected evaluation")}}static seconds_to_DMS(b){const P=V(b).fraction;let Y=V(b).integer;const ae=Math.floor(Y/Z);Y-=ae*Z;const de=Math.floor(Y/I);return Y-=de*I,new Me(ae,de,Y+P)}static number_to_dms(b){const P=V(b).fraction,Y=V(b).integer,ae=g(V(100*P).fraction,100),de=V(100*P).integer;return new Me(Y,de,ae)}format(b,P){let Y=T(this.m_seconds,P),ae=this.m_minutes,de=this.m_degrees;if(2===b||8===b)I<=Y&&(Y-=I,++ae),60<=ae&&(ae=0,++de),_<=de&&(de=0);else if(7===b)Y=0,ae=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,de=this.m_degrees,60<=ae&&(ae=0,++de),_<=de&&(de=0);else if(1===b||6===b){const J=R(this.m_seconds,Z),q=R(this.m_minutes,60);de=Math.round(this.m_degrees+q+J),ae=0,Y=0}return new Me(de,ae,Y)}static DMS_to_seconds(b,P,Y){return b*Z+P*I+Y}}class nt{constructor(b,P,Y){this.meridian=b,this.angle=P,this.direction=Y}fetch_azimuth(b){return 0===b?this.meridian:this.direction}}class _e{constructor(b){this.m_angle=b}static createFromAngleAndDirection(b,P){return new _e(new ke(_e.convertDirectionFormat(b.extract_angular_units(2),P,1)))}getAngle(b){const P=this.m_angle.extract_angular_units(2);switch(b){case 1:case 4:case 2:return new ke(_e.convertDirectionFormat(P,1,b));case 3:{const Y=_e.seconds_north_azimuth_to_quadrant(P);return new ke(Y.angle)}}}getMeridian(b){const P=this.m_angle.extract_angular_units(2);switch(b){case 1:return 0;case 4:return 2;case 2:return 1;case 3:return _e.seconds_north_azimuth_to_quadrant(P).meridian}}getDirection(b){const P=this.m_angle.extract_angular_units(2);switch(b){case 1:return 1;case 4:return 3;case 2:return 0;case 3:return _e.seconds_north_azimuth_to_quadrant(P).direction}}static seconds_north_azimuth_to_quadrant(b){const P=b<=m||b>=972e3?0:2,Y=0===P?Math.min(ue-b,b):Math.abs(b-v);return new nt(P,Y,b>v?3:1)}static createFromAngleMeridianAndDirection(b,P,Y){return new _e(new ke(_e.secondsQuadrantToNorthAzimuth(b.extract_angular_units(2),P,Y)))}static secondsQuadrantToNorthAzimuth(b,P,Y){return 0===P?1===Y?b:ue-b:1===Y?v-b:v+b}static convertDirectionFormat(b,P,Y){let ae=0;switch(P){case 1:ae=b;break;case 2:ae=m-b;break;case 3:throw new Error("Unnexpected evaluation");case 4:ae=b+v}let de=0;switch(Y){case 1:de=ae;break;case 2:de=m-ae;break;case 3:throw new Error("Unnexpected evaluation");case 4:de=ae-v}return de=function E(j,b){return j%b}(de,ue),de<0?ue+de:de}}function Pe(j,b,P){let Y=null;switch(b){case 1:Y=g(j,Z);break;case 2:Y=j;break;case 5:Y=g(j,3240);break;case 4:Y=g(j,$);break;default:throw new Error("Unnexpected evaluation")}switch(P){case 1:return R(Y,Z);case 2:return Y;case 5:return R(Y,3240);case 4:return Y/$;default:throw new Error("Unnexpected evaluation")}}class ke{constructor(b){this.m_seconds=b}static createFromAngleAndUnits(b,P){return new ke(Pe(b,P,2))}extract_angular_units(b){return Pe(this.m_seconds,2,Qe(b))}static createFromDegreesMinutesSeconds(b,P,Y){return new ke(ee(ee(g(b,Z),g(P,I)),Y))}}function Qe(j){switch(j){case 1:case 6:case 3:return 1;case 5:return 5;case 7:return 7;case 4:return 4;case 2:case 8:return 2}}class ut{constructor(b,P,Y,ae){this.m_view=b,this.m_angle=P,this.m_merdian=Y,this.m_direction=ae,this.m_dms=null,this.m_formatted_dms=null}static createFromStringAndBearing(b,P,Y){return new ut(b,P.getAngle(Y),P.getMeridian(Y),P.getDirection(Y))}fetch_angle(){return this.m_angle}fetch_meridian(){return this.m_merdian}fetch_direction(){return this.m_direction}fetch_m_view(){return this.m_view}fetch_dms(){return null===this.m_dms&&this.calculate_dms(),this.m_dms}fetch_formatted_dms(){return null===this.m_formatted_dms&&this.calculate_dms(),this.m_formatted_dms}calculate_dms(){let b=null,P=6,Y=0;for(let ae=0;ae<this.m_view.length;ae++){const de=this.m_view[ae];switch(de){case"m":b=ct(this.m_view,ae,de),P=6===P?7:P,ae=b.newpos;continue;case"s":b=ct(this.m_view,ae,de),P=8,Y=Y<b.rounding?b.rounding:Y,ae=b.newpos;continue;default:continue}}this.m_dms=Me.seconds_to_DMS(this.m_angle.extract_angular_units(2)),this.m_formatted_dms=Me.seconds_to_DMS(this.m_angle.extract_angular_units(2)).format(P,Y)}}function bt(j,b,P,Y,ae){let de=null;switch(b){case 1:case 4:case 5:return de=De(T(j.extract_angular_units(b),Y),ve(b)),pe(de.toFixed(Y),"0",P+Y+(Y>0?1:0));case 6:case 7:return de=De(ae.fetch_formatted_dms().get_field(b),ve(b)),pe(de.toFixed(Y),"0",P+Y+(Y>0?1:0));case 8:return de=De(T(ae.fetch_dms().get_field(b),Y),ve(b)),pe(de.toFixed(Y),"0",P+Y+(Y>0?1:0));default:throw new Error("Unnexepected evaluation")}}function mt(j){switch(j.toUpperCase().trim()){case"N":case"NORTH":return 0;case"E":case"EAST":return 1;case"S":case"SOUTH":return 2;case"W":case"WEST":return 3}return null}function Xe(j){const b=parseFloat(j);if((0,z.j)(b)){if(isNaN(b))throw new Error("Invalid conversion");return b}throw new Error("Invalid conversion")}function lt(j,b,P){const Y=3===P;let ae=null,de=null,J=0,q=0,me=0;if(Y){if(j.length<2)throw new Error("Conversion Error");me=1;const xe=function St(j){switch((0,z.t)(j)){case 1:return{first:0,second:1};case 2:return{first:2,second:1};case 3:return{first:2,second:3};case 4:return{first:0,second:3}}return null}((0,z.d)(j[j.length-1]));if(xe?(ae=xe.first,de=xe.second):(J=1,ae=mt((0,z.d)(j[0])),de=mt((0,z.d)(j[j.length-1]))),null===ae||null===de)throw new Error("Invalid Conversion")}switch(b){case 1:case 4:case 5:if(0===j.length)throw new Error("Invalid Conversion");return Y?_e.createFromAngleMeridianAndDirection(ke.createFromAngleAndUnits(Xe(j[J]),Qe(b)),ae,de):_e.createFromAngleAndDirection(ke.createFromAngleAndUnits(Xe(j[J]),Qe(b)),P);case 3:if(q=j.length-me-J,3===q){const xe=ke.createFromDegreesMinutesSeconds(Xe(j[J]),Xe(j[J+1]),Xe(j[J+2]));return Y?_e.createFromAngleMeridianAndDirection(xe,ae,de):_e.createFromAngleAndDirection(xe,P)}if(1===q){const xe=Xe(j[J]),Re=Me.number_to_dms(xe),Oe=ke.createFromDegreesMinutesSeconds(Re.m_degrees,Re.m_minutes,Re.m_seconds);return Y?_e.createFromAngleMeridianAndDirection(Oe,ae,de):_e.createFromAngleAndDirection(Oe,P)}}throw new Error("Conversion Error")}function ct(j,b,P){const Y={padding:0,rounding:0,newpos:b};let ae=!1;for(;b<j.length;){const de=j[b];if(de===P)ae?Y.rounding++:Y.padding++,b++;else{if("."!==de)break;ae=!0,b++}}return Y.newpos=b-1,Y}function ht(j,b,P){const Y={escaped:"",newpos:b};for(b++;b<j.length;){const ae=j[b];if(b++,"]"===ae)break;Y.escaped+=ae}return Y.newpos=b-1,Y}function it(j,b,P){if(!(b instanceof y.Z))throw new Error("Invalid Parameter");if(!1===b.hasField("directionType"))throw new Error("Invalid Parameter - Missing directionType");if(!1===b.hasField("angleType"))throw new Error("Invalid Parameter - Missing directionType");const Y=Te(d(b.field("directiontype"))),ae=function Dt(j,b,P){if((0,z.j)(j))return function It(j,b,P){if(3===P)throw new Error("Conversion error");if(3===b){const Y=Me.number_to_dms(j);return _e.createFromAngleAndDirection(ke.createFromDegreesMinutesSeconds(Y.m_degrees,Y.m_minutes,Y.m_seconds),P)}return _e.createFromAngleAndDirection(ke.createFromAngleAndUnits(j,Qe(b)),P)}((0,z.t)(j),b,P);if((0,z.f)(j))return lt(function Ne(j){const b=[" ","-","/","'",'"',"\\","^","\xb0",te,"\t","\r","\n","*"];let P="";for(let Y=0;Y<j.length;Y++){const ae=j.charAt(Y);-1!==b.indexOf(ae)?P+="RRSPLITRRSPLITRR":P+=ae}return P.split("RRSPLITRRSPLITRR").filter(Y=>""!==Y)}(j),b,P);if((0,z.a)(j))return lt(j,b,P);if((0,z.b)(j))return lt(j.toArray(),b,P);throw new Error("Conversion Error")}(j,ze(d(b.field("angletype"))),Y);if(!(P instanceof y.Z))throw new Error("Invalid Parameter");if(!1===P.hasField("directionType"))throw new Error("Invalid Parameter - Missing directionType");if(!1===P.hasField("outputType"))throw new Error("Invalid Parameter - Missing directionType");const de=Te(d(P.field("directiontype"))),J=P.hasField("angleType")?ze(d(P.field("angletype"))):null,q=d(P.field("outputType")).toUpperCase().trim();if(!de||!q)throw new Error("Conversion error");if(!(J||"TEXT"===q&&P.hasField("format")))throw new Error("Invalid unit");switch(q){case"VALUE":return 3===de||3===J?function Et(j,b,P){const Y=j.getAngle(b);if(3===b&&3===P){const ae=Me.seconds_to_DMS(Y.extract_angular_units(2));return[he(j.getMeridian(b),"SHORT"),ae.m_degrees,ae.m_minutes,ae.m_seconds,he(j.getDirection(b),"SHORT")]}if(3===P){const ae=Me.seconds_to_DMS(Y.extract_angular_units(2));return[ae.m_degrees,ae.m_minutes,ae.m_seconds]}return 3===b?[he(j.getMeridian(b),"SHORT"),Y.extract_angular_units(P),he(j.getDirection(b),"SHORT")]:[Y.extract_angular_units(P)]}(ae,de,J):function gt(j,b,P){const Y=Qe(P);if(Y&&3!==P)return j.getAngle(b).extract_angular_units(Y);throw new Error("Conversion Error")}(ae,de,J);case"TEXT":{let me="";return P.hasField("format")&&(me=(0,z.d)(P.field("format"))),null!==me&&""!==me||(me=function Ke(j,b){let P="";switch(j){case 1:P=3===b?"DD.DD\xb0":"DDD.DD\xb0";break;case 3:P=3===b?"dd\xb0 mm' ss\"":"ddd\xb0 mm' ss.ss\"";break;case 4:P="R.RR";break;case 5:P="GGG.GG"+te;break;default:throw new Error("Conversion error")}return 3===b&&(P="p "+P+" b"),P}(J,de)),function rt(j,b,P){let Y="",ae=null,de=null;const J=ut.createFromStringAndBearing(b,j,P),q={D:1,d:6,m:7,s:8,R:4,G:5};for(let me=0;me<b.length;me++){const xe=b[me];switch(xe){case"[":ae=ht(b,me),Y+=ae.escaped,me=ae.newpos;continue;case"D":case"d":case"m":case"s":case"R":case"G":ae=ct(b,me,xe),de=j.getAngle(P),Y+=bt(de,q[xe],ae.padding,ae.rounding,J),me=ae.newpos;continue;case"P":case"p":Y+=he(J.fetch_meridian(),"p"===xe?"SHORT":"LONG");continue;case"B":case"b":Y+=he(J.fetch_direction(),"b"===xe?"SHORT":"LONG");continue;default:Y+=xe}}return Y}(ae,me,de)}default:throw new Error("Invalid Parameter")}}const Le=2654435761,Ze=2246822519,$e=3266489917,st=668265263,yt=374761393;function At(j){const b=[];for(let P=0,Y=j.length;P<Y;P++){let ae=j.charCodeAt(P);ae<128?b.push(ae):ae<2048?b.push(192|ae>>6,128|63&ae):ae<55296||ae>=57344?b.push(224|ae>>12,128|ae>>6&63,128|63&ae):(P++,ae=65536+((1023&ae)<<10|1023&j.charCodeAt(P)),b.push(240|ae>>18,128|ae>>12&63,128|ae>>6&63,128|63&ae))}return new Uint8Array(b)}class Ht{constructor(b){this.seed=b,this.totallen=0,this.bufs=[],this.init()}init(){return this.bufs=[],this.totallen=0,this}updateFloatArray(b){const P=[];for(const Y of b)isNaN(Y)?P.push("NaN"):P.push(Y===1/0?"Infinity":Y===-1/0?"-Infinity":0===Y?"0":Y.toString(16));this.update(At(P.join("")))}updateIntArray(b){const P=Int32Array.from(b);this.update(new Uint8Array(P.buffer))}updateUint8Array(b){this.update(Uint8Array.from(b))}updateWithString(b){return this.update(At(b))}update(b){return this.bufs.push(b),this.totallen+=b.length,this}digest(){const b=new Uint8Array(this.totallen);let P=0;for(const Y of this.bufs)b.set(Y,P),P+=Y.length;return this.init(),this.xxHash32(b,this.seed)}xxHash32(b,P=0){const Y=b;let ae=P+yt&4294967295,de=0;if(Y.length>=16){const q=[P+Le+Ze&4294967295,P+Ze&4294967295,P+0&4294967295,P-Le&4294967295],me=b,xe=me.length-16;let Re=0;for(de=0;(4294967280&de)<=xe;de+=4){let et=q[Re]+((me[de+0]+(me[de+1]<<8))*Ze+((me[de+2]+(me[de+3]<<8))*Ze<<16))&4294967295;et=et<<13|et>>>19,q[Re]=(65535&et)*Le+((et>>>16)*Le<<16)&4294967295,Re=Re+1&3}ae=(q[0]<<1|q[0]>>>31)+(q[1]<<7|q[1]>>>25)+(q[2]<<12|q[2]>>>20)+(q[3]<<18|q[3]>>>14)&4294967295}ae=ae+b.length&4294967295;const J=b.length-4;for(;de<=J;de+=4)ae=ae+((Y[de+0]+(Y[de+1]<<8))*$e+((Y[de+2]+(Y[de+3]<<8))*$e<<16))&4294967295,ae=ae<<17|ae>>>15,ae=(65535&ae)*st+((ae>>>16)*st<<16)&4294967295;for(;de<Y.length;++de)ae+=Y[de]*yt,ae=ae<<11|ae>>>21,ae=(65535&ae)*Le+((ae>>>16)*Le<<16)&4294967295;return ae^=ae>>>15,ae=((65535&ae)*Ze&4294967295)+((ae>>>16)*Ze<<16),ae^=ae>>>13,ae=((65535&ae)*$e&4294967295)+((ae>>>16)*$e<<16),ae^=ae>>>16,ae<0?ae+4294967296:ae}}var We=Q(2004),Yt=Q(72854),Vt=Q(49672),Kt=Q(37118),Wt=Q(55214),Jt=Q(65234);function vt(j,b){if(j.x===b.x&&j.y===b.y){if(j.hasZ){if(j.z!==b.z)return!1}else if(b.hasZ)return!1;if(j.hasM){if(j.m!==b.m)return!1}else if(b.hasM)return!1;return!0}return!1}function Ue(j,b,P){if(null!==j)if((0,z.a)(j)){if(b.updateUint8Array([61]),P.map.has(j)){const Y=P.map.get(j);b.updateIntArray([61237541^Y])}else{P.map.set(j,P.currentLength++);for(const Y of j)Ue(Y,b,P);P.map.delete(j),P.currentLength--}b.updateUint8Array([199])}else if((0,z.b)(j)){if(b.updateUint8Array([61]),P.map.has(j)){const Y=P.map.get(j);b.updateIntArray([61237541^Y])}else{P.map.set(j,P.currentLength++);for(const Y of j.toArray())Ue(Y,b,P);P.map.delete(j),P.currentLength--}b.updateUint8Array([199])}else{if((0,z.n)(j))return b.updateIntArray([j.getTime()]),void b.updateUint8Array([241]);if((0,z.f)(j))return b.updateIntArray([j.length]),b.updateWithString(j),void b.updateUint8Array([41]);if((0,z.i)(j))b.updateUint8Array([!0===j?1:0,113]);else{if((0,z.j)(j))return b.updateFloatArray([j]),void b.updateUint8Array([173]);if(j instanceof fe.Z)throw new Error("Type not supported in Hash");if(j instanceof K.Z)throw new Error("Type not supported in Hash");if(!(j instanceof y.Z)){if(j instanceof W.Z)throw new Error("Type not supported in Hash");if(j instanceof Vt.Z)return b.updateIntArray([3833836621]),b.updateIntArray([0]),b.updateFloatArray([j.x]),b.updateIntArray([1]),b.updateFloatArray([j.y]),j.hasZ&&(b.updateIntArray([2]),b.updateFloatArray([j.z])),j.hasM&&(b.updateIntArray([3]),b.updateFloatArray([j.m])),b.updateIntArray([3765347959]),void Ue(j.spatialReference.wkid,b,P);if(j instanceof Kt.Z){b.updateIntArray([1266616829]);for(let Y=0;Y<j.rings.length;Y++){const ae=j.rings[Y],de=[];let J=null,q=null;for(let me=0;me<ae.length;me++){const xe=j.getPoint(Y,me);if(0===me)J=xe;else if(vt(q,xe))continue;q=xe,me===ae.length-1&&vt(J,xe)||de.push(xe)}b.updateIntArray([1397116793,de.length]);for(let me=0;me<de.length;me++){const xe=de[me];b.updateIntArray([3962308117,me]),Ue(xe,b,P),b.updateIntArray([2716288009])}b.updateIntArray([2278822459])}return b.updateIntArray([3878477243]),void Ue(j.spatialReference.wkid,b,P)}if(j instanceof Wt.Z){b.updateIntArray([4106883559]);for(let Y=0;Y<j.paths.length;Y++){const ae=j.paths[Y];b.updateIntArray([1397116793,ae.length]);for(let de=0;de<ae.length;de++)b.updateIntArray([3962308117,de]),Ue(j.getPoint(Y,de),b,P),b.updateIntArray([2716288009]);b.updateIntArray([2278822459])}return b.updateIntArray([2568784753]),void Ue(j.spatialReference.wkid,b,P)}if(j instanceof Yt.Z){b.updateIntArray([588535921,j.points.length]);for(let Y=0;Y<j.points.length;Y++){const ae=j.getPoint(Y);b.updateIntArray([Y]),Ue(ae,b,P)}return b.updateIntArray([1700171621]),void Ue(j.spatialReference.wkid,b,P)}if(j instanceof We.Z)return b.updateIntArray([3483648373]),b.updateIntArray([0]),b.updateFloatArray([j.xmax]),b.updateIntArray([1]),b.updateFloatArray([j.xmin]),b.updateIntArray([2]),b.updateFloatArray([j.ymax]),b.updateIntArray([3]),b.updateFloatArray([j.ymin]),j.hasZ&&(b.updateIntArray([4]),b.updateFloatArray([j.zmax]),b.updateIntArray([5]),b.updateFloatArray([j.zmin])),j.hasM&&(b.updateIntArray([6]),b.updateFloatArray([j.mmax]),b.updateIntArray([7]),b.updateFloatArray([j.mmin])),b.updateIntArray([3622027469]),void Ue(j.spatialReference.wkid,b,P);if(j instanceof Jt.Z)return b.updateIntArray([14]),null!=j.wkid&&b.updateIntArray([j.wkid]),void(j.wkt&&b.updateWithString(j.wkt));throw(0,z.c)(j)||(0,z.o)(j)||(0,z.q)(j),new Error("Type not supported in Hash")}if(b.updateUint8Array([223]),P.map.has(j)){const Y=P.map.get(j);b.updateIntArray([61237541^Y])}else{P.map.set(j,P.currentLength++);for(const Y of j.keys())b.updateIntArray([Y.length]),b.updateWithString(Y),b.updateUint8Array([251]),Ue(j.field(Y),b,P),b.updateUint8Array([239]);P.map.delete(j),P.currentLength--}b.updateUint8Array([73])}}else b.updateUint8Array([0,139])}function ft(j,b){j.portal=function(P,Y){return b(P,Y,function(ae,de,J){return(0,z.p)(J,1,1),new K.Z((0,z.d)(J[0]))})},j.trim=function(P,Y){return b(P,Y,function(ae,de,J){return(0,z.p)(J,1,1),(0,z.d)(J[0]).trim()})},j.tohex=function(P,Y){return b(P,Y,function(ae,de,J){(0,z.p)(J,1,1);const q=(0,z.t)(J[0]);return isNaN(q)?q:q.toString(16)})},j.upper=function(P,Y){return b(P,Y,function(ae,de,J){return(0,z.p)(J,1,1),(0,z.d)(J[0]).toUpperCase()})},j.proper=function(P,Y){return b(P,Y,function(ae,de,J){(0,z.p)(J,1,2);let q=1;2===J.length&&"firstword"===(0,z.d)(J[1]).toLowerCase()&&(q=2);const me=/\s/,xe=(0,z.d)(J[0]);let Re="",Oe=!0;for(let qe=0;qe<xe.length;qe++){let Ge=xe[qe];me.test(Ge)?1===q&&(Oe=!0):Ge.toUpperCase()!==Ge.toLowerCase()&&(Oe?(Ge=Ge.toUpperCase(),Oe=!1):Ge=Ge.toLowerCase()),Re+=Ge}return Re})},j.lower=function(P,Y){return b(P,Y,function(ae,de,J){return(0,z.p)(J,1,1),(0,z.d)(J[0]).toLowerCase()})},j.guid=function(P,Y){return b(P,Y,function(ae,de,J){if((0,z.p)(J,0,1),J.length>0)switch((0,z.d)(J[0]).toLowerCase()){case"digits":return(0,z.Q)().replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return(0,z.Q)();case"digits-hyphen-braces":return"{"+(0,z.Q)()+"}";case"digits-hyphen-parentheses":return"("+(0,z.Q)()+")"}return"{"+(0,z.Q)()+"}"})},j.console=function(P,Y){return b(P,Y,function(ae,de,J){return 0===J.length||P.console((0,z.d)(1===J.length?J[0]:J)),z.v})},j.mid=function(P,Y){return b(P,Y,function(ae,de,J){(0,z.p)(J,2,3);let q=(0,z.t)(J[1]);if(isNaN(q))return"";if(q<0&&(q=0),2===J.length)return(0,z.d)(J[0]).substr(q);let me=(0,z.t)(J[2]);return isNaN(me)?"":(me<0&&(me=0),(0,z.d)(J[0]).substr(q,me))})},j.find=function(P,Y){return b(P,Y,function(ae,de,J){(0,z.p)(J,2,3);let q=0;if(J.length>2){if(q=(0,z.t)((0,z.E)(J[2],0)),isNaN(q))return-1;q<0&&(q=0)}return(0,z.d)(J[1]).indexOf((0,z.d)(J[0]),q)})},j.left=function(P,Y){return b(P,Y,function(ae,de,J){(0,z.p)(J,2,2);let q=(0,z.t)(J[1]);return isNaN(q)?"":(q<0&&(q=0),(0,z.d)(J[0]).substr(0,q))})},j.right=function(P,Y){return b(P,Y,function(ae,de,J){(0,z.p)(J,2,2);let q=(0,z.t)(J[1]);return isNaN(q)?"":(q<0&&(q=0),(0,z.d)(J[0]).substr(-1*q,q))})},j.split=function(P,Y){return b(P,Y,function(ae,de,J){let q;(0,z.p)(J,2,4);let me=(0,z.t)((0,z.E)(J[2],-1));const xe=(0,z.y)((0,z.E)(J[3],!1));if(-1===me||null===me||!0===xe?q=(0,z.d)(J[0]).split((0,z.d)(J[1])):(isNaN(me)&&(me=-1),me<-1&&(me=-1),q=(0,z.d)(J[0]).split((0,z.d)(J[1]),me)),!1===xe)return q;const Re=[];for(let Oe=0;Oe<q.length&&!(-1!==me&&Re.length>=me);Oe++)""!==q[Oe]&&void 0!==q[Oe]&&Re.push(q[Oe]);return Re})},j.text=function(P,Y){return b(P,Y,function(ae,de,J){return(0,z.p)(J,1,2),(0,z.s)(J[0],J[1])})},j.concatenate=function(P,Y){return b(P,Y,function(ae,de,J){const q=[];if(J.length<1)return"";if((0,z.a)(J[0])){const me=(0,z.E)(J[2],"");for(let xe=0;xe<J[0].length;xe++)q[xe]=(0,z.s)(J[0][xe],me);return q.join(J.length>1?J[1]:"")}if((0,z.b)(J[0])){const me=(0,z.E)(J[2],"");for(let xe=0;xe<J[0].length();xe++)q[xe]=(0,z.s)(J[0].get(xe),me);return q.join(J.length>1?J[1]:"")}for(let me=0;me<J.length;me++)q[me]=(0,z.s)(J[me]);return q.join("")})},j.reverse=function(P,Y){return b(P,Y,function(ae,de,J){if((0,z.p)(J,1,1),(0,z.a)(J[0])){const q=J[0].slice(0);return q.reverse(),q}if((0,z.b)(J[0])){const q=J[0].toArray().slice(0);return q.reverse(),q}throw new Error("Invalid Parameter")})},j.replace=function(P,Y){return b(P,Y,function(ae,de,J){(0,z.p)(J,3,4);const q=(0,z.d)(J[0]),me=(0,z.d)(J[1]),xe=(0,z.d)(J[2]);return 4!==J.length||(0,z.y)(J[3])?(0,z.P)(q,me,xe):q.replace(me,xe)})},j.schema=function(P,Y){return b(P,Y,function(ae,de,J){if(J[0]instanceof W.Z){const q=J[0].schema();return q?y.Z.convertObjectToArcadeDictionary(q):null}throw new Error("Invalid Parameter")})},j.subtypes=function(P,Y){return b(P,Y,function(ae,de,J){if((0,z.p)(J,1,1),J[0]instanceof W.Z){const q=J[0].subtypes();return q?y.Z.convertObjectToArcadeDictionary(q):null}throw new Error("Invalid Parameter")})},j.subtypecode=function(P,Y){return b(P,Y,function(ae,de,J){if((0,z.p)(J,1,1),J[0]instanceof W.Z){const q=J[0].subtypes();if(!q)return null;if(q.subtypeField&&J[0].hasField(q.subtypeField)){const me=J[0].field(q.subtypeField);for(const xe of q.subtypes)if(xe.code===me)return xe.code;return null}return null}throw new Error("Invalid Parameter")})},j.subtypename=function(P,Y){return b(P,Y,function(ae,de,J){if((0,z.p)(J,1,1),J[0]instanceof W.Z){const q=J[0].subtypes();if(!q)return"";if(q.subtypeField&&J[0].hasField(q.subtypeField)){const me=J[0].field(q.subtypeField);for(const xe of q.subtypes)if(xe.code===me)return xe.name;return""}return""}throw new Error("Invalid Parameter")})},j.gdbversion=function(P,Y){return b(P,Y,function(ae,de,J){if((0,z.p)(J,1,1),J[0]instanceof W.Z)return J[0].gdbVersion();throw new Error("Invalid Parameter")})},j.domain=function(P,Y){return b(P,Y,function(ae,de,J){if((0,z.p)(J,2,3),J[0]instanceof W.Z){const q=J[0].fullDomain((0,z.d)(J[1]),void 0===J[2]?void 0:(0,z.t)(J[2]));return q&&q.domain?y.Z.convertObjectToArcadeDictionary("coded-value"===q.domain.type||"codedValue"===q.domain.type?{type:"codedValue",name:q.domain.name,dataType:le.yE[q.field.type],codedValues:q.domain.codedValues.map(me=>({name:me.name,code:me.code}))}:{type:"range",name:q.domain.name,dataType:le.yE[q.field.type],min:q.domain.min,max:q.domain.max}):null}throw new Error("Invalid Parameter")})},j.domainname=function(P,Y){return b(P,Y,function(ae,de,J){if((0,z.p)(J,2,4),J[0]instanceof W.Z)return J[0].domainValueLookup((0,z.d)(J[1]),J[2],void 0===J[3]?void 0:(0,z.t)(J[3]));throw new Error("Invalid Parameter")})},j.domaincode=function(P,Y){return b(P,Y,function(ae,de,J){if((0,z.p)(J,2,4),J[0]instanceof W.Z)return J[0].domainCodeLookup((0,z.d)(J[1]),J[2],void 0===J[3]?void 0:(0,z.t)(J[3]));throw new Error("Invalid Parameter")})},j.urlencode=function(P,Y){return b(P,Y,function(ae,de,J){if((0,z.p)(J,1,1),null===J[0])return"";if(J[0]instanceof y.Z){let q="";for(const me of J[0].keys()){const xe=J[0].field(me);""!==q&&(q+="&"),q+=null===xe?encodeURIComponent(me)+"=":encodeURIComponent(me)+"="+encodeURIComponent(xe)}return q}return encodeURIComponent((0,z.d)(J[0]))})},j.hash=function(P,Y){return b(P,Y,function(ae,de,J){(0,z.p)(J,1,1);const q=new Ht(0);return Ue(J[0],q,{map:new Map,currentLength:0}),q.digest()})},j.convertdirection=function(P,Y){return b(P,Y,function(ae,de,J){return(0,z.p)(J,3,3),it(J[0],J[1],J[2])})},j.fromjson=function(P,Y){return b(P,Y,function(ae,de,J){if((0,z.p)(J,1,1),!1===(0,z.f)(J[0]))throw new Error("Invalid Parameter");return y.Z.convertJsonToArcade(JSON.parse((0,z.d)(J[0])))})},j.expects=function(P,Y){return b(P,Y,function(ae,de,J){if(J.length<1)throw new Error("Function called with wrong number of Parameters");return z.v})},j.tocharcode=function(P,Y){return b(P,Y,function(ae,de,J){(0,z.p)(J,1,2);const q=(0,z.t)((0,z.E)(J[1],0)),me=(0,z.d)(J[0]);if(0===me.length&&1===J.length)return null;if(me.length<=q||q<0)throw new Error("Illegal argument");return me.charCodeAt(q)})},j.tocodepoint=function(P,Y){return b(P,Y,function(ae,de,J){(0,z.p)(J,1,2);const q=(0,z.t)((0,z.E)(J[1],0)),me=(0,z.d)(J[0]);if(0===me.length&&1===J.length)return null;if(me.length<=q||q<0)throw new Error("Illegal argument");return me.codePointAt(q)})},j.fromcharcode=function(P,Y){return b(P,Y,function(ae,de,J){if(J.length<1)throw new Error("Function called with wrong number of Parameters");const q=J.map(me=>Math.trunc((0,z.t)(me))).filter(me=>me>=0&&me<=65535);return 0===q.length?null:String.fromCharCode.apply(null,q)})},j.fromcodepoint=function(P,Y){return b(P,Y,function(ae,de,J){if(J.length<1)throw new Error("Function called with wrong number of Parameters");let q;try{q=J.map(me=>Math.trunc((0,z.t)(me))).filter(me=>me<=1114111&&me>>>0===me)}catch(me){return null}return 0===q.length?null:String.fromCodePoint.apply(null,q)})}}},27187:(Ie,Ce,Q)=>{Q.d(Ce,{r1:()=>le,Lz:()=>W,EI:()=>fe,SV:()=>y});var K=Q(2004);function fe(D){if(void 0===D)return null;if("number"==typeof D)return D;let S=D.toLowerCase();switch(S=S.replace(/\s/g,""),S=S.replace(/-/g,""),S){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":return 109404;case"miles":case"mile":case"squaremile":case"squaremiles":return 109413;case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"km":return 109414;case"acres":case"acre":case"ac":return 109402;case"hectares":case"hectare":case"ha":return 109401;case"yard":case"yd":case"yards":case"squareyards":case"squareyard":return 109442;case"feet":case"ft":case"foot":case"squarefeet":case"squarefoot":return 109405;case"nm":case"nmi":case"nauticalmile":case"nauticalmiles":case"squarenauticalmile":case"squarenauticalmiles":return 109409}return null}function y(D){if(null===D)return null;switch(D.type){case"polygon":case"multipoint":case"polyline":return D.extent;case"point":return new K.Z({xmin:D.x,ymin:D.y,xmax:D.x,ymax:D.y,spatialReference:D.spatialReference});case"extent":return D}return null}function W(D){if(void 0===D)return null;if("number"==typeof D)return D;let S=D.toLowerCase();switch(S=S.replace(/\s/g,""),S=S.replace(/-/g,""),S){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":return 9001;case"miles":case"mile":case"squaremile":case"squaremiles":return 9035;case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"km":return 9036;case"yard":case"yd":case"yards":case"squareyards":case"squareyard":return 9096;case"feet":case"ft":case"foot":case"squarefeet":case"squarefoot":return 9002;case"nm":case"nmi":case"nauticalmile":case"nauticalmiles":case"squarenauticalmile":case"squarenauticalmiles":return 9030}return null}function le(D){if(null===D)return null;const S=D.clone();return void 0!==D.cache._geVersion&&(S.cache._geVersion=D.cache._geVersion),S}},19927:(Ie,Ce,Q)=>{Q.d(Ce,{gW:()=>z,AA:()=>m,Kq:()=>R,mb:()=>g,Vf:()=>v,dN:()=>ie,H5:()=>H,w8:()=>w,bV:()=>ee,UA:()=>se,FS:()=>Z});const K={all:{min:"2",max:"2"},none:{min:"2",max:"2"},any:{min:"2",max:"2"},reduce:{min:"2",max:"3"},map:{min:"2",max:"2"},filter:{min:"2",max:"2"},fromcodepoint:{min:"1",max:"*"},fromcharcode:{min:"1",max:"*"},tocodepoint:{min:"1",max:"2"},tocharcode:{min:"1",max:"2"},concatenate:{min:"0",max:"*"},expects:{min:"1",max:"*"},getfeatureset:{min:"1",max:"2"},week:{min:"1",max:"2"},fromjson:{min:"1",max:"1"},length3d:{min:"1",max:"2"},tohex:{min:"1",max:"1"},hash:{min:"1",max:"1"},isoweek:{min:"1",max:"1"},isoweekday:{min:"1",max:"1"},isomonth:{min:"1",max:"1"},isoyear:{min:"1",max:"1"},resize:{min:"2",max:"3"},slice:{min:"0",max:"*"},splice:{min:"0",max:"*"},push:{min:"2",max:"2"},pop:{min:"1",max:"1"},includes:{min:"2",max:"2"},array:{min:"1",max:"2"},front:{min:"1",max:"1"},back:{min:"1",max:"1"},insert:{min:"3",max:"3"},erase:{min:"2",max:"2"},split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},boolean:{min:"1",max:"1"},dictionary:{min:"0",max:"*"},typeof:{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},portal:{min:"1",max:"1"},getuser:{min:"1",max:"2"},subtypes:{min:"1",max:"1"},subtypecode:{min:"1",max:"1"},subtypename:{min:"1",max:"1"},domain:{min:"2",max:"3"},convertdirection:{min:"3",max:"3"},schema:{min:"1",max:"1"}};for(const d in K)K[d].fmin=K[d].min,K[d].fmax=K[d].max;const fe=["featureset","getuser","featuresetbyid","featuresetbyname","featuresetbyassociation","featuresetbyrelationshipname","featuresetbyurl","getfeatureset","attachments","featuresetbyportalitem"],y=["disjoint","intersects","touches","crosses","within","contains","overlaps","equals","relate","intersection","union","difference","symmetricdifference","clip","cut","area","areageodetic","length","length3d","lengthgeodetic","distance","distancegeodetic","densify","densifygeodetic","generalize","buffer","buffergeodetic","offset","rotate","issimple","simplify","multiparttosinglepart"];function W(d){return"string"==typeof d||d instanceof String}function z(d,T){const E=K[d.name.toLowerCase()];void 0===E?K[d.name.toLowerCase()]="sync"===T?{min:d.min,max:d.max}:{fmin:d.min,fmax:d.max}:"sync"===T?(E.min=d.min,E.max=d.max):(E.fmin=d.min,E.fmax=d.max)}function le(d,T){return"0"!==d.min&&T.length<Number(d.min)||"*"!==d.max&&T.length>Number(d.max)?-2:1}function D(d,T,E){if(null!==E.localScope&&void 0!==E.localScope[d.toLowerCase()]){const V=E.localScope[d.toLowerCase()];if("FormulaFunction"===V.type)return void 0===V.signature&&(V.signature={min:"0",max:"*"}),le(V.signature,T);if("any"===V.type)return void 0===V.signature&&(V.signature={min:"0",max:"*"}),le(V.signature,T)}if(void 0!==E.globalScope[d.toLowerCase()]){const V=E.globalScope[d.toLowerCase()];if("FormulaFunction"===V.type)return void 0===V.signature&&(V.signature={min:"0",max:"*"}),le(V.signature,T);if("any"===V.type)return void 0===V.signature&&(V.signature={min:"0",max:"*"}),le(V.signature,T)}return-1}function S(d,T){if(d)for(const E of d)X(E,T)}function X(d,T){if(d&&!1!==T(d))switch(d.type){case"ArrayExpression":S(d.elements,T);break;case"AssignmentExpression":case"BinaryExpression":case"LogicalExpression":X(d.left,T),X(d.right,T);break;case"BlockStatement":case"Program":S(d.body,T);break;case"BreakStatement":case"ContinueStatement":case"EmptyStatement":case"Identifier":case"Literal":break;case"CallExpression":X(d.callee,T),S(d.arguments,T);break;case"ExpressionStatement":X(d.expression,T);break;case"ForInStatement":X(d.left,T),X(d.right,T),X(d.body,T);break;case"ForStatement":X(d.init,T),X(d.test,T),X(d.update,T),X(d.body,T);break;case"FunctionDeclaration":X(d.id,T),S(d.params,T),X(d.body,T);break;case"IfStatement":X(d.test,T),X(d.consequent,T),X(d.alternate,T);break;case"MemberExpression":X(d.object,T),X(d.property,T);break;case"ObjectExpression":S(d.properties,T);break;case"Property":X(d.key,T),X(d.value,T);break;case"ReturnStatement":case"UnaryExpression":case"UpdateExpression":X(d.argument,T);break;case"VariableDeclaration":S(d.declarations,T);break;case"VariableDeclarator":X(d.id,T),X(d.init,T);break;case"TemplateLiteral":S(d.expressions,T),S(d.quasis,T)}}function N(d,T=!0){let E=H(d,"SYNTAX","UNREOGNISED");try{switch(d.type){case"VariableDeclarator":return"Identifier"!==d.id.type?H(d,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==d.init?N(d.init,!1):"";case"VariableDeclaration":for(let V=0;V<d.declarations.length;V++)if(E=N(d.declarations[V],T),""!==E)return E;return"";case"ForInStatement":if(E=N(d.left,T),""!==E)return E;if("VariableDeclaration"===d.left.type){if(d.left.declarations.length>1)return H(d,"SYNTAX","ONLY1VAR");if(null!==d.left.declarations[0].init)return H(d,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==d.left.type)return H(d,"SYNTAX","LEFTNOTVAR");return E=N(d.right,T),""!==E?E:(E=N(d.body,T),""!==E?E:"");case"ForStatement":return null!==d.test&&(E=N(d.test,T),""!==E)||null!==d.init&&(E=N(d.init,T),""!==E)||null!==d.update&&(E=N(d.update,T),""!==E)||null!==d.body&&(E=N(d.body,T),""!==E)?E:"";case"ContinueStatement":case"EmptyStatement":case"BreakStatement":case"Literal":case"TemplateElement":return"";case"IfStatement":return E=N(d.test,T),""!==E||null!==d.consequent&&(E=N(d.consequent,!1),""!==E)||null!==d.alternate&&(E=N(d.alternate,!1),""!==E)?E:"";case"BlockStatement":{const V=[];for(let he=0;he<d.body.length;he++)"EmptyStatement"!==d.body[he].type&&V.push(d.body[he]);d.body=V;for(let he=0;he<d.body.length;he++)if(E=N(d.body[he],T),""!==E)return E;return""}case"FunctionDeclaration":return!1===T?H(d,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==d.id.type?H(d,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):N(d.body,!1);case"ReturnStatement":return null!==d.argument?N(d.argument,T):"";case"UpdateExpression":return"Identifier"!==d.argument.type&&"MemberExpression"!==d.argument.type?H(d,"SYNTAX","ASSIGNMENTTOVARSONLY"):N(d.argument,T);case"AssignmentExpression":if("Identifier"!==d.left.type&&"MemberExpression"!==d.left.type)return H(d,"SYNTAX","ASSIGNMENTTOVARSONLY");if(E=N(d.left,T),""!==E)return E;switch(d.operator){case"=":case"/=":case"*=":case"%=":case"+=":case"-=":break;default:return H(d,"SYNTAX","OPERATORNOTRECOGNISED")}return N(d.right,!1);case"ExpressionStatement":return N(d.expression,!1);case"Identifier":E="";break;case"MemberExpression":return E=N(d.object,T),""!==E?E:!0===d.computed?N(d.property,T):"";case"CallExpression":if("Identifier"!==d.callee.type)return H(d,"SYNTAX","ONLYNODESSUPPORTED");E="";for(let V=0;V<d.arguments.length;V++)if(E=N(d.arguments[V],T),""!==E)return E;return"";case"UnaryExpression":E=N(d.argument,T);break;case"BinaryExpression":if(E=N(d.left,T),""!==E||(E=N(d.right,T),""!==E))return E;switch(d.operator){case"|":case"&":case">>":case"<<":case">>":case">>>":case"^":case"==":case"!=":case"<":case"<=":case">":case">=":case"+":case"-":case"*":case"/":case"%":break;default:return H(d,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case"LogicalExpression":if(E=N(d.left,T),""!==E||(E=N(d.right),""!==E))return E;switch(d.operator){case"&&":case"||":break;default:return H(d,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case"ArrayExpression":E="";for(let V=0;V<d.elements.length;V++)if(E=N(d.elements[V],T),""!==E)return E;return E;case"TemplateLiteral":E="";for(let V=0;V<d.quasis.length;V++)if(E=N(d.quasis[V],T),""!==E)return E;for(let V=0;V<d.expressions.length;V++)if(E=N(d.expressions[V],T),""!==E)return E;return E;case"ObjectExpression":E="";for(let V=0;V<d.properties.length;V++){if(E="",null!==d.properties[V].key&&("Literal"!==d.properties[V].key.type&&"Identifier"!==d.properties[V].key.type&&(E=H(d,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===d.properties[V].key.type)){const he=d.properties[V].key,pe="value"in he?he.value:null;"string"==typeof pe||pe instanceof String||(E=H(d,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}if(""===E&&(E=N(d.properties[V],T)),""!==E)return E}return E;case"Property":return"Literal"!==d.key.type&&"Identifier"!==d.key.type?H(d,"SYNTAX","ONLYLITERAL"):("Identifier"!==d.key.type&&(E=N(d.key,T),""!==E)||(E=N(d.value,T)),E);default:return E}return E}catch(V){throw V}}function G(d,T){let E=H(d,"SYNTAX","UNREOGNISED"),V=null,he="";try{switch(d.type){case"VariableDeclarator":{const pe=null===d.init?"":G(d.init,T);return""!==pe?pe:("Identifier"===d.id.type&&(null===T.localScope?T.globalScope[d.id.name.toLowerCase()]={type:"any"}:T.localScope[d.id.name.toLowerCase()]={type:"any"}),"")}case"FunctionDeclaration":return V=_(d.id.name.toLowerCase(),d),he=function re(d,T){const E={globalScope:T.globalScope,localScope:{}};for(let V=0;V<d.params.length;V++)E.localScope[d.params[V].name.toLowerCase()]={type:"any"};return G(d.body,E)}(d,T),""!==he?he:null!==T.localScope?H(d,"SYNTAX","GLOBALFUNCTIONSONLY"):(V.isnative=!1,T.globalScope[d.id.name.toLowerCase()]={type:"FormulaFunction",signature:[V]},"");case"VariableDeclaration":E="";for(let pe=0;pe<d.declarations.length;pe++)if(E=G(d.declarations[pe],T),""!==E)return E;return E;case"IfStatement":return E=G(d.test,T),""!==E?E:"AssignmentExpression"===d.test.type||"UpdateExpression"===d.test.type?H(d.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):null!==d.consequent&&(E=G(d.consequent,T),""!==E)||null!==d.alternate&&(E=G(d.alternate,T),""!==E)?E:"";case"EmptyStatement":case"BreakStatement":case"ContinueStatement":case"Literal":case"TemplateElement":return"";case"BlockStatement":for(let pe=0;pe<d.body.length;pe++)if(E=G(d.body[pe],T),""!==E)return E;return"";case"ReturnStatement":return null!==d.argument?G(d.argument,T):"";case"ForInStatement":if("VariableDeclaration"===d.left.type){if(d.left.declarations.length>1)return H(d,"SYNTAX","ONLY1VAR");if(null!==d.left.declarations[0].init)return H(d,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==d.left.type)return H(d,"SYNTAX","LEFTNOTVAR");return E=G(d.left,T),""!==E?E:(E=G(d.right,T),""!==E?E:(E=G(d.body,T),""!==E?E:""));case"ForStatement":return null!==d.init&&(E=G(d.init,T),""!==E)||null!==d.test&&(E=G(d.test,T),""!==E)||null!==d.body&&(E=G(d.body,T),""!==E)||null!==d.update&&(E=G(d.update,T),""!==E)?E:"";case"UpdateExpression":{if("Identifier"!==d.argument.type&&"MemberExpression"!==d.argument.type)return H(d,"SYNTAX","ASSIGNMENTTOVARSONLY");let pe=!1;return"MemberExpression"===d.argument.type?G(d.argument,T):(null!==T.localScope&&void 0!==T.localScope[d.argument.name.toLowerCase()]&&(pe=!0),void 0!==T.globalScope[d.argument.name.toLowerCase()]&&(pe=!0),!1===pe?"Identifier "+d.argument.name+" has not been declared.":"")}case"AssignmentExpression":{if("Identifier"!==d.left.type&&"MemberExpression"!==d.left.type)return H(d,"SYNTAX","ASSIGNMENTTOVARSONLY");let pe=G(d.right,T);if(""!==pe)return pe;let De=!1;return"MemberExpression"===d.left.type?(pe=G(d.left,T),""!==pe?pe:""):(null!==T.localScope&&void 0!==T.localScope[d.left.name.toLowerCase()]&&(De=!0),void 0!==T.globalScope[d.left.name.toLowerCase()]&&(De=!0),!1===De?"Identifier "+d.left.name+" has not been declared.":"")}case"ExpressionStatement":return G(d.expression,T);case"Identifier":{const pe=d.name.toLowerCase();if(null!==T.localScope&&void 0!==T.localScope[pe])return"";E=void 0!==T.globalScope[pe]?"":H(d,"SYNTAX","VARIABLENOTFOUND");break}case"MemberExpression":return E=G(d.object,T),""!==E?E:!0===d.computed?G(d.property,T):"";case"CallExpression":{if("Identifier"!==d.callee.type)return H(d,"SYNTAX","ONLYNODESSUPPORTED");E="";for(let De=0;De<d.arguments.length;De++)if(E=G(d.arguments[De],T),""!==E)return E;const pe=D(d.callee.name,d.arguments,T);-1===pe&&(E=H(d,"SYNTAX","NOTFOUND")),-2===pe&&(E=H(d,"SYNTAX","WRONGSIGNATURE"));break}case"UnaryExpression":E=G(d.argument,T);break;case"BinaryExpression":return E=G(d.left,T),""!==E?E:(E=G(d.right,T),""!==E?E:"");case"LogicalExpression":return E=G(d.left,T),""!==E?E:"AssignmentExpression"===d.left.type||"UpdateExpression"===d.left.type?H(d.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):(E=G(d.right,T),""!==E?E:"AssignmentExpression"===d.right.type||"UpdateExpression"===d.right.type?H(d.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"");case"ArrayExpression":E="";for(let pe=0;pe<d.elements.length;pe++)if(E=G(d.elements[pe],T),""!==E)return E;return E;case"TemplateLiteral":E="";for(let pe=0;pe<d.quasis.length;pe++)if(E=G(d.quasis[pe],T),""!==E)return E;for(let pe=0;pe<d.expressions.length;pe++)if(E=G(d.expressions[pe],T),""!==E)return E;return E;case"ObjectExpression":E="";for(let pe=0;pe<d.properties.length;pe++){if(E="",null!==d.properties[pe].key&&("Literal"!==d.properties[pe].key.type&&"Identifier"!==d.properties[pe].key.type&&(E=H(d,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===d.properties[pe].key.type)){const De=d.properties[pe].key,ve="value"in De?De.value:null;"string"==typeof ve||ve instanceof String||(E=H(d,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}if(""===E&&(E=G(d.properties[pe],T)),""!==E)return E}return E;case"Property":return"Literal"!==d.key.type&&"Identifier"!==d.key.type?H(d,"SYNTAX","ONLYLITERAL"):("Identifier"!==d.key.type&&(E=G(d.key,T),""!==E)||(E=G(d.value,T)),E);default:return E}return E}catch(pe){throw pe}}function ee(d,T){let E=!1;const V=T.toLowerCase();return X(d,he=>!E&&("Identifier"===he.type&&he.name&&he.name.toLowerCase()===V&&(E=!0),!0)),E}function w(d,T){let E=!1;const V=T.toLowerCase();return X(d,he=>!(E||"CallExpression"===he.type&&"Identifier"===he.callee.type&&he.callee.name&&he.callee.name.toLowerCase()===V&&(E=!0,1))),E}function g(d){const T=[];return X(d,E=>"MemberExpression"!==E.type||"Identifier"!==E.object.type||(!1===E.computed&&E.object&&E.object.name&&E.property&&"Identifier"===E.property.type&&E.property.name?T.push(E.object.name.toLowerCase()+"."+E.property.name.toLowerCase()):E.object&&E.object.name&&E.property&&"Literal"===E.property.type&&"string"==typeof E.property.value&&T.push(E.object.name.toLowerCase()+"."+E.property.value.toString().toLowerCase()),!1)),T}function R(d){const T=[];return X(d,E=>{if("CallExpression"===E.type&&"Identifier"===E.callee.type&&"expects"===E.callee.name.toLowerCase()){let V="";for(let he=0;he<(E.arguments||[]).length;he++)0===he?"Identifier"===E.arguments[he].type&&(V=E.arguments[he].name.toLowerCase()):V&&"Literal"===E.arguments[he].type&&W(E.arguments[he].value)&&T.push(V+"."+E.arguments[he].value.toLowerCase());return!1}return"MemberExpression"!==E.type||"Identifier"!==E.object.type||(!1===E.computed&&E.object&&E.object.name&&E.property&&"Identifier"===E.property.type&&E.property.name?T.push(E.object.name.toLowerCase()+"."+E.property.name.toLowerCase()):E.object&&E.object.name&&E.property&&"Literal"===E.property.type&&"string"==typeof E.property.value&&T.push(E.object.name.toLowerCase()+"."+E.property.value.toString().toLowerCase()),!1)}),T}function _(d,T){const E=[];if(null!=T.params)for(let V=0;V<T.params.length;V++)E.push("any");return{name:d,return:"any",params:E}}function O(d,T,E,V){const he={};null==d&&(d={}),null==E&&(E={}),he.infinity={type:"any"},he.textformatting={type:"any"},he.pi={type:"any"};for(const pe in T)"sync"===V&&void 0!==T[pe].min?he[pe]={type:"FormulaFunction",signature:{min:T[pe].min,max:T[pe].max}}:"sync"!==V&&void 0!==T[pe].fmin&&(he[pe]={type:"FormulaFunction",signature:{min:T[pe].fmin,max:T[pe].fmax}});for(let pe=0;pe<E.length;pe++){const De=E[pe];he[De.name]={type:"FormulaFunction",signature:De}}for(const pe in d)he[pe]=d[pe],he[pe].type="any";return he}function Z(d,T,E="async",V=K){const he={globalScope:O(T.vars,V,T.customFunctions,E),localScope:null};return G(d.body[0].body,he)}function se(d){return"BlockStatement"!==d.body[0].body.type?"Invalid formula content.":N(d.body[0].body)}function H(d,T,E){let V="";switch(T){case"SYNTAX":default:V="Syntax Error: ";break;case"RUNTIME":V="Runtime Error: "}try{switch(d.type){case"IfStatement":switch(E){case"CANNOT_USE_ASSIGNMENT_IN_CONDITION":V+=" Assignments not be made in logical tests";break;case"CANNOT_USE_NONBOOLEAN_IN_CONDITION":V+=" Non Boolean used as Condition"}break;case"UpdateExpression":case"AssignmentExpression":switch(E){case"CANNOT_USE_ASSIGNMENT_IN_CONDITION":V+=" Assignments not be made in logical tests";break;case"ASSIGNMENTTOVARSONLY":V+=" Assignments can only be made to identifiers"}break;case"ExpressionStatement":V+=" Assignments can only be made to identifiers";break;case"FunctionDeclaration":switch(E){case"GLOBALFUNCTIONSONLY":V+=" Functions cannot be declared as variables";break;case"FUNCTIONMUSTHAVEIDENTIFIER":V+=" Function Definition must have an identifier"}break;case"VariableDeclaration":V+=" Only 1 variable can be declared at a time";break;case"VariableDeclarator":switch(E){case"FUNCTIONVARIABLEDECLARATOR":V+=" Functions cannot be declared as variables";break;case"VARIABLEMUSTHAVEIDENTIFIER":V+=" Variable Definition must have an identifier"}break;case"Identifier":V+=" Identifier Not Found. ",V+=d.name;break;case"ObjectExpression":"OBJECTPROPERTYMUSTBESTRING"===E&&(V+=" Property name must be a string");break;case"ForStatement":"CANNOT_USE_NONBOOLEAN_IN_CONDITION"===E&&(V+=" Non Boolean used as Condition");break;case"ForInStatement":switch(E){case"ONLY1VAR":V+=" Can only declare 1 var for use with IN";break;case"CANNOTDECLAREVAL":V+=" Can only declare value for use with IN";break;case"LEFTNOVAR":V+="Must provide a variable to iterate with.";break;case"VARIABLENOTDECLARED":V+="Variable must be declared before it is used..";break;case"CANNOTITERATETHISTYPE":V+="This type cannot be used in an IN loop"}break;case"MemberExpression":switch(E){case"PROPERTYNOTFOUND":V+="Cannot find member property. ",V+=!1===d.computed&&"Identifier"===d.property.type?d.property.name:"";break;case"OUTOFBOUNDS":V+="Out of Bounds. ",V+=!1===d.computed&&"Identifier"===d.property.type?d.property.name:"";break;case"NOTFOUND":V+="Cannot call member method on null. ",V+=!1===d.computed&&"Identifier"===d.property.type?d.property.name:"";break;case"INVALIDTYPE":V+="Cannot call member property on object of this type. ",V+=!1===d.computed&&"Identifier"===d.property.type?d.property.name:""}break;case"Property":"ONLYLITERAL"===E&&(V+="Property names must be literals or identifiers");break;case"Literal":break;case"CallExpression":switch(E){case"WRONGSIGNATURE":V+="Function signature does not match: ",V+="Identifier"===d.callee.type?d.callee.name:"";break;case"ONLYNODESUPPORTED":V+="Functions must be declared.",V+="Identifier"===d.callee.type?d.callee.name:"";break;case"NOTAFUNCTION":V+="Not a Function: ",V+="Identifier"===d.callee.type?d.callee.name:"";break;case"NOTFOUND":V+="Function Not Found: "+("Identifier"===d.callee.type?d.callee.name:"")}break;case"UnaryExpression":switch(E){case"NOTSUPPORTEDUNARYOPERATOR":V+="Operator "+d.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case"NOTSUPPORTEDTYPE":V+="Unary operator "+d.operator+" cannot be used with this argument."}case"BinaryExpression":"OPERATORNOTRECOGNISED"===E&&(V+="Binary Operator not recognised "+d.operator);break;case"LogicalExpression":switch(E){case"ONLYBOOLEAN":V+="Operator "+d.operator+" cannot be used. Only || or && are allowed values";break;case"ONLYORORAND":V+="Logical Expression "+d.operator+" being applied to parameters that are not boolean."}break;case"ArrayExpression":"FUNCTIONCONTEXTILLEGAL"===E&&(V+=" Cannot Put Function inside Array.");break;default:V+="Expression contains unrecognised code structures."}}catch(he){throw he}return V}function I(d,T,E){return{line:d.loc.start.line,character:d.loc.start.column,reason:H(d,T,E)}}function ue(d,T,E,V,he=!0){if(null===d)throw new Error("Unnexpexted Expression Syntax");let pe=null;try{switch(d.type){case"VariableDeclarator":return"Identifier"!==d.id.type?V.push(I(d,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(d.id.name.toLowerCase(),null===T.localScope?T.globalScope[d.id.name.toLowerCase()]={type:"any"}:T.localScope[d.id.name.toLowerCase()]={type:"any"}),void(null!==d.init&&ue(d.init,T,E,V,he));case"FunctionDeclaration":return!1===he&&V.push(I(d,"SYNTAX","GLOBALFUNCTIONSONLY")),"Identifier"!==d.id.type&&V.push(I(d,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER")),pe=_("",d),function $(d,T,E,V){const he={globalScope:T.globalScope,localScope:{}};for(let pe=0;pe<d.params.length;pe++)he.localScope[d.params[pe].name.toLowerCase()]={type:"any"};ue(d.body,he,E,V,!1)}(d,T,E,V),null!==T.localScope&&V.push(I(d,"SYNTAX","GLOBALFUNCTIONSONLY")),pe.isnative=!1,void("Identifier"===d.id.type&&(T.globalScope[d.id.name.toLowerCase()]={type:"FormulaFunction",signature:[pe]}));case"VariableDeclaration":for(let De=0;De<d.declarations.length;De++)ue(d.declarations[De],T,E,V,he);return;case"IfStatement":return null!==d.test&&(ue(d.test,T,E,V,he),"AssignmentExpression"!==d.test.type&&"UpdateExpression"!==d.test.type||V.push(I(d.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"))),null!==d.consequent&&ue(d.consequent,T,E,V,he),void(null!==d.alternate&&ue(d.alternate,T,E,V,he));case"EmptyStatement":case"BreakStatement":case"ContinueStatement":case"Literal":case"TemplateElement":return;case"BlockStatement":if(null!==d.body)for(let De=0;De<d.body.length;De++)ue(d.body[De],T,E,V,he);return;case"ReturnStatement":return void(null!==d.argument&&ue(d.argument,T,E,V,he));case"ForInStatement":return"VariableDeclaration"===d.left.type?(d.left.declarations.length>1&&V.push(I(d,"SYNTAX","ONLY1VAR")),null!==d.left.declarations[0].init&&V.push(I(d,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==d.left.type&&V.push(I(d,"SYNTAX","LEFTNOTVAR")),ue(d.left,T,E,V,he),ue(d.right,T,E,V,he),void ue(d.body,T,E,V,he);case"ForStatement":return null!==d.init&&ue(d.init,T,E,V,he),null!==d.test&&ue(d.test,T,E,V,he),null!==d.body&&ue(d.body,T,E,V,he),void(null!==d.update&&ue(d.update,T,E,V,he));case"UpdateExpression":if("Identifier"!==d.argument.type&&"MemberExpression"!==d.argument.type)V.push(I(d,"SYNTAX","ASSIGNMENTTOVARSONLY"));else{if("Identifier"===d.argument.type){let De=!1;!1===E&&(null!==T.localScope&&void 0!==T.localScope[d.argument.name.toLowerCase()]&&(De=!0),void 0!==T.globalScope[d.argument.name.toLowerCase()]&&(De=!0),!1===De&&V.push({line:null===d?0:d.loc.start.line,character:null===d?0:d.loc.start.column,reason:"Identifier "+d.argument.name+" has not been declared."}))}"MemberExpression"===d.argument.type&&ue(d.argument,T,E,V,he)}return;case"AssignmentExpression":{switch("Identifier"!==d.left.type&&"MemberExpression"!==d.left.type&&V.push(I(d,"SYNTAX","ASSIGNMENTTOVARSONLY")),d.operator){case"=":case"/=":case"*=":case"%=":case"+=":case"-=":break;default:V.push(I(d,"SYNTAX","OPERATORNOTRECOGNISED"))}ue(d.right,T,E,V,he);let De=!1;return"Identifier"===d.left.type&&(null!==T.localScope&&void 0!==T.localScope[d.left.name.toLowerCase()]&&(De=!0),void 0!==T.globalScope[d.left.name.toLowerCase()]&&(De=!0),!1===E&&!1===De&&V.push({line:null===d?0:d.loc.start.line,character:null===d?0:d.loc.start.column,reason:"Identifier "+d.left.name+" has not been declared."})),void("MemberExpression"===d.left.type&&ue(d.left,T,E,V,he))}case"ExpressionStatement":return void ue(d.expression,T,E,V,he);case"Identifier":{const De=d.name.toLowerCase();if(null!==T.localScope&&void 0!==T.localScope[De]||void 0!==T.globalScope[De])return;!1===E&&V.push(I(d,"SYNTAX","VARIABLENOTFOUND"));break}case"MemberExpression":return ue(d.object,T,E,V,he),void(!0===d.computed&&ue(d.property,T,E,V,he));case"CallExpression":"Identifier"!==d.callee.type&&V.push(I(d,"SYNTAX","ONLYNODESSUPPORTED"));for(let De=0;De<d.arguments.length;De++)ue(d.arguments[De],T,E,V,he);if("Identifier"===d.callee.type){const De=D(d.callee.name,d.arguments,T);!1===E&&-1===De&&V.push(I(d,"SYNTAX","NOTFOUND")),-2===De&&V.push(I(d,"SYNTAX","WRONGSIGNATURE"))}return;case"UnaryExpression":return void ue(d.argument,T,E,V,he);case"BinaryExpression":switch(ue(d.left,T,E,V,he),ue(d.right,T,E,V,he),d.operator){case"==":case"!=":case"<":case"<=":case">":case">=":case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"<<":case">>":case">>>":break;default:V.push(I(d,"SYNTAX","OPERATORNOTRECOGNISED"))}return;case"LogicalExpression":switch(d.operator){case"&&":case"||":break;default:V.push(I(d,"SYNTAX","OPERATORNOTRECOGNISED"))}return ue(d.left,T,E,V,he),"AssignmentExpression"!==d.left.type&&"UpdateExpression"!==d.left.type||V.push(I(d,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")),ue(d.right,T,E,V,he),void("AssignmentExpression"!==d.right.type&&"UpdateExpression"!==d.right.type||V.push(I(d,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));case"ArrayExpression":for(let De=0;De<d.elements.length;De++)ue(d.elements[De],T,E,V,he);return;case"TemplateLiteral":for(let De=0;De<d.quasis.length;De++)ue(d.quasis[De],T,E,V,he);for(let De=0;De<d.expressions.length;De++)ue(d.expressions[De],T,E,V,he);return;case"ObjectExpression":for(let De=0;De<d.properties.length;De++)ue(d.properties[De],T,E,V,he);return;case"Property":return"Literal"!==d.key.type&&"Identifier"!==d.key.type&&V.push(I(d,"SYNTAX","ONLYLITERAL")),"Literal"===d.key.type&&ue(d.key,T,E,V,he),void ue(d.value,T,E,V,he);default:V.push(I(d,"SYNTAX","UNRECOGNISED"))}return}catch(De){V.push({line:null===d?0:d.loc.start.line,character:null===d?0:d.loc.start.column,reason:"Unnexpected Syntax"})}}function m(d,T,E,V="async",he=K){const pe=[];if("BlockStatement"!==d.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];null==T&&(T={vars:{},customFunctions:[]});const De={globalScope:O(T.vars,he,T.customFunctions,V),localScope:null};try{ue(d.body[0].body,De,E,pe)}catch(ve){}return pe}function v(d){const T=[];return X(d,E=>("CallExpression"===E.type&&"Identifier"===E.callee.type&&T.push(E.callee.name.toLowerCase()),!0)),T}function ie(d,T=[]){let E=null;if(void 0===d.usesFeatureSet){null===E&&(E=v(d)),d.usesFeatureSet=!1;for(let V=0;V<E.length;V++)fe.indexOf(E[V])>-1&&(d.usesFeatureSet=!0,d.isAsync=!0);if(!1===d.usesFeatureSet&&T&&T.length>0)for(const V of T)if(ee(d,V)){d.usesFeatureSet=!0,d.isAsync=!0;break}}if(void 0===d.usesGeometry){d.usesGeometry=!1,null===E&&(E=v(d));for(let V=0;V<E.length;V++)y.indexOf(E[V])>-1&&(d.usesGeometry=!0)}}},67525:(Ie,Ce,Q)=>{Q.d(Ce,{A:()=>le});var K=Q(7652),fe=Q(98362),y=Q(47562),W=Q(10699);const le=Object.freeze({__proto__:null,registerFunctions:function z(D){function S(N,G){if(G instanceof K.Z)return D.arcadeCustomFunctionHandler(G);if(G instanceof y.N)return(...ee)=>G.fn(N,{preparsed:!0,arguments:ee});if(G instanceof y.S)return(...ee)=>{if(ee.length!==G.paramCount)throw new Error("Invalid parameters");return G.fn(...ee)};throw new Error("Invalid Parameter")}function X(N){if(N instanceof fe.Z)return N.toArray();if((0,y.a)(N))return N;throw new Error("Invalid Parameter")}D.functions.array=function(N,G){return D.standardFunction(N,G,function(ee,w,g){(0,y.p)(g,1,2);const R=(0,y.t)(g[0]);if(isNaN(R)||!1===(0,y.D)(R))throw new Error("Invalid Parameter");const _=(0,y.E)(g[1],null),re=new Array(R);return re.fill(_),re})},D.functions.front=function(N,G){return D.standardFunction(N,G,function(ee,w,g){if((0,y.p)(g,1,1),(0,y.b)(g[0])){if(g[0].length()<=0)throw new Error("Array is empty");return g[0].get(0)}if((0,y.a)(g[0])){if(g[0].length<=0)throw new Error("Array is empty");return g[0][0]}throw new Error("Invalid Parameter")})},D.functions.back=function(N,G){return D.standardFunction(N,G,function(ee,w,g){if((0,y.p)(g,1,1),(0,y.b)(g[0])){if(g[0].length()<=0)throw new Error("Array is empty");return g[0].get(g[0].length()-1)}if((0,y.a)(g[0])){if(g[0].length<=0)throw new Error("Array is empty");return g[0][g[0].length-1]}throw new Error("Invalid Parameter")})},D.functions.push=function(N,G){return D.standardFunction(N,G,function(ee,w,g){if((0,y.p)(g,1,2),(0,y.a)(g[0]))return g[0][g[0].length]=g[1],g[0].length;throw new Error("Invalid Parameter")})},D.functions.pop=function(N,G){return D.standardFunction(N,G,function(ee,w,g){if((0,y.p)(g,1,1),(0,y.a)(g[0])){if(g[0].length<=0)throw new Error("Array is empty");const R=g[0][g[0].length-1];return g[0].length=g[0].length-1,R}throw new Error("Invalid Parameter")})},D.functions.erase=function(N,G){return D.standardFunction(N,G,function(ee,w,g){if((0,y.p)(g,2,2),(0,y.a)(g[0])){let R=(0,y.t)(g[1]);if(isNaN(R)||!1===(0,y.D)(R))throw new Error("Invalid Parameter");const _=g[0];if(_.length<=0)throw new Error("Array is empty");if(R<0&&(R=_.length+R),R<0)throw new Error("Element not found");if(R>=_.length)throw new Error("Index is greater than array");return _.splice(R,1),y.v}throw new Error("Invalid Parameter")})},D.functions.insert=function(N,G){return D.standardFunction(N,G,function(ee,w,g){if((0,y.p)(g,3,3),(0,y.a)(g[0])){const R=(0,y.t)(g[1]);if(isNaN(R)||!1===(0,y.D)(R))throw new Error("Invalid Parameter");const _=g[2],re=g[0];if(R>re.length)throw new Error("Index is greater than array");if(R<0&&R<-1*re.length)throw new Error("Index is greater than array");return R===re.length?(re[R]=_,y.v):(re.splice(R,0,_),y.v)}throw new Error("Invalid Parameter")})},D.functions.resize=function(N,G){return D.standardFunction(N,G,function(ee,w,g){if((0,y.p)(g,2,3),(0,y.a)(g[0])){const R=(0,y.t)(g[1]);if(isNaN(R)||!1===(0,y.D)(R))throw new Error("Invalid Parameter");if(R<0)throw new Error("Size cannot be negative");const _=(0,y.E)(g[2],null),re=g[0];if(re.length>=R)return re.length=R,y.v;const O=re.length;re.length=R;for(let Z=O;Z<re.length;Z++)re[Z]=_;return y.v}throw new Error("Invalid Parameter")})},D.functions.includes=function(N,G){return D.standardFunction(N,G,function(ee,w,g){if((0,y.p)(g,2,2),(0,y.a)(g[0])){const R=g[1];return g[0].findIndex(_=>(0,y.e)(_,R))>-1}if((0,y.b)(g[0])){const R=g[1];return g[0].toArray().findIndex(_=>(0,y.e)(_,R))>-1}throw new Error("Invalid Parameter")})},D.functions.slice=function(N,G){return D.standardFunction(N,G,function(ee,w,g){if((0,y.p)(g,1,3),(0,y.a)(g[0])){const R=(0,y.t)((0,y.E)(g[1],0)),_=(0,y.t)((0,y.E)(g[2],g[0].length));if(isNaN(R)||!1===(0,y.D)(R))throw new Error("Invalid Parameter");if(isNaN(_)||!1===(0,y.D)(_))throw new Error("Invalid Parameter");return g[0].slice(R,_)}if((0,y.b)(g[0])){const R=g[0],_=(0,y.t)((0,y.E)(g[1],0)),re=(0,y.t)((0,y.E)(g[2],R.length()));if(isNaN(_)||!1===(0,y.D)(_))throw new Error("Invalid Parameter");if(isNaN(re)||!1===(0,y.D)(re))throw new Error("Invalid Parameter");return R.toArray().slice(_,re)}throw new Error("Invalid Parameter")})},D.functions.splice=function(N,G){return D.standardFunction(N,G,function(ee,w,g){const R=[];for(let _=0;_<g.length;_++)(0,y.a)(g[_])?R.push(...g[_]):(0,y.b)(g[_])?R.push(...g[_].toArray()):R.push(g[_]);return R})},"sync"===D.mode&&(D.functions.any=function(N,G){return D.standardFunction(N,G,function(ee,w,g){(0,y.p)(g,2,2);const R=S(N,g[1]),_=X(g[0]);for(const re of _){const O=R(re);if((0,y.i)(O)&&!0===O)return!0}return!1})},D.functions.all=function(N,G){return D.standardFunction(N,G,function(ee,w,g){(0,y.p)(g,2,2);const R=S(N,g[1]),_=X(g[0]);for(const re of _)if(!0!==R(re))return!1;return!0})},D.functions.none=function(N,G){return D.standardFunction(N,G,function(ee,w,g){(0,y.p)(g,2,2);const R=S(N,g[1]),_=X(g[0]);for(const re of _)if(!0===R(re))return!1;return!0})},D.functions.reduce=function(N,G){return D.standardFunction(N,G,function(ee,w,g){(0,y.p)(g,2,3);const R=S(N,g[1]),_=X(g[0]);return 2===g.length?0===_.length?null:_.reduce((re,O)=>{const Z=R(re,O);return void 0!==Z&&Z!==y.v?Z:null}):_.reduce((re,O)=>{const Z=R(re,O);return void 0!==Z&&Z!==y.v?Z:null},g[2])})},D.functions.map=function(N,G){return D.standardFunction(N,G,function(ee,w,g){(0,y.p)(g,2,2);const R=S(N,g[1]),_=X(g[0]),re=[];for(const O of _){const Z=R(O);re.push(void 0!==Z&&Z!==y.v?Z:null)}return re})},D.functions.filter=function(N,G){return D.standardFunction(N,G,function(ee,w,g){(0,y.p)(g,2,2);const R=S(N,g[1]),_=X(g[0]),re=[];for(const O of _)!0===R(O)&&re.push(O);return re})}),"async"===D.mode&&(D.functions.any=function(N,G){return D.standardFunctionAsync(N,G,function(ee,w,g){(0,y.p)(g,2,2);const R=S(N,g[1]),_=X(g[0]),re={result:!1};return _.reduce((O,Z,se)=>O.then(H=>{if(se>0&&!0===H&&(re.result=!0),!0===re.result)return(0,W.DB)(!0);const I=R(Z);return(0,W.y8)(I)?I:(0,W.DB)(I)}),Promise.resolve(!1)).then(O=>(!0===O&&(re.result=!0),re.result))})},D.functions.all=function(N,G){return D.standardFunctionAsync(N,G,function(ee,w,g){(0,y.p)(g,2,2);const R=S(N,g[1]),_=X(g[0]),re={result:!0};return _.reduce((O,Z,se)=>O.then(H=>{if(se>0&&!0!==H&&(re.result=!1),!1===re.result)return(0,W.DB)(!1);const I=R(Z);return(0,W.y8)(I)?I:(0,W.DB)(I)}),Promise.resolve(!0)).then(O=>(!0!==O&&(re.result=!1),re.result))})},D.functions.none=function(N,G){return D.standardFunctionAsync(N,G,function(ee,w,g){(0,y.p)(g,2,2);const R=S(N,g[1]),_=X(g[0]),re={result:!0};return _.reduce((O,Z,se)=>O.then(H=>{if(se>0&&!0===H&&(re.result=!1),!1===re.result)return(0,W.DB)(!0);const I=R(Z);return(0,W.y8)(I)?I:(0,W.DB)(I)}),Promise.resolve(!1)).then(O=>(!0===O&&(re.result=!1),re.result))})},D.functions.filter=function(N,G){return D.standardFunctionAsync(N,G,function(ee,w,g){(0,y.p)(g,2,2);const R=S(N,g[1]),_=X(g[0]),re=[];return _.reduce((O,Z,se)=>O.then(H=>{se>0&&!0===H&&re.push(_[se-1]);const I=R(Z);return(0,W.y8)(I)?I:(0,W.DB)(I)}),Promise.resolve(!1)).then(O=>(!0===O&&_.length>0&&re.push(_[_.length-1]),re))})},D.functions.reduce=function(N,G){return D.standardFunctionAsync(N,G,function(ee,w,g){(0,y.p)(g,2,3);const R=S(N,g[1]),_=X(g[0]);let re=null;if(g.length>2){const O=(0,y.E)(g[2],null);re=_.reduce((Z,se)=>Z.then(H=>{void 0!==H&&H!==y.v||(H=null);const I=R(H,se);return(0,W.y8)(I)?I:(0,W.DB)(I)}),Promise.resolve(O))}else{if(0===_.length)return null;re=_.reduce((O,Z,se)=>{if(se<=1){const H=R(O,Z);return(0,W.y8)(H)?H:(0,W.DB)(H)}return O.then(H=>{void 0!==H&&H!==y.v||(H=null);const I=R(H,Z);return(0,W.y8)(I)?I:(0,W.DB)(I)})})}return re.then(O=>void 0!==O&&O!==y.v?O:null)})},D.functions.map=function(N,G){return D.standardFunctionAsync(N,G,function(ee,w,g){(0,y.p)(g,2,2);const R=S(N,g[1]),_=X(g[0]),re={result:[]};return _.reduce((O,Z,se)=>O.then(H=>{se>0&&re.result.push(void 0!==H&&H!==y.v?H:null);const I=R(Z);return(0,W.y8)(I)?I:(0,W.DB)(I)}),Promise.resolve()).then(O=>(_.length>0&&re.result.push(void 0!==O&&O!==y.v?O:null),re.result))})})}})},77044:(Ie,Ce,Q)=>{Q.d(Ce,{Y:()=>y});var K=Q(62208);function fe(N,G){return N?G?4:3:G?3:2}function y(N,G,ee,w,g){if((0,K.Wi)(G)||!G.lengths.length)return null;const R="upperLeft"===(null==g?void 0:g.originPosition)?-1:1;N.lengths.length&&(N.lengths.length=0),N.coords.length&&(N.coords.length=0);const _=N.coords,re=[],O=ee?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:Z,coords:se}=G,H=fe(ee,w);let I=0;for(const $ of Z){const ue=W(O,se,I,$,ee,w,R);ue&&re.push(ue),I+=$*H}if(re.sort(($,ue)=>{let m=R*$[2]-R*ue[2];return 0===m&&ee&&(m=$[4]-ue[4]),m}),re.length){let $=6*re[0][2];_[0]=re[0][0]/$,_[1]=re[0][1]/$,ee&&($=6*re[0][4],_[2]=0!==$?re[0][3]/$:0),(_[0]<O[0]||_[0]>O[1]||_[1]<O[2]||_[1]>O[3]||ee&&(_[2]<O[4]||_[2]>O[5]))&&(_.length=0)}if(!_.length){const $=G.lengths[0]?function z(N,G,ee,w,g){const R=fe(w,g);let _=G,re=G+R,O=0,Z=0,se=0,H=0;for(let I=0,$=ee-1;I<$;I++,_+=R,re+=R){const ue=N[_],m=N[_+1],v=N[_+2],ie=N[re],te=N[re+1],ne=N[re+2],d=w?D(ue,m,v,ie,te,ne):le(ue,m,ie,te);if(d)if(O+=d,w){const T=X(ue,m,v,ie,te,ne);Z+=d*T[0],se+=d*T[1],H+=d*T[2]}else{const T=S(ue,m,ie,te);Z+=d*T[0],se+=d*T[1]}}return O>0?w?[Z/O,se/O,H/O]:[Z/O,se/O]:ee>0?w?[N[G],N[G+1],N[G+2]]:[N[G],N[G+1]]:null}(se,0,Z[0],ee,w):null;if(!$)return null;_[0]=$[0],_[1]=$[1],ee&&$.length>2&&(_[2]=$[2])}return N}function W(N,G,ee,w,g,R,_=1){const re=fe(g,R);let O=ee,Z=ee+re,se=0,H=0,I=0,$=0,ue=0;for(let v=0,ie=w-1;v<ie;v++,O+=re,Z+=re){const te=G[O],ne=G[O+1],d=G[O+2],T=G[Z],E=G[Z+1],V=G[Z+2];let he=te*E-T*ne;$+=he,se+=(te+T)*he,H+=(ne+E)*he,g&&(he=te*V-T*d,I+=(d+V)*he,ue+=he),te<N[0]&&(N[0]=te),te>N[1]&&(N[1]=te),ne<N[2]&&(N[2]=ne),ne>N[3]&&(N[3]=ne),g&&(d<N[4]&&(N[4]=d),d>N[5]&&(N[5]=d))}if($*_>0&&($*=-1),ue*_>0&&(ue*=-1),!$)return null;const m=[se,H,.5*$];return g&&(m[3]=I,m[4]=.5*ue),m}function le(N,G,ee,w){const g=ee-N,R=w-G;return Math.sqrt(g*g+R*R)}function D(N,G,ee,w,g,R){const _=w-N,re=g-G,O=R-ee;return Math.sqrt(_*_+re*re+O*O)}function S(N,G,ee,w){return[N+.5*(ee-N),G+.5*(w-G)]}function X(N,G,ee,w,g,R){return[N+.5*(w-N),G+.5*(g-G),ee+.5*(R-ee)]}},75068:(Ie,Ce,Q)=>{Q.r(Ce),Q.d(Ce,{Dictionary:()=>y.Z,arcade:()=>Gr,arcadeFeature:()=>W.Z,convertFeatureLayerToFeatureSet:()=>ri,convertMapToFeatureSetCollection:()=>ii,convertServiceUrlToWorkspace:()=>ni,createExecContext:()=>Vr,createFeature:()=>Kr,createFunction:()=>Yr,createSyntaxTree:()=>pt,dependsOnView:()=>qr,enableFeatureSetOperations:()=>oi,enableGeometryOperations:()=>ai,evalSyntaxTree:()=>Jr,executeAsyncFunction:()=>$r,executeFunction:()=>Xr,extractFieldNames:()=>Qr,getViewInfo:()=>ti,hasGeometryFunctions:()=>fi,hasGeometryOperations:()=>pi,hasVariable:()=>ei,loadScriptDependencies:()=>si,updateExecContext:()=>Wr});var K=Q(37780),fe=Q(22386),y=Q(6729),W=Q(42275),z=Q(5371),le=Q(26685),D=Q(47562),S=Q(19927),X=Q(67525),N=Q(84228),G=Q(24499),ee=Q(63461),w=Q(53840),g=Q(97536),R=Q(31975),_=Q(10699),re=Q(2004),O=Q(21674),Z=Q(72854),se=Q(49672),H=Q(37118),I=Q(55214),$=Q(65234),ue=Q(25208);function v(u,o,h){try{return h(u,null,o.arguments)}catch(f){throw f}}function ie(u){return u instanceof Error?(0,_.d1)(u):(0,_.d1)(new Error(u))}function te(u,o){try{switch(o.type){case"EmptyStatement":return"lc.voidOperation";case"VariableDeclarator":return function _e(u,o){let h=null===o.init?null:te(u,o.init);h===D.v&&(h=null);const f=o.id.name.toLowerCase();if(null!==u.localScope){if(void 0!==u.localScope[f])return"lscope['"+f+"']="+h+"; ";if(void 0!==u.localScope._SymbolsMap[f])return"lscope['"+u.localScope._SymbolsMap[f]+"']="+h+"; ";{const p=it(u);return u.localScope._SymbolsMap[f]=p,u.mangleMap[f]=p,"lscope['"+p+"']="+h+"; "}}if(void 0!==u.globalScope[f])return"gscope['"+f+"']="+h+"; ";if(void 0!==u.globalScope._SymbolsMap[f])return"gscope['"+u.globalScope._SymbolsMap[f]+"']="+h+"; ";{const p=it(u);return u.globalScope._SymbolsMap[f]=p,u.mangleMap[f]=p,"gscope['"+p+"']="+h+"; "}}(u,o);case"VariableDeclaration":return function nt(u,o){const h=[];for(let f=0;f<o.declarations.length;f++)h.push(te(u,o.declarations[f]));return h.join("\n")+" \n lastStatement=  lc.voidOperation; \n"}(u,o);case"BlockStatement":return Te(u,o);case"FunctionDeclaration":return function Me(u,o){const h=o.id.name.toLowerCase(),f={isAsync:u.isAsync,spatialReference:u.spatialReference,console:u.console,lrucache:u.lrucache,interceptor:u.interceptor,services:u.services,symbols:u.symbols,mangleMap:u.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:u.depthCounter+1,globalScope:u.globalScope};if(f.depthCounter>64)throw new Error("Exceeded maximum function depth");let p="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement = lc.voidOperation; \n   var lscope = runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";for(let B=0;B<o.params.length;B++){const oe=o.params[B].name.toLowerCase(),ce=it(u);f.localScope._SymbolsMap[oe]=ce,f.mangleMap[oe]=ce,p+="lscope['"+ce+"']=arguments["+B.toString()+"];\n"}if(!0===u.isAsync?(p+="return lang.__awaiter(this, void 0, void 0, function* () {\n",p+=Te(f,o.body)+"\n return lastStatement; ",p+="});  }",p+=", runtimeCtx),"+o.params.length+")",p+="\n lastStatement = lc.voidOperation; \n"):(p+=Te(f,o.body)+"\n return lastStatement; }, runtimeCtx),"+o.params.length+")",p+="\n lastStatement = lc.voidOperation; \n"),void 0!==u.globalScope[h])return"gscope['"+h+"']="+p;if(void 0!==u.globalScope._SymbolsMap[h])return"gscope['"+u.globalScope._SymbolsMap[h]+"']="+p;{const B=it(u);return u.globalScope._SymbolsMap[h]=B,u.mangleMap[h]=B,"gscope['"+B+"']="+p}}(u,o);case"ReturnStatement":return function ze(u,o){return null===o.argument?"return lc.voidOperation":"return "+te(u,o.argument)}(u,o);case"IfStatement":return function ve(u,o){if("AssignmentExpression"===o.test.type||"UpdateExpression"===o.test.type)throw new Error((0,S.H5)(o.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));const h=te(u,o.test),f=Le(u);let p="var "+f+" = "+h+";\n if ("+f+" === true) {\n"+De(u,o.consequent)+"\n }\n";return p+=null!==o.alternate?"else if ("+f+"===false)   { \n"+De(u,o.alternate)+"}\n":"else if ("+f+"===false) { \n lastStatement = lc.voidOperation;\n }\n",p+="else { lang.error({type: '"+o.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n",p}(u,o);case"ExpressionStatement":return function pe(u,o){return"AssignmentExpression"===o.expression.type?"lastStatement = lc.voidOperation; "+te(u,o.expression)+"; \n ":"lastStatement = "+te(u,o.expression)+"; "}(u,o);case"AssignmentExpression":return function he(u,o){const h=te(u,o.right);let f=null,p="";if("MemberExpression"===o.left.type)return f=te(u,o.left.object),p=!0===o.left.computed?te(u,o.left.property):"'"+o.left.property.name+"'","lang.assignmember("+f+","+p+",'"+o.operator+"',"+h+")";if(f=o.left.name.toLowerCase(),null!==u.localScope){if(void 0!==u.localScope[f])return"lscope['"+f+"']=lang.assign("+h+",'"+o.operator+"', lscope['"+f+"'])";if(void 0!==u.localScope._SymbolsMap[f])return"lscope['"+u.localScope._SymbolsMap[f]+"']=lang.assign("+h+",'"+o.operator+"', lscope['"+u.localScope._SymbolsMap[f]+"'])"}if(void 0!==u.globalScope[f])return"gscope['"+f+"']=lang.assign("+h+",'"+o.operator+"', gscope['"+f+"'])";if(void 0!==u.globalScope._SymbolsMap[f])return"gscope['"+u.globalScope._SymbolsMap[f]+"']=lang.assign("+h+",'"+o.operator+"', gscope['"+u.globalScope._SymbolsMap[f]+"'])";throw new Error("Variable not recognised")}(u,o);case"UpdateExpression":return function V(u,o){let h=null,f="";if("MemberExpression"===o.argument.type)return h=te(u,o.argument.object),f=!0===o.argument.computed?te(u,o.argument.property):"'"+o.argument.property.name+"'","lang.memberupdate("+h+","+f+",'"+o.operator+"',"+o.prefix+")";if(h=o.argument.name.toLowerCase(),null!==u.localScope){if(void 0!==u.localScope[h])return"lang.update(lscope, '"+h+"','"+o.operator+"',"+o.prefix+")";if(void 0!==u.localScope._SymbolsMap[h])return"lang.update(lscope, '"+u.localScope._SymbolsMap[h]+"','"+o.operator+"',"+o.prefix+")"}if(void 0!==u.globalScope[h])return"lang.update(gscope, '"+h+"','"+o.operator+"',"+o.prefix+")";if(void 0!==u.globalScope._SymbolsMap[h])return"lang.update(gscope, '"+u.globalScope._SymbolsMap[h]+"','"+o.operator+"',"+o.prefix+")";throw new Error("Variable not recognised")}(u,o);case"BreakStatement":return"break";case"ContinueStatement":return"continue";case"TemplateLiteral":return function It(u,o){try{const h=[];let f=0;for(const p of o.quasis)h.push(p.value?JSON.stringify(p.value.cooked):JSON.stringify("")),!1===p.tail&&(h.push(o.expressions[f]?"lang.castString(lang.aCheck("+te(u,o.expressions[f])+", 'TemplateLiteral'))":""),f++);return"(["+h.join(",")+"]).join('')"}catch(h){throw h}}(u,o);case"TemplateElement":return JSON.stringify(o.value?o.value.cooked:"");case"ForStatement":return function E(u,o){let h="lastStatement = lc.voidOperation; \n";null!==o.init&&(h+=te(u,o.init)+"; ");const f=Le(u),p=Le(u);return h+="var "+f+" = true; ",h+="\n do { ",null!==o.update&&(h+=" if ("+f+"===false) {\n "+te(u,o.update)+"  \n}\n "+f+"=false; \n"),null!==o.test&&(h+="var "+p+" = "+te(u,o.test)+"; ",h+="if ("+p+"===false) { break; } else if ("+p+"!==true) { lang.error({type: '"+o.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n"),h+=te(u,o.body),null!==o.update&&(h+="\n "+te(u,o.update)),h+="\n"+f+" = true; \n} while(true);  lastStatement = lc.voidOperation; ",h}(u,o);case"ForInStatement":return function T(u,o){const h=Le(u),f=Le(u),p=Le(u);let B="var "+h+" = "+te(u,o.right)+";\n";"VariableDeclaration"===o.left.type&&(B+=te(u,o.left));let oe="VariableDeclaration"===o.left.type?o.left.declarations[0].id.name:o.left.name;oe=oe.toLowerCase();let ce="";return null!==u.localScope&&(void 0!==u.localScope[oe]?ce="lscope['"+oe+"']":void 0!==u.localScope._SymbolsMap[oe]&&(ce="lscope['"+u.localScope._SymbolsMap[oe]+"']")),""===ce&&(void 0!==u.globalScope[oe]?ce="gscope['"+oe+"']":void 0!==u.globalScope._SymbolsMap[oe]&&(ce="gscope['"+u.globalScope._SymbolsMap[oe]+"']")),B+="if ("+h+"===null) {  lastStatement = lc.voidOperation; }\n ",B+="else if (lc.isArray("+h+") || lc.isString("+h+")) {",B+="var "+f+"="+h+".length; \n",B+="for(var "+p+"=0; "+p+"<"+f+"; "+p+"++) {\n",B+=ce+"="+p+";\n",B+=te(u,o.body),B+="\n}\n",B+=" lastStatement = lc.voidOperation; \n",B+=" \n}\n",B+="else if (lc.isImmutableArray("+h+")) {",B+="var "+f+"="+h+".length(); \n",B+="for(var "+p+"=0; "+p+"<"+f+"; "+p+"++) {\n",B+=ce+"="+p+";\n",B+=te(u,o.body),B+="\n}\n",B+=" lastStatement = lc.voidOperation; \n",B+=" \n}\n",B+="else if (( "+h+" instanceof lang.Dictionary) || ( "+h+" instanceof lang.Feature)) {",B+="var "+f+"="+h+".keys(); \n",B+="for(var "+p+"=0; "+p+"<"+f+".length; "+p+"++) {\n",B+=ce+"="+f+"["+p+"];\n",B+=te(u,o.body),B+="\n}\n",B+=" lastStatement = lc.voidOperation; \n",B+=" \n}\n",u.isAsync&&(B+="else if (lc.isFeatureSet("+h+")) {",B+="var "+f+"="+h+".iterator(runtimeCtx.abortSignal); \n",B+="for(var "+p+"=lang. graphicToFeature( yield "+f+".next(),"+h+"); "+p+"!=null; "+p+"=lang. graphicToFeature( yield "+f+".next(),"+h+")) {\n",B+=ce+"="+p+";\n",B+=te(u,o.body),B+="\n}\n",B+=" lastStatement = lc.voidOperation; \n",B+=" \n}\n"),B+="else { lastStatement = lc.voidOperation; } \n",B}(u,o);case"Identifier":return function Xe(u,o){try{const h=o.name.toLowerCase();if(null!==u.localScope){if(void 0!==u.localScope[h])return"lscope['"+h+"']";if(void 0!==u.localScope._SymbolsMap[h])return"lscope['"+u.localScope._SymbolsMap[h]+"']"}if(void 0!==u.globalScope[h])return"gscope['"+h+"']";if(void 0!==u.globalScope._SymbolsMap[h])return"gscope['"+u.globalScope._SymbolsMap[h]+"']";throw new Error((0,S.H5)(o,"RUNTIME","VARIABLENOTFOUND"))}catch(h){throw h}}(u,o);case"MemberExpression":return function Qe(u,o){try{let h;return h=!0===o.computed?te(u,o.property):"'"+o.property.name+"'","lang.member("+te(u,o.object)+","+h+")"}catch(h){throw h}}(u,o);case"Literal":return null==o.value?"null":JSON.stringify(o.value);case"ThisExpression":case"ConditionalExpression":case"Array":throw new Error((0,S.H5)(o,"RUNTIME","NOTSUPPORTED"));case"CallExpression":return function lt(u,o){try{if("Identifier"!==o.callee.type)throw new Error((0,S.H5)(o,"RUNTIME","ONLYNODESSUPPORTED"));const h=o.callee.name.toLowerCase();let f="";if(null!==u.localScope&&(void 0!==u.localScope[h]?f="lscope['"+h+"']":void 0!==u.localScope._SymbolsMap[h]&&(f="lscope['"+u.localScope._SymbolsMap[h]+"']")),""===f&&(void 0!==u.globalScope[h]?f="gscope['"+h+"']":void 0!==u.globalScope._SymbolsMap[h]&&(f="gscope['"+u.globalScope._SymbolsMap[h]+"']")),""!==f){let p="[";for(let B=0;B<o.arguments.length;B++)B>0&&(p+=", "),p+=te(u,o.arguments[B]);return p+="]",u.isAsync?"(yield lang.callfunc("+f+","+p+",runtimeCtx) )":"lang.callfunc("+f+","+p+",runtimeCtx)"}throw new Error((0,S.H5)(o,"RUNTIME","NOTFOUND"))}catch(h){throw h}}(u,o);case"UnaryExpression":return function ut(u,o){try{return"lang.unary("+te(u,o.argument)+",'"+o.operator+"')"}catch(h){throw h}}(u,o);case"BinaryExpression":return function St(u,o){try{return"lang.binary("+te(u,o.left)+","+te(u,o.right)+",'"+o.operator+"')"}catch(h){throw h}}(u,o);case"LogicalExpression":return function mt(u,o){try{if("AssignmentExpression"===o.left.type||"UpdateExpression"===o.left.type)throw new Error((0,S.H5)(o.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===o.right.type||"UpdateExpression"===o.right.type)throw new Error((0,S.H5)(o.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("&&"===o.operator||"||"===o.operator)return"(lang.logicalCheck("+te(u,o.left)+") "+o.operator+" lang.logicalCheck("+te(u,o.right)+"))";throw new Error((0,S.H5)(o,"RUNTIME","ONLYORORAND"))}catch(h){throw h}}(u,o);case"ArrayExpression":return function bt(u,o){try{const h=[];for(let f=0;f<o.elements.length;f++)h.push("Literal"===o.elements[f].type?te(u,o.elements[f]):"lang.aCheck("+te(u,o.elements[f])+",'ArrayExpression')");return"["+h.join(",")+"]"}catch(h){throw h}}(u,o);case"ObjectExpression":return function ne(u,o){let h="lang.dictionary([";for(let f=0;f<o.properties.length;f++){const p=o.properties[f];f>0&&(h+=","),h+="lang.strCheck("+("Identifier"===p.key.type?"'"+p.key.name+"'":te(u,p.key))+",'ObjectExpression'),lang.aCheck("+te(u,p.value)+", 'ObjectExpression')"}return h+="])",h}(u,o);case"Property":return function d(u,o){throw new Error("Should not get here")}();default:throw new Error((0,S.H5)(o,"RUNTIME","UNREOGNISED"))}}catch(h){throw h}}function De(u,o){return"BlockStatement"===o.type?te(u,o):"ReturnStatement"===o.type||"BreakStatement"===o.type||"ContinueStatement"===o.type?te(u,o)+"; ":"UpdateExpression"===o.type?"lastStatement = "+te(u,o)+"; ":"ExpressionStatement"===o.type?te(u,o):"ObjectExpression"===o.type?"lastStatement = "+te(u,o)+"; ":te(u,o)+"; "}function Te(u,o){let h="";for(let f=0;f<o.body.length;f++)h+="ReturnStatement"===o.body[f].type||"BreakStatement"===o.body[f].type||"ContinueStatement"===o.body[f].type?te(u,o.body[f])+"; \n":"UpdateExpression"===o.body[f].type||"ObjectExpression"===o.body[f].type?"lastStatement = "+te(u,o.body[f])+"; \n":te(u,o.body[f])+" \n";return h}let Pe=0;const Ne={};function Dt(u){return null===u?"":(0,D.a)(u)||(0,D.b)(u)?"Array":(0,D.n)(u)?"Date":(0,D.f)(u)?"String":(0,D.i)(u)?"Boolean":(0,D.j)(u)?"Number":u instanceof fe.Z?"Attachment":u instanceof K.Z?"Portal":u instanceof y.Z?"Dictionary":u instanceof W.Z?"Feature":u instanceof se.Z?"Point":u instanceof H.Z?"Polygon":u instanceof I.Z?"Polyline":u instanceof Z.Z?"Multipoint":u instanceof re.Z?"Extent":(0,D.c)(u)?"Function":(0,D.o)(u)?"FeatureSet":(0,D.q)(u)?"FeatureSetCollection":u===D.v?"":"number"==typeof u&&isNaN(u)?"Number":"Unrecognised Type"}function gt(u,o,h,f){try{if((0,D.e)(o[h],f))return o[h+1];{const B=o.length-h;return 1===B?o[h]:2===B?null:3===B?o[h+2]:gt(u,o,h+2,f)}}catch(p){throw p}}function Et(u,o,h,f){try{if(!0===f)return o[h+1];if(o.length-h==3)return o[h+2];{const p=o[h+2];if(!1===(0,D.i)(p))throw new Error("WHEN needs boolean test conditions");return Et(u,o,h+2,p)}}catch(p){throw p}}function Ke(u,o){const h=u.length,f=Math.floor(h/2);return 0===h?[]:1===h?[u[0]]:function ct(u,o,h){const f=[];for(;u.length>0||o.length>0;)if(u.length>0&&o.length>0){let p=h(u[0],o[0]);isNaN(p)&&(p=0),p<=0?(f.push(u[0]),u=u.slice(1)):(f.push(o[0]),o=o.slice(1))}else u.length>0?(f.push(u[0]),u=u.slice(1)):o.length>0&&(f.push(o[0]),o=o.slice(1));return f}(Ke(u.slice(0,f),o),Ke(u.slice(f,h),o),o)}function ht(u,o){try{const h=u.length,f=Math.floor(h/2);if(0===h)return(0,_.DB)([]);if(1===h)return(0,_.DB)([u[0]]);const p=[ht(u.slice(0,f),o),ht(u.slice(f,h),o)];return(0,_.$6)(p).then(B=>rt(B[0],B[1],o,[]))}catch(h){return(0,_.d1)(h)}}function rt(u,o,h,f){return(0,_.Ue)((p,B)=>{const oe=f;u.length>0||o.length>0?u.length>0&&o.length>0?h(u[0],o[0]).then(ce=>{try{isNaN(ce)&&(ce=1),ce<=0?(oe.push(u[0]),u=u.slice(1)):(oe.push(o[0]),o=o.slice(1)),rt(u,o,h,f).then(ge=>{p(ge)},B)}catch(ge){B(ge)}},B):u.length>0?(oe.push(u[0]),rt(u=u.slice(1),o,h,f).then(ce=>{p(ce)},B)):o.length>0&&(oe.push(o[0]),o=o.slice(1),rt(u,o,h,f).then(ce=>{p(ce)},B)):p(f)})}function it(u){return u.symbols.symbolCounter++,"_T"+u.symbols.symbolCounter.toString()}function Le(u){return u.symbols.symbolCounter++,"_Tvar"+u.symbols.symbolCounter.toString()}(0,N.r)(Ne,v),(0,R.r)(Ne,v),(0,w.r)(Ne,v),(0,G.r)(Ne,v),(0,g.r)(Ne,v),Ne.typeof=function(u,o){return v(u,o,function(h,f,p){(0,D.p)(p,1,1);const B=Dt(p[0]);if("Unrecognised Type"===B)throw new Error("Unrecognised Type");return B})},Ne.iif=function(u,o){try{return v(u,o,function(h,f,p){if((0,D.p)(p,3,3),!1===(0,D.i)(p[0]))throw new Error("IF Function must have a boolean test condition");return p[0]?p[1]:p[2]})}catch(h){throw h}},Ne.decode=function(u,o){try{return v(u,o,function(h,f,p){if(p.length<2)throw new Error("Missing Parameters");if(2===p.length)return p[1];if((p.length-1)%2==0)throw new Error("Must have a default value result.");return gt(u,p,1,p[0])})}catch(h){throw h}},Ne.when=function(u,o){try{return v(u,o,function(h,f,p){if(p.length<3)throw new Error("Missing Parameters");if(p.length%2==0)throw new Error("Must have a default value result.");const B=p[0];if(!1===(0,D.i)(B))throw new Error("WHEN needs boolean test conditions");return Et(u,p,0,B)})}catch(h){throw h}},Ne.top=function(u,o){return v(u,o,function(h,f,p){if((0,D.p)(p,2,2),(0,D.a)(p[0]))return(0,D.t)(p[1])>=p[0].length?p[0].slice(0):p[0].slice(0,(0,D.t)(p[1]));if((0,D.b)(p[0]))return(0,D.t)(p[1])>=p[0].length()?p[0].slice(0):p[0].slice(0,(0,D.t)(p[1]));throw new Error("Top cannot accept this parameter type")})},Ne.first=function(u,o){return v(u,o,function(h,f,p){return(0,D.p)(p,1,1),(0,D.a)(p[0])?0===p[0].length?null:p[0][0]:(0,D.b)(p[0])?0===p[0].length()?null:p[0].get(0):null})},Ne.sort=function(u,o){return v(u,o,function(h,f,p){(0,D.p)(p,1,2);let B=p[0];if((0,D.b)(B)&&(B=B.toArray()),!1===(0,D.a)(B))throw new Error("Illegal Argument");if(p.length>1){if(!1===(0,D.c)(p[1]))throw new Error("Illegal Argument");let oe=B;const ce=function(ge,Ee){return j.callfunc(p[1],[ge,Ee],h)};return u.isAsync?ht(oe,ce):(oe=Ke(oe,function(ge,Ee){return ce(ge,Ee)}),oe)}{let oe=B;if(0===oe.length)return[];const ce={};for(let ye=0;ye<oe.length;ye++){const Ae=Dt(oe[ye]);""!==Ae&&(ce[Ae]=!0)}if(!0===ce.Array||!0===ce.Dictionary||!0===ce.Feature||!0===ce.Point||!0===ce.Polygon||!0===ce.Polyline||!0===ce.Multipoint||!0===ce.Extent||!0===ce.Function)return oe.slice(0);let ge=0,Ee="";for(const ye in ce)ge++,Ee=ye;return oe=ge>1||"String"===Ee?Ke(oe,function(ye,Ae){if(null==ye||ye===D.v)return null==Ae||Ae===D.v?0:1;if(null==Ae||Ae===D.v)return-1;const je=(0,D.d)(ye),Ve=(0,D.d)(Ae);return je<Ve?-1:je===Ve?0:1}):"Number"===Ee?Ke(oe,function(ye,Ae){return ye-Ae}):"Boolean"===Ee?Ke(oe,function(ye,Ae){return ye===Ae?0:Ae?-1:1}):"Date"===Ee?Ke(oe,function(ye,Ae){return Ae-ye}):oe.slice(0),oe}})};const Ze={};for(const u in Ne)Ze[u]=new D.N(Ne[u]);(0,ee.registerFunctions)(Ne,v);for(const u in Ne)Ne[u]=new D.N(Ne[u]);const $e=function(){};$e.prototype=Ne;const st=function(){};function yt(u,o,h){const f={};u||(u={}),h||(h={}),f._SymbolsMap={},f.textformatting=1,f.infinity=1,f.pi=1;for(const p in o)f[p]=1;for(const p in h)f[p]=1;for(const p in u)f[p]=1;return f}function We(u,o){const h={mode:o,compiled:!0,functions:{},signatures:[],failDefferred:ie,standardFunction:v,standardFunctionAsync:v,evaluateIdentifier:Ue};for(let f=0;f<u.length;f++)u[f].registerFunctions(h);if("sync"===o){for(const f in h.functions)Ne[f]=new D.N(h.functions[f]),$e.prototype[f]=Ne[f];for(let f=0;f<h.signatures.length;f++)(0,S.gW)(h.signatures[f],"sync")}else{for(const f in h.functions)Ze[f]=new D.N(h.functions[f]),st.prototype[f]=Ze[f];for(let f=0;f<h.signatures.length;f++)(0,S.gW)(h.signatures[f],"async")}}function Ue(u,o){const h=o.name;if("_SymbolsMap"===h)throw"Illegal";if(u.localStack.length>0){if("_t"!==h.substr(0,2).toLowerCase()&&void 0!==u.localStack[u.localStack.length-1][h])return u.localStack[u.localStack.length-1][h];const p=u.mangleMap[h];if(void 0!==p&&void 0!==u.localStack[u.localStack.length-1][p])return u.localStack[u.localStack.length-1][p]}if("_t"!==h.substr(0,2).toLowerCase()&&void 0!==u.globalScope[h]||1===u.globalScope._SymbolsMap[h])return u.globalScope[h];const f=u.mangleMap[h];return void 0!==f?u.globalScope[f]:void 0}st.prototype=Ze,We([X.A],"sync"),We([X.A],"async");let ft=0;const j={error(u,o,h){throw new Error((0,S.H5)(u,o,h))},__awaiter:(u,o,h,f)=>(0,_.Ue)((p,B)=>{function oe(Ee){try{ge(f.next(Ee))}catch(ye){B(ye)}}function ce(Ee){try{ge(f.throw(Ee))}catch(ye){B(ye)}}function ge(Ee){Ee.done?p(Ee.value):Ee.value&&Ee.value.then?Ee.value.then(oe,ce):(ft++,ft%100==0?setTimeout(()=>{ft=0,oe(Ee.value)},0):oe(Ee.value))}ge((f=f.apply(u,o||[])).next())}),functionDepthchecker:(u,o)=>function(){if(o.depthCounter++,o.localStack.push([]),o.depthCounter>64)throw new Error("Exceeded maximum function depth");const h=u.apply(this,arguments);return(0,_.y8)(h)?h.then(f=>(o.depthCounter--,o.localStack.length=o.localStack.length-1,f)):(o.depthCounter--,o.localStack.length=o.localStack.length-1,h)},castString:u=>(0,D.d)(u),aCheck(u,o){if((0,D.c)(u))throw new Error((0,S.H5)({type:o},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return u===D.v?null:u},Dictionary:y.Z,Feature:W.Z,dictionary(u){const o={};for(let f=0;f<u.length;f+=2){if((0,D.c)(u[f+1]))throw new Error("Illegal Argument");if(!1===(0,D.f)(u[f]))throw new Error("Illegal Argument");o[u[f].toString()]=u[f+1]===D.v?null:u[f+1]}const h=new y.Z(o);return h.immutable=!1,h},strCheck(u){if(!1===(0,D.f)(u))throw new Error("Illegal Argument");return u},unary(u,o){if((0,D.i)(u)){if("!"===o)return!u;if("-"===o)return-1*(0,D.t)(u);if("+"===o)return 1*(0,D.t)(u);if("~"===o)return~(0,D.t)(u);throw new Error((0,S.H5)({type:"UnaryExpression",operator:o,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"))}if("-"===o)return-1*(0,D.t)(u);if("+"===o)return 1*(0,D.t)(u);if("~"===o)return~(0,D.t)(u);throw new Error((0,S.H5)({type:"UnaryExpression",operator:o,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"))},logicalCheck(u){if(!1===(0,D.i)(u))throw new Error((0,S.H5)({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return u},logical(u,o,h){if((0,D.i)(u)&&(0,D.i)(o))switch(h){case"||":return u||o;case"&&":return u&&o;default:throw new Error((0,S.H5)({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"))}throw new Error((0,S.H5)({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"))},binary(u,o,h){switch(h){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,D.h)((0,D.t)(u),(0,D.t)(o),h);case"==":case"=":return(0,D.e)(u,o);case"!=":return!(0,D.e)(u,o);case"<":case">":case"<=":case">=":return(0,D.g)(u,o,h);case"+":return(0,D.f)(u)||(0,D.f)(o)?(0,D.d)(u)+(0,D.d)(o):(0,D.t)(u)+(0,D.t)(o);case"-":return(0,D.t)(u)-(0,D.t)(o);case"*":return(0,D.t)(u)*(0,D.t)(o);case"/":return(0,D.t)(u)/(0,D.t)(o);case"%":return(0,D.t)(u)%(0,D.t)(o);default:throw new Error((0,S.H5)({type:"BinaryExpression",operator:h,left:u,right:o},"RUNTIME","OPERATORNOTRECOGNISED"))}},assign(u,o,h){switch(o){case"=":return u===D.v?null:u;case"/=":return(0,D.t)(h)/(0,D.t)(u);case"*=":return(0,D.t)(h)*(0,D.t)(u);case"-=":return(0,D.t)(h)-(0,D.t)(u);case"+=":return(0,D.f)(h)||(0,D.f)(u)?(0,D.d)(h)+(0,D.d)(u):(0,D.t)(h)+(0,D.t)(u);case"%=":return(0,D.t)(h)%(0,D.t)(u);default:throw new Error((0,S.H5)({type:"AssignmentExpression",operator:o,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"))}},update(u,o,h,f){const p=(0,D.t)(u[o]);return u[o]="++"===h?p+1:p-1,!1===f?p:"++"===h?p+1:p-1},graphicToFeature:(u,o)=>null===u?null:W.Z.createFromGraphicLikeObject(u.geometry,u.attributes,o),memberupdate(u,o,h,f){let p;if((0,D.a)(u)){if(!(0,D.j)(o))throw new Error("Invalid Parameter");if(o<0&&(o=u.length+o),o<0||o>=u.length)throw new Error("Assignment outside of array bounds");p=(0,D.t)(u[o]),u[o]="++"===h?p+1:p-1}else if(u instanceof y.Z){if(!1===(0,D.f)(o))throw new Error("Dictionary accessor must be a string");if(!0!==u.hasField(o))throw new Error("Invalid Parameter");p=(0,D.t)(u.field(o)),u.setField(o,"++"===h?p+1:p-1)}else{if(!(u instanceof W.Z))throw(0,D.b)(u)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===(0,D.f)(o))throw new Error("Feature accessor must be a string");if(!0!==u.hasField(o))throw new Error("Invalid Parameter");p=(0,D.t)(u.field(o)),u.setField(o,"++"===h?p+1:p-1)}return!1===f?p:"++"===h?p+1:p-1},assignmember(u,o,h,f){if((0,D.a)(u)){if(!(0,D.j)(o))throw new Error("Invalid Parameter");if(o<0&&(o=u.length+o),o<0||o>u.length)throw new Error("Assignment outside of array bounds");if(o===u.length){if("="!==h)throw new Error("Invalid Parameter");u[o]=this.assign(f,h,u[o])}else u[o]=this.assign(f,h,u[o])}else if(u instanceof y.Z){if(!1===(0,D.f)(o))throw new Error("Dictionary accessor must be a string");if(!0===u.hasField(o))u.setField(o,this.assign(f,h,u.field(o)));else{if("="!==h)throw new Error("Invalid Parameter");u.setField(o,this.assign(f,h,null))}}else{if(!(u instanceof W.Z))throw(0,D.b)(u)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===(0,D.f)(o))throw new Error("Feature accessor must be a string");if(!0===u.hasField(o))u.setField(o,this.assign(f,h,u.field(o)));else{if("="!==h)throw new Error("Invalid Parameter");u.setField(o,this.assign(f,h,null))}}},member(u,o){if(null===u)throw new Error((0,S.H5)({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(u instanceof ue.s){if((0,D.f)(o))return u.field(o);throw new Error((0,S.H5)({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"))}if(u instanceof y.Z||u instanceof W.Z){if((0,D.f)(o))return u.field(o);throw new Error((0,S.H5)({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"))}if(u instanceof O.Z){if((0,D.f)(o))return function ke(u,o,h){let f;switch(o=o.toLowerCase()){case"hasz":{const p=u.hasZ;return void 0!==p&&p}case"hasm":{const p=u.hasM;return void 0!==p&&p}case"spatialreference":{let p=u.spatialReference._arcadeCacheId;if(void 0===p){let oe=!0;Object.freeze&&Object.isFrozen(u.spatialReference)&&(oe=!1),oe&&(Pe++,u.spatialReference._arcadeCacheId=Pe,p=Pe)}const B=new y.Z({wkt:u.spatialReference.wkt,wkid:u.spatialReference.wkid});return void 0!==p&&(B._arcadeCacheId="SPREF"+p.toString()),B}}switch(u.type){case"extent":switch(o){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":{const p=u[o];return void 0!==p?p:null}case"type":return"Extent"}break;case"polygon":switch(o){case"rings":return f=u.cache._arcadeCacheId,void 0===f&&(Pe++,f=Pe,u.cache._arcadeCacheId=f),new z.Z(u.rings,u.spatialReference,!0===u.hasZ,!0===u.hasM,f);case"type":return"Polygon"}break;case"point":switch(o){case"x":case"y":case"z":case"m":return void 0!==u[o]?u[o]:null;case"type":return"Point"}break;case"polyline":switch(o){case"paths":return f=u.cache._arcadeCacheId,void 0===f&&(Pe++,f=Pe,u.cache._arcadeCacheId=f),new z.Z(u.paths,u.spatialReference,!0===u.hasZ,!0===u.hasM,f);case"type":return"Polyline"}break;case"multipoint":switch(o){case"points":return f=u.cache._arcadeCacheId,void 0===f&&(Pe++,f=Pe,u.cache._arcadeCacheId=f),new le.Z(u.points,u.spatialReference,!0===u.hasZ,!0===u.hasM,f,1);case"type":return"Multipoint"}}throw new Error((0,S.H5)(h,"RUNTIME","PROPERTYNOTFOUND"))}(u,o,"MemberExpression");throw new Error((0,S.H5)({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"))}if((0,D.a)(u)){if((0,D.j)(o)&&isFinite(o)&&Math.floor(o)===o){if(o<0&&(o=u.length+o),o>=u.length||o<0)throw new Error((0,S.H5)({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return u[o]}throw new Error((0,S.H5)({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"))}if((0,D.f)(u)){if((0,D.j)(o)&&isFinite(o)&&Math.floor(o)===o){if(o<0&&(o=u.length+o),o>=u.length||o<0)throw new Error((0,S.H5)({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return u[o]}throw new Error((0,S.H5)({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"))}if((0,D.b)(u)){if((0,D.j)(o)&&isFinite(o)&&Math.floor(o)===o){if(o<0&&(o=u.length()+o),o>=u.length()||o<0)throw new Error((0,S.H5)({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return u.get(o)}throw new Error((0,S.H5)({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"))}throw new Error((0,S.H5)({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"))},callfunc(u,o,h){return u instanceof D.N?u.fn(h,{arguments:o,preparsed:!0}):u instanceof D.S?u.fn.apply(this,o):u.apply(this,o)}};function b(u){console.log(u)}function P(u,o=null,h=!1){null===o&&(o={vars:{},customfunctions:{}});const f={isAsync:h,globalScope:yt(o.vars,h?Ze:Ne,o.customfunctions),localScope:null,mangleMap:{},console:b,lrucache:o.lrucache,interceptor:o.interceptor,services:o.services,symbols:{symbolCounter:0}};let p=te(f,u.body[0].body);""===p&&(p="lc.voidOperation; ");let B="";B=h?"var runtimeCtx=this.prepare(context, true);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement=lc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+p+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx=this.prepare(context, false);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \n function mainBody() {\n var lastStatement=lc.voidOperation;\n "+p+"\n return lastStatement; } \n return this.postProcess(mainBody()); ";const oe={lc:D.l,lang:j,mangles:f.mangleMap,postProcess(ce){if(ce instanceof D.R&&(ce=ce.value),ce instanceof D.I&&(ce=ce.value),ce===D.v&&(ce=null),ce===D.k)throw new Error("Cannot return BREAK");if(ce===D.m)throw new Error("Cannot return CONTINUE");if((0,D.c)(ce))throw new Error("Cannot return FUNCTION");return ce},prepare(ce,ge){let Ee=ce.spatialReference;null==Ee&&(Ee=new $.Z({wkid:102100}));const ye=function At(u,o,h){const f=h?new st:new $e;u||(u={}),o||(o={});const p=new y.Z({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});p.immutable=!1,f._SymbolsMap={textformatting:1,infinity:1,pi:1},f.textformatting=p,f.infinity=Number.POSITIVE_INFINITY,f.pi=Math.PI;for(const B in o)f[B]=o[B],f._SymbolsMap[B]=1;for(const B in u)f._SymbolsMap[B]=1,f[B]=u[B]&&"esri.Graphic"===u[B].declaredClass?W.Z.createFromGraphic(u[B]):u[B];return f}(ce.vars,ce.customfunctions,ge);return{localStack:[],isAsync:ge,mangleMap:this.mangles,spatialReference:Ee,globalScope:ye,abortSignal:null==ce.abortSignal?{aborted:!1}:ce.abortSignal,localScope:null,services:ce.services,console:ce.console?ce.console:b,lrucache:ce.lrucache,interceptor:ce.interceptor,symbols:{symbolCounter:0},depthCounter:1}}};return new Function("context","spatialReference",B).bind(oe)}var ae=Q(7652);function J(u,o,h){try{return!0===o.preparsed?h(u,null,o.arguments):h(u,o,function de(u,o){const h=[];for(let f=0;f<o.arguments.length;f++)h.push(q(u,o.arguments[f]));return h}(u,o))}catch(f){throw f}}function q(u,o){try{switch(o.type){case"EmptyStatement":return D.v;case"VariableDeclarator":return function Zn(u,o){let h=null===o.init?null:q(u,o.init);if(h===D.v&&(h=null),"Identifier"!==o.id.type)throw new Error("Can only assign a regular variable");const f=o.id.name.toLowerCase();return null!==u.localScope?u.localScope[f]={value:h,valueset:!0,node:o.init}:u.globalScope[f]={value:h,valueset:!0,node:o.init},D.v}(u,o);case"VariableDeclaration":return function Pn(u,o){for(let h=0;h<o.declarations.length;h++)q(u,o.declarations[h]);return D.v}(u,o);case"BlockStatement":return function kn(u,o){let h=D.v;for(let f=0;f<o.body.length;f++)if(h=q(u,o.body[f]),h instanceof D.R||h===D.k||h===D.m)return h;return h}(u,o);case"FunctionDeclaration":return function Ln(u,o){const h=o.id.name.toLowerCase();return u.globalScope[h]={valueset:!0,node:null,value:new ae.Z(o,u)},D.v}(u,o);case"ReturnStatement":return function Un(u,o){if(null===o.argument)return new D.R(D.v);const h=q(u,o.argument);return new D.R(h)}(u,o);case"IfStatement":return function Tt(u,o){if("AssignmentExpression"===o.test.type||"UpdateExpression"===o.test.type)throw new Error((0,S.H5)(o.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));const h=q(u,o.test);if(!0===h)return q(u,o.consequent);if(!1===h)return null!==o.alternate?q(u,o.alternate):D.v;throw new Error((0,S.H5)(o,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"))}(u,o);case"ExpressionStatement":return function Nt(u,o){if("AssignmentExpression"===o.expression.type||"UpdateExpression"===o.expression.type)return q(u,o.expression);if("CallExpression"===o.expression.type){const h=q(u,o.expression);return h===D.v?D.v:new D.I(h)}{const h=q(u,o.expression);return h===D.v?D.v:new D.I(h)}}(u,o);case"AssignmentExpression":return function et(u,o){const h=q(u,o.right);let f=null,p="";if("MemberExpression"===o.left.type){if(f=q(u,o.left.object),!0===o.left.computed?p=q(u,o.left.property):"Identifier"===o.left.property.type&&(p=o.left.property.name),(0,D.a)(f)){if(!(0,D.j)(p))throw new Error("Invalid Parameter");if(p<0&&(p=f.length+p),p<0||p>f.length)throw new Error("Assignment outside of array bounds");if(p===f.length){if("="!==o.operator)throw new Error("Invalid Parameter");f[p]=He(h,o.operator,f[p],o)}else f[p]=He(h,o.operator,f[p],o)}else if(f instanceof y.Z){if(!1===(0,D.f)(p))throw new Error("Dictionary accessor must be a string");if(!0===f.hasField(p))f.setField(p,He(h,o.operator,f.field(p),o));else{if("="!==o.operator)throw new Error("Invalid Parameter");f.setField(p,He(h,o.operator,null,o))}}else{if(!(f instanceof W.Z))throw(0,D.b)(f)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===(0,D.f)(p))throw new Error("Feature accessor must be a string");if(!0===f.hasField(p))f.setField(p,He(h,o.operator,f.field(p),o));else{if("="!==o.operator)throw new Error("Invalid Parameter");f.setField(p,He(h,o.operator,null,o))}}return D.v}if(f=o.left.name.toLowerCase(),null!==u.localScope&&void 0!==u.localScope[f])return u.localScope[f]={value:He(h,o.operator,u.localScope[f].value,o),valueset:!0,node:o.right},D.v;if(void 0!==u.globalScope[f])return u.globalScope[f]={value:He(h,o.operator,u.globalScope[f].value,o),valueset:!0,node:o.right},D.v;throw new Error("Variable not recognised")}(u,o);case"UpdateExpression":return function Ge(u,o){let h,f=null,p="";if("MemberExpression"===o.argument.type){if(f=q(u,o.argument.object),!0===o.argument.computed?p=q(u,o.argument.property):"Identifier"===o.argument.property.type&&(p=o.argument.property.name),(0,D.a)(f)){if(!(0,D.j)(p))throw new Error("Invalid Parameter");if(p<0&&(p=f.length+p),p<0||p>=f.length)throw new Error("Assignment outside of array bounds");h=(0,D.t)(f[p]),f[p]="++"===o.operator?h+1:h-1}else if(f instanceof y.Z){if(!1===(0,D.f)(p))throw new Error("Dictionary accessor must be a string");if(!0!==f.hasField(p))throw new Error("Invalid Parameter");h=(0,D.t)(f.field(p)),f.setField(p,"++"===o.operator?h+1:h-1)}else{if(!(f instanceof W.Z))throw(0,D.b)(f)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===(0,D.f)(p))throw new Error("Feature accessor must be a string");if(!0!==f.hasField(p))throw new Error("Invalid Parameter");h=(0,D.t)(f.field(p)),f.setField(p,"++"===o.operator?h+1:h-1)}return!1===o.prefix?h:"++"===o.operator?h+1:h-1}if(f="Identifier"===o.argument.type?o.argument.name.toLowerCase():"",!f)throw new Error("Invalid identifier");if(null!==u.localScope&&void 0!==u.localScope[f])return h=(0,D.t)(u.localScope[f].value),u.localScope[f]={value:"++"===o.operator?h+1:h-1,valueset:!0,node:o},!1===o.prefix?h:"++"===o.operator?h+1:h-1;if(void 0!==u.globalScope[f])return h=(0,D.t)(u.globalScope[f].value),u.globalScope[f]={value:"++"===o.operator?h+1:h-1,valueset:!0,node:o},!1===o.prefix?h:"++"===o.operator?h+1:h-1;throw new Error("Variable not recognised")}(u,o);case"BreakStatement":return D.k;case"ContinueStatement":return D.m;case"TemplateElement":return function Vn(u,o){return o.value?o.value.cooked:""}(0,o);case"TemplateLiteral":return function Kn(u,o){let h="",f=0;for(const p of o.quasis)h+=p.value?p.value.cooked:"",!1===p.tail&&(h+=o.expressions[f]?(0,D.d)(q(u,o.expressions[f])):"",f++);return h}(u,o);case"ForStatement":return function Oe(u,o){null!==o.init&&q(u,o.init);const h={testResult:!0,lastAction:D.v};do{qe(u,o,h)}while(!0===h.testResult);return h.lastAction instanceof D.R?h.lastAction:D.v}(u,o);case"ForInStatement":return function Re(u,o){const h=q(u,o.right);"VariableDeclaration"===o.left.type&&q(u,o.left);let f=null,p="";if("VariableDeclaration"===o.left.type){const B=o.left.declarations[0].id;"Identifier"===B.type&&(p=B.name)}else"Identifier"===o.left.type&&(p=o.left.name);if(!p)throw new Error((0,S.H5)(o,"RUNTIME","INVALIDVARIABLE"));if(p=p.toLowerCase(),null!==u.localScope&&void 0!==u.localScope[p]&&(f=u.localScope[p]),null===f&&void 0!==u.globalScope[p]&&(f=u.globalScope[p]),null===f)throw new Error((0,S.H5)(o,"RUNTIME","VARIABLENOTDECLARED"));if((0,D.a)(h)||(0,D.f)(h)){const B=h.length;for(let oe=0;oe<B;oe++){f.value=oe;const ce=q(u,o.body);if(ce===D.k)break;if(ce instanceof D.R)return ce}return D.v}if((0,D.b)(h)){for(let B=0;B<h.length();B++){f.value=B;const oe=q(u,o.body);if(oe===D.k)break;if(oe instanceof D.R)return oe}return D.v}if(!(h instanceof y.Z||h instanceof W.Z))return D.v;{const B=h.keys();for(let oe=0;oe<B.length;oe++){f.value=B[oe];const ce=q(u,o.body);if(ce===D.k)break;if(ce instanceof D.R)return ce}}}(u,o);case"Identifier":return $t(u,o);case"MemberExpression":return function Gn(u,o){try{const h=q(u,o.object);if(null===h)throw new Error((0,S.H5)(o,"RUNTIME","NOTFOUND"));if(!1===o.computed){if("Identifier"===o.property.type){if(h instanceof y.Z||h instanceof W.Z)return h.field(o.property.name);if(h instanceof O.Z)return Xt(h,o.property.name,o)}throw new Error((0,S.H5)(o,"RUNTIME","INVALIDTYPE"))}{let f=q(u,o.property);if(h instanceof y.Z||h instanceof W.Z){if((0,D.f)(f))return h.field(f);throw new Error((0,S.H5)(o,"RUNTIME","INVALIDTYPE"))}if(h instanceof O.Z){if((0,D.f)(f))return Xt(h,f,o);throw new Error((0,S.H5)(o,"RUNTIME","INVALIDTYPE"))}if((0,D.a)(h)){if((0,D.j)(f)&&isFinite(f)&&Math.floor(f)===f){if(f<0&&(f=h.length+f),f>=h.length||f<0)throw new Error((0,S.H5)(o,"RUNTIME","OUTOFBOUNDS"));return h[f]}throw new Error((0,S.H5)(o,"RUNTIME","INVALIDTYPE"))}if((0,D.f)(h)){if((0,D.j)(f)&&isFinite(f)&&Math.floor(f)===f){if(f<0&&(f=h.length+f),f>=h.length||f<0)throw new Error((0,S.H5)(o,"RUNTIME","OUTOFBOUNDS"));return h[f]}throw new Error((0,S.H5)(o,"RUNTIME","INVALIDTYPE"))}if((0,D.b)(h)){if((0,D.j)(f)&&isFinite(f)&&Math.floor(f)===f){if(f<0&&(f=h.length()+f),f>=h.length()||f<0)throw new Error((0,S.H5)(o,"RUNTIME","OUTOFBOUNDS"));return h.get(f)}throw new Error((0,S.H5)(o,"RUNTIME","INVALIDTYPE"))}throw new Error((0,S.H5)(o,"RUNTIME","INVALIDTYPE"))}}catch(h){throw h}}(u,o);case"Literal":return o.value;case"CallExpression":return function Wn(u,o){try{if("Identifier"!==o.callee.type)throw new Error((0,S.H5)(o,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==u.localScope&&void 0!==u.localScope[o.callee.name.toLowerCase()]){const h=u.localScope[o.callee.name.toLowerCase()];if(h.value instanceof D.N)return h.value.fn(u,o);if(h.value instanceof ae.Z)return nn(u,o,h.value.definition);throw new Error((0,S.H5)(o,"RUNTIME","NOTAFUNCTION"))}if(void 0!==u.globalScope[o.callee.name.toLowerCase()]){const h=u.globalScope[o.callee.name.toLowerCase()];if(h.value instanceof D.N)return h.value.fn(u,o);if(h.value instanceof ae.Z)return nn(u,o,h.value.definition);throw new Error((0,S.H5)(o,"RUNTIME","NOTAFUNCTION"))}throw new Error((0,S.H5)(o,"RUNTIME","NOTFOUND"))}catch(h){throw h}}(u,o);case"UnaryExpression":return function jn(u,o){try{const h=q(u,o.argument);if((0,D.i)(h)){if("!"===o.operator)return!h;if("-"===o.operator)return-1*(0,D.t)(h);if("+"===o.operator)return 1*(0,D.t)(h);if("~"===o.operator)return~(0,D.t)(h);throw new Error((0,S.H5)(o,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"))}if("~"===o.operator)return~(0,D.t)(h);if("-"===o.operator)return-1*(0,D.t)(h);if("+"===o.operator)return 1*(0,D.t)(h);throw new Error((0,S.H5)(o,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"))}catch(h){throw h}}(u,o);case"BinaryExpression":return function Hn(u,o){try{const h=[q(u,o.left),q(u,o.right)],f=h[0],p=h[1];switch(o.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,D.h)((0,D.t)(f),(0,D.t)(p),o.operator);case"==":return(0,D.e)(f,p);case"!=":return!(0,D.e)(f,p);case"<":case">":case"<=":case">=":return(0,D.g)(f,p,o.operator);case"+":return(0,D.f)(f)||(0,D.f)(p)?(0,D.d)(f)+(0,D.d)(p):(0,D.t)(f)+(0,D.t)(p);case"-":return(0,D.t)(f)-(0,D.t)(p);case"*":return(0,D.t)(f)*(0,D.t)(p);case"/":return(0,D.t)(f)/(0,D.t)(p);case"%":return(0,D.t)(f)%(0,D.t)(p);default:throw new Error((0,S.H5)(o,"RUNTIME","OPERATORNOTRECOGNISED"))}}catch(h){throw h}}(u,o);case"LogicalExpression":return function Yn(u,o){try{if("AssignmentExpression"===o.left.type||"UpdateExpression"===o.left.type)throw new Error((0,S.H5)(o.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===o.right.type||"UpdateExpression"===o.right.type)throw new Error((0,S.H5)(o.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));const h=q(u,o.left);if((0,D.i)(h))switch(o.operator){case"||":if(!0===h)return h;{const f=q(u,o.right);if((0,D.i)(f))return f;throw new Error((0,S.H5)(o,"RUNTIME","ONLYORORAND"))}case"&&":if(!1===h)return h;{const f=q(u,o.right);if((0,D.i)(f))return f;throw new Error((0,S.H5)(o,"RUNTIME","ONLYORORAND"))}default:throw new Error((0,S.H5)(o,"RUNTIME","ONLYORORAND"))}throw new Error((0,S.H5)(o,"RUNTIME","ONLYBOOLEAN"))}catch(h){throw h}}(u,o);case"ArrayExpression":return function zn(u,o){try{const h=[];for(let f=0;f<o.elements.length;f++){const p=q(u,o.elements[f]);if((0,D.c)(p))throw new Error((0,S.H5)(o,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));h.push(p===D.v?null:p)}return h}catch(h){throw h}}(u,o);case"ObjectExpression":return function me(u,o){const h={};for(let p=0;p<o.properties.length;p++){const B=q(u,o.properties[p]);if((0,D.c)(B.value))throw new Error("Illegal Argument");if(!1===(0,D.f)(B.key))throw new Error("Illegal Argument");h[B.key.toString()]=B.value===D.v?null:B.value}const f=new y.Z(h);return f.immutable=!1,f}(u,o);case"Property":return function xe(u,o){return{key:"Identifier"===o.key.type?o.key.name:q(u,o.key),value:q(u,o.value)}}(u,o);default:throw new Error((0,S.H5)(o,"RUNTIME","UNREOGNISED"))}}catch(h){throw h}}function qe(u,o,h){if(null!==o.test){if(h.testResult=q(u,o.test),!1===h.testResult)return;if(!0!==h.testResult)throw new Error((0,S.H5)(o,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"))}h.lastAction=q(u,o.body),h.lastAction!==D.k?h.lastAction instanceof D.R?h.testResult=!1:null!==o.update&&q(u,o.update):h.testResult=!1}function He(u,o,h,f){switch(o){case"=":return u===D.v?null:u;case"/=":return(0,D.t)(h)/(0,D.t)(u);case"*=":return(0,D.t)(h)*(0,D.t)(u);case"-=":return(0,D.t)(h)-(0,D.t)(u);case"+=":return(0,D.f)(h)||(0,D.f)(u)?(0,D.d)(h)+(0,D.d)(u):(0,D.t)(h)+(0,D.t)(u);case"%=":return(0,D.t)(h)%(0,D.t)(u);default:throw new Error((0,S.H5)(f,"RUNTIME","OPERATORNOTRECOGNISED"))}}let Je=0;function Xt(u,o,h){let f;switch(o=o.toLowerCase()){case"hasz":{const p=u.hasZ;return void 0!==p&&p}case"hasm":{const p=u.hasM;return void 0!==p&&p}case"spatialreference":{let p=u.spatialReference._arcadeCacheId;if(void 0===p){let oe=!0;Object.freeze&&Object.isFrozen(u.spatialReference)&&(oe=!1),oe&&(Je++,u.spatialReference._arcadeCacheId=Je,p=Je)}const B=new y.Z({wkt:u.spatialReference.wkt,wkid:u.spatialReference.wkid});return void 0!==p&&(B._arcadeCacheId="SPREF"+p.toString()),B}}switch(u.type){case"extent":switch(o){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":{const p=u[o];return void 0!==p?p:null}case"type":return"Extent"}break;case"polygon":switch(o){case"rings":return f=u.cache._arcadeCacheId,void 0===f&&(Je++,f=Je,u.cache._arcadeCacheId=f),new z.Z(u.rings,u.spatialReference,!0===u.hasZ,!0===u.hasM,f);case"type":return"Polygon"}break;case"point":switch(o){case"x":case"y":case"z":case"m":return void 0!==u[o]?u[o]:null;case"type":return"Point"}break;case"polyline":switch(o){case"paths":return f=u.cache._arcadeCacheId,void 0===f&&(Je++,f=Je,u.cache._arcadeCacheId=f),new z.Z(u.paths,u.spatialReference,!0===u.hasZ,!0===u.hasM,f);case"type":return"Polyline"}break;case"multipoint":switch(o){case"points":return f=u.cache._arcadeCacheId,void 0===f&&(Je++,f=Je,u.cache._arcadeCacheId=f),new le.Z(u.points,u.spatialReference,!0===u.hasZ,!0===u.hasM,f,1);case"type":return"Multipoint"}}throw new Error((0,S.H5)(h,"RUNTIME","PROPERTYNOTFOUND"))}function $t(u,o){let h;try{const f=o.name.toLowerCase();if(null!==u.localScope&&void 0!==u.localScope[f])return h=u.localScope[f],!0===h.valueset||(h.value=q(u,h.node),h.valueset=!0),h.value;if(void 0!==u.globalScope[f])return h=u.globalScope[f],!0===h.valueset||(h.value=q(u,h.node),h.valueset=!0),h.value;throw new Error((0,S.H5)(o,"RUNTIME","VARIABLENOTFOUND"))}catch(f){throw f}}const Be={};function Qt(u){return null==u?"":(0,D.a)(u)||(0,D.b)(u)?"Array":(0,D.n)(u)?"Date":(0,D.f)(u)?"String":(0,D.i)(u)?"Boolean":(0,D.j)(u)?"Number":u instanceof fe.Z?"Attachment":u instanceof K.Z?"Portal":u instanceof y.Z?"Dictionary":u instanceof W.Z?"Feature":u instanceof se.Z?"Point":u instanceof H.Z?"Polygon":u instanceof I.Z?"Polyline":u instanceof Z.Z?"Multipoint":u instanceof re.Z?"Extent":(0,D.c)(u)?"Function":(0,D.o)(u)?"FeatureSet":(0,D.q)(u)?"FeatureSetCollection":u===D.v?"":"number"==typeof u&&isNaN(u)?"Number":"Unrecognised Type"}function qt(u,o,h,f){try{const p=q(u,o.arguments[h]);if((0,D.e)(p,f))return q(u,o.arguments[h+1]);{const B=o.arguments.length-h;return 1===B?q(u,o.arguments[h]):2===B?null:3===B?q(u,o.arguments[h+2]):qt(u,o,h+2,f)}}catch(p){throw p}}function en(u,o,h,f){try{if(!0===f)return q(u,o.arguments[h+1]);if(o.arguments.length-h==3)return q(u,o.arguments[h+2]);{const p=q(u,o.arguments[h+2]);if(!1===(0,D.i)(p))throw new Error("WHEN needs boolean test conditions");return en(u,o,h+2,p)}}catch(p){throw p}}function tt(u,o){const h=u.length,f=Math.floor(h/2);return 0===h?[]:1===h?[u[0]]:function Jn(u,o,h){const f=[];for(;u.length>0||o.length>0;)if(u.length>0&&o.length>0){let p=h(u[0],o[0]);isNaN(p)&&(p=0),p<=0?(f.push(u[0]),u=u.slice(1)):(f.push(o[0]),o=o.slice(1))}else u.length>0?(f.push(u[0]),u=u.slice(1)):o.length>0&&(f.push(o[0]),o=o.slice(1));return f}(tt(u.slice(0,f),o),tt(u.slice(f,h),o),o)}function tn(u,o,h){try{const f=u.body;if(h.length!==u.params.length)throw new Error("Invalid Parameter calls to function.");for(let B=0;B<h.length;B++)o.localScope[u.params[B].name.toLowerCase()]={value:h[B],valueset:!0,node:null};const p=q(o,f);if(p instanceof D.R)return p.value;if(p===D.k)throw new Error("Cannot Break from a Function");if(p===D.m)throw new Error("Cannot Continue from a Function");return p instanceof D.I?p.value:p}catch(f){throw f}}function nn(u,o,h){return J(u,o,function(f,p,B){const oe={spatialReference:u.spatialReference,globalScope:u.globalScope,depthCounter:u.depthCounter+1,console:u.console,lrucache:u.lrucache,interceptor:u.interceptor,localScope:{}};if(oe.depthCounter>64)throw new Error("Exceeded maximum function depth");return tn(h,oe,B)})}function rn(u){return function(){const h={spatialReference:u.context.spatialReference,console:u.context.console,lrucache:u.context.lrucache,interceptor:u.context.interceptor,localScope:{},depthCounter:u.context.depthCounter+1,globalScope:u.context.globalScope};if(h.depthCounter>64)throw new Error("Exceeded maximum function depth");return tn(u.definition,h,arguments)}}(0,N.r)(Be,J),(0,R.r)(Be,J),(0,w.r)(Be,J),(0,G.r)(Be,J),(0,g.r)(Be,J),(0,ee.registerFunctions)(Be,J),Be.typeof=function(u,o){return J(u,o,function(h,f,p){(0,D.p)(p,1,1);const B=Qt(p[0]);if("Unrecognised Type"===B)throw new Error("Unrecognised Type");return B})},Be.iif=function(u,o){try{(0,D.p)(null===o.arguments?[]:o.arguments,3,3);const h=q(u,o.arguments[0]);if(!1===(0,D.i)(h))throw new Error("IF Function must have a boolean test condition");const f=q(u,o.arguments[1]),p=q(u,o.arguments[2]);return!0===h?f:p}catch(h){throw h}},Be.decode=function(u,o){try{if(o.arguments.length<2)throw new Error("Missing Parameters");if(2===o.arguments.length)return q(u,o.arguments[1]);if((o.arguments.length-1)%2==0)throw new Error("Must have a default value result.");return qt(u,o,1,q(u,o.arguments[0]))}catch(h){throw h}},Be.when=function(u,o){try{if(o.arguments.length<3)throw new Error("Missing Parameters");if(o.arguments.length%2==0)throw new Error("Must have a default value result.");const h=q(u,o.arguments[0]);if(!1===(0,D.i)(h))throw new Error("WHEN needs boolean test conditions");return en(u,o,0,h)}catch(h){throw h}},Be.top=function(u,o){return J(u,o,function(h,f,p){if((0,D.p)(p,2,2),(0,D.a)(p[0]))return(0,D.t)(p[1])>=p[0].length?p[0].slice(0):p[0].slice(0,(0,D.t)(p[1]));if((0,D.b)(p[0]))return(0,D.t)(p[1])>=p[0].length()?p[0].slice(0):p[0].slice(0,(0,D.t)(p[1]));throw new Error("Top cannot accept this parameter type")})},Be.first=function(u,o){return J(u,o,function(h,f,p){return(0,D.p)(p,1,1),(0,D.a)(p[0])?0===p[0].length?null:p[0][0]:(0,D.b)(p[0])?0===p[0].length()?null:p[0].get(0):null})},Be.sort=function(u,o){return J(u,o,function(h,f,p){(0,D.p)(p,1,2);let B=p[0];if((0,D.b)(B)&&(B=B.toArray()),!1===(0,D.a)(B))throw new Error("Illegal Argument");if(p.length>1){if(!1===(0,D.c)(p[1]))throw new Error("Illegal Argument");let oe=B;const ce=rn(p[1]);return oe=tt(oe,function(ge,Ee){return ce(ge,Ee)}),oe}{let oe=B;if(0===oe.length)return[];const ce={};for(let ye=0;ye<oe.length;ye++){const Ae=Qt(oe[ye]);""!==Ae&&(ce[Ae]=!0)}if(!0===ce.Array||!0===ce.Dictionary||!0===ce.Feature||!0===ce.Point||!0===ce.Polygon||!0===ce.Polyline||!0===ce.Multipoint||!0===ce.Extent||!0===ce.Function)return oe.slice(0);let ge=0,Ee="";for(const ye in ce)ge++,Ee=ye;return oe=ge>1||"String"===Ee?tt(oe,function(ye,Ae){if(null==ye||ye===D.v)return null==Ae||Ae===D.v?0:1;if(null==Ae||Ae===D.v)return-1;const je=(0,D.d)(ye),Ve=(0,D.d)(Ae);return je<Ve?-1:je===Ve?0:1}):"Number"===Ee?tt(oe,function(ye,Ae){return ye-Ae}):"Boolean"===Ee?tt(oe,function(ye,Ae){return ye===Ae?0:Ae?-1:1}):"Date"===Ee?tt(oe,function(ye,Ae){return Ae-ye}):oe.slice(0),oe}})};for(const u in Be)Be[u]={value:new D.N(Be[u]),valueset:!0,node:null};const dt=function(){};function Xn(u,o){const h=new dt;u||(u={}),o||(o={});const f=new y.Z({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});f.immutable=!1,h.textformatting={value:f,valueset:!0,node:null};for(const p in o)h[p]={value:new D.N(o[p]),native:!0,valueset:!0,node:null};for(const p in u)h[p]=u[p]&&"esri.Graphic"===u[p].declaredClass?{value:W.Z.createFromGraphic(u[p]),valueset:!0,node:null}:{value:u[p],valueset:!0,node:null};return h}function $n(u){console.log(u)}function sn(u){const o={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:J,evaluateIdentifier:$t,arcadeCustomFunctionHandler:rn};for(let h=0;h<u.length;h++)u[h].registerFunctions(o);for(const h in o.functions)Be[h]={value:new D.N(o.functions[h]),valueset:!0,node:null},dt.prototype[h]=Be[h];for(let h=0;h<o.signatures.length;h++)(0,S.gW)(o.signatures[h],"async")}function an(u,o){let h=o.spatialReference;null==h&&(h=new $.Z({wkid:102100}));let f=q({spatialReference:h,globalScope:Xn(o.vars,o.customfunctions),localScope:null,console:o.console?o.console:$n,lrucache:o.lrucache,interceptor:o.interceptor,depthCounter:1},u.body[0].body);if(f instanceof D.R&&(f=f.value),f instanceof D.I&&(f=f.value),f===D.v&&(f=null),f===D.k)throw new Error("Cannot return BREAK");if(f===D.m)throw new Error("Cannot return CONTINUE");if(f instanceof ae.Z)throw new Error("Cannot return FUNCTION");if(f instanceof D.N)throw new Error("Cannot return FUNCTION");return f}(dt.prototype=Be).infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},dt.prototype.pi={value:Math.PI,valueset:!0,node:null},sn([X.A]);class er{constructor(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}insertInnerComments(o,h){if("BlockStatement"===o.type&&0===o.body.length){const f=[];for(let p=this.leading.length-1;p>=0;--p){const B=this.leading[p];h.end.offset>=B.start&&(f.unshift(B.comment),this.leading.splice(p,1),this.trailing.splice(p,1))}f.length&&(o.innerComments=f)}}findTrailingComments(o){let h=[];if(this.trailing.length>0){for(let p=this.trailing.length-1;p>=0;--p){const B=this.trailing[p];B.start>=o.end.offset&&h.unshift(B.comment)}return this.trailing.length=0,h}const f=this.stack[this.stack.length-1];if(f&&f.node.trailingComments){const p=f.node.trailingComments[0];p&&p.range[0]>=o.end.offset&&(h=f.node.trailingComments,delete f.node.trailingComments)}return h}findLeadingComments(o){const h=[];let f;for(;this.stack.length>0;){const p=this.stack[this.stack.length-1];if(!(p&&p.start>=o.start.offset))break;f=p.node,this.stack.pop()}if(f){for(let p=(f.leadingComments?f.leadingComments.length:0)-1;p>=0;--p){const B=f.leadingComments[p];B.range[1]<=o.start.offset&&(h.unshift(B),f.leadingComments.splice(p,1))}return f.leadingComments&&0===f.leadingComments.length&&delete f.leadingComments,h}for(let p=this.leading.length-1;p>=0;--p){const B=this.leading[p];B.start<=o.start.offset&&(h.unshift(B.comment),this.leading.splice(p,1))}return h}visitNode(o,h){if("Program"===o.type&&o.body.length>0)return;this.insertInnerComments(o,h);const f=this.findTrailingComments(h),p=this.findLeadingComments(h);p.length>0&&(o.leadingComments=p),f.length>0&&(o.trailingComments=f),this.stack.push({node:o,start:h.start.offset})}visitComment(o,h){if(this.comments.push(o),this.attach){const f={comment:{type:o.type,value:o.value,range:[h.start.offset,h.end.offset]},start:h.start.offset};o.loc&&(f.comment.loc=o.loc),this.leading.push(f),this.trailing.push(f)}}visit(o,h){"Line"===o.type||"Block"===o.type?this.visitComment(o,h):this.attach&&this.visitNode(o,h)}}function at(u,o){if(!u)throw new Error("ASSERT: "+o)}class tr{constructor(){this.errors=[],this.tolerant=!1}recordError(o){this.errors.push(o)}tolerate(o){if(!this.tolerant)throw o;this.recordError(o)}constructError(o,h){let f=new Error(o);try{throw f}catch(p){Object.create&&Object.defineProperty&&(f=Object.create(p),Object.defineProperty(f,"column",{value:h}))}return f}createError(o,h,f,p){const oe=this.constructError("Line "+h+": "+p,f);return oe.index=o,oe.lineNumber=h,oe.description=p,oe}throwError(o,h,f,p){throw this.createError(o,h,f,p)}tolerateError(o,h,f,p){const B=this.createError(o,h,f,p);if(!this.tolerant)throw B;this.recordError(B)}}class be{}class nr extends be{constructor(o,h){super(),this.type=o,this.value=h}}class rr extends be{constructor(o){super(),this.elements=o,this.type="ArrayExpression"}}const ir=["=","/=","*=","%=","+=","-="];class sr extends be{constructor(o,h,f){super(),this.operator=o,this.left=h,this.right=f,this.type="AssignmentExpression"}}const ar=["||","&&"];class on extends be{constructor(o,h,f){super(),this.operator=o,this.left=h,this.right=f,this.type=ar.includes(o)?"LogicalExpression":"BinaryExpression"}}class un extends be{constructor(o){super(),this.body=o,this.type="BlockStatement"}}class or extends be{constructor(){super(...arguments),this.type="BreakStatement"}}class ur extends be{constructor(o,h){super(),this.callee=o,this.args=h,this.type="CallExpression",this.arguments=h}}class ln extends be{constructor(o,h){super(),this.object=o,this.property=h,this.type="MemberExpression",this.computed=!0}}class cn extends be{constructor(o,h){super(),this.object=o,this.property=h,this.type="MemberExpression",this.computed=!1}}class lr extends be{constructor(){super(...arguments),this.type="ContinueStatement"}}class _t extends be{constructor(){super(...arguments),this.type="EmptyStatement"}}class hn extends be{constructor(o){super(),this.expression=o,this.type="ExpressionStatement"}}class cr extends be{constructor(o,h,f){super(),this.left=o,this.right=h,this.body=f,this.type="ForInStatement",this.each=!1}}class hr extends be{constructor(o,h,f,p){super(),this.init=o,this.test=h,this.update=f,this.body=p,this.type="ForStatement"}}class fr extends be{constructor(o,h,f){super(),this.id=o,this.params=h,this.body=f,this.type="FunctionDeclaration",this.generator=!1,this.expression=!1,this.async=!1}}class ot extends be{constructor(o){super(),this.name=o,this.type="Identifier"}}class dr extends be{constructor(o,h,f){super(),this.test=o,this.consequent=h,this.alternate=f,this.type="IfStatement"}}class xt extends be{constructor(o,h){super(),this.value=o,this.raw=h,this.type="Literal"}}class pr extends be{constructor(o){super(),this.properties=o,this.type="ObjectExpression"}}class mr extends be{constructor(o,h,f,p,B,oe){super(),this.kind=o,this.key=h,this.computed=f,this.value=p,this.method=B,this.shorthand=oe,this.type="Property"}}class Dr extends be{constructor(o){super(),this.argument=o,this.type="ReturnStatement"}}class gr extends be{constructor(o){super(),this.body=o,this.type="Program"}}class fn extends be{constructor(o,h){super(),this.value=o,this.tail=h,this.type="TemplateElement"}}class Er extends be{constructor(o,h){super(),this.quasis=o,this.expressions=h,this.type="TemplateLiteral"}}class yr extends be{constructor(o,h){super(),this.operator=o,this.argument=h,this.type="UnaryExpression",this.prefix=!0}}class dn extends be{constructor(o,h,f){super(),this.operator=o,this.argument=h,this.prefix=f,this.type="UpdateExpression"}}class Ot extends be{constructor(o,h){super(),this.declarations=o,this.kind=h,this.type="VariableDeclaration"}}class Ar extends be{constructor(o,h){super(),this.id=o,this.init=h,this.type="VariableDeclarator"}}const pn={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},Fe={fromCodePoint:u=>u<65536?String.fromCharCode(u):String.fromCharCode(55296+(u-65536>>10))+String.fromCharCode(56320+(u-65536&1023)),isWhiteSpace:u=>32===u||9===u||11===u||12===u||160===u||u>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(u)>=0,isLineTerminator:u=>10===u||13===u||8232===u||8233===u,isIdentifierStart:u=>36===u||95===u||u>=65&&u<=90||u>=97&&u<=122||92===u||u>=128&&pn.NonAsciiIdentifierStart.test(Fe.fromCodePoint(u)),isIdentifierPart:u=>36===u||95===u||u>=65&&u<=90||u>=97&&u<=122||u>=48&&u<=57||92===u||u>=128&&pn.NonAsciiIdentifierPart.test(Fe.fromCodePoint(u)),isDecimalDigit:u=>u>=48&&u<=57,isHexDigit:u=>u>=48&&u<=57||u>=65&&u<=70||u>=97&&u<=102,isOctalDigit:u=>u>=48&&u<=55};function mn(u){return"0123456789abcdef".indexOf(u.toLowerCase())}function Bt(u){return"01234567".indexOf(u)}class xr{constructor(o,h){this.source=o,this.errorHandler=h,this.trackComment=!1,this.isModule=!1,this.length=o.length,this.index=0,this.lineNumber=o.length>0?1:0,this.lineStart=0,this.curlyStack=[]}saveState(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}}restoreState(o){this.index=o.index,this.lineNumber=o.lineNumber,this.lineStart=o.lineStart,this.curlyStack=o.curlyStack}eof(){return this.index>=this.length}throwUnexpectedToken(o="Unexpected token ILLEGAL"){return this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,o)}tolerateUnexpectedToken(o="Unexpected token ILLEGAL"){this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,o)}skipSingleLineComment(o){let h=[],f=0,p=null;for(this.trackComment&&(h=[],f=this.index-o,p={start:{line:this.lineNumber,column:this.index-this.lineStart-o},end:{line:0,column:0}});!this.eof();){const B=this.source.charCodeAt(this.index);if(++this.index,Fe.isLineTerminator(B))return p&&(p.end={line:this.lineNumber,column:this.index-this.lineStart-1},h.push({multiLine:!1,slice:[f+o,this.index-1],range:[f,this.index-1],loc:p})),13===B&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,h}return p&&(p.end={line:this.lineNumber,column:this.index-this.lineStart},h.push({multiLine:!1,slice:[f+o,this.index],range:[f,this.index],loc:p})),h}skipMultiLineComment(){const o=[];let h=0,f=null;for(this.trackComment&&(h=this.index-2,f={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}});!this.eof();){const p=this.source.charCodeAt(this.index);if(Fe.isLineTerminator(p))13===p&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(42===p){if(47===this.source.charCodeAt(this.index+1))return this.index+=2,f&&(f.end={line:this.lineNumber,column:this.index-this.lineStart},o.push({multiLine:!0,slice:[h+2,this.index-2],range:[h,this.index],loc:f})),o;++this.index}else++this.index}return f&&(f.end={line:this.lineNumber,column:this.index-this.lineStart},o.push({multiLine:!0,slice:[h+2,this.index],range:[h,this.index],loc:f})),this.tolerateUnexpectedToken(),o}scanComments(){let o=null;this.trackComment&&(o=[]);let h=0===this.index;for(;!this.eof();){let f=this.source.charCodeAt(this.index);if(Fe.isWhiteSpace(f))++this.index;else if(Fe.isLineTerminator(f))++this.index,13===f&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,h=!0;else if(47===f)if(f=this.source.charCodeAt(this.index+1),47===f){this.index+=2;const p=this.skipSingleLineComment(2);o&&(o=o.concat(p)),h=!0}else{if(42!==f)break;{this.index+=2;const p=this.skipMultiLineComment();o&&(o=o.concat(p))}}else if(h&&45===f){if(45!==this.source.charCodeAt(this.index+1)||62!==this.source.charCodeAt(this.index+2))break;{this.index+=3;const p=this.skipSingleLineComment(3);o&&(o=o.concat(p))}}else{if(60!==f||this.isModule||"!--"!==this.source.slice(this.index+1,this.index+4))break;{this.index+=4;const p=this.skipSingleLineComment(4);o&&(o=o.concat(p))}}}return o}isKeyword(o){switch((o=o.toLowerCase()).length){case 2:return"if"===o||"in"===o;case 3:return"var"===o||"for"===o;case 4:return"else"===o;case 5:return"break"===o;case 6:return"return"===o;case 8:return"function"===o||"continue"===o;default:return!1}}codePointAt(o){let h=this.source.charCodeAt(o);if(h>=55296&&h<=56319){const f=this.source.charCodeAt(o+1);f>=56320&&f<=57343&&(h=1024*(h-55296)+f-56320+65536)}return h}scanHexEscape(o){const h="u"===o?4:2;let f=0;for(let p=0;p<h;++p){if(this.eof()||!Fe.isHexDigit(this.source.charCodeAt(this.index)))return null;f=16*f+mn(this.source[this.index++])}return String.fromCharCode(f)}scanUnicodeCodePointEscape(){let o=this.source[this.index],h=0;for("}"===o&&this.throwUnexpectedToken();!this.eof()&&(o=this.source[this.index++],Fe.isHexDigit(o.charCodeAt(0)));)h=16*h+mn(o);return(h>1114111||"}"!==o)&&this.throwUnexpectedToken(),Fe.fromCodePoint(h)}getIdentifier(){const o=this.index++;for(;!this.eof();){const h=this.source.charCodeAt(this.index);if(92===h)return this.index=o,this.getComplexIdentifier();if(h>=55296&&h<57343)return this.index=o,this.getComplexIdentifier();if(!Fe.isIdentifierPart(h))break;++this.index}return this.source.slice(o,this.index)}getComplexIdentifier(){let o,h=this.codePointAt(this.index),f=Fe.fromCodePoint(h);for(this.index+=f.length,92===h&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,o=this.scanUnicodeCodePointEscape()):(o=this.scanHexEscape("u"),null!==o&&"\\"!==o&&Fe.isIdentifierStart(o.charCodeAt(0))||this.throwUnexpectedToken()),f=o);!this.eof()&&(h=this.codePointAt(this.index),Fe.isIdentifierPart(h));)o=Fe.fromCodePoint(h),f+=o,this.index+=o.length,92===h&&(f=f.substr(0,f.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,o=this.scanUnicodeCodePointEscape()):(o=this.scanHexEscape("u"),null!==o&&"\\"!==o&&Fe.isIdentifierPart(o.charCodeAt(0))||this.throwUnexpectedToken()),f+=o);return f}octalToDecimal(o){let h="0"!==o,f=Bt(o);return!this.eof()&&Fe.isOctalDigit(this.source.charCodeAt(this.index))&&(h=!0,f=8*f+Bt(this.source[this.index++]),"0123".indexOf(o)>=0&&!this.eof()&&Fe.isOctalDigit(this.source.charCodeAt(this.index))&&(f=8*f+Bt(this.source[this.index++]))),{code:f,octal:h}}scanIdentifier(){let o;const h=this.index,f=92===this.source.charCodeAt(h)?this.getComplexIdentifier():this.getIdentifier();if(o=1===f.length?3:this.isKeyword(f)?4:"null"===f.toLowerCase()?5:"true"===f.toLowerCase()||"false"===f.toLowerCase()?1:3,3!==o&&h+f.length!==this.index){const p=this.index;this.index=h,this.tolerateUnexpectedToken("Keyword must not contain escaped characters"),this.index=p}return{type:o,value:f,lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}}scanPunctuator(){const o=this.index;let h=this.source[this.index];switch(h){case"(":case"{":"{"===h&&this.curlyStack.push("{"),++this.index;break;case".":case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;case"}":++this.index,this.curlyStack.pop();break;default:h=this.source.substr(this.index,4),">>>="===h?this.index+=4:(h=h.substr(0,3),"==="===h||"!=="===h||">>>"===h||"<<="===h||">>="===h||"**="===h?this.index+=3:(h=h.substr(0,2),"&&"===h||"||"===h||"=="===h||"!="===h||"+="===h||"-="===h||"*="===h||"/="===h||"++"===h||"--"===h||"<<"===h||">>"===h||"&="===h||"|="===h||"^="===h||"%="===h||"<="===h||">="===h||"=>"===h||"**"===h?this.index+=2:(h=this.source[this.index],"<>=!+-*%&|^/".indexOf(h)>=0&&++this.index)))}return this.index===o&&this.throwUnexpectedToken(),{type:7,value:h,lineNumber:this.lineNumber,lineStart:this.lineStart,start:o,end:this.index}}scanHexLiteral(o){let h="";for(;!this.eof()&&Fe.isHexDigit(this.source.charCodeAt(this.index));)h+=this.source[this.index++];return 0===h.length&&this.throwUnexpectedToken(),Fe.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+h,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:o,end:this.index}}scanBinaryLiteral(o){let h="";for(;!this.eof();){const f=this.source[this.index];if("0"!==f&&"1"!==f)break;h+=this.source[this.index++]}if(0===h.length&&this.throwUnexpectedToken(),!this.eof()){const f=this.source.charCodeAt(this.index);(Fe.isIdentifierStart(f)||Fe.isDecimalDigit(f))&&this.throwUnexpectedToken()}return{type:6,value:parseInt(h,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:o,end:this.index}}scanOctalLiteral(o,h){let f="",p=!1;for(Fe.isOctalDigit(o.charCodeAt(0))?(p=!0,f="0"+this.source[this.index++]):++this.index;!this.eof()&&Fe.isOctalDigit(this.source.charCodeAt(this.index));)f+=this.source[this.index++];return p||0!==f.length||this.throwUnexpectedToken(),(Fe.isIdentifierStart(this.source.charCodeAt(this.index))||Fe.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(f,8),octal:p,lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}}scanNumericLiteral(){const o=this.index;let h=this.source[o];at(Fe.isDecimalDigit(h.charCodeAt(0))||"."===h,"Numeric literal must start with a decimal digit or a decimal point");let f="";if("."!==h){if(f=this.source[this.index++],h=this.source[this.index],"0"===f){if("x"===h||"X"===h)return++this.index,this.scanHexLiteral(o);if("b"===h||"B"===h)return++this.index,this.scanBinaryLiteral(o);if("o"===h||"O"===h)return this.scanOctalLiteral(h,o)}for(;Fe.isDecimalDigit(this.source.charCodeAt(this.index));)f+=this.source[this.index++];h=this.source[this.index]}if("."===h){for(f+=this.source[this.index++];Fe.isDecimalDigit(this.source.charCodeAt(this.index));)f+=this.source[this.index++];h=this.source[this.index]}if("e"===h||"E"===h)if(f+=this.source[this.index++],h=this.source[this.index],"+"!==h&&"-"!==h||(f+=this.source[this.index++]),Fe.isDecimalDigit(this.source.charCodeAt(this.index)))for(;Fe.isDecimalDigit(this.source.charCodeAt(this.index));)f+=this.source[this.index++];else this.throwUnexpectedToken();return Fe.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(f),lineNumber:this.lineNumber,lineStart:this.lineStart,start:o,end:this.index}}scanStringLiteral(){const o=this.index;let h=this.source[o];at("'"===h||'"'===h,"String literal must starts with a quote"),++this.index;let f=!1,p="";for(;!this.eof();){let B=this.source[this.index++];if(B===h){h="";break}if("\\"===B)if(B=this.source[this.index++],B&&Fe.isLineTerminator(B.charCodeAt(0)))++this.lineNumber,"\r"===B&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(B){case"u":if("{"===this.source[this.index])++this.index,p+=this.scanUnicodeCodePointEscape();else{const oe=this.scanHexEscape(B);null===oe&&this.throwUnexpectedToken(),p+=oe}break;case"x":{const oe=this.scanHexEscape(B);null===oe&&this.throwUnexpectedToken("Invalid hexadecimal escape sequence"),p+=oe;break}case"n":p+="\n";break;case"r":p+="\r";break;case"t":p+="\t";break;case"b":p+="\b";break;case"f":p+="\f";break;case"v":p+="\v";break;case"8":case"9":p+=B,this.tolerateUnexpectedToken();break;default:if(B&&Fe.isOctalDigit(B.charCodeAt(0))){const oe=this.octalToDecimal(B);f=oe.octal||f,p+=String.fromCharCode(oe.code)}else p+=B}else{if(Fe.isLineTerminator(B.charCodeAt(0)))break;p+=B}}return""!==h&&(this.index=o,this.throwUnexpectedToken()),{type:8,value:p,octal:f,lineNumber:this.lineNumber,lineStart:this.lineStart,start:o,end:this.index}}scanTemplate(){let o="",h=!1;const f=this.index,p="`"===this.source[f];let B=!1,oe=2;for(++this.index;!this.eof();){let ce=this.source[this.index++];if("`"===ce){oe=1,B=!0,h=!0;break}if("$"===ce){if("{"===this.source[this.index]){this.curlyStack.push("${"),++this.index,h=!0;break}o+=ce}else if("\\"===ce)if(ce=this.source[this.index++],Fe.isLineTerminator(ce.charCodeAt(0)))++this.lineNumber,"\r"===ce&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(ce){case"n":o+="\n";break;case"r":o+="\r";break;case"t":o+="\t";break;case"u":if("{"===this.source[this.index])++this.index,o+=this.scanUnicodeCodePointEscape();else{const ge=this.index,Ee=this.scanHexEscape(ce);null!==Ee?o+=Ee:(this.index=ge,o+=ce)}break;case"x":{const ge=this.scanHexEscape(ce);null===ge&&this.throwUnexpectedToken("Invalid hexadecimal escape sequence"),o+=ge;break}case"b":o+="\b";break;case"f":o+="\f";break;case"v":o+="\v";break;default:"0"===ce?(Fe.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken("Octal literals are not allowed in template strings."),o+="\0"):Fe.isOctalDigit(ce.charCodeAt(0))?this.throwUnexpectedToken("Octal literals are not allowed in template strings."):o+=ce}else Fe.isLineTerminator(ce.charCodeAt(0))?(++this.lineNumber,"\r"===ce&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,o+="\n"):o+=ce}return h||this.throwUnexpectedToken(),p||this.curlyStack.pop(),{type:10,value:this.source.slice(f+1,this.index-oe),cooked:o,head:p,tail:B,lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}}testRegExp(o,h){let p=o;h.indexOf("u")>=0&&(p=p.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,(B,oe,ce)=>{const ge=parseInt(oe||ce,16);return ge>1114111&&this.throwUnexpectedToken("Invalid regular expression"),ge<=65535?String.fromCharCode(ge):"\uffff"}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"\uffff"));try{RegExp(p)}catch(B){this.throwUnexpectedToken("Invalid regular expression")}try{return new RegExp(o,h)}catch(B){return null}}scanRegExpBody(){let o=this.source[this.index];at("/"===o,"Regular expression literal must start with a slash");let h=this.source[this.index++],f=!1,p=!1;for(;!this.eof();)if(o=this.source[this.index++],h+=o,"\\"===o)o=this.source[this.index++],Fe.isLineTerminator(o.charCodeAt(0))&&this.throwUnexpectedToken("Invalid regular expression: missing /"),h+=o;else if(Fe.isLineTerminator(o.charCodeAt(0)))this.throwUnexpectedToken("Invalid regular expression: missing /");else if(f)"]"===o&&(f=!1);else{if("/"===o){p=!0;break}"["===o&&(f=!0)}return p||this.throwUnexpectedToken("Invalid regular expression: missing /"),h.substr(1,h.length-2)}scanRegExpFlags(){let o="",h="";for(;!this.eof();){let f=this.source[this.index];if(!Fe.isIdentifierPart(f.charCodeAt(0)))break;if(++this.index,"\\"!==f||this.eof())h+=f,o+=f;else if(f=this.source[this.index],"u"===f){++this.index;let p=this.index;const B=this.scanHexEscape("u");if(null!==B)for(h+=B,o+="\\u";p<this.index;++p)o+=this.source[p];else this.index=p,h+="u",o+="\\u";this.tolerateUnexpectedToken()}else o+="\\",this.tolerateUnexpectedToken()}return h}scanRegExp(){const o=this.index,h=this.scanRegExpBody(),f=this.scanRegExpFlags();return{type:9,value:"",pattern:h,flags:f,regex:this.testRegExp(h,f),lineNumber:this.lineNumber,lineStart:this.lineStart,start:o,end:this.index}}lex(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};const o=this.source.charCodeAt(this.index);return Fe.isIdentifierStart(o)?this.scanIdentifier():40===o||41===o||59===o?this.scanPunctuator():39===o||34===o?this.scanStringLiteral():46===o?Fe.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():Fe.isDecimalDigit(o)?this.scanNumericLiteral():96===o||125===o&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():o>=55296&&o<57343&&Fe.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()}}const Cr={1:"Boolean",2:"<end>",3:"Identifier",4:"Keyword",5:"Null",6:"Numeric",7:"Punctuator",8:"String",9:"RegularExpression",10:"Template"};class Fr{constructor(o,h={},f){this.config={range:"boolean"==typeof h.range&&h.range,loc:"boolean"==typeof h.loc&&h.loc,source:null,tokens:"boolean"==typeof h.tokens&&h.tokens,comment:"boolean"==typeof h.comment&&h.comment,tolerant:"boolean"==typeof h.tolerant&&h.tolerant,globalReturn:!!h.globalReturn},this.config.loc&&h.source&&null!==h.source&&(this.config.source=String(h.source)),this.delegate=f,this.errorHandler=new tr,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new xr(o,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={allowIn:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,curlyParsing:"asObject"},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}tolerateError(o,...h){const f=h.slice(),p=o.replace(/%(\d)/g,(ge,Ee)=>(at(Ee<f.length,"Message reference must be in range"),f[Ee]));this.errorHandler.tolerateError(this.lastMarker.index,this.scanner.lineNumber,this.lastMarker.column+1,p)}unexpectedTokenError(o,h){let f,p=h||"Unexpected token %0";return o?(h||(p=2===o.type?"Unexpected end of input":3===o.type?"Unexpected identifier":6===o.type?"Unexpected number":8===o.type?"Unexpected string":10===o.type?"Unexpected quasi %0":"Unexpected token %0"),f=o.value.toString()):f="ILLEGAL",p=p.replace("%0",f),o&&"number"==typeof o.lineNumber?this.errorHandler.createError(o.start,o.lineNumber,o.start-(this.lastMarker.index-this.lastMarker.column)+1,p):this.errorHandler.createError(this.lastMarker.index,this.lastMarker.line,this.lastMarker.column+1,p)}throwUnexpectedToken(o,h){throw this.unexpectedTokenError(o,h)}tolerateUnexpectedToken(o,h){this.errorHandler.tolerate(this.unexpectedTokenError(o,h))}collectComments(){if(this.config.comment){const o=this.scanner.scanComments();if(o&&o.length>0&&this.delegate)for(let h=0;h<o.length;++h){const f=o[h],p=new nr(f.multiLine?"Block":"Line",this.scanner.source.slice(f.slice[0],f.slice[1]));this.config.range&&(p.range=f.range),this.config.loc&&(p.loc=f.loc),this.delegate(p,{start:{line:f.loc.start.line,column:f.loc.start.column,offset:f.range[0]},end:{line:f.loc.end.line,column:f.loc.end.column,offset:f.range[1]}})}}else this.scanner.scanComments()}peekAhead(o){const f=this.scanner.saveState();o.call(this,()=>(this.scanner.scanComments(),this.scanner.lex())),this.scanner.restoreState(f)}getTokenRaw(o){return this.scanner.source.slice(o.start,o.end)}convertToken(o){const h={type:Cr[o.type],value:this.getTokenRaw(o)};return this.config.range&&(h.range=[o.start,o.end]),this.config.loc&&(h.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),9===o.type&&(h.regex={pattern:o.pattern,flags:o.flags}),h}nextToken(){const o=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);const h=this.scanner.lex();return this.hasLineTerminator=o.lineNumber!==h.lineNumber,this.lookahead=h,this.config.tokens&&2!==h.type&&this.tokens.push(this.convertToken(h)),o}createNode(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}}startNode(o,h=0){let f=o.start-o.lineStart,p=o.lineNumber;return f<0&&(f+=h,p--),{index:o.start,line:p,column:f}}finalize(o,h){return this.config.range&&(h.range=[o.index,this.lastMarker.index]),this.config.loc&&(h.loc={start:{line:o.line,column:o.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(h.loc.source=this.config.source)),this.delegate&&this.delegate(h,{start:{line:o.line,column:o.column,offset:o.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}}),h}expect(o){const h=this.nextToken();7===h.type&&h.value===o||this.throwUnexpectedToken(h)}expectCommaSeparator(){if(this.config.tolerant){const o=this.lookahead;7===o.type&&","===o.value?this.nextToken():7===o.type&&";"===o.value?(this.nextToken(),this.tolerateUnexpectedToken(o)):this.tolerateUnexpectedToken(o,"Unexpected token %0")}else this.expect(",")}expectKeyword(o){const h=this.nextToken();4===h.type&&h.value.toString().toLowerCase()===o.toLowerCase()||this.throwUnexpectedToken(h)}match(o){return 7===this.lookahead.type&&this.lookahead.value===o}matchKeyword(o){return 4===this.lookahead.type&&this.lookahead.value.toLowerCase()===o.toLowerCase()}matchContextualKeyword(o){return 3===this.lookahead.type&&this.lookahead.value===o}matchAssign(){return 7===this.lookahead.type&&ir.includes(this.lookahead.value)}isolateCoverGrammar(o){const h=this.context.isBindingElement,f=this.context.isAssignmentTarget,p=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;const B=o.call(this);return null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=h,this.context.isAssignmentTarget=f,this.context.firstCoverInitializedNameError=p,B}inheritCoverGrammar(o){const h=this.context.isBindingElement,f=this.context.isAssignmentTarget,p=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;const B=o.call(this);return this.context.isBindingElement=this.context.isBindingElement&&h,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&f,this.context.firstCoverInitializedNameError=p||this.context.firstCoverInitializedNameError,B}consumeSemicolon(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)}parsePrimaryExpression(){const o=this.createNode();let h,f,p;switch(this.lookahead.type){case 3:h=this.finalize(o,new ot(this.nextToken().value));break;case 6:case 8:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,f=this.nextToken(),p=this.getTokenRaw(f),h=this.finalize(o,new xt(f.value,p));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,f=this.nextToken(),p=this.getTokenRaw(f),h=this.finalize(o,new xt("true"===f.value.toString().toLowerCase(),p));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,f=this.nextToken(),p=this.getTokenRaw(f),h=this.finalize(o,new xt(null,p));break;case 10:h=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,h=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":h=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":h=this.inheritCoverGrammar(this.parseObjectInitializer);break;default:h=this.throwUnexpectedToken(this.nextToken())}break;case 4:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,h=this.throwUnexpectedToken(this.nextToken());break;default:h=this.throwUnexpectedToken(this.nextToken())}return h}parseArrayInitializer(){const o=this.createNode(),h=[];for(this.expect("[");!this.match("]");)this.match(",")?(this.nextToken(),h.push(null)):(h.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(","));return this.expect("]"),this.finalize(o,new rr(h))}parseObjectPropertyKey(){const o=this.createNode(),h=this.nextToken();let f;switch(h.type){case 8:case 6:f=this.finalize(o,new xt(h.value,this.getTokenRaw(h)));break;case 3:case 1:case 5:case 4:f=this.finalize(o,new ot(h.value));break;default:f=this.throwUnexpectedToken(h)}return f}parseObjectProperty(){const o=this.createNode(),h=this.lookahead;let f=!1,B=!1,oe=null;if(3===h.type){const Ee=h.value;this.nextToken(),f=this.match("["),oe=this.finalize(o,new ot(Ee))}else this.match("*")?this.nextToken():(f=this.match("["),oe=this.parseObjectPropertyKey());oe||this.throwUnexpectedToken(this.lookahead);let ce=null;return this.match(":")?(this.nextToken(),ce=this.inheritCoverGrammar(this.parseAssignmentExpression)):3===h.type?(B=!0,ce=this.finalize(o,new ot(h.value))):this.throwUnexpectedToken(this.nextToken()),this.finalize(o,new mr("init",oe,f,ce,!1,B))}parseObjectInitializer(){const o=this.createNode();this.expect("{");const h=[];for(;!this.match("}");)h.push(this.parseObjectProperty()),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(o,new pr(h))}parseTemplateHead(){at(this.lookahead.head,"Template literal must start with a template head");const o=this.createNode(),h=this.nextToken();return this.finalize(o,new fn({raw:h.value,cooked:h.cooked},h.tail))}parseTemplateElement(){10!==this.lookahead.type&&this.throwUnexpectedToken();const o=this.createNode(),h=this.nextToken();return this.finalize(o,new fn({raw:h.value,cooked:h.cooked},h.tail))}parseTemplateLiteral(){const o=this.createNode(),h=[],f=[];let p=this.parseTemplateHead();for(f.push(p);!p.tail;)h.push(this.parseExpression()),p=this.parseTemplateElement(),f.push(p);return this.finalize(o,new Er(f,h))}parseGroupExpression(){this.expect("("),this.context.isBindingElement=!0;const o=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.expect(")"),this.context.isBindingElement=!1,o}parseArguments(){this.expect("(");const o=[];if(!this.match(")"))for(;;){const h=this.isolateCoverGrammar(this.parseAssignmentExpression);if(o.push(h),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),o}isIdentifierName(o){return 3===o.type||4===o.type||1===o.type||5===o.type}parseIdentifierName(){const o=this.createNode(),h=this.nextToken();return this.isIdentifierName(h)||this.throwUnexpectedToken(h),this.finalize(o,new ot(h.value))}parseLeftHandSideExpressionAllowCall(){const o=this.lookahead,h=this.context.allowIn;this.context.allowIn=!0;let f=this.inheritCoverGrammar(this.parsePrimaryExpression);for(;;)if(this.match("(")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;const p=this.parseArguments();f=this.finalize(this.startNode(o),new ur(f,p))}else if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");const p=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),f=this.finalize(this.startNode(o),new ln(f,p))}else{if(!this.match("."))break;{this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");const p=this.parseIdentifierName();f=this.finalize(this.startNode(o),new cn(f,p))}}return this.context.allowIn=h,f}parseLeftHandSideExpression(){at(this.context.allowIn,"callee of new expression always allow in keyword.");const o=this.startNode(this.lookahead);let h=this.inheritCoverGrammar(this.parsePrimaryExpression);for(;;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");const f=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),h=this.finalize(o,new ln(h,f))}else{if(!this.match("."))break;{this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");const f=this.parseIdentifierName();h=this.finalize(o,new cn(h,f))}}return h}parseUpdateExpression(){let o;const h=this.lookahead;if(this.match("++")||this.match("--")){const f=this.startNode(h),p=this.nextToken();o=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.isAssignmentTarget||this.tolerateError("Invalid left-hand side in assignment"),o=this.finalize(f,new dn(p.value,o,!0)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(o=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&7===this.lookahead.type&&(this.match("++")||this.match("--"))){this.context.isAssignmentTarget||this.tolerateError("Invalid left-hand side in assignment"),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;const f=this.nextToken().value,p=!1;o=this.finalize(this.startNode(h),new dn(f,o,p))}return o}parseUnaryExpression(){let o;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")){const h=this.startNode(this.lookahead),f=this.nextToken();o=this.inheritCoverGrammar(this.parseUnaryExpression),o=this.finalize(h,new yr(f.value,o)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else o=this.parseUpdateExpression();return o}binaryPrecedence(o){const h=o.value;let f;return f=7===o.type?this.operatorPrecedence[h]||0:4===o.type&&this.context.allowIn&&"in"===h?12:0,f}parseBinaryExpression(){const o=this.lookahead;let h=this.inheritCoverGrammar(this.parseUnaryExpression);const f=this.lookahead;let p=this.binaryPrecedence(f);if(p>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;const B=[o,this.lookahead];let oe=h,ce=this.inheritCoverGrammar(this.parseUnaryExpression);const ge=[oe,f.value,ce],Ee=[p];for(;p=this.binaryPrecedence(this.lookahead),!(p<=0);){for(;ge.length>2&&p<=Ee[Ee.length-1];){ce=ge.pop();const je=ge.pop();Ee.pop(),oe=ge.pop(),B.pop();const Ve=B[B.length-1],zt=this.startNode(Ve,Ve.lineStart);ge.push(this.finalize(zt,new on(je,oe,ce)))}ge.push(this.nextToken().value),Ee.push(p),B.push(this.lookahead),ge.push(this.inheritCoverGrammar(this.parseUnaryExpression))}let ye=ge.length-1;h=ge[ye];let Ae=B.pop();for(;ye>1;){const je=B.pop();if(!je)break;const zt=this.startNode(je,Ae&&Ae.lineStart);h=this.finalize(zt,new on(ge[ye-1],ge[ye-2],h)),ye-=2,Ae=je}}return h}parseAssignmentExpression(){const o=this.lookahead;let h=o,f=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.matchAssign()){this.context.isAssignmentTarget||this.tolerateError("Invalid left-hand side in assignment"),this.match("=")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1),h=this.nextToken();const p=h.value,B=this.isolateCoverGrammar(this.parseAssignmentExpression);f=this.finalize(this.startNode(o),new sr(p,f,B)),this.context.firstCoverInitializedNameError=null}return f}parseExpression(){return this.isolateCoverGrammar(this.parseAssignmentExpression)}parseStatementListItem(){let o;return this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,o=4===this.lookahead.type&&"function"===this.lookahead.value?this.parseFunctionDeclaration():this.parseStatement(),o}parseBlock(){const o=this.createNode();this.expect("{");const h=[];for(;!this.match("}");)h.push(this.parseStatementListItem());return this.expect("}"),this.finalize(o,new un(h))}parseObjectStatement(){const o=this.createNode(),h=this.parseObjectInitializer();return this.finalize(o,new hn(h))}parseBlockOrObjectStatement(){let o="asObject"===this.context.curlyParsing;return"asObjectOrBlock"===this.context.curlyParsing&&this.peekAhead(h=>{let f=h();3!==f.type&&8!==f.type||(f=h(),7===f.type&&":"===f.value&&(o=!0))}),o?this.parseObjectStatement():this.parseBlock()}parseVariableIdentifier(){const o=this.createNode(),h=this.nextToken();return 3!==h.type&&this.throwUnexpectedToken(h,"Identifier expected"),this.finalize(o,new ot(h.value))}parseVariableDeclaration(o){const h=this.createNode(),f=this.parseVariableIdentifier();let p=null;return this.match("=")?(this.nextToken(),p=this.isolateCoverGrammar(this.parseAssignmentExpression)):"Identifier"===f.type||o.inFor||this.expect("="),this.finalize(h,new Ar(f,p))}parseVariableDeclarationList(o){const h=[this.parseVariableDeclaration(o)];for(;this.match(",");)this.nextToken(),h.push(this.parseVariableDeclaration(o));return h}parseVariableStatement(){const o=this.createNode();this.expectKeyword("var");const h=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(o,new Ot(h,"var"))}parseEmptyStatement(){const o=this.createNode();return this.expect(";"),this.finalize(o,new _t)}parseExpressionStatement(){const o=this.createNode(),h=this.parseExpression();return this.consumeSemicolon(),this.finalize(o,new hn(h))}parseIfClause(){const o=this.context.curlyParsing;this.context.curlyParsing="asObjectOrBlock";const h=this.parseStatement();return this.context.curlyParsing=o,h}parseIfStatement(){const o=this.createNode();let h,f=null;this.expectKeyword("if"),this.expect("(");const p=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),h=this.finalize(this.createNode(),new _t)):(this.expect(")"),h=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),f=this.parseIfClause())),this.finalize(o,new dr(p,h,f))}parseForStatement(){let o=null,h=null,f=null,p=null,B=null;const oe=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){const ge=this.createNode();this.nextToken();const Ee=this.context.allowIn;this.context.allowIn=!1;const ye=this.parseVariableDeclarationList({inFor:!0});this.context.allowIn=Ee,1===ye.length&&this.matchKeyword("in")?(ye[0].init&&this.tolerateError("%0 loop variable declaration may not have an initializer","for-in"),p=this.finalize(ge,new Ot(ye,"var")),this.nextToken(),B=this.parseExpression()):(o=this.finalize(ge,new Ot(ye,"var")),this.expect(";"))}else{const ge=this.context.isBindingElement,Ee=this.context.isAssignmentTarget,ye=this.context.firstCoverInitializedNameError,Ae=this.context.allowIn;this.context.allowIn=!1,o=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=Ae,this.matchKeyword("in")?(this.context.isAssignmentTarget&&"AssignmentExpression"!==o.type||this.tolerateError("Invalid left-hand side in for-in"),this.nextToken(),p=o,B=this.parseExpression(),o=null):(this.context.isBindingElement=ge,this.context.isAssignmentTarget=Ee,this.context.firstCoverInitializedNameError=ye,this.expect(";"))}let ce;if(p||(this.match(";")||(h=this.isolateCoverGrammar(this.parseExpression)),this.expect(";"),this.match(")")||(f=this.isolateCoverGrammar(this.parseExpression))),!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),ce=this.finalize(this.createNode(),new _t);else{this.expect(")");const ge=this.context.inIteration,Ee=this.context.curlyParsing;this.context.inIteration=!0,this.context.curlyParsing="asObjectOrBlock",ce=this.isolateCoverGrammar(this.parseStatement),this.context.curlyParsing=Ee,this.context.inIteration=ge}return this.finalize(oe,p&&B?new cr(p,B,ce):new hr(o,h,f,ce))}parseContinueStatement(){const o=this.createNode();return this.expectKeyword("continue"),this.consumeSemicolon(),this.finalize(o,new lr)}parseBreakStatement(){const o=this.createNode();return this.expectKeyword("break"),this.consumeSemicolon(),this.finalize(o,new or)}parseReturnStatement(){this.config.globalReturn||this.context.inFunctionBody||this.tolerateError("Illegal return statement");const o=this.createNode();this.expectKeyword("return");const h=(this.match(";")||this.match("}")||this.hasLineTerminator||2===this.lookahead.type)&&8!==this.lookahead.type&&10!==this.lookahead.type?null:this.parseExpression();return this.consumeSemicolon(),this.finalize(o,new Dr(h))}parseStatement(){let o;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 3:o=this.parseExpressionStatement();break;case 7:{const h=this.lookahead.value;o="{"===h?this.parseBlockOrObjectStatement():"("===h?this.parseExpressionStatement():";"===h?this.parseEmptyStatement():this.parseExpressionStatement();break}case 4:switch(this.lookahead.value.toLowerCase()){case"break":o=this.parseBreakStatement();break;case"continue":o=this.parseContinueStatement();break;case"for":o=this.parseForStatement();break;case"function":o=this.parseFunctionDeclaration();break;case"if":o=this.parseIfStatement();break;case"return":o=this.parseReturnStatement();break;case"var":o=this.parseVariableStatement();break;default:o=this.parseExpressionStatement()}break;default:o=this.throwUnexpectedToken(this.lookahead)}return o}parseFunctionSourceElements(){const o=this.createNode();this.expect("{");const h=this.context.inIteration,f=this.context.inFunctionBody;this.context.inIteration=!1,this.context.inFunctionBody=!0;const p=[];for(;2!==this.lookahead.type&&!this.match("}");)p.push(this.parseStatementListItem());return this.expect("}"),this.context.inIteration=h,this.context.inFunctionBody=f,this.finalize(o,new un(p))}parseFormalParameters(){const o=[];if(this.expect("("),!this.match(")"))for(;2!==this.lookahead.type&&(o.push(this.parseVariableIdentifier()),!this.match(")"))&&(this.expect(","),!this.match(")")););return this.expect(")"),o}parseFunctionDeclaration(){const o=this.createNode();this.expectKeyword("function");const h=this.parseVariableIdentifier(),f=this.parseFormalParameters(),p=this.parseFunctionSourceElements();return this.finalize(o,new fr(h,f,p))}parseScript(){const o=this.createNode(),h=[];for(;2!==this.lookahead.type;)h.push(this.parseStatementListItem());return this.finalize(o,new gr(h))}}function Dn(u,o,h){let f=null;const p=(Ee,ye)=>{h&&h(Ee,ye),f&&f.visit(Ee,ye)};let B="function"==typeof h?p:void 0,oe=!1;if(o){oe="boolean"==typeof o.comment&&o.comment;const Ee="boolean"==typeof o.attachComment&&o.attachComment;(oe||Ee)&&(f=new er,f.attach=Ee,o.comment=!0,B=p)}const ce=new Fr(u,o,B),ge=ce.parseScript();return oe&&f&&(ge.comments=f.comments),ce.config.tokens&&(ge.tokens=ce.tokens),ce.config.tolerant&&(ge.errors=ce.errorHandler.errors),ge}function gn(u,o=[]){const h=Dn("function _() { "+u+"\n}");if(null==h.body)throw new Error("No formula provided.");if(0===h.body.length)throw new Error("No formula provided.");if(0===h.body.length)throw new Error("No formula provided.");if("BlockStatement"!==h.body[0].body.type)throw new Error("Invalid formula content.");const f=(0,S.UA)(h);if(""!==f)throw new Error(f);return(0,S.dN)(h,o),h}var En=Q(8314);const Nr=["feature","angle","bearing","centroid","envelopeintersects","extent","geometry","isselfintersecting","ringisclockwise"];let yn=!1,An=!1,Ye=null,Rt=[];function xn(u,o){return!0===o.useAsync||!0===u.isAsync?function Or(u,o){if(null===Ye)throw new Error("Async Arcade must be enabled for this script");return(0,En.Z)("esri-csp-restrictions")?function(h){return Ye.executeScript(u,h)}:P(u,o,!0)}(u,o):(0,En.Z)("esri-csp-restrictions")?function(h){return an(u,h)}:P(u,o)}function Mt(u,o=[]){return gn(u,o)}function kt(u,o){if(!0===o.useAsync||!0===u.isAsync){if(null===Ye)throw new Error("Async Arcade must be enabled for this script");return Ye.executeScript(u,o)}return an(u,o)}function Ct(u,o){return function Qn(u,o){return(0,S.bV)(u,o)}(u,o)}function Cn(u){return function vr(u){return(0,S.Kq)(u)}(u)}function Ft(u,o=[]){return void 0===u.usesGeometry&&(0,S.dN)(u,o),!0===u.usesGeometry}let Ut=null;function Lt(){return Ut||(Ut=(0,_.$6)([Promise.all([Q.e(4918),Q.e(8592),Q.e(4766)]).then(Q.bind(Q,44766)),Promise.resolve().then(Q.bind(Q,63461))]).then(([u,o])=>(An=!0,o.setGeometryEngine(u),!0)),Ut)}let Pt=null;function Zt(){return null!==Pt||(Pt=function Y(){return Q.e(8302).then(Q.bind(Q,38302)).then(u=>(We([u],"async"),!0))}().then(()=>Promise.all([Q.e(8302),Q.e(5039)]).then(Q.bind(Q,35039))).then(u=>{Ye=u;for(const o of Rt)Ye.extend(o),We(o,"async");return Rt=null,!0})),Pt}function Fn(){return yn}function wn(){return!!Ye}function bn(){return An}let Gt=null;function jt(){return Gt||(Gt=Zt().then(()=>(0,_.$6)([Promise.all([Q.e(410),Q.e(3482),Q.e(5171)]).then(Q.bind(Q,85171)),Promise.all([Q.e(410),Q.e(3482),Q.e(5171),Q.e(2480)]).then(Q.bind(Q,82480)),Promise.all([Q.e(410),Q.e(3482),Q.e(5978)]).then(Q.bind(Q,55978)),Promise.all([Q.e(410),Q.e(2543)]).then(Q.bind(Q,2543)),Q.e(4198).then(Q.bind(Q,34198))]).then(([u,o,h,f,p])=>(Nn=u,Ye.extend([o,h,f,p]),We([o,h,f,p],"async"),yn=!0,!0))),Gt)}function In(u,o=[]){return void 0===u.usesFeatureSet&&(0,S.dN)(u,o),!0===u.usesFeatureSet}function Sn(u,o,h=[],f=!1){return(0,_.Ue)((p,B)=>{const oe="string"==typeof u?Mt(u):u,ce=[];oe&&(!1===bn()&&(Ft(oe)||f)&&ce.push(Lt()),!1===wn()&&(!0===oe.isAsync||o)&&ce.push(Zt()),!1===Fn()&&(In(oe)||function Zr(u,o){if(o){for(const h of o)if(Ct(u,h))return!0;return!1}return!1}(oe,h))&&ce.push(jt())),ce.length?(0,_.$6)(ce).then(()=>{p(!0)},B):p(!0)})}function vn(u){if(Ft(u))return!0;const o=(0,S.Vf)(u);let h=!1;for(let f=0;f<o.length;f++)if(Nr.indexOf(o[f])>-1){h=!0;break}return h}let Nn=null;function wt(){return Nn}const Gr=Object.freeze({__proto__:null,compileScript:xn,extend:function Br(u){sn(u),We(u,"sync"),null===Ye?Rt.push(u):(We(u,"async"),Ye.extend(u))},parseScript:Mt,validateScript:function Rr(u,o,h=""){return function Sr(u,o,h){return(0,S.FS)(u,o,h)}(u,o,h)},scriptCheck:function Mr(u,o,h,f=""){return function br(u,o,h,f,p){const B=[],ce="function _() { \n"+u+"\n}";try{const ge=Dn(ce,{tolerant:!0,loc:!0,range:!0}),Ee=ge.errors;if(Ee.length>0)for(let Ae=0;Ae<Ee.length;Ae++)B.push({line:Ee[Ae].lineNumber-2,character:Ee[Ae].column,reason:Ee[Ae].description});const ye=(0,S.AA)(ge,o,h,f,p);for(let Ae=0;Ae<ye.length;Ae++)ye[Ae].line=ye[Ae].line-2,ye[Ae].range&&(ye[Ae].range=[ye[Ae][0]-15,ye[Ae][1]-15]),ye[Ae].loc&&(ye[Ae].loc.start.line=ye[Ae].loc.start.line-2,ye[Ae].loc.end.line=ye[Ae].loc.end.line-2),B.push(ye[Ae])}catch(ge){try{if("Unexpected token }"===ge.description){const Ee=ce.split("\n").length;ge.lineNumber===Ee?(ge.index=ce.length-1,B.push({line:ge.lineNumber-4,character:ge.column,reason:"Unexpected end of script"})):(ge.index=ce.length-1,B.push({line:ge.lineNumber-2,character:ge.column,reason:"Unexpected end of script"}))}else B.push({line:ge.lineNumber-2,character:ge.column,reason:ge.description})}catch(Ee){}}return B}(u,o,h,f)},parseAndExecuteScript:function kr(u,o,h=[]){return kt(gn(u,h),o)},executeScript:kt,referencesMember:Ct,referencesFunction:function Ur(u,o){return function qn(u,o){return(0,S.w8)(u,o)}(u,o)},extractFieldLiterals:function Lr(u,o=!1){return function Ir(u,o){return(0,S.mb)(u)}(u)},extractExpectedFieldLiterals:Cn,scriptUsesGeometryEngine:Ft,enableGeometrySupport:Lt,enableAsyncSupport:Zt,isFeatureSetSupportEnabled:Fn,isAsyncEnabled:wn,isGeometryEnabled:bn,enableFeatureSetSupport:jt,scriptUsesFeatureSet:In,scriptIsAsync:function Pr(u,o=[]){return void 0===u.isAsync&&(0,S.dN)(u,o),!0===u.isAsync},loadScriptDependencies:Sn,scriptTouchesGeometry:vn,featureSetUtils:wt});var jr=Q(58817),Tn=Q(86971);const _n=/^\$(feature|aggregatedFeatures)\./i,zr={vars:{$feature:"any",$view:"any"},spatialReference:null};function Hr(u){return u.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function pt(u){if(!u)return null;try{return Mt(u)}catch(o){}return null}function Yr(u,o){const h="string"==typeof u?pt(u):u;if(!h)return null;try{return xn(h,o=o||(0,jr.d9)(zr))}catch(f){}return null}function Vr(u,o){return{vars:{$feature:null==u?new W.Z:W.Z.createFromGraphic(u),$view:o&&o.view},spatialReference:o&&o.sr}}function Kr(u,o,h){return W.Z.createFromGraphicLikeObject(o,u,h)}function Wr(u,o){u.vars.$feature=o}function Jr(u,o){let h;try{h=kt(u,o)}catch(f){h=null}return h}function Xr(u,o){let h;try{h=u?u(o):null}catch(f){h=null}return h}function $r(u,o){try{return u?u(o):Promise.resolve(null)}catch(h){return Promise.resolve(null)}}function Qr(u,o){if(!u)return[];const h="string"==typeof u?pt(u):u;if(!h)return[];const f=Cn(h);let p=new Array;f.forEach(oe=>{_n.test(oe)&&(oe=oe.replace(_n,""),p.push(oe))});const B=p.filter(oe=>oe.includes("*"));return p=p.filter(oe=>!B.includes(oe)),o&&B.forEach(oe=>{const ce=new RegExp(`^${oe.split(/\*+/).map(Hr).join(".*")}$`,"i");o.forEach(ge=>ce.test(ge)?p.push(ge):null)}),[...new Set(p.sort())]}function qr(u){return Ct(u,"$view")}function ei(u,o){return!!u&&Ct(u,o)}function ti(u){if(u&&(null!=u.spatialReference||null!=u.scale&&null!=u.viewingMode))return{view:u.viewingMode&&null!=u.scale?new y.Z({viewingMode:u.viewingMode,scale:u.scale}):null,sr:u.spatialReference}}function ni({url:u,spatialReference:o,lrucache:h,interceptor:f}){const p=wt();return p?p.createFeatureSetCollectionFromService(u,o,h,f):null}function ri({layer:u,spatialReference:o,outFields:h,returnGeometry:f,lrucache:p,interceptor:B}){if(null===u)return null;const oe=wt();return oe?oe.constructFeatureSet(u,o,h,null==f||f,p,B):null}function ii(u){if(null===(null==u?void 0:u.map))return null;const o=wt();return o?o.createFeatureSetCollectionFromMap(u.map,u.spatialReference,u.lrucache,u.interceptor):null}function si(u,o,h=[]){return Sn(u,o,h)}function ai(){return Lt()}function oi(){return jt()}function On(u,o){if(!u)return!1;if("string"==typeof u)return o(u);const h=u;if(function ui(u){return"simple"===u.type||"class-breaks"===u.type||"unique-value"===u.type||"dot-density"===u.type||"dictionary"===u.type}(h)){if("dot-density"===h.type){const B=h.attributes.some(oe=>o(oe.valueExpression));if(B)return B}const f=h.visualVariables,p=!!f&&f.some(B=>{let oe=o(B.valueExpression);return"size"===B.type&&((0,Tn.iY)(B.minSize)&&(oe=oe||o(B.minSize.valueExpression)),(0,Tn.iY)(B.maxSize)&&(oe=oe||o(B.maxSize.valueExpression))),oe});return!(!("valueExpression"in h)||!o(h.valueExpression))||p}if(function li(u){return"esri.layers.support.LabelClass"===u.declaredClass}(h)){const f=h.labelExpressionInfo&&h.labelExpressionInfo.expression;return!(!f||!o(f))||!1}return!!function ci(u){return"esri.PopupTemplate"===u.declaredClass}(h)&&(!!h.expressionInfos&&h.expressionInfos.some(f=>o(f.expression))||Array.isArray(h.content)&&h.content.some(f=>{var p;return"expression"===f.type&&o(null==(p=f.expressionInfo)?void 0:p.expression)}))}function hi(u){const o=pt(u);return!!o&&vn(o)}function fi(u){return On(u,hi)}function di(u){const o=pt(u);return!!o&&Ft(o)}function pi(u){return On(u,di)}},25208:(Ie,Ce,Q)=>{Q.d(Ce,{s:()=>ue}),Q(29132);var X,N,G,fe=Q(8314),y=Q(62208),W=Q(77044),z=Q(82054),le=Q(88071),D=Q(42797),S=Q(91179);let ee=0;const w=null!=(X=(0,fe.Z)("featurelayer-simplify-thresholds"))?X:[.5,.5,.5,.5],g=w[0],R=w[1],_=w[2],re=w[3],O=null!=(N=(0,fe.Z)("featurelayer-simplify-payload-size-factors"))?N:[1,2,4],Z=O[0],se=O[1],H=O[2],I=null!=(G=(0,fe.Z)("featurelayer-simplify-mobile-factor"))?G:2,$=(0,fe.Z)("esri-mobile");class ue{constructor(v){this.type="FeatureSetReader",this.seen=!1,this.instance=0,this._tx=0,this._ty=0,this._sx=1,this._sy=1,this._deleted=null,this._joined=[],this._objectIdToIndex=null,this._level=0,this.instance=v}static createInstance(){return ee++,ee=ee>65535?0:ee,ee}get isEmpty(){return(0,y.pC)(this._deleted)&&this._deleted.countSet()===this.getSize()}set level(v){this._level=v}getAreaSimplificationThreshold(v,ie){let te=1;const ne=$?I:1;ie>4e6?te=H*ne:ie>1e6?te=se*ne:ie>5e5?te=Z*ne:ie>1e5&&(te=ne);let d=0;v>4e3?d=re*te:v>2e3?d=_*te:v>100?d=R:v>15&&(d=g);let T=8;return this._level<4?T=1:this._level<5?T=2:this._level<6&&(T=4),d*T}setArcadeSpatialReference(v){this._arcadeSpatialReference=v}attachStorage(v){this._storage=v}getQuantizationTransform(){throw new Error("Unable to find transform for featureSet")}getStorage(){return this._storage}getComputedNumeric(v){return this.getComputedNumericAtIndex(0)}setComputedNumeric(v,ie){return this.setComputedNumericAtIndex(ie,0)}getComputedString(v){return this.getComputedStringAtIndex(0)}setComputedString(v,ie){return this.setComputedStringAtIndex(0,ie)}getComputedNumericAtIndex(v){return this._storage.getComputedNumericAtIndex(this.getDisplayId(),v)}setComputedNumericAtIndex(v,ie){this._storage.setComputedNumericAtIndex(this.getDisplayId(),v,ie)}getComputedStringAtIndex(v){return this._storage.getComputedStringAtIndex(this.getDisplayId(),v)}setComputedStringAtIndex(v,ie){return this._storage.setComputedStringAtIndex(this.getDisplayId(),v,ie)}transform(v,ie,te,ne){const d=this.copy();return d._tx+=v,d._ty+=ie,d._sx*=te,d._sy*=ne,d}readAttribute(v,ie=!1){const te=this._readAttribute(v,ie);if(void 0!==te)return te;for(const ne of this._joined){ne.setIndex(this.getIndex());const d=ne._readAttribute(v,ie);if(void 0!==d)return d}}readAttributes(){const v=this._readAttributes();for(const ie of this._joined){ie.setIndex(this.getIndex());const te=ie._readAttributes();for(const ne of Object.keys(te))v[ne]=te[ne]}return v}joinAttributes(v){this._joined.push(v)}readArcadeFeature(){return this}geometry(){const v=this.readHydratedGeometry(),ie=(0,z.di)(v,this.geometryType,this.hasZ,this.hasM),te=(0,S.im)(ie);return te&&(te.spatialReference=this._arcadeSpatialReference),te}field(v){return this.readAttribute(v,!0)}hasField(v){return!0}setField(v,ie){}keys(){return[]}castToText(){return""}removeIds(v){if((0,y.Wi)(this._objectIdToIndex)){const te=new Map,ne=this.getCursor();for(;ne.next();)te.set(ne.getObjectId(),ne.getIndex());this._objectIdToIndex=te}const ie=this._objectIdToIndex;for(const te of v)ie.has(te)&&this.removeAtIndex(ie.get(te))}removeAtIndex(v){(0,y.Wi)(this._deleted)&&(this._deleted=D.p.create(this.getSize())),this._deleted.set(v)}readGeometryForDisplay(){return this.readUnquantizedGeometry(!0)}readLegacyGeometryForDisplay(){return this.readLegacyGeometry(!0)}*features(){const v=this.getCursor();for(;v.next();)yield v.readOptimizedFeature()}_getExists(){return(0,y.Wi)(this._deleted)||!this._deleted.has(this.getIndex())}_computeCentroid(){if("esriGeometryPolygon"!==this.geometryType)return null;const v=this.readUnquantizedGeometry();if(!v||v.hasIndeterminateRingOrder)return null;const ie=(0,y.Pt)(this.getQuantizationTransform(),null);return(0,W.Y)(new le.Z,v,this.hasM,this.hasZ,ie)}copyInto(v){v.seen=this.seen,v._storage=this._storage,v._arcadeSpatialReference=this._arcadeSpatialReference,v._joined=this._joined,v._tx=this._tx,v._ty=this._ty,v._sx=this._sx,v._sy=this._sy,v._deleted=this._deleted,v._objectIdToIndex=this._objectIdToIndex}}},42797:(Ie,Ce,Q)=>{Q.d(Ce,{p:()=>K});class K{constructor(y,W){this._mask=0,this._buf=y,this._mask=W}static fromBuffer(y,W){return new K(y,W)}static create(y,W=4294967295){const z=new Uint32Array(Math.ceil(y/32));return new K(z,W)}_getIndex(y){return Math.floor(y/32)}has(y){const W=this._mask&y;return!!(this._buf[this._getIndex(W)]&1<<W%32)}hasRange(y,W){let z=y,le=W;for(;z%32&&z!==le;){if(this.has(z))return!0;z++}for(;le%32&&z!==le;){if(this.has(z))return!0;le--}if(z===le)return!1;for(let D=z/32;D!==le/32;D++)if(this._buf[D])return!0;return!1}set(y){const W=this._mask&y,z=this._getIndex(W);this._buf[z]|=1<<W%32}setRange(y,W){let z=y,le=W;for(;z%32&&z!==le;)this.set(z++);for(;le%32&&z!==le;)this.set(le--);if(z!==le)for(let D=z/32;D!==le/32;D++)this._buf[D]=4294967295}unset(y){const W=this._mask&y,z=this._getIndex(W);this._buf[z]&=4294967295^1<<W%32}resize(y){const W=this._buf,z=new Uint32Array(Math.ceil(y/32));z.set(W),this._buf=z}or(y){for(let W=0;W<this._buf.length;W++)this._buf[W]|=y._buf[W];return this}and(y){for(let W=0;W<this._buf.length;W++)this._buf[W]&=y._buf[W];return this}xor(y){for(let W=0;W<this._buf.length;W++)this._buf[W]^=y._buf[W];return this}ior(y){for(let W=0;W<this._buf.length;W++)this._buf[W]|=~y._buf[W];return this}iand(y){for(let W=0;W<this._buf.length;W++)this._buf[W]&=~y._buf[W];return this}ixor(y){for(let W=0;W<this._buf.length;W++)this._buf[W]^=~y._buf[W];return this}any(){for(let y=0;y<this._buf.length;y++)if(this._buf[y])return!0;return!1}copy(y){for(let W=0;W<this._buf.length;W++)this._buf[W]=y._buf[W];return this}clone(){return new K(this._buf.slice(),this._mask)}clear(){for(let y=0;y<this._buf.length;y++)this._buf[y]=0}forEachSet(y){for(let W=0;W<this._buf.length;W++){let z=this._buf[W],le=32*W;if(z)for(;z;)1&z&&y(le),z>>>=1,le++}}countSet(){let y=0;return this.forEachSet(W=>{y++}),y}}}}]);