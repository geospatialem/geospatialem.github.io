"use strict";var z=Object.defineProperty,G=Object.defineProperties,Q=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,W=(d,i,e)=>i in d?z(d,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):d[i]=e,j=(d,i)=>{for(var e in i||(i={}))J.call(i,e)&&W(d,e,i[e]);if(L)for(var e of L(i))N.call(i,e)&&W(d,e,i[e]);return d},B=(d,i)=>G(d,Q(i));(self.webpackChunksite=self.webpackChunksite||[]).push([[7434],{67434:(d,i,e)=>{e.r(i),e.d(i,{default:()=>w});var p=e(15861),v=e(17626),c=(e(8314),e(62208)),u=(e(63290),e(90912),e(85931),e(82255),e(76898)),h=e(84682),D=e(36859),A=e(39351),S=e(13112),E=e(55376);class M{constructor(s,n){this.offset=s,this.extent=n}}let y=class extends S.Z{constructor(){super(...arguments),this.type="heatmap",this._tileKeyToFeatureSets=new Map}initialize(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])}update(r,s){var n=this;return(0,p.Z)(function*(){const _=s.schema.processors[0];"heatmap"===_.type&&(0,h.Hg)(n._schema,_)&&(r.mesh=!0,n._schema=_)})()}onTileUpdate(r){for(const s of r.removed)this._tileKeyToFeatureSets.delete(s.key.id)}onTileClear(r){return this._tileKeyToFeatureSets.delete(r.key.id),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:r.id,data:{clear:!0}})}onTileMessage(r,s,n){var _=this;return(0,p.Z)(function*(){_._tileKeyToFeatureSets.has(r.key.id)||_._tileKeyToFeatureSets.set(r.key.id,new Map);const t=_._tileKeyToFeatureSets.get(r.key.id);if((0,c.pC)(s.addOrUpdate)&&s.addOrUpdate.hasFeatures&&t.set(s.addOrUpdate.instance,s),s.end){const l=[],C=function g(r){const s=r.key,n=new Map,_=256,t=A.I_,l=r.tileInfoView.tileInfo.isWrappable;return n.set((0,E.M)(s,-1,-1,l).id,new M([-t,-t],[t-_,t-_,t,t])),n.set((0,E.M)(s,0,-1,l).id,new M([0,-t],[0,t-_,t,t])),n.set((0,E.M)(s,1,-1,l).id,new M([t,-t],[0,t-_,_,t])),n.set((0,E.M)(s,-1,0,l).id,new M([-t,0],[t-_,0,t,t])),n.set((0,E.M)(s,1,0,l).id,new M([t,0],[0,0,_,t])),n.set((0,E.M)(s,-1,1,l).id,new M([-t,t],[t-_,0,t,_])),n.set((0,E.M)(s,0,1,l).id,new M([0,t],[0,0,t,_])),n.set((0,E.M)(s,1,1,l).id,new M([t,t],[0,0,_,_])),n}(r);_._tileKeyToFeatureSets.forEach((R,U)=>{if(U===r.key.id)R.forEach(K=>(0,c.Po)(K.addOrUpdate,m=>l.push(m)));else if(C.has(U)){const K=C.get(U),[m,V]=K.offset;R.forEach(Z=>(0,c.Po)(Z.addOrUpdate,x=>{const H=x.transform(m,V,1,1);l.push(H)}))}});const I=(0,D.QM)(l,_._schema.mesh,512,512),k=[I.matrix];return _.remoteClient.invoke("tileRenderer.onTileData",{tileKey:r.key.id,intensityInfo:I},B(j({},n),{transferList:k}))}})()}onTileError(r,s,n){return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:r.id,error:s},n)}};y=(0,v._)([(0,u.j)("esri.views.2d.layers.features.processors.HeatmapProcessor")],y);const w=y},55376:(d,i,e)=>{function T(c,O,P,f){const a=c.clone(),u=1<<a.level,h=a.col+O,D=a.row+P;return f&&h<0?(a.col=h+u,a.world-=1):h>=u?(a.col=h-u,a.world+=1):a.col=h,a.row=D,a}e.d(i,{M:()=>T}),e(81340)}}]);