"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[9516],{90301:(M,y,t)=>{t.d(y,{eY:()=>u});var i=t(62208),c=t(30217),E=t(49966),a=t(9545),r=t(57477),h=t(14403),v=t(55086);function n(p,s,l){const o={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return s&&l&&(o.width=s,o.height=l),new v.Z(p,o)}class u extends r.s{constructor(s=null,l,o=!0){super(),this.requestRenderOnSourceChangedEnabled=o,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.blendFunction=l,this.source=s,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(s){this._height=s}get source(){return this._source}set source(s){this._source=s,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(s){this._width=s}beforeRender(s){super.beforeRender(s),this.updateTexture(s.context)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}_createTransforms(){return{dvs:(0,E.c)()}}setTransform(s){const l=(0,c.b)(this.transforms.dvs),[o,g]=s.toScreenNoRotation([0,0],[this.x,this.y]),O=this.resolution/this.pixelRatio/s.resolution,f=O*this.width,D=O*this.height,C=Math.PI*this.rotation/180;(0,c.c)(l,l,(0,a.f)(o,g)),(0,c.c)(l,l,(0,a.f)(f/2,D/2)),(0,c.r)(l,l,-C),(0,c.c)(l,l,(0,a.f)(-f/2,-D/2)),(0,c.j)(l,l,(0,a.f)(f,D)),(0,c.m)(this.transforms.dvs,s.displayViewMat3,l)}setSamplingProfile(s){this._texture&&(s.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(s.samplingMode))}bind(s,l){this._texture&&s.bindTexture(this._texture,l)}updateTexture(s){var l;if(!this.stage)return null==(l=this._texture)||l.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this._texture=this.source?n(s,this.sourceWidth,this.sourceHeight):n(s));const o=this.source;if(o){if(this._texture.resize(this.sourceWidth,this.sourceHeight),function _(p){return p&&"render"in p}(o))if(o instanceof h.Z){const g=o.getRenderedRasterPixels();this._texture.setData((0,i.pC)(g)?g.renderedRasterPixels:null)}else this._texture.setData(function d(p){const s=document.createElement("canvas");return s.width=p.width,s.height=p.height,p.render(s.getContext("2d")),s}(o));else(function e(p){return p&&!("render"in p)})(o)&&this._texture.setData(o);this.ready()}else this._texture.setData(null)}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}},71379:(M,y,t)=>{t.d(y,{s:()=>e});var i=t(65401),c=t(49966),E=t(90301),a=t(43783);class r extends a.I{constructor(n,u,p,s,l,o=null){super(n,u,p,s,l),this.bitmap=new E.eY(o,"standard",!1),this.bitmap.coordScale=[s,l],this.bitmap.once("isReady",()=>this.ready())}destroy(){super.destroy(),this.bitmap.destroy()}beforeRender(n){super.beforeRender(n),this.bitmap.beforeRender(n)}afterRender(n){super.afterRender(n),this.bitmap.afterRender(n)}set stencilRef(n){this.bitmap.stencilRef=n}get stencilRef(){return this.bitmap.stencilRef}_createTransforms(){return{dvs:(0,c.c)(),tileMat3:(0,c.c)()}}setTransform(n,u){super.setTransform(n,u),this.bitmap.transforms.dvs=this.transforms.dvs}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap&&(this.bitmap.stage=null)}}var h=t(2361),v=t(39406),_=t(26268);class e extends _.Z{get requiresDedicatedFBO(){return this.children.some(n=>"additive"===n.bitmap.blendFunction)}createTile(n){const u=this._tileInfoView.getTileBounds((0,i.Ue)(),n),[p,s]=this._tileInfoView.tileInfo.size;return new r(n,u[0],u[3],p,s)}destroyTile(){}prepareRenderPasses(n){const u=n.registerRenderPass({name:"bitmap (tile)",brushes:[h.U.bitmap],target:()=>this.children.map(p=>p.bitmap),drawPhase:v.jx.MAP});return[...super.prepareRenderPasses(n),u]}doRender(n){this.visible&&n.drawPhase===v.jx.MAP&&super.doRender(n)}}},14403:(M,y,t)=>{t.d(y,{Z:()=>c});var i=t(62208);class c{constructor(a,r,h){this.pixelBlock=a,this.extent=r,this.originalPixelBlock=h}get width(){return(0,i.pC)(this.pixelBlock)?this.pixelBlock.width:0}get height(){return(0,i.pC)(this.pixelBlock)?this.pixelBlock.height:0}render(a){const r=this.pixelBlock;if((0,i.Wi)(r))return;const h=this.filter({pixelBlock:r});if((0,i.Wi)(h.pixelBlock))return;const v=h.pixelBlock.getAsRGBA(),_=a.createImageData(h.pixelBlock.width,h.pixelBlock.height);_.data.set(v),a.putImageData(_,0,0)}getRenderedRasterPixels(){const a=this.filter({pixelBlock:this.pixelBlock});return(0,i.Wi)(a.pixelBlock)?null:{width:a.pixelBlock.width,height:a.pixelBlock.height,renderedRasterPixels:new Uint8Array(a.pixelBlock.getAsRGBA().buffer)}}}},26268:(M,y,t)=>{t.d(y,{Z:()=>v});var i=t(8314),c=t(39406),E=t(44589),a=t(29384),r=t(13382);const h=(_,e)=>_.key.level-e.key.level!=0?_.key.level-e.key.level:_.key.row-e.key.row!=0?_.key.row-e.key.row:_.key.col-e.key.col;class v extends E.Z{constructor(e){super(),this._tileInfoView=e}get requiresDedicatedFBO(){return!1}renderChildren(e){this.sortChildren(h),this.setStencilReference(),super.renderChildren(e)}createRenderParams(e){const{state:d}=e,n=super.createRenderParams(e);return n.requiredLevel=this._tileInfoView.getClosestInfoForScale(d.scale).level,n.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(d.scale),n}prepareRenderPasses(e){const d=super.prepareRenderPasses(e);return d.push(e.registerRenderPass({name:"stencil",brushes:[r.Z],drawPhase:c.jx.DEBUG|c.jx.MAP|c.jx.HIGHLIGHT,target:()=>this.getStencilTarget()})),(0,i.Z)("esri-tiles-debug")&&d.push(e.registerRenderPass({name:"tileInfo",brushes:[a.Z],drawPhase:c.jx.DEBUG,target:()=>this.children})),d}getStencilTarget(){return this.children}updateTransforms(e){for(const d of this.children){const n=this._tileInfoView.getTileResolution(d.key);d.setTransform(e,n)}}setStencilReference(){let e=1;for(const d of this.children)d.stencilRef=e++}}},43783:(M,y,t)=>{t.d(y,{I:()=>a});var i=t(30217),c=t(57477),E=t(58098);class a extends c.s{constructor(h,v,_,e,d,n=e,u=d){super(),this.triangleCountReportedInDebug=0,this.triangleCount=0,this.texture=null,this.key=new E.Z(h),this.x=v,this.y=_,this.width=e,this.height=d,this.rangeX=n,this.rangeY=u}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}setTransform(h,v){const _=v/(h.resolution*h.pixelRatio),e=this.transforms.tileMat3,[d,n]=h.toScreenNoRotation([0,0],[this.x,this.y]);(0,i.s)(e,this.width/this.rangeX*_,0,0,0,this.height/this.rangeY*_,0,d,n,1),(0,i.m)(this.transforms.dvs,h.displayViewMat3,e)}}},91082:(M,y,t)=>{t.d(y,{Y:()=>e});var i=t(17626),v=(t(63290),t(90912),t(85931),t(8314),t(82255),t(76898)),_=t(71379);const e=d=>{let n=class extends d{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new _.s(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){var u;this.container.removeChild(this._bitmapView),null==(u=this._bitmapView)||u.removeAllChildren()}};return n=(0,i._)([(0,v.j)("esri.views.2d.layers.BitmapTileLayerView2D")],n),n}},37384:(M,y,t)=>{t.d(y,{y:()=>Z});var i=t(17626),c=t(7093),E=t(89726),a=t(27e3),r=t(77712),e=(t(85931),t(8314),t(90912),t(76898)),d=t(1011),n=t(86162);t(63290),t(82255);let s=class extends n.wq{};s=(0,i._)([(0,e.j)("esri.views.layers.support.ClipArea")],s);const l=s;var o;let g=o=class extends l{constructor(){super(...arguments),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new o({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get("version")||0)+1}};(0,i._)([(0,r.Cb)({type:[Number,String],json:{write:!0}})],g.prototype,"left",void 0),(0,i._)([(0,r.Cb)({type:[Number,String],json:{write:!0}})],g.prototype,"right",void 0),(0,i._)([(0,r.Cb)({type:[Number,String],json:{write:!0}})],g.prototype,"top",void 0),(0,i._)([(0,r.Cb)({type:[Number,String],json:{write:!0}})],g.prototype,"bottom",void 0),(0,i._)([(0,r.Cb)({readOnly:!0})],g.prototype,"version",null),g=o=(0,i._)([(0,e.j)("esri.views.layers.support.ClipRect")],g);const O=g;t(29132);var j,D=t(21674),C=t(91179),L=t(2004),B=t(37118);const K={base:D.Z,key:"type",typeMap:{extent:L.Z,polygon:B.Z}};let x=j=class extends l{constructor(){super(...arguments),this.type="geometry",this.geometry=null}get version(){return(this._get("version")||0)+1}clone(){return new j({geometry:this.geometry.clone()})}};(0,i._)([(0,r.Cb)({types:K,json:{read:C.im,write:!0}})],x.prototype,"geometry",void 0),(0,i._)([(0,r.Cb)({readOnly:!0})],x.prototype,"version",null),x=j=(0,i._)([(0,e.j)("esri.views.layers.support.Geometry")],x);const S=x;let I=class extends l{constructor(){super(...arguments),this.type="path",this.path=[]}get version(){return(this._get("version")||0)+1}};(0,i._)([(0,r.Cb)({type:[[[Number]]],json:{write:!0}})],I.prototype,"path",void 0),(0,i._)([(0,r.Cb)({readOnly:!0})],I.prototype,"version",null),I=(0,i._)([(0,e.j)("esri.views.layers.support.Path")],I);const U=c.Z.ofType({key:"type",base:l,typeMap:{rect:O,path:I,geometry:S}}),Z=H=>{let P=class extends H{constructor(){super(...arguments),this.clips=new U,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var R;this.container||(this.container=new d.W),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([(0,a.S1)(this,"suspended",m=>{this.container&&(this.container.visible=!m),this.view&&!m&&this.updateRequested&&this.view.requestUpdate()},!0),(0,a.S1)(this,["layer.opacity","container"],()=>{var m,T;this.container&&(this.container.opacity=null!=(m=null==(T=this.layer)?void 0:T.opacity)?m:1)},!0),(0,a.S1)(this,["layer.blendMode"],m=>{this.container&&(this.container.blendMode=m)},!0),(0,a.S1)(this,["layer.effect"],m=>{this.container&&(this.container.effect=m)},!0),this.clips.on("change",()=>{this.container.clips=this.clips,this.notifyChange("clips")})]),null!=(R=this.view)&&R.whenLayerView?this.view.whenLayerView(this.layer).then(m=>{m!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{}):this.when().then(()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{})}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!(!this.updatingHandles||!this.updatingHandles.updating)}isVisibleAtScale(R){let m=!0;const T=this.layer,b=T.minScale,A=T.maxScale;if(null!=b&&null!=A){let W=!b,w=!A;!W&&R<=b&&(W=!0),!w&&R>=A&&(w=!0),m=W&&w}return m}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(R){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",R),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(R))):this.updateRequested=!1}hitTest(R,m){return Promise.resolve(null)}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return(0,i._)([(0,r.Cb)({type:U,set(R){const m=(0,E.Z)(R,this._get("clips"),U);this._set("clips",m)}})],P.prototype,"clips",void 0),(0,i._)([(0,r.Cb)()],P.prototype,"moving",void 0),(0,i._)([(0,r.Cb)()],P.prototype,"attached",void 0),(0,i._)([(0,r.Cb)()],P.prototype,"container",void 0),(0,i._)([(0,r.Cb)()],P.prototype,"suspended",void 0),(0,i._)([(0,r.Cb)({readOnly:!0})],P.prototype,"updateParameters",void 0),(0,i._)([(0,r.Cb)()],P.prototype,"updateRequested",void 0),(0,i._)([(0,r.Cb)()],P.prototype,"updating",null),(0,i._)([(0,r.Cb)()],P.prototype,"view",void 0),P=(0,i._)([(0,e.j)("esri.views.2d.layers.LayerView2D")],P),P}},88893:(M,y,t)=>{function E(r,h,v,_){if(v.level===_.level)return h;const e=r.tileInfo.size,d=r.getTileResolution(v.level),n=r.getTileResolution(_.level);let u=r.getLODInfoAt(_.level);const p=u.getXForColumn(_.col),s=u.getYForRow(_.row);u=r.getLODInfoAt(v.level);const l=u.getXForColumn(v.col),o=u.getYForRow(v.row),g=function i(r){return r instanceof HTMLImageElement?r.naturalWidth:r.width}(h)/e[0],O=function c(r){return r instanceof HTMLImageElement?r.naturalHeight:r.height}(h)/e[1],f=Math.round(g*((p-l)/d)),D=Math.round(O*(-(s-o)/d)),C=Math.round(g*e[0]*(n/d)),L=Math.round(O*e[1]*(n/d)),B=a(e);return B.getContext("2d").drawImage(h,f,D,C,L,0,0,e[0],e[1]),B}function a(r){const h=document.createElement("canvas");return[h.width,h.height]=r,h}t.d(y,{V:()=>a,i:()=>E})},45611:(M,y,t)=>{t.d(y,{Z:()=>l});var i=t(17626),c=t(14517),E=t(61885),a=t(80542),r=t(61996),h=t(63290),v=t(62208),_=t(60330),e=t(77712),p=(t(85931),t(8314),t(90912),t(76898));let s=class extends((0,a.p)((0,r.I)((0,_.v)(E.Z.EventedMixin(c.Z))))){constructor(o){super(o),this.layer=null,this.parent=null}initialize(){this.when().catch(o=>{if("layerview:create-error"!==o.name){const g=this.layer&&this.layer.id||"no id",O=this.layer&&this.layer.title||"no title";throw h.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${O}', id: '${g}')`,o),o}})}get fullOpacity(){return(0,v.Pt)(this.get("layer.opacity"),1)*(0,v.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){var o;return!0===(null==(o=this.layer)?void 0:o.visible)}set visible(o){void 0!==o?this._override("visible",o):this._clearOverride("visible")}canResume(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1}getSuspendInfo(){const o=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(o.viewNotReady=!0),this.layer&&this.layer.loaded||(o.layerNotLoaded=!0),this.visible||(o.layerInvisible=!0),o}isUpdating(){return!1}};(0,i._)([(0,e.Cb)()],s.prototype,"fullOpacity",null),(0,i._)([(0,e.Cb)()],s.prototype,"layer",void 0),(0,i._)([(0,e.Cb)()],s.prototype,"parent",void 0),(0,i._)([(0,e.Cb)({readOnly:!0})],s.prototype,"suspended",null),(0,i._)([(0,e.Cb)({readOnly:!0})],s.prototype,"suspendInfo",null),(0,i._)([(0,e.Cb)({readOnly:!0})],s.prototype,"legendEnabled",null),(0,i._)([(0,e.Cb)({type:Boolean,readOnly:!0})],s.prototype,"updating",null),(0,i._)([(0,e.Cb)({readOnly:!0})],s.prototype,"updatingProgress",null),(0,i._)([(0,e.Cb)()],s.prototype,"visible",null),s=(0,i._)([(0,p.j)("esri.views.layers.LayerView")],s);const l=s},94421:(M,y,t)=>{t.d(y,{y:()=>d});var i=t(17626),c=t(63290),E=t(10699),a=t(27e3),r=t(77712),e=(t(85931),t(8314),t(90912),t(76898));const d=n=>{let u=class extends n{initialize(){this.handles.add((0,a.on)(this,"layer","refresh",p=>{this.doRefresh(p.dataChanged).catch(s=>{(0,E.D_)(s)||c.Z.getLogger(this.declaredClass).error(s)})}),"RefreshableLayerView")}};return(0,i._)([(0,r.Cb)()],u.prototype,"layer",void 0),u=(0,i._)([(0,e.j)("esri.layers.mixins.RefreshableLayerView")],u),u}}}]);