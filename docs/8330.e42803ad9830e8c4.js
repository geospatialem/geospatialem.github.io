"use strict";var Be=Object.defineProperty,We=Object.defineProperties,Le=Object.getOwnPropertyDescriptors,Ze=Object.getOwnPropertySymbols,Ye=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable,Ve=(ee,H,h)=>H in ee?Be(ee,H,{enumerable:!0,configurable:!0,writable:!0,value:h}):ee[H]=h,Qe=(ee,H)=>{for(var h in H||(H={}))Ye.call(H,h)&&Ve(ee,h,H[h]);if(Ze)for(var h of Ze(H))Je.call(H,h)&&Ve(ee,h,H[h]);return ee},be=(ee,H)=>We(ee,Le(H));(self.webpackChunksite=self.webpackChunksite||[]).push([[8330],{38330:(ee,H,h)=>{h.d(H,{Z:()=>Ge});var S=h(15861),W=h(26584),q=h(58817),L=h(62208),he=h(1036),O=h(16730),j=h(5548),D=h(65401),F=h(32442),P=h(91179),Z=h(62825),V=h(37053),K=h(78498),ie=h(10410);const ae=new class te{constructor(t,i){this._cache=new K.Z(t),this._invalidCache=new K.Z(i)}get(t,i){const e=`${i.uid}:${t}`,s=this._cache.get(e);if(s)return s;if(void 0!==this._invalidCache.get(e))return null;try{const r=ie.WhereClause.create(t,i);return this._cache.put(e,r),r}catch(r){return this._invalidCache.put(e,null),null}}}(50,500),k="feature-store:unsupported-query",ve=new Set(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);function oe(z,t){return z?ae.get(z,t):null}function le(z,t,i,e=!0){const s=[];for(const r of t)if("*"!==r&&!z.has(r))if(e){const n=fe(r);try{const a=oe(n,z);if(!a)throw new W.Z(k,"invalid SQL expression",{where:n});if(!a.isStandardized)throw new W.Z(k,"expression is not standard",{clause:a});le(z,a.fieldNames,"expression contains missing fields")}catch(a){const u=a&&a.details;if(u&&(u.clause||u.where))throw a;u&&u.missingFields?s.push(...u.missingFields):s.push(r)}}else s.push(r);if(s.length)throw new W.Z(k,i,{missingFields:s})}function fe(z){return z.split(" as ")[0]}function de(z,t){const i=t.get(z);return!!i&&!ve.has(i.type)}var se=h(82959),g=h(87757),x=h(7848),G=h(82054),_=h(63930);class Y{constructor(t,i,e){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=t.returnDistinctValues,this.fieldsIndex=e,this.featureAdapter=i;const s=t.outFields;if(s&&-1===s.indexOf("*")){this.outFields=s;let r=0;for(const n of s){const a=fe(n),u=this.fieldsIndex.get(a),l=u?null:oe(a,e),f=u?u.name:n.split(" as ")[1]||"FIELD_EXP_"+r++;this._fieldDataCache.set(n,{alias:f,clause:l})}}}countDistinctValues(t){return this.returnDistinctValues?(t.forEach(i=>this.getAttributes(i)),this._returnDistinctMap.size):t.length}getAttributes(t){const i=this._processAttributesForOutFields(t);return this._processAttributesForDistinctValues(i)}getFieldValue(t,i,e){const s=e?e.name:i;let r=null;return this._fieldDataCache.has(s)?r=this._fieldDataCache.get(s).clause:e||(r=oe(i,this.fieldsIndex),this._fieldDataCache.set(s,{alias:s,clause:r})),e?this.featureAdapter.getAttribute(t,s):r.calculateValue(t,this.featureAdapter)}getNormalizedValue(t,i){const e=i.normalizationType,s=i.normalizationTotal;let r=this.getFieldValue(t,i.field,i.fieldInfo);if(e&&Number.isFinite(r)){const n=this.getFieldValue(t,i.normalizationField,i.normalizationFieldInfo);r=(0,_.fk)(r,e,n,s)}return r}getExpressionValue(t,i,e){const s={attributes:this.featureAdapter.getAttributes(t)},r=e.createExecContext(s,i.viewInfo);return e.executeFunction(i.compiledFunc,r)}validateItem(t,i){return this._fieldDataCache.has(i)||this._fieldDataCache.set(i,{alias:i,clause:oe(i,this.fieldsIndex)}),this._fieldDataCache.get(i).clause.testFeature(t,this.featureAdapter)}validateItems(t,i){return this._fieldDataCache.has(i)||this._fieldDataCache.set(i,{alias:i,clause:oe(i,this.fieldsIndex)}),this._fieldDataCache.get(i).clause.testSet(t,this.featureAdapter)}_processAttributesForOutFields(t){const i=this.outFields;if(!i||!i.length)return this.featureAdapter.getAttributes(t);const e={};for(const s of i){const{alias:r,clause:n}=this._fieldDataCache.get(s);e[r]=n?n.calculateValue(t,this.featureAdapter):this.featureAdapter.getAttribute(t,r)}return e}_processAttributesForDistinctValues(t){if((0,L.Wi)(t)||!this.returnDistinctValues)return t;const i=this.outFields,e=[];if(i)for(const n of i){const{alias:a}=this._fieldDataCache.get(n);e.push(t[a])}else for(const n in t)e.push(t[n]);const s=`${(i||["*"]).join(",")}=${e.join(",")}`;let r=this._returnDistinctMap.get(s)||0;return this._returnDistinctMap.set(s,++r),r>1?null:t}}var J=h(76530),o=h(6185),y=h(36630),v=h(46679);class m{constructor(t,i,e){this.items=t,this.queryGeometry=i,this.definitionExpression=e.definitionExpression,this.geometryType=e.geometryType,this.hasM=e.hasM,this.hasZ=e.hasZ,this.objectIdField=e.objectIdField,this.spatialReference=e.spatialReference,this.fieldsIndex=e.fieldsIndex,this.timeInfo=e.timeInfo,this.featureAdapter=e.featureAdapter,this.aggregateAdapter=e.aggregateAdapter}get size(){return this.items.length}createQueryResponseForCount(t){const i=new Y(t,this.featureAdapter,this.fieldsIndex);if(!t.outStatistics)return i.countDistinctValues(this.items);const{groupByFieldsForStatistics:e,having:s}=t;if(!(null==e?void 0:e.length))return 1;const r=new Map,n=new Map,a=new Set,u=t.outStatistics;for(const l of u){const{statisticType:f}=l,p="exceedslimit"!==f?l.onStatisticField:void 0;if(!n.has(p)){const C=[];for(const T of e){const M=this._getAttributeValues(i,T,r);C.push(M)}n.set(p,this._calculateUniqueValues(C,i.returnDistinctValues))}const R=n.get(p);for(const C in R){const{data:T,items:M}=R[C],U=T.join(",");s&&!i.validateItems(M,s)||a.add(U)}}return a.size}createQueryResponse(t){let i;return i=t.outStatistics?t.outStatistics.some(e=>"exceedslimit"===e.statisticType)?this._createExceedsLimitQueryResponse(t):this._createStatisticsQueryResponse(t):this._createFeatureQueryResponse(t),t.returnQueryGeometry&&(i.queryGeometry=(0,V.JY)(t.outSR)&&!(0,V.fS)(this.queryGeometry.spatialReference,t.outSR)?(0,o.S2)(Qe({spatialReference:t.outSR},(0,se.iV)(this.queryGeometry,this.queryGeometry.spatialReference,t.outSR))):(0,o.S2)(Qe({spatialReference:t.outSR},this.queryGeometry))),i}createSnappingResponse(t,i){const e=this.featureAdapter,s=function X(z,t){return z?t?4:3:t?3:2}(this.hasZ,this.hasM),{x:r,y:n}=t.point,a="number"==typeof t.distance?t.distance:t.distance.x,u="number"==typeof t.distance?t.distance:t.distance.y,l={candidates:[]},f="esriGeometryPolygon"===this.geometryType,p=this.getPointCreator(t.point,this.spatialReference,i);for(const R of this.items){const C=e.getGeometry(R);if((0,L.Wi)(C))continue;const{coords:T,lengths:M}=C;if(1&t.types){let U=0;for(let I=0;I<M.length;I++){const w=M[I];for(let N=0;N<w;N++,U+=s){const $=T[U],B=T[U+1];if(N!==w-1){const Q=T[U+s],ue=T[U+s+1],{x:ge,y:pe}=E(r,n,$,B,Q,ue),xe=(r-ge)/a,Fe=(n-pe)/u,Se=xe*xe+Fe*Fe;Se<=1&&l.candidates.push({type:"edge",objectId:e.getObjectId(R),distance:Math.sqrt(Se),target:p(ge,pe),start:p($,B),end:p(Q,ue)})}}}}if(2&t.types){const U=f?T.length-s:T.length;for(let I=0;I<U;I+=s){const w=T[I],N=T[I+1],$=(r-w)/a,B=(n-N)/u,Q=$*$+B*B;Q<=1&&l.candidates.push({type:"vertex",objectId:e.getObjectId(R),distance:Math.sqrt(Q),target:p(w,N)})}}}return l.candidates.sort((R,C)=>R.distance-C.distance),l}getPointCreator(t,i,e){const s=(0,L.pC)(e)&&!(0,V.fS)(i,e)?r=>(0,se.iV)(r,i,e):r=>r;return null!=t.z&&null!=t.m?(r,n)=>s({x:r,y:n,z:t.z,m:t.m}):null!=t.z?(r,n)=>s({x:r,y:n,z:t.z}):null!=t.m?(r,n)=>s({x:r,y:n,m:t.m}):(r,n)=>s({x:r,y:n})}executeAttributesQuery(t){const i=oe(t.where,this.fieldsIndex);if(!i)return Promise.resolve(this);if(i.isStandardized){let e=0;const s=[];for(const n of this.items)i.testFeature(n,this.featureAdapter)&&(s[e++]=n);const r=new m(s,this.queryGeometry,this);return r.definitionExpression=t.where,Promise.resolve(r)}return Promise.reject(new TypeError("Where clause is not standardized"))}executeAggregateIdsQuery(t){if(!t.aggregateIds||!t.aggregateIds.length||(0,L.Wi)(this.aggregateAdapter))return Promise.resolve(this);const i=new Set;for(const s of t.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(s).forEach(r=>i.add(r));const e=this.featureAdapter.getObjectId;return Promise.resolve(new m(this.items.filter(s=>i.has(e(s))),this.queryGeometry,this))}executeObjectIdsQuery(t){if(!t.objectIds||!t.objectIds.length)return Promise.resolve(this);const i=new Set(t.objectIds),e=this.featureAdapter.getObjectId;return Promise.resolve(new m(this.items.filter(s=>i.has(e(s))),this.queryGeometry,this))}executeTimeQuery(t){const i=(0,J.y)(this.timeInfo,t.timeExtent,this.featureAdapter);if(!(0,L.pC)(i))return Promise.resolve(this);const e=this.items.filter(i);return Promise.resolve(new m(e,this.queryGeometry,this))}filterLatest(){const{trackIdField:t,startTimeField:i,endTimeField:e}=this.timeInfo,s=e||i,r=new Map,n=this.featureAdapter.getAttribute;for(const u of this.items){const l=n(u,t),f=n(u,s),p=r.get(l);(!p||f>n(p,s))&&r.set(l,u)}const a=Array.from(r.values());return Promise.resolve(new m(a,this.queryGeometry,this))}project(t){var i=this;return(0,S.Z)(function*(){if(!t||(0,V.fS)(i.spatialReference,t))return i;const e=i.featureAdapter,s=(yield(0,se.oj)(i.items.map(r=>(0,o.Op)(i.geometryType,i.hasZ,i.hasM,e.getGeometry(r))),i.spatialReference,t)).map((r,n)=>e.cloneWithGeometry(i.items[n],(0,G.GH)(r,i.hasZ,i.hasM)));return new m(s,i.queryGeometry,{definitionExpression:i.definitionExpression,geometryType:i.geometryType,hasM:i.hasM,hasZ:i.hasZ,objectIdField:i.objectIdField,spatialReference:t,fieldsIndex:i.fieldsIndex,timeInfo:i.timeInfo,featureAdapter:i.featureAdapter})})()}createSummaryStatisticsResponse(t,i){var e=this;return(0,S.Z)(function*(){const{field:s,valueExpression:r,normalizationField:n,normalizationType:a,normalizationTotal:u,minValue:l,maxValue:f,scale:p}=i,R=e.fieldsIndex.isDateField(s),C=yield e._getDataValues(t,{field:s,valueExpression:r,normalizationField:n,normalizationType:a,normalizationTotal:u,scale:p}),T=(0,_.S5)({normalizationType:a,normalizationField:n,minValue:l,maxValue:f}),M=e.fieldsIndex.get(s),U={value:.5,fieldType:null==M?void 0:M.type},I=(0,y.qN)(M)?(0,_.H0)({values:C,supportsNullCount:T,percentileParams:U}):(0,_.i5)({values:C,minValue:l,maxValue:f,useSampleStdDev:!a,supportsNullCount:T,percentileParams:U});return(0,_.F_)(I,R)})()}createUniqueValuesResponse(t,i){var e=this;return(0,S.Z)(function*(){const{field:s,valueExpression:r,domain:n,returnAllCodedValues:a,scale:u}=i,l=yield e._getDataValues(t,{field:s,valueExpression:r,scale:u}),f=(0,_.eT)(l);return(0,_.Qm)(f,n,a)})()}createClassBreaksResponse(t,i){var e=this;return(0,S.Z)(function*(){const{field:s,valueExpression:r,normalizationField:n,normalizationType:a,normalizationTotal:u,classificationMethod:l,standardDeviationInterval:f,minValue:p,maxValue:R,numClasses:C,scale:T}=i,M=yield e._getDataValues(t,{field:s,valueExpression:r,normalizationField:n,normalizationType:a,normalizationTotal:u,scale:T}),U=(0,_.G2)(M,{field:s,normalizationField:n,normalizationType:a,normalizationTotal:u,classificationMethod:l,standardDeviationInterval:f,minValue:p,maxValue:R,numClasses:C});return(0,_.DL)(U,l)})()}createHistogramResponse(t,i){var e=this;return(0,S.Z)(function*(){const{field:s,valueExpression:r,normalizationField:n,normalizationType:a,normalizationTotal:u,classificationMethod:l,standardDeviationInterval:f,minValue:p,maxValue:R,numBins:C,scale:T}=i,M=yield e._getDataValues(t,{field:s,valueExpression:r,normalizationField:n,normalizationType:a,normalizationTotal:u,scale:T});return(0,_.oF)(M,{field:s,normalizationField:n,normalizationType:a,normalizationTotal:u,classificationMethod:l,standardDeviationInterval:f,minValue:p,maxValue:R,numBins:C})})()}_sortFeatures(t,i,e){if(t.length>1&&i&&i.length)for(const s of i.reverse()){const r=s.split(" "),n=r[0],a=this.fieldsIndex.get(n),u=r[1]&&"desc"===r[1].toLowerCase(),l=(0,_.Lq)(null==a?void 0:a.type,u);t.sort((f,p)=>{const R=e(f,n,a),C=e(p,n,a);return l(R,C)})}}_createFeatureQueryResponse(t){const i=this.items,{geometryType:e,hasM:s,hasZ:r,objectIdField:n,spatialReference:a}=this,{outFields:u,outSR:l,quantizationParameters:f,resultRecordCount:p,resultOffset:R,returnZ:C,returnM:T}=t,M=null!=p&&i.length>(R||0)+p,U=u&&(u.includes("*")?[...this.fieldsIndex.fields]:u.map(I=>this.fieldsIndex.get(I)));return{exceededTransferLimit:M,features:this._createFeatures(t,i),fields:U,geometryType:e,hasM:s&&T,hasZ:r&&C,objectIdFieldName:n,spatialReference:(0,o.S2)(l||a),transform:f&&(0,x.vY)(f)||null}}_createFeatures(t,i){const e=new Y(t,this.featureAdapter,this.fieldsIndex),{hasM:s,hasZ:r}=this,{orderByFields:n,quantizationParameters:a,returnGeometry:u,returnCentroid:l,maxAllowableOffset:f,resultOffset:p,resultRecordCount:R,returnZ:C=!1,returnM:T=!1}=t,M=r&&C,U=s&&T;let I=[],w=0;const N=[...i];if(this._sortFeatures(N,n,(B,Q,ue)=>e.getFieldValue(B,Q,ue)),u||l){const B=(0,x.vY)(a);if(u&&!l)for(const Q of N)I[w++]={attributes:e.getAttributes(Q),geometry:(0,o.Op)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Q),f,B,M,U)};else if(!u&&l)for(const Q of N)I[w++]={attributes:e.getAttributes(Q),centroid:(0,o.EG)(this,this.featureAdapter.getCentroid(Q,this),B)};else for(const Q of N)I[w++]={attributes:e.getAttributes(Q),centroid:(0,o.EG)(this,this.featureAdapter.getCentroid(Q,this),B),geometry:(0,o.Op)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Q),f,B,M,U)}}else for(const B of N){const Q=e.getAttributes(B);Q&&(I[w++]={attributes:Q})}const $=p||0;return null!=R&&(I=I.slice($,Math.min(I.length,$+R))),I}_createExceedsLimitQueryResponse(t){let i=!1,e=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY;for(const n of t.outStatistics)if("exceedslimit"===n.statisticType){e=null!=n.maxPointCount?n.maxPointCount:Number.POSITIVE_INFINITY,s=null!=n.maxRecordCount?n.maxRecordCount:Number.POSITIVE_INFINITY,r=null!=n.maxVertexCount?n.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)i=this.items.length>e;else if(this.items.length>s)i=!0;else{const n=this.hasZ?this.hasM?4:3:this.hasM?3:2,a=this.featureAdapter;i=this.items.reduce((u,l)=>{const f=a.getGeometry(l);return u+((0,L.pC)(f)&&f.coords.length||0)},0)/n>r}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(i)}}]}}_createStatisticsQueryResponse(t){const i={attributes:{}},e=[],s=new Map,r=new Map,n=new Map,a=new Map,u=new Y(t,this.featureAdapter,this.fieldsIndex),l=t.outStatistics,{groupByFieldsForStatistics:f,having:p,orderByFields:R}=t,C=f&&f.length,T=!!C,M=T&&f[0],U=T&&!this.fieldsIndex.get(M);for(const w of l){const{outStatisticFieldName:N,statisticType:$}=w,B=w,Q="exceedslimit"!==$?w.onStatisticField:void 0,ue="percentile_disc"===$||"percentile_cont"===$,ge=T&&1===C&&(Q===M||U)&&"count"===$;if(T){if(!n.has(Q)){const xe=[];for(const Fe of f){const Se=this._getAttributeValues(u,Fe,s);xe.push(Se)}n.set(Q,this._calculateUniqueValues(xe,u.returnDistinctValues))}const pe=n.get(Q);for(const xe in pe){const{count:Fe,data:Se,items:Ne,itemPositions:Ue}=pe[xe],Me=Se.join(",");if(!p||u.validateItems(Ne,p)){const Pe=a.get(Me)||{attributes:{}};let ze=null;if(ge)ze=Fe;else{const Ce=this._getAttributeValues(u,Q,s),Ee=Ue.map(je=>Ce[je]);ze=ue&&"statisticParameters"in B?this._getPercentileValue(B,Ee):this._getStatisticValue(B,Ee,null,u.returnDistinctValues)}Pe.attributes[N]=ze,f.forEach((Ce,Ee)=>Pe.attributes[this.fieldsIndex.get(Ce)?Ce:`EXPR_${Ee+1}`]=Se[Ee]),a.set(Me,Pe)}}}else{const pe=this._getAttributeValues(u,Q,s);i.attributes[N]=ue&&"statisticParameters"in B?this._getPercentileValue(B,pe):this._getStatisticValue(B,pe,r,u.returnDistinctValues)}e.push({name:N,alias:N,type:"esriFieldTypeDouble"})}const I=T?Array.from(a.values()):[i];return this._sortFeatures(I,R,(w,N)=>w.attributes[N]),{fields:e,features:I}}_getStatisticValue(t,i,e,s){const{onStatisticField:r,statisticType:n}=t;let a=null;return a=null!=e&&e.has(r)?e.get(r):(0,y.qN)(this.fieldsIndex.get(r))?(0,_.H0)({values:i,returnDistinct:s}):(0,_.i5)({values:i,minValue:null,maxValue:null,useSampleStdDev:!0}),e&&e.set(r,a),a["var"===n?"variance":n]}_getPercentileValue(t,i){const{onStatisticField:e,statisticParameters:s,statisticType:r}=t,{value:n,orderBy:a}=s,u=this.fieldsIndex.get(e);return(0,_.XL)(i,{value:n,orderBy:a,fieldType:null==u?void 0:u.type,isDiscrete:"percentile_disc"===r})}_getAttributeValues(t,i,e){if(e.has(i))return e.get(i);const s=this.fieldsIndex.get(i),r=this.items.map(n=>t.getFieldValue(n,i,s));return e.set(i,r),r}_getAttributeNormalizedValues(t,i){return this.items.map(e=>t.getNormalizedValue(e,{field:i.field,fieldInfo:this.fieldsIndex.get(i.field),normalizationField:i.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(i.normalizationField),normalizationType:i.normalizationType,normalizationTotal:i.normalizationTotal}))}_getAttributeExpressionValues(t,i,e){var s=this;return(0,S.Z)(function*(){const{arcadeUtils:r}=yield(0,v.LC)(),n=r.createFunction(i),a=e&&r.getViewInfo(e);return s.items.map(u=>t.getExpressionValue(u,{compiledFunc:n,viewInfo:a},r))})()}_calculateUniqueValues(t,i){const e={},s=this.items,r=s.length;for(let n=0;n<r;n++){const a=s[n],u=[];for(const f of t)u.push(f[n]);const l=u.join(",");i?null==e[l]&&(e[l]={count:1,data:u,items:[a],itemPositions:[n]}):null==e[l]?e[l]={count:1,data:u,items:[a],itemPositions:[n]}:(e[l].count++,e[l].items.push(a),e[l].itemPositions.push(n))}return e}_getDataValues(t,i){var e=this;return(0,S.Z)(function*(){const s=new Y(t,e.featureAdapter,e.fieldsIndex),{valueExpression:r,field:n,normalizationField:a,normalizationType:u,normalizationTotal:l,scale:f}=i;return r?e._getAttributeExpressionValues(s,r,r?{viewingMode:"map",scale:f,spatialReference:t.outSR||e.spatialReference}:null):e._getAttributeNormalizedValues(s,{field:n,normalizationField:a,normalizationType:u,normalizationTotal:l})})()}}function E(z,t,i,e,s,r){const n=s-i,a=r-e,f=Math.min(1,Math.max(0,((z-i)*n+(t-e)*a)/(n*n+a*a)));return{x:i+n*f,y:e+a*f}}var b=h(53023),A=h(60466),re=h(74447);const ne="feature-store:unsupported-query",Ae=new Set,Oe=new he.WJ(2e6);let De=0;class Ge{constructor(t){this.capabilities={query:g.g},this.geometryType=t.geometryType,this.hasM=t.hasM,this.hasZ=t.hasZ,this.objectIdField=t.objectIdField,this.spatialReference=t.spatialReference,this.definitionExpression=t.definitionExpression,this.featureStore=t.featureStore,this.aggregateAdapter=t.aggregateAdapter,this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache()),this.timeInfo=t.timeInfo,t.cacheSpatialQueries&&(this._geometryQueryCache=new he.Xq(De+++"$$",Oe)),this.fieldsIndex=new A.Z(t.fields),t.scheduler&&t.priority&&(this._frameTask=t.scheduler.registerTask(t.priority))}destroy(){this._frameTask=(0,L.hw)(this._frameTask),this.clearCache(),(0,L.SC)(this._geometryQueryCache),this._changeHandle=(0,L.hw)(this._changeHandle),(0,L.SC)(this.fieldsIndex)}get featureAdapter(){return this.featureStore.featureAdapter}get fullExtent(){const t=this.featureStore.fullBounds;return t?{xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:(0,o.S2)(this.spatialReference)}:null}get timeExtent(){return this.timeInfo?(this._timeExtent||(this._timeExtent=(0,J.R)(this.timeInfo,this.featureStore)),this._timeExtent):null}clearCache(){this._geometryQueryCache&&this._geometryQueryCache.clear(),this._allItems=null,this._timeExtent=null}executeQuery(t={},i){var e=this;return(0,S.Z)(function*(){let s,r=(0,q.d9)(t);try{r=yield e._schedule(()=>(0,o.Up)(r,e.definitionExpression,e.spatialReference),i),r=yield e._reschedule(()=>e._checkQuerySupport(r),i),s=yield e._reschedule(()=>e._executeGeometryQuery(r,i),i),s=yield e._reschedule(()=>s.executeAggregateIdsQuery(r),i),s=yield e._reschedule(()=>s.executeObjectIdsQuery(r),i),s=yield e._reschedule(()=>s.executeTimeQuery(r),i),s=yield e._reschedule(()=>s.executeAttributesQuery(r),i)}catch(n){if(n!==o.vF)throw n;s=new m([],null,e)}return s.createQueryResponse(r)})()}executeQueryForCount(t={},i){var e=this;return(0,S.Z)(function*(){let s=(0,q.d9)(t);s.returnGeometry=!1,s.returnCentroid=!1,s.outSR=null;try{s=yield e._schedule(()=>(0,o.Up)(s,e.definitionExpression,e.spatialReference),i),s=yield e._reschedule(()=>e._checkQuerySupport(s),i);let r=yield e._reschedule(()=>e._executeGeometryQuery(s,i),i);return r=yield e._reschedule(()=>r.executeAggregateIdsQuery(s),i),r=yield e._reschedule(()=>r.executeObjectIdsQuery(s),i),r=yield e._reschedule(()=>r.executeTimeQuery(s),i),r=yield e._reschedule(()=>r.executeAttributesQuery(s),i),r.createQueryResponseForCount(s)}catch(r){if(r!==o.vF)throw r;return 0}})()}executeQueryForExtent(t={},i){var e=this;return(0,S.Z)(function*(){let s,r=(0,q.d9)(t);const n=r.outSR;try{r=yield e._schedule(()=>(0,o.Up)(r,e.definitionExpression,e.spatialReference),i),r=yield e._reschedule(()=>e._checkQuerySupport(r),i),r.returnGeometry=!0,r.returnCentroid=!1,r.outSR=null,s=yield e._reschedule(()=>e._executeGeometryQuery(r,i),i),s=yield e._reschedule(()=>s.executeAggregateIdsQuery(r),i),s=yield e._reschedule(()=>s.executeObjectIdsQuery(r),i),s=yield e._reschedule(()=>s.executeTimeQuery(r),i),s=yield e._reschedule(()=>s.executeAttributesQuery(r),i);const a=s.size;if(!a)return{count:a,extent:null};(0,j.t8)(ce,j.Gv),e.featureStore.forEachBounds(s.items,f=>(0,j.TC)(ce,f),we);const u={xmin:ce[0],ymin:ce[1],xmax:ce[3],ymax:ce[4],spatialReference:(0,o.S2)(e.spatialReference)};e.hasZ&&isFinite(ce[2])&&isFinite(ce[5])&&(u.zmin=ce[2],u.zmax=ce[5]);const l=(0,se.iV)(u,s.spatialReference,n);if(l.spatialReference=(0,o.S2)(n||e.spatialReference),l.xmax-l.xmin==0){const f=(0,O.c9)(l.spatialReference);l.xmin-=f,l.xmax+=f}if(l.ymax-l.ymin==0){const f=(0,O.c9)(l.spatialReference);l.ymin-=f,l.ymax+=f}if(e.hasZ&&null!=l.zmin&&null!=l.zmax&&l.zmax-l.zmin==0){const f=(0,O.c9)(l.spatialReference);l.zmin-=f,l.zmax+=f}return{count:a,extent:l}}catch(a){if(a===o.vF)return{count:0,extent:null};throw a}})()}executeQueryForIds(t={},i){var e=this;return(0,S.Z)(function*(){return e.executeQueryForIdSet(t,i).then(s=>Array.from(s))})()}executeQueryForIdSet(t={},i){var e=this;return(0,S.Z)(function*(){let s,r=(0,q.d9)(t);r.returnGeometry=!1,r.returnCentroid=!1,r.outSR=null;try{r=yield e._schedule(()=>(0,o.Up)(r,e.definitionExpression,e.spatialReference),i),r=yield e._reschedule(()=>e._checkQuerySupport(r),i),s=yield e._reschedule(()=>e._executeGeometryQuery(r,i),i),s=yield e._reschedule(()=>s.executeAggregateIdsQuery(r),i),s=yield e._reschedule(()=>s.executeObjectIdsQuery(r),i),s=yield e._reschedule(()=>s.executeTimeQuery(r),i),s=yield e._reschedule(()=>s.executeAttributesQuery(r),i);const n=s.items,a=new Set;return yield e._reschedule(()=>{for(const u of n)a.add(s.featureAdapter.getObjectId(u))},i),a}catch(n){if(n===o.vF)return new Set;throw n}})()}executeQueryForSnapping(t,i){var e=this;return(0,S.Z)(function*(){const{point:s,distance:r,types:n}=t;if(0===n)return{candidates:[]};const a=yield e._reschedule(()=>e._checkQuerySupport(t.query),i),u=!(0,V.fS)(s.spatialReference,e.spatialReference);u&&(yield(0,se._W)(s.spatialReference,e.spatialReference));const l="number"==typeof r?r:r.x,f="number"==typeof r?r:r.y,p={xmin:s.x-l,xmax:s.x+l,ymin:s.y-f,ymax:s.y+f,spatialReference:s.spatialReference},R=u?(0,se.iV)(p,e.spatialReference):p;if(!R)return{candidates:[]};const C=(yield(0,Z.aX)((0,P.im)(s),null,{signal:i}))[0],T=(yield(0,Z.aX)((0,P.im)(R),null,{signal:i}))[0];if((0,L.Wi)(C)||(0,L.Wi)(T))return{candidates:[]};let M=new m(e._searchFeatures(e._getQueryBBoxes(T.toJSON())),null,e);M=yield e._reschedule(()=>M.executeObjectIdsQuery(a),i),M=yield e._reschedule(()=>M.executeTimeQuery(a),i),M=yield e._reschedule(()=>M.executeAttributesQuery(a),i);const U=C.toJSON(),I=u?(0,se.iV)(U,e.spatialReference):U,w=u?Math.max(R.xmax-R.xmin,R.ymax-R.ymin)/2:r;return M.createSnappingResponse(be(Qe({},t),{point:I,distance:w}),s.spatialReference)})()}executeQueryForLatestObservations(t={},i){var e=this;return(0,S.Z)(function*(){if(!e.timeInfo||!e.timeInfo.trackIdField)throw new W.Z(ne,"Missing timeInfo or timeInfo.trackIdField",{query:t,timeInfo:e.timeInfo});let s,r=(0,q.d9)(t);try{r=yield e._schedule(()=>(0,o.Up)(r,e.definitionExpression,e.spatialReference),i),r=yield e._reschedule(()=>e._checkQuerySupport(r),i),s=yield e._reschedule(()=>e._executeGeometryQuery(r,i),i),s=yield e._reschedule(()=>s.executeAggregateIdsQuery(r),i),s=yield e._reschedule(()=>s.executeObjectIdsQuery(r),i),s=yield e._reschedule(()=>s.executeTimeQuery(r),i),s=yield e._reschedule(()=>s.executeAttributesQuery(r),i),s=yield e._reschedule(()=>s.filterLatest(),i)}catch(n){if(n!==o.vF)throw n;s=new m([],null,e)}return s.createQueryResponse(r)})()}executeQueryForSummaryStatistics(t={},i,e){var s=this;return(0,S.Z)(function*(){const{field:r,normalizationField:n,valueExpression:a}=i;return(yield s._getQueryEngineResultForStats(t,{field:r,normalizationField:n,valueExpression:a},e)).createSummaryStatisticsResponse(t,i)})()}executeQueryForUniqueValues(t={},i,e){var s=this;return(0,S.Z)(function*(){const{field:r,valueExpression:n}=i;return(yield s._getQueryEngineResultForStats(t,{field:r,valueExpression:n},e)).createUniqueValuesResponse(t,i)})()}executeQueryForClassBreaks(t={},i,e){var s=this;return(0,S.Z)(function*(){const{field:r,normalizationField:n,valueExpression:a}=i;return(yield s._getQueryEngineResultForStats(t,{field:r,normalizationField:n,valueExpression:a},e)).createClassBreaksResponse(t,i)})()}executeQueryForHistogram(t={},i,e){var s=this;return(0,S.Z)(function*(){const{field:r,normalizationField:n,valueExpression:a}=i;return(yield s._getQueryEngineResultForStats(t,{field:r,normalizationField:n,valueExpression:a},e)).createHistogramResponse(t,i)})()}_schedule(t,i){var e=this;return(0,S.Z)(function*(){return(0,L.pC)(e._frameTask)?e._frameTask.schedule(t,i):t(re.G5)})()}_reschedule(t,i){var e=this;return(0,S.Z)(function*(){return(0,L.pC)(e._frameTask)?e._frameTask.reschedule(t,i):t(re.G5)})()}_getAll(){if(!this._allItems){const t=[];this.featureStore.forEach(i=>t.push(i)),this._allItems=new m(t,null,this)}return this._allItems}_executeGeometryQuery(t,i){var e=this;return(0,S.Z)(function*(){const{geometry:s,outSR:r,spatialRel:n,returnGeometry:a,returnCentroid:u}=t,l=a||u,f=(0,V.JY)(r)&&!(0,V.fS)(e.spatialReference,r),p=e._geometryQueryCache?f&&l?JSON.stringify({geometry:s,spatialRelationship:n,outSpatialReference:r}):JSON.stringify({geometry:s,spatialRelationship:n}):null;if(p){const I=e._geometryQueryCache.get(p);if(!(0,L.o8)(I))return I}const R=function(){var I=(0,S.Z)(function*(w){if(f&&l){const N=yield w.project(r);return p&&e._geometryQueryCache.put(p,N,N.size||1),N}return p&&e._geometryQueryCache.put(p,w,w.size||1),w});return function(N){return I.apply(this,arguments)}}();if(!s)return R(e._getAll());const C=e.featureAdapter;if("esriSpatialRelDisjoint"===n){const I=e._searchFeatures(e._getQueryBBoxes(s));if(!I.length)return R(e._getAll());let w,N;const $=new Set;for(const Q of I)$.add(C.getObjectId(Q));return yield e._reschedule(()=>{let Q=0;w=new Array($.size),e.featureStore.forEach(ue=>w[Q++]=ue),N=$},i),R(yield e._reschedule((0,S.Z)(function*(){const Q=yield(0,b.cW)(n,s,e.geometryType,e.hasZ,e.hasM);return new m(yield e._runSpatialFilter(w,ge=>!N.has(C.getObjectId(ge))||Q(C.getGeometry(ge)),i),s,e)}),i))}const T=e._searchFeatures(e._getQueryBBoxes(s));if(!T.length){const I=new m([],s,e);return p&&e._geometryQueryCache.put(p,I,I.size||1),I}if(e._canExecuteSoloPass(s,t))return R(new m(T,s,e));const M=yield(0,b.cW)(n,s,e.geometryType,e.hasZ,e.hasM),U=yield e._runSpatialFilter(T,I=>M(C.getGeometry(I)),i);return R(new m(U,s,e))})()}_runSpatialFilter(t,i,e){var s=this;return(0,S.Z)(function*(){if(!i)return t;if((0,L.Wi)(s._frameTask))return t.filter(u=>i(u));let r=0;const n=new Array,a=function(){var u=(0,S.Z)(function*(l){for(;r<t.length;){const f=t[r++];i(f)&&(n.push(f),l.madeProgress()),l.done&&(yield s._reschedule(p=>a(p),e))}});return function(f){return u.apply(this,arguments)}}();return s._reschedule(u=>a(u),e).then(()=>n)})()}_canExecuteSoloPass(t,i){const{geometryType:e}=this,{spatialRel:s}=i;return(0,b.hN)(t)&&("esriSpatialRelEnvelopeIntersects"===s||"esriGeometryPoint"===e&&("esriSpatialRelIntersects"===s||"esriSpatialRelContains"===s||"esriSpatialRelWithin"===s))}_getQueryBBoxes(t){if((0,b.hN)(t)){if((0,P.YX)(t))return[(0,D.al)(t.xmin,t.ymin,t.xmax,t.ymax)];if((0,P.oU)(t))return t.rings.map(i=>(0,D.al)(Math.min(i[0][0],i[2][0]),Math.min(i[0][1],i[2][1]),Math.max(i[0][0],i[2][0]),Math.max(i[0][1],i[2][1])))}return[(0,F.$P)((0,D.Ue)(),t)]}_searchFeatures(t){for(const s of t)this.featureStore.forEachInBounds(s,r=>{Ae.add(r)});const i=new Array(Ae.size);let e=0;return Ae.forEach(s=>i[e++]=s),Ae.clear(),i}_checkStatisticsSupport(t,i){var e=this;return(0,S.Z)(function*(){if(t.distance<0||null!=t.geometryPrecision||t.multipatchOption||t.pixelSize||t.relationParam||t.text||t.outStatistics||t.groupByFieldsForStatistics||t.having||t.orderByFields)throw new W.Z(ne,"Unsupported query options",{query:t});return Promise.all([e._checkAttributesQuerySupport(t),e._checkStatisticsParamsSupport(i),(0,b.P0)(t,e.geometryType,e.spatialReference),(0,se._W)(e.spatialReference,t.outSR)]).then(()=>t)})()}_checkStatisticsParamsSupport(t){var i=this;return(0,S.Z)(function*(){let e=[];if(t.valueExpression){const{arcadeUtils:s}=yield(0,v.LC)();e=s.extractFieldNames(t.valueExpression)}if(t.field&&e.push(t.field),t.normalizationField&&e.push(t.normalizationField),!e.length)throw new W.Z(ne,"params should have at least a field or valueExpression",{params:t});le(i.fieldsIndex,e,"params contains missing fields")})()}_checkQuerySupport(t){var i=this;return(0,S.Z)(function*(){if(t.distance<0||null!=t.geometryPrecision||t.multipatchOption||t.pixelSize||t.relationParam||t.text)throw new W.Z(ne,"Unsupported query options",{query:t});return Promise.all([i._checkAttributesQuerySupport(t),i._checkStatisticsQuerySupport(t),(0,b.P0)(t,i.geometryType,i.spatialReference),(0,se._W)(i.spatialReference,t.outSR)]).then(()=>t)})()}_checkAttributesQuerySupport(t){const{outFields:i,orderByFields:e,returnDistinctValues:s,outStatistics:r}=t,n=r?r.map(a=>a.outStatisticFieldName&&a.outStatisticFieldName.toLowerCase()):[];if(e&&e.length>0){const a=" asc",u=" desc",l=e.map(f=>{const p=f.toLowerCase();return p.indexOf(a)>-1?p.split(a)[0]:p.indexOf(u)>-1?p.split(u)[0]:f}).filter(f=>-1===n.indexOf(f));le(this.fieldsIndex,l,"orderByFields contains missing fields")}if(i&&i.length>0)le(this.fieldsIndex,i,"outFields contains missing fields");else if(s)throw new W.Z(ne,"outFields should be specified for returnDistinctValues",{query:t});!function _e(z,t){if(!t)return!0;const i=ae.get(t,z);if(!i)throw new W.Z(k,"invalid SQL expression",{where:t});if(!i.isStandardized)throw new W.Z(k,"where clause is not standard",{where:t});le(z,i.fieldNames,"where clause contains missing fields")}(this.fieldsIndex,t.where)}_checkStatisticsQuerySupport(t){var i=this;return(0,S.Z)(function*(){const{outStatistics:e,groupByFieldsForStatistics:s,having:r}=t,n=s&&s.length,a=e&&e.length;if(r){if(!n||!a)throw new W.Z(ne,"outStatistics and groupByFieldsForStatistics should be specified with having",{query:t});!function Te(z,t,i){if(!t)return!0;const e=ae.get(t,z);if(!e)throw new W.Z(k,"invalid SQL expression",{having:t});if(!e.isAggregate)throw new W.Z(k,"having does not contain a valid aggregate function",{having:t});if(le(z,e.fieldNames,"having contains missing fields"),!e.getExpressions().every(r=>{const{aggregateType:n,field:a}=r,u=z.has(a)&&z.get(a).name;return i.some(l=>{const{onStatisticField:f,statisticType:p}=l;return(z.has(f)&&z.get(f).name)===u&&p.toLowerCase().trim()===n})}))throw new W.Z(k,"expressions in having should also exist in outStatistics",{having:t})}(i.fieldsIndex,r,e)}if(a){if(!function Ie(z){return z.every(t=>"exceedslimit"!==t.statisticType)}(e))return;const u=e.map(l=>l.onStatisticField);le(i.fieldsIndex,u,"onStatisticFields contains missing fields"),n&&le(i.fieldsIndex,s,"groupByFieldsForStatistics contains missing fields");for(const l of e){const{onStatisticField:f,statisticType:p}=l;if("percentile_disc"!==p&&"percentile_cont"!==p||!("statisticParameters"in l)){if("count"!==p&&f&&de(f,i.fieldsIndex))throw new W.Z(ne,"outStatistics contains non-numeric fields",{definition:l,query:t})}else{const{statisticParameters:R}=l;if(!R)throw new W.Z(ne,"statisticParamters should be set for percentile type",{definition:l,query:t})}}}})()}_getQueryEngineResultForStats(t={},i,e){var s=this;return(0,S.Z)(function*(){let r;t=(0,q.d9)(t);try{t=yield s._schedule(()=>(0,o.Up)(t,s.definitionExpression,s.spatialReference),e),t=yield s._reschedule(()=>s._checkStatisticsSupport(t,i),e),r=yield s._reschedule(()=>s._executeGeometryQuery(t,e),e),r=yield s._reschedule(()=>r.executeAggregateIdsQuery(t),e),r=yield s._reschedule(()=>r.executeObjectIdsQuery(t),e),r=yield s._reschedule(()=>r.executeTimeQuery(t),e),r=yield s._reschedule(()=>r.executeAttributesQuery(t),e)}catch(n){if(n!==o.vF)throw n;r=new m([],null,s)}return r})()}}const we=(0,j.Ue)(),ce=(0,j.Ue)()},87757:(ee,H,h)=>{h.d(H,{g:()=>S});const S={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}},53023:(ee,H,h)=>{h.d(H,{hN:()=>se,P0:()=>ye,cW:()=>fe});var S=h(15861),W=h(26584),q=h(33190),L=h(11519),O=h(91179),j=h(37053);function D(g,x){return g?x?4:3:x?3:2}function Z(g,x,G,_,Y){if(!g)return!1;const J=D(x,G),{coords:o,lengths:y}=g;let v=!1,m=0;for(const E of y)v=V(v,o,J,m,E,_,Y),m+=E*J;return v}function V(g,x,G,_,Y,J,o){let y=g,v=_;for(let m=_,E=_+Y*G;m<E;m+=G){v=m+G,v===E&&(v=_);const X=x[m],b=x[m+1],A=x[v],re=x[v+1];(b<o&&re>=o||re<o&&b>=o)&&X+(o-b)/(re-b)*(A-X)<J&&(y=!y)}return y}var K=h(82054),ie=h(88071),te=h(82959),ae=h(6185);const k="feature-store:unsupported-query",me={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},ve_spatialRelationship={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},ve_queryGeometry={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},ve_layerGeometry={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};function _e(g){return!0===ve_spatialRelationship[g]}function Te(g){return!0===ve_queryGeometry[(0,O.Ji)(g)]}function oe(g){return!0===ve_layerGeometry[g]}function fe(g,x,G,_,Y){if((0,O.oU)(x)&&"esriGeometryPoint"===G&&("esriSpatialRelIntersects"===g||"esriSpatialRelContains"===g)){const J=(0,K.Uy)(new ie.Z,x,!1,!1);return Promise.resolve(o=>function F(g,x,G,_){return Z(g,x,G,_.coords[0],_.coords[1])}(J,!1,!1,o))}if((0,O.oU)(x)&&"esriGeometryMultipoint"===G){const J=(0,K.Uy)(new ie.Z,x,!1,!1);if("esriSpatialRelContains"===g)return Promise.resolve(o=>function P(g,x,G,_,Y,J){const o=D(Y,J),{coords:y,lengths:v}=_;if(!v)return!1;for(let m=0,E=0;m<v.length;m++,E+=o)if(!Z(g,x,G,y[E],y[E+1]))return!1;return!0}(J,!1,!1,o,_,Y))}if((0,O.YX)(x)&&"esriGeometryPoint"===G&&("esriSpatialRelIntersects"===g||"esriSpatialRelContains"===g))return Promise.resolve(J=>(0,q.aV)(x,(0,ae.Op)(G,_,Y,J)));if((0,O.YX)(x)&&"esriGeometryMultipoint"===G&&"esriSpatialRelContains"===g)return Promise.resolve(J=>(0,q.lQ)(x,(0,ae.Op)(G,_,Y,J)));if((0,O.YX)(x)&&"esriSpatialRelIntersects"===g){const J=function he(g){return"mesh"===g?L.h_:(0,L.IY)(g)}(G);return Promise.resolve(o=>J(x,(0,ae.Op)(G,_,Y,o)))}return function le(){return Promise.all([h.e(4918),h.e(8592),h.e(2825)]).then(h.bind(h,32825))}().then(J=>{const o=J[me[g]].bind(null,x.spatialReference,x);return y=>o((0,ae.Op)(G,_,Y,y))})}function ye(g,x,G){return de.apply(this,arguments)}function de(){return(de=(0,S.Z)(function*(g,x,G){const{spatialRel:_,geometry:Y}=g;if(Y){if(!_e(_))throw new W.Z(k,"Unsupported query spatial relationship",{query:g});if((0,j.JY)(Y.spatialReference)&&(0,j.JY)(G)){if(!Te(Y))throw new W.Z(k,"Unsupported query geometry type",{query:g});if(!oe(x))throw new W.Z(k,"Unsupported layer geometry type",{query:g});if(g.outSR)return(0,te._W)(g.geometry&&g.geometry.spatialReference,g.outSR)}}})).apply(this,arguments)}function se(g){if((0,O.YX)(g))return!0;if((0,O.oU)(g)){for(const x of g.rings)if(5!==x.length||x[0][0]!==x[1][0]||x[0][0]!==x[4][0]||x[2][0]!==x[3][0]||x[0][1]!==x[3][1]||x[0][1]!==x[4][1]||x[1][1]!==x[2][1])return!1;return!0}return!1}},76530:(ee,H,h)=>{function S(O,j){if(!O)return null;const D=j.featureAdapter,{startTimeField:F,endTimeField:P}=O;let Z=Number.POSITIVE_INFINITY,V=Number.NEGATIVE_INFINITY;if(F&&P)j.forEach(K=>{const ie=D.getAttribute(K,F),te=D.getAttribute(K,P);null==ie||isNaN(ie)||(Z=Math.min(Z,ie)),null==te||isNaN(te)||(V=Math.max(V,te))});else{const K=F||P;j.forEach(ie=>{const te=D.getAttribute(ie,K);null==te||isNaN(te)||(Z=Math.min(Z,te),V=Math.max(V,te))})}return{start:Z,end:V}}function W(O,j,D){if(!j||!O)return null;const{startTimeField:F,endTimeField:P}=O;if(!F&&!P)return null;const{start:Z,end:V}=j;return null===Z&&null===V?null:void 0===Z&&void 0===V?()=>!1:F&&P?function q(O,j,D,F,P){return null!=F&&null!=P?Z=>{const V=O.getAttribute(Z,j),K=O.getAttribute(Z,D);return(null==V||V<=P)&&(null==K||K>=F)}:null!=F?Z=>{const V=O.getAttribute(Z,D);return null==V||V>=F}:null!=P?Z=>{const V=O.getAttribute(Z,j);return null==V||V<=P}:void 0}(D,F,P,Z,V):function L(O,j,D,F){return null!=D&&null!=F&&D===F?P=>O.getAttribute(P,j)===D:null!=D&&null!=F?P=>{const Z=O.getAttribute(P,j);return Z>=D&&Z<=F}:null!=D?P=>O.getAttribute(P,j)>=D:null!=F?P=>O.getAttribute(P,j)<=F:void 0}(D,F||P,Z,V)}h.d(H,{R:()=>S,y:()=>W})},6185:(ee,H,h)=>{h.d(H,{vF:()=>K,S2:()=>_,Op:()=>_e,Up:()=>Te,j6:()=>ye,EG:()=>me});var S=h(15861),W=h(2076),q=h(62208),L=h(16730),he=h(15176),O=h(91179),j=h(62825),D=h(37053),F=h(82054),P=h(88071),Z=h(82959);const V=new W.Xn({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),K=Object.freeze({}),ie=new P.Z,te=new P.Z,ae=new P.Z,k={esriGeometryPoint:F.fQ,esriGeometryPolyline:F.J6,esriGeometryPolygon:F.eG,esriGeometryMultipoint:F.Iv};function me(o,y,v,m=o.hasZ,E=o.hasM){if((0,q.Wi)(y))return null;const X=o.hasZ&&m,b=o.hasM&&E;if(v){const A=(0,F.Nh)(ae,y,o.hasZ,o.hasM,"esriGeometryPoint",v,m,E);return(0,F.fQ)(A,X,b)}return(0,F.fQ)(y,X,b)}function _e(o,y,v,m,E,X,b=y,A=v){const re=y&&b,Ie=v&&A,ne=(0,q.pC)(m)?"coords"in m?m:m.geometry:null;if((0,q.Wi)(ne))return null;if(E){let Re=(0,F.zj)(te,ne,y,v,o,E,b,A);return X&&(Re=(0,F.Nh)(ae,Re,re,Ie,o,X)),k[o](Re,re,Ie)}if(X){const Re=(0,F.Nh)(ae,ne,y,v,o,X,b,A);return k[o](Re,re,Ie)}return(0,F.hY)(ie,ne,y,v,b,A),k[o](ie,re,Ie)}function Te(o,y,v){return oe.apply(this,arguments)}function oe(){return(oe=(0,S.Z)(function*(o,y,v){const{outFields:m,orderByFields:E,groupByFieldsForStatistics:X,outStatistics:b}=o;if(m)for(let A=0;A<m.length;A++)m[A]=m[A].trim();if(E)for(let A=0;A<E.length;A++)E[A]=E[A].trim();if(X)for(let A=0;A<X.length;A++)X[A]=X[A].trim();if(b)for(let A=0;A<b.length;A++)b[A].onStatisticField&&(b[A].onStatisticField=b[A].onStatisticField.trim());return o.geometry&&!o.outSR&&(o.outSR=o.geometry.spatialReference),ye(o,y,v)})).apply(this,arguments)}function ye(o,y,v){return de.apply(this,arguments)}function de(){return(de=(0,S.Z)(function*(o,y,v){if(!o)return null;let{where:m}=o;if(o.where=m=m&&m.trim(),(!m||/^1 *= *1$/.test(m)||y&&y===m)&&(o.where=null),!o.geometry)return o;let E=yield se(o);if(o.distance=0,o.units=null,"esriSpatialRelEnvelopeIntersects"===o.spatialRel){const{spatialReference:re}=o.geometry;E=(0,he.aO)(E),E.spatialReference=re}o.geometry=E,yield(0,Z._W)(E.spatialReference,v);const X=(yield(0,j.aX)((0,O.im)(E)))[0];if((0,q.Wi)(X))throw K;const b=X.toJSON(),A=yield(0,Z.iV)(b,b.spatialReference,v);if(!A)throw K;return A.spatialReference=v,o.geometry=A,o})).apply(this,arguments)}function se(o){return g.apply(this,arguments)}function g(){return(g=(0,S.Z)(function*(o){const{geometry:y,distance:v,units:m}=o;if(null==v||"vertexAttributes"in y)return y;const E=y.spatialReference,X=m?V.fromJSON(m):(0,L.qE)(E),b=E&&((0,D.sT)(E)||(0,D.sS)(E))?y:yield(0,Z._W)(E,D.Zn).then(()=>(0,Z.iV)(y,D.Zn));return(yield x())(b.spatialReference,b,v,X)})).apply(this,arguments)}function x(){return G.apply(this,arguments)}function G(){return(G=(0,S.Z)(function*(){return(yield Promise.all([h.e(4918),h.e(8592),h.e(2825)]).then(h.bind(h,32825))).geodesicBuffer})).apply(this,arguments)}function _(o){return o&&Y in o?JSON.parse(JSON.stringify(o,J)):o}const Y="_geVersion",J=(o,y)=>o!==Y?y:void 0}}]);