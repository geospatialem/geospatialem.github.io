"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[2445],{22445:(T,p,t)=>{t.r(p),t.d(p,{createLabelFunction:()=>L,formatField:()=>g});var v=t(15861),D=t(26584),O=t(63290),E=t(88411),M=t(15348),P=t(36630),m=t(86793),h=t(46679);const U=O.Z.getLogger("esri.layers.support.labelFormatUtils"),y={type:"simple",evaluate:()=>null},C={getAttribute:(n,r)=>n.field(r)};function L(n,r,e){return c.apply(this,arguments)}function c(){return(c=(0,v.Z)(function*(n,r,e){if(!n||!n.symbol)return y;const u=n.where,s=(0,m.hV)(n),_=u?yield t.e(410).then(t.bind(t,10410)):null;let o;if("arcade"===s.type){const a=yield(0,h.WW)(s.expression,e,r);o={type:"arcade",evaluate(i){try{const l=a.evaluate({$feature:"attributes"in i?a.repurposeFeature(i):a.repurposeAdapter(i)});if(null!=l)return l.toString()}catch(l){U.error(new D.Z("bad-arcade-expression","Encountered an error when evaluating label expression for feature",{feature:i,expression:s}))}return null},needsHydrationToEvaluate:()=>null==(0,m.el)(s.expression)}}else o={type:"simple",evaluate:a=>s.expression.replace(/{[^}]*}/g,i=>{const l=i.slice(1,-1),d=r.get(l);if(!d)return i;let f=null;return"attributes"in a?a&&a.attributes&&(f=a.attributes[d.name]):f=a.field(d.name),null==f?"":g(f,d)})};if(u){let a;try{a=_.WhereClause.create(u,r)}catch(l){return y}const i=o.evaluate;o.evaluate=l=>a.testFeature(l,"attributes"in l?void 0:C)?i(l):null}return o})).apply(this,arguments)}function g(n,r){if(null==n)return"";const e=r.domain;if(e)if("codedValue"===e.type||"coded-value"===e.type){const s=n;for(const _ of e.codedValues)if(_.code===s)return _.name}else if("range"===e.type){const s=+n,o="range"in e?e.range[1]:e.maxValue;if(("range"in e?e.range[0]:e.minValue)<=s&&s<=o)return e.name}let u=n;return"date"===r.type||"esriFieldTypeDate"===r.type?u=(0,E.p6)(u,(0,E.Ze)("short-date")):(0,P.H7)(r)&&(u=(0,M.uf)(+u)),u||""}}}]);