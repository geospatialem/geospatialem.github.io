"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[6899],{37384:(S,O,t)=>{t.d(O,{y:()=>G});var e=t(17626),P=t(7093),m=t(89726),E=t(27e3),i=t(77712),h=(t(85931),t(8314),t(90912),t(76898)),b=t(1011),L=t(86162);t(63290),t(82255);let o=class extends L.wq{};o=(0,e._)([(0,h.j)("esri.views.layers.support.ClipArea")],o);const g=o;var a;let p=a=class extends g{constructor(){super(...arguments),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new a({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get("version")||0)+1}};(0,e._)([(0,i.Cb)({type:[Number,String],json:{write:!0}})],p.prototype,"left",void 0),(0,e._)([(0,i.Cb)({type:[Number,String],json:{write:!0}})],p.prototype,"right",void 0),(0,e._)([(0,i.Cb)({type:[Number,String],json:{write:!0}})],p.prototype,"top",void 0),(0,e._)([(0,i.Cb)({type:[Number,String],json:{write:!0}})],p.prototype,"bottom",void 0),(0,e._)([(0,i.Cb)({readOnly:!0})],p.prototype,"version",null),p=a=(0,e._)([(0,h.j)("esri.views.layers.support.ClipRect")],p);const f=p;t(29132);var r,D=t(21674),V=t(91179),s=t(2004),n=t(37118);const c={base:D.Z,key:"type",typeMap:{extent:s.Z,polygon:n.Z}};let u=r=class extends g{constructor(){super(...arguments),this.type="geometry",this.geometry=null}get version(){return(this._get("version")||0)+1}clone(){return new r({geometry:this.geometry.clone()})}};(0,e._)([(0,i.Cb)({types:c,json:{read:V.im,write:!0}})],u.prototype,"geometry",void 0),(0,e._)([(0,i.Cb)({readOnly:!0})],u.prototype,"version",null),u=r=(0,e._)([(0,h.j)("esri.views.layers.support.Geometry")],u);const d=u;let y=class extends g{constructor(){super(...arguments),this.type="path",this.path=[]}get version(){return(this._get("version")||0)+1}};(0,e._)([(0,i.Cb)({type:[[[Number]]],json:{write:!0}})],y.prototype,"path",void 0),(0,e._)([(0,i.Cb)({readOnly:!0})],y.prototype,"version",null),y=(0,e._)([(0,h.j)("esri.views.layers.support.Path")],y);const M=P.Z.ofType({key:"type",base:g,typeMap:{rect:f,path:y,geometry:d}}),G=x=>{let _=class extends x{constructor(){super(...arguments),this.clips=new M,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var v;this.container||(this.container=new b.W),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([(0,E.S1)(this,"suspended",l=>{this.container&&(this.container.visible=!l),this.view&&!l&&this.updateRequested&&this.view.requestUpdate()},!0),(0,E.S1)(this,["layer.opacity","container"],()=>{var l,U;this.container&&(this.container.opacity=null!=(l=null==(U=this.layer)?void 0:U.opacity)?l:1)},!0),(0,E.S1)(this,["layer.blendMode"],l=>{this.container&&(this.container.blendMode=l)},!0),(0,E.S1)(this,["layer.effect"],l=>{this.container&&(this.container.effect=l)},!0),this.clips.on("change",()=>{this.container.clips=this.clips,this.notifyChange("clips")})]),null!=(v=this.view)&&v.whenLayerView?this.view.whenLayerView(this.layer).then(l=>{l!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{}):this.when().then(()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{})}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!(!this.updatingHandles||!this.updatingHandles.updating)}isVisibleAtScale(v){let l=!0;const U=this.layer,I=U.minScale,W=U.maxScale;if(null!=I&&null!=W){let B=!I,K=!W;!B&&v<=I&&(B=!0),!K&&v>=W&&(K=!0),l=B&&K}return l}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(v){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",v),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(v))):this.updateRequested=!1}hitTest(v,l){return Promise.resolve(null)}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return(0,e._)([(0,i.Cb)({type:M,set(v){const l=(0,m.Z)(v,this._get("clips"),M);this._set("clips",l)}})],_.prototype,"clips",void 0),(0,e._)([(0,i.Cb)()],_.prototype,"moving",void 0),(0,e._)([(0,i.Cb)()],_.prototype,"attached",void 0),(0,e._)([(0,i.Cb)()],_.prototype,"container",void 0),(0,e._)([(0,i.Cb)()],_.prototype,"suspended",void 0),(0,e._)([(0,i.Cb)({readOnly:!0})],_.prototype,"updateParameters",void 0),(0,e._)([(0,i.Cb)()],_.prototype,"updateRequested",void 0),(0,e._)([(0,i.Cb)()],_.prototype,"updating",null),(0,e._)([(0,i.Cb)()],_.prototype,"view",void 0),_=(0,e._)([(0,h.j)("esri.views.2d.layers.LayerView2D")],_),_}},36899:(S,O,t)=>{t.r(O),t.d(O,{default:()=>V});var e=t(15861),P=t(17626),m=t(88879),E=t(7093),i=t(62208),C=t(27e3),A=(t(63290),t(90912),t(85931),t(8314),t(82255),t(76898)),T=t(37384),o=t(36275),g=t(97291),a=t(45611);const p="sublayers",f="layerView",Z=Object.freeze({remove(){},pause(){},resume(){}});let D=class extends((0,T.y)(a.Z)){fetchPopupFeatures(s){var n=this;return(0,e.Z)(function*(){return Array.from(n.graphicsViews(),r=>r.hitTest(s).filter(c=>!!c.popupTemplate)).flat()})()}*graphicsViews(){(0,i.pC)(this._graphicsViewsFeatureCollectionMap)?yield*this._graphicsViewsFeatureCollectionMap.keys():(0,i.pC)(this._graphicsViews)?yield*this._graphicsViews:yield*[]}hitTest(s,n){var r=this;return(0,e.Z)(function*(){const c=Array.from(r.graphicsViews(),function(){var u=(0,e.Z)(function*(d){const y=yield d.hitTest(s);if((0,i.pC)(r._graphicsViewsFeatureCollectionMap)){const R=r._graphicsViewsFeatureCollectionMap.get(d);for(const M of y)!M.popupTemplate&&R.popupTemplate&&(M.popupTemplate=R.popupTemplate)}return y});return function(d){return u.apply(this,arguments)}}());return(yield Promise.all(c)).flat()})()}highlight(s){let n;if("number"==typeof s?n=[s]:s instanceof m.Z?n=[s.uid]:Array.isArray(s)&&s.length>0?n="number"==typeof s[0]?s:s.map(r=>r&&r.uid):E.Z.isCollection(s)&&(n=s.map(r=>r&&r.uid).toArray()),n=n.filter(r=>null!=r),!n.length)return Z;for(const r of this.graphicsViews())r.addHighlight(n);return{remove:()=>{for(const r of this.graphicsViews())r.removeHighlight(n)}}}update(s){for(const n of this.graphicsViews())n.processUpdate(s)}attach(){const s=this.view,n=()=>this.requestUpdate(),r=this.layer.featureCollections;if((0,i.pC)(r)&&r.length){this._graphicsViewsFeatureCollectionMap=new Map;for(const c of r){const u=new o.Z(this.view.featuresTilingScheme);u.fadeTransitionEnabled=!0;const d=new g.Z({view:s,graphics:c.source,renderer:c.renderer,requestUpdateCallback:n,container:u});this._graphicsViewsFeatureCollectionMap.set(d,c),this.container.addChild(d.container),this.handles.add([(0,C.S1)(c,"visible",y=>d.container.visible=y),(0,C.S1)(d,"updating",()=>this.notifyChange("updating"))],f)}}else(0,i.pC)(this.layer.sublayers)&&this.handles.add((0,C.on)(this.layer,"sublayers","change",()=>this._createGraphicsViews(),()=>this._createGraphicsViews(),()=>this._destroyGraphicsViews()),p)}detach(){this._destroyGraphicsViews(),this.handles.remove(p)}moveStart(){}moveEnd(){}viewChange(){for(const s of this.graphicsViews())s.viewChange()}isUpdating(){for(const s of this.graphicsViews())if(s.updating)return!0;return!1}_destroyGraphicsViews(){this.container.removeAllChildren(),this.handles.remove(f);for(const s of this.graphicsViews())s.destroy();this._graphicsViews=null,this._graphicsViewsFeatureCollectionMap=null}_createGraphicsViews(){if(this._destroyGraphicsViews(),(0,i.Wi)(this.layer.sublayers))return;const s=[],n=this.view,r=()=>this.requestUpdate();for(const c of this.layer.sublayers){const u=new o.Z(this.view.featuresTilingScheme);u.fadeTransitionEnabled=!0;const d=new g.Z({view:n,graphics:c.graphics,requestUpdateCallback:r,container:u});this.handles.add([c.on("graphic-update",d.graphicUpdateHandler),(0,C.S1)(c,"visible",y=>d.container.visible=y),(0,C.S1)(d,"updating",()=>this.notifyChange("updating"))],f),this.container.addChild(d.container),s.push(d)}this._graphicsViews=s}};D=(0,P._)([(0,A.j)("esri.views.2d.layers.MapNotesLayerView2D")],D);const V=D},45611:(S,O,t)=>{t.d(O,{Z:()=>g});var e=t(17626),P=t(14517),m=t(61885),E=t(80542),i=t(61996),C=t(63290),w=t(62208),j=t(60330),h=t(77712),T=(t(85931),t(8314),t(90912),t(76898));let o=class extends((0,E.p)((0,i.I)((0,j.v)(m.Z.EventedMixin(P.Z))))){constructor(a){super(a),this.layer=null,this.parent=null}initialize(){this.when().catch(a=>{if("layerview:create-error"!==a.name){const p=this.layer&&this.layer.id||"no id",f=this.layer&&this.layer.title||"no title";throw C.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${f}', id: '${p}')`,a),a}})}get fullOpacity(){return(0,w.Pt)(this.get("layer.opacity"),1)*(0,w.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){var a;return!0===(null==(a=this.layer)?void 0:a.visible)}set visible(a){void 0!==a?this._override("visible",a):this._clearOverride("visible")}canResume(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1}getSuspendInfo(){const a=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(a.viewNotReady=!0),this.layer&&this.layer.loaded||(a.layerNotLoaded=!0),this.visible||(a.layerInvisible=!0),a}isUpdating(){return!1}};(0,e._)([(0,h.Cb)()],o.prototype,"fullOpacity",null),(0,e._)([(0,h.Cb)()],o.prototype,"layer",void 0),(0,e._)([(0,h.Cb)()],o.prototype,"parent",void 0),(0,e._)([(0,h.Cb)({readOnly:!0})],o.prototype,"suspended",null),(0,e._)([(0,h.Cb)({readOnly:!0})],o.prototype,"suspendInfo",null),(0,e._)([(0,h.Cb)({readOnly:!0})],o.prototype,"legendEnabled",null),(0,e._)([(0,h.Cb)({type:Boolean,readOnly:!0})],o.prototype,"updating",null),(0,e._)([(0,h.Cb)({readOnly:!0})],o.prototype,"updatingProgress",null),(0,e._)([(0,h.Cb)()],o.prototype,"visible",null),o=(0,e._)([(0,T.j)("esri.views.layers.LayerView")],o);const g=o}}]);