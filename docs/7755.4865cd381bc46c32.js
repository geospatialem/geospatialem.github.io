"use strict";var ae=Object.defineProperty,le=Object.defineProperties,ne=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,Z=(d,u,o)=>u in d?ae(d,u,{enumerable:!0,configurable:!0,writable:!0,value:o}):d[u]=o,D=(d,u)=>{for(var o in u||(u={}))se.call(u,o)&&Z(d,o,u[o]);if(R)for(var o of R(u))oe.call(u,o)&&Z(d,o,u[o]);return d},z=(d,u)=>le(d,ne(u));(self.webpackChunksite=self.webpackChunksite||[]).push([[7755],{67755:(d,u,o)=>{o.r(u),o.d(u,{previewSymbol2D:()=>b});var S=o(91558),W=o(26584),y=o(23841),P=o(74741),C=o(71131),B=o(6172);const F="picture-fill",L=120,Q=document.createElement("canvas");function b(n,e){var r,M;const h=null!=(null==e?void 0:e.size)?(0,y.F2)(e.size):null,g=null!=(null==e?void 0:e.maxSize)?(0,y.F2)(e.maxSize):null,ee=null!=(null==e?void 0:e.opacity)?e.opacity:null,w=null!=(null==e?void 0:e.rotation)?e.rotation:"angle"in n?n.angle:null,_=(0,P._M)(n);let f=(0,P.mx)(n);if(_&&!f){const l="type"in _?null:new S.Z(_);"#ffffff"===(l?l.toHex():null)&&(f={color:"#bdc3c7",width:.75})}const c={shape:null,fill:null,stroke:f,offset:[0,0]};null!=(r=f)&&r.width&&(f.width=Math.min(f.width,80));const m=(null==(M=f)?void 0:M.width)||0;let v=null!=h&&(null==(null==e?void 0:e.scale)||(null==e?void 0:e.scale)),t=0,a=0,E=!1;switch(n.type){case"simple-marker":{const l=n.style,i=Math.min(null!=h?h:(0,y.F2)(n.size),g||L);switch(t=i,a=i,l){case"circle":c.shape={type:"circle",cx:0,cy:0,r:.5*i},v||(t+=m,a+=m);break;case"cross":c.shape={type:"path",path:[{command:"M",values:[0,.5*a]},{command:"L",values:[t,.5*a]},{command:"M",values:[.5*t,0]},{command:"L",values:[.5*t,a]}]};break;case"diamond":c.shape={type:"path",path:[{command:"M",values:[0,.5*a]},{command:"L",values:[.5*t,0]},{command:"L",values:[t,.5*a]},{command:"L",values:[.5*t,a]},{command:"Z",values:[]}]},v||(t+=m,a+=m);break;case"square":c.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[t,0]},{command:"L",values:[t,a]},{command:"L",values:[0,a]},{command:"Z",values:[]}]},v||(t+=m,a+=m),w&&(E=!0);break;case"triangle":c.shape={type:"path",path:[{command:"M",values:[.5*t,0]},{command:"L",values:[t,a]},{command:"L",values:[0,a]},{command:"Z",values:[]}]},v||(t+=m,a+=m),w&&(E=!0);break;case"x":c.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[t,a]},{command:"M",values:[t,0]},{command:"L",values:[0,a]}]},w&&(E=!0);break;case"path":c.shape={type:"path",path:n.path||""},v||(t+=m,a+=m),w&&(E=!0),v=!0}break}case"simple-line":{const l=Math.min(null!=h?h:m,g||80),i=l>22?2*l:40;f.width=l,t=i,a=l,c.shape={type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[t,a]}]};break}case F:case"simple-fill":t=Math.min(null!=h?h:22,g||L)+m,a=t,v=!0,c.shape="object"==typeof(null==e?void 0:e.symbolConfig)&&null!=e&&e.symbolConfig.isSquareFill?C.JZ.squareFill[0]:C.JZ.fill[0];break;case"picture-marker":{let l=(0,y.F2)(n.width),i=(0,y.F2)(n.height);const s=null!=h?h:Math.max(l,i),p=l/i;l=p<=1?Math.ceil(s*p):s,i=p<=1?s:Math.ceil(s/p),t=Math.min(l,g||L),a=Math.min(i,g||L),c.shape={type:"image",x:-Math.round(t/2),y:-Math.round(a/2),width:t,height:a,src:n.url||""},w&&(E=!0);break}case"text":{const l=n,i=l.text||"Aa",s=l.font,p=Math.min(null!=h?h:(0,y.F2)(s.size),g||L),te=function X(n,e){const r=Q.getContext("2d"),M=[];return e&&(e.weight&&M.push(e.weight),e.size&&M.push(e.size+"px"),e.family&&M.push(e.family)),r.font=M.join(" "),r.measureText(n).width}(i,{weight:s.weight,size:p,family:s.family}),T=/[\uE600-\uE6FF]/.test(i);t=T?p:te,a=p;let A=.25*function q(n){if(0===n.length)return 0;if(n.length>2){const e=(0,y.Wz)(1),r=parseFloat(n);switch(n.slice(-2)){case"px":return r;case"pt":return r*e;case"in":return 72*r*e;case"pc":return 12*r*e;case"mm":return 2.8346456692913384*r*e;case"cm":return 28.346456692913385*r*e}}return parseFloat(n)}((s?p:0).toString());T&&(A+=5),c.shape={type:"text",text:i,x:0,y:A,align:"middle",decoration:s&&s.decoration,rotated:l.rotated,kerning:l.kerning},c.font=s&&{size:p,style:s.style,decoration:s.decoration,weight:s.weight,family:s.family};break}}if(!c.shape)return Promise.reject(new W.Z("symbolPreview: renderPreviewHTML2D","symbol not supported."));const x=_,U=n.color;let k=null;return x&&"pattern"===x.type&&U&&n.type!==F?k=(0,P.Od)(x.src,U.toCss(!0)).then(l=>(x.src=l,c.fill=x,c)):(c.fill=_,k=Promise.resolve(c)),k.then(l=>{const i=[[l]];if("object"==typeof(null==e?void 0:e.symbolConfig)&&null!=e&&e.symbolConfig.applyColorModulation){const s=.6*t;i.unshift([z(D({},l),{offset:[-s,0],fill:(0,C.dc)(_,-.3)})]),i.push([z(D({},l),{offset:[s,0],fill:(0,C.dc)(_,.3)})]),t+=2*s}return(0,B.w)(i,[t,a],{node:e&&e.node,scale:v,opacity:ee,rotation:w,useRotationSize:E,effectView:null==e?void 0:e.effectView})})}}}]);